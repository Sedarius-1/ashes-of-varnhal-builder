(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();var Xp={exports:{}},kh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1;function G4(){if(m1)return kh;m1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,l){var u=null;if(l!==void 0&&(u=""+l),i.key!==void 0&&(u=""+i.key),"key"in i){l={};for(var h in i)h!=="key"&&(l[h]=i[h])}else l=i;return i=l.ref,{$$typeof:n,type:r,key:u,ref:i!==void 0?i:null,props:l}}return kh.Fragment=e,kh.jsx=t,kh.jsxs=t,kh}var p1;function K4(){return p1||(p1=1,Xp.exports=G4()),Xp.exports}var o=K4(),Qp={exports:{}},Qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g1;function Y4(){if(g1)return Qt;g1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),N=Symbol.iterator;function S(J){return J===null||typeof J!="object"?null:(J=N&&J[N]||J["@@iterator"],typeof J=="function"?J:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,O={};function q(J,Ae,F){this.props=J,this.context=Ae,this.refs=O,this.updater=F||_}q.prototype.isReactComponent={},q.prototype.setState=function(J,Ae){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,Ae,"setState")},q.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function M(){}M.prototype=q.prototype;function T(J,Ae,F){this.props=J,this.context=Ae,this.refs=O,this.updater=F||_}var I=T.prototype=new M;I.constructor=T,L(I,q.prototype),I.isPureReactComponent=!0;var ee=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},ge=Object.prototype.hasOwnProperty;function W(J,Ae,F,K,te,ie){return F=ie.ref,{$$typeof:n,type:J,key:Ae,ref:F!==void 0?F:null,props:ie}}function k(J,Ae){return W(J.type,Ae,void 0,void 0,void 0,J.props)}function V(J){return typeof J=="object"&&J!==null&&J.$$typeof===n}function Q(J){var Ae={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(F){return Ae[F]})}var R=/\/+/g;function P(J,Ae){return typeof J=="object"&&J!==null&&J.key!=null?Q(""+J.key):Ae.toString(36)}function B(){}function ce(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(B,B):(J.status="pending",J.then(function(Ae){J.status==="pending"&&(J.status="fulfilled",J.value=Ae)},function(Ae){J.status==="pending"&&(J.status="rejected",J.reason=Ae)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function Le(J,Ae,F,K,te){var ie=typeof J;(ie==="undefined"||ie==="boolean")&&(J=null);var ue=!1;if(J===null)ue=!0;else switch(ie){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(J.$$typeof){case n:case e:ue=!0;break;case v:return ue=J._init,Le(ue(J._payload),Ae,F,K,te)}}if(ue)return te=te(J),ue=K===""?"."+P(J,0):K,ee(te)?(F="",ue!=null&&(F=ue.replace(R,"$&/")+"/"),Le(te,Ae,F,"",function(Pe){return Pe})):te!=null&&(V(te)&&(te=k(te,F+(te.key==null||J&&J.key===te.key?"":(""+te.key).replace(R,"$&/")+"/")+ue)),Ae.push(te)),1;ue=0;var Ee=K===""?".":K+":";if(ee(J))for(var _e=0;_e<J.length;_e++)K=J[_e],ie=Ee+P(K,_e),ue+=Le(K,Ae,F,ie,te);else if(_e=S(J),typeof _e=="function")for(J=_e.call(J),_e=0;!(K=J.next()).done;)K=K.value,ie=Ee+P(K,_e++),ue+=Le(K,Ae,F,ie,te);else if(ie==="object"){if(typeof J.then=="function")return Le(ce(J),Ae,F,K,te);throw Ae=String(J),Error("Objects are not valid as a React child (found: "+(Ae==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":Ae)+"). If you meant to render a collection of children, use an array instead.")}return ue}function ae(J,Ae,F){if(J==null)return J;var K=[],te=0;return Le(J,K,"","",function(ie){return Ae.call(F,ie,te++)}),K}function me(J){if(J._status===-1){var Ae=J._result;Ae=Ae(),Ae.then(function(F){(J._status===0||J._status===-1)&&(J._status=1,J._result=F)},function(F){(J._status===0||J._status===-1)&&(J._status=2,J._result=F)}),J._status===-1&&(J._status=0,J._result=Ae)}if(J._status===1)return J._result.default;throw J._result}var he=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(Ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function Ce(){}return Qt.Children={map:ae,forEach:function(J,Ae,F){ae(J,function(){Ae.apply(this,arguments)},F)},count:function(J){var Ae=0;return ae(J,function(){Ae++}),Ae},toArray:function(J){return ae(J,function(Ae){return Ae})||[]},only:function(J){if(!V(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},Qt.Component=q,Qt.Fragment=t,Qt.Profiler=i,Qt.PureComponent=T,Qt.StrictMode=r,Qt.Suspense=f,Qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,Qt.__COMPILER_RUNTIME={__proto__:null,c:function(J){return se.H.useMemoCache(J)}},Qt.cache=function(J){return function(){return J.apply(null,arguments)}},Qt.cloneElement=function(J,Ae,F){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var K=L({},J.props),te=J.key,ie=void 0;if(Ae!=null)for(ue in Ae.ref!==void 0&&(ie=void 0),Ae.key!==void 0&&(te=""+Ae.key),Ae)!ge.call(Ae,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&Ae.ref===void 0||(K[ue]=Ae[ue]);var ue=arguments.length-2;if(ue===1)K.children=F;else if(1<ue){for(var Ee=Array(ue),_e=0;_e<ue;_e++)Ee[_e]=arguments[_e+2];K.children=Ee}return W(J.type,te,void 0,void 0,ie,K)},Qt.createContext=function(J){return J={$$typeof:u,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:l,_context:J},J},Qt.createElement=function(J,Ae,F){var K,te={},ie=null;if(Ae!=null)for(K in Ae.key!==void 0&&(ie=""+Ae.key),Ae)ge.call(Ae,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(te[K]=Ae[K]);var ue=arguments.length-2;if(ue===1)te.children=F;else if(1<ue){for(var Ee=Array(ue),_e=0;_e<ue;_e++)Ee[_e]=arguments[_e+2];te.children=Ee}if(J&&J.defaultProps)for(K in ue=J.defaultProps,ue)te[K]===void 0&&(te[K]=ue[K]);return W(J,ie,void 0,void 0,null,te)},Qt.createRef=function(){return{current:null}},Qt.forwardRef=function(J){return{$$typeof:h,render:J}},Qt.isValidElement=V,Qt.lazy=function(J){return{$$typeof:v,_payload:{_status:-1,_result:J},_init:me}},Qt.memo=function(J,Ae){return{$$typeof:g,type:J,compare:Ae===void 0?null:Ae}},Qt.startTransition=function(J){var Ae=se.T,F={};se.T=F;try{var K=J(),te=se.S;te!==null&&te(F,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(Ce,he)}catch(ie){he(ie)}finally{se.T=Ae}},Qt.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},Qt.use=function(J){return se.H.use(J)},Qt.useActionState=function(J,Ae,F){return se.H.useActionState(J,Ae,F)},Qt.useCallback=function(J,Ae){return se.H.useCallback(J,Ae)},Qt.useContext=function(J){return se.H.useContext(J)},Qt.useDebugValue=function(){},Qt.useDeferredValue=function(J,Ae){return se.H.useDeferredValue(J,Ae)},Qt.useEffect=function(J,Ae,F){var K=se.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(J,Ae)},Qt.useId=function(){return se.H.useId()},Qt.useImperativeHandle=function(J,Ae,F){return se.H.useImperativeHandle(J,Ae,F)},Qt.useInsertionEffect=function(J,Ae){return se.H.useInsertionEffect(J,Ae)},Qt.useLayoutEffect=function(J,Ae){return se.H.useLayoutEffect(J,Ae)},Qt.useMemo=function(J,Ae){return se.H.useMemo(J,Ae)},Qt.useOptimistic=function(J,Ae){return se.H.useOptimistic(J,Ae)},Qt.useReducer=function(J,Ae,F){return se.H.useReducer(J,Ae,F)},Qt.useRef=function(J){return se.H.useRef(J)},Qt.useState=function(J){return se.H.useState(J)},Qt.useSyncExternalStore=function(J,Ae,F){return se.H.useSyncExternalStore(J,Ae,F)},Qt.useTransition=function(){return se.H.useTransition()},Qt.version="19.1.0",Qt}var x1;function dx(){return x1||(x1=1,Qp.exports=Y4()),Qp.exports}var Ne=dx(),Jp={exports:{}},Ch={},Zp={exports:{}},eg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b1;function $4(){return b1||(b1=1,function(n){function e(ae,me){var he=ae.length;ae.push(me);e:for(;0<he;){var Ce=he-1>>>1,J=ae[Ce];if(0<i(J,me))ae[Ce]=me,ae[he]=J,he=Ce;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var me=ae[0],he=ae.pop();if(he!==me){ae[0]=he;e:for(var Ce=0,J=ae.length,Ae=J>>>1;Ce<Ae;){var F=2*(Ce+1)-1,K=ae[F],te=F+1,ie=ae[te];if(0>i(K,he))te<J&&0>i(ie,K)?(ae[Ce]=ie,ae[te]=he,Ce=te):(ae[Ce]=K,ae[F]=he,Ce=F);else if(te<J&&0>i(ie,he))ae[Ce]=ie,ae[te]=he,Ce=te;else break e}}return me}function i(ae,me){var he=ae.sortIndex-me.sortIndex;return he!==0?he:ae.id-me.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],g=[],v=1,N=null,S=3,_=!1,L=!1,O=!1,q=!1,M=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function ee(ae){for(var me=t(g);me!==null;){if(me.callback===null)r(g);else if(me.startTime<=ae)r(g),me.sortIndex=me.expirationTime,e(f,me);else break;me=t(g)}}function se(ae){if(O=!1,ee(ae),!L)if(t(f)!==null)L=!0,ge||(ge=!0,P());else{var me=t(g);me!==null&&Le(se,me.startTime-ae)}}var ge=!1,W=-1,k=5,V=-1;function Q(){return q?!0:!(n.unstable_now()-V<k)}function R(){if(q=!1,ge){var ae=n.unstable_now();V=ae;var me=!0;try{e:{L=!1,O&&(O=!1,T(W),W=-1),_=!0;var he=S;try{t:{for(ee(ae),N=t(f);N!==null&&!(N.expirationTime>ae&&Q());){var Ce=N.callback;if(typeof Ce=="function"){N.callback=null,S=N.priorityLevel;var J=Ce(N.expirationTime<=ae);if(ae=n.unstable_now(),typeof J=="function"){N.callback=J,ee(ae),me=!0;break t}N===t(f)&&r(f),ee(ae)}else r(f);N=t(f)}if(N!==null)me=!0;else{var Ae=t(g);Ae!==null&&Le(se,Ae.startTime-ae),me=!1}}break e}finally{N=null,S=he,_=!1}me=void 0}}finally{me?P():ge=!1}}}var P;if(typeof I=="function")P=function(){I(R)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,ce=B.port2;B.port1.onmessage=R,P=function(){ce.postMessage(null)}}else P=function(){M(R,0)};function Le(ae,me){W=M(function(){ae(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(ae){switch(S){case 1:case 2:case 3:var me=3;break;default:me=S}var he=S;S=me;try{return ae()}finally{S=he}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(ae,me){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var he=S;S=ae;try{return me()}finally{S=he}},n.unstable_scheduleCallback=function(ae,me,he){var Ce=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ce+he:Ce):he=Ce,ae){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=he+J,ae={id:v++,callback:me,priorityLevel:ae,startTime:he,expirationTime:J,sortIndex:-1},he>Ce?(ae.sortIndex=he,e(g,ae),t(f)===null&&ae===t(g)&&(O?(T(W),W=-1):O=!0,Le(se,he-Ce))):(ae.sortIndex=J,e(f,ae),L||_||(L=!0,ge||(ge=!0,P()))),ae},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(ae){var me=S;return function(){var he=S;S=me;try{return ae.apply(this,arguments)}finally{S=he}}}}(eg)),eg}var v1;function X4(){return v1||(v1=1,Zp.exports=$4()),Zp.exports}var tg={exports:{}},Ba={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y1;function Q4(){if(y1)return Ba;y1=1;var n=dx();function e(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(f,g,v){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:N==null?null:""+N,children:f,containerInfo:g,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ba.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ba.createPortal=function(f,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(f,g,null,v)},Ba.flushSync=function(f){var g=u.T,v=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=g,r.p=v,r.d.f()}},Ba.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(f,g))},Ba.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Ba.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var v=g.as,N=h(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,_=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:N,integrity:S,fetchPriority:_}):v==="script"&&r.d.X(f,{crossOrigin:N,integrity:S,fetchPriority:_,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ba.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=h(g.as,g.crossOrigin);r.d.M(f,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(f)},Ba.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,N=h(v,g.crossOrigin);r.d.L(f,v,{crossOrigin:N,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ba.preloadModule=function(f,g){if(typeof f=="string")if(g){var v=h(g.as,g.crossOrigin);r.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(f)},Ba.requestFormReset=function(f){r.d.r(f)},Ba.unstable_batchedUpdates=function(f,g){return f(g)},Ba.useFormState=function(f,g,v){return u.H.useFormState(f,g,v)},Ba.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ba.version="19.1.0",Ba}var w1;function J4(){if(w1)return tg.exports;w1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tg.exports=Q4(),tg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1;function Z4(){if(N1)return Ch;N1=1;var n=X4(),e=dx(),t=J4();function r(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function l(a){var s=a,c=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(c=s.return),a=s.return;while(a)}return s.tag===3?c:null}function u(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function h(a){if(l(a)!==a)throw Error(r(188))}function f(a){var s=a.alternate;if(!s){if(s=l(a),s===null)throw Error(r(188));return s!==a?null:a}for(var c=a,d=s;;){var x=c.return;if(x===null)break;var y=x.alternate;if(y===null){if(d=x.return,d!==null){c=d;continue}break}if(x.child===y.child){for(y=x.child;y;){if(y===c)return h(x),a;if(y===d)return h(x),s;y=y.sibling}throw Error(r(188))}if(c.return!==d.return)c=x,d=y;else{for(var D=!1,X=x.child;X;){if(X===c){D=!0,c=x,d=y;break}if(X===d){D=!0,d=x,c=y;break}X=X.sibling}if(!D){for(X=y.child;X;){if(X===c){D=!0,c=y,d=x;break}if(X===d){D=!0,d=y,c=x;break}X=X.sibling}if(!D)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:s}function g(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=g(a),s!==null)return s;a=a.sibling}return null}var v=Object.assign,N=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),I=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function P(a){return a===null||typeof a!="object"?null:(a=R&&a[R]||a["@@iterator"],typeof a=="function"?a:null)}var B=Symbol.for("react.client.reference");function ce(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===B?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case L:return"Fragment";case q:return"Profiler";case O:return"StrictMode";case se:return"Suspense";case ge:return"SuspenseList";case V:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case _:return"Portal";case I:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case ee:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case W:return s=a.displayName||null,s!==null?s:ce(a.type)||"Memo";case k:s=a._payload,a=a._init;try{return ce(a(s))}catch{}}return null}var Le=Array.isArray,ae=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Ce=[],J=-1;function Ae(a){return{current:a}}function F(a){0>J||(a.current=Ce[J],Ce[J]=null,J--)}function K(a,s){J++,Ce[J]=a.current,a.current=s}var te=Ae(null),ie=Ae(null),ue=Ae(null),Ee=Ae(null);function _e(a,s){switch(K(ue,s),K(ie,a),K(te,null),s.nodeType){case 9:case 11:a=(a=s.documentElement)&&(a=a.namespaceURI)?zv(a):0;break;default:if(a=s.tagName,s=s.namespaceURI)s=zv(s),a=qv(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}F(te),K(te,a)}function Pe(){F(te),F(ie),F(ue)}function tt(a){a.memoizedState!==null&&K(Ee,a);var s=te.current,c=qv(s,a.type);s!==c&&(K(ie,a),K(te,c))}function Je(a){ie.current===a&&(F(te),F(ie)),Ee.current===a&&(F(Ee),Ah._currentValue=he)}var st=Object.prototype.hasOwnProperty,at=n.unstable_scheduleCallback,_t=n.unstable_cancelCallback,Ve=n.unstable_shouldYield,oe=n.unstable_requestPaint,At=n.unstable_now,gt=n.unstable_getCurrentPriorityLevel,et=n.unstable_ImmediatePriority,rt=n.unstable_UserBlockingPriority,ot=n.unstable_NormalPriority,ut=n.unstable_LowPriority,bt=n.unstable_IdlePriority,Ct=n.log,Bt=n.unstable_setDisableYieldValue,wt=null,xt=null;function Wt(a){if(typeof Ct=="function"&&Bt(a),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(wt,a)}catch{}}var Fe=Math.clz32?Math.clz32:Nt,nt=Math.log,He=Math.LN2;function Nt(a){return a>>>=0,a===0?32:31-(nt(a)/He|0)|0}var mt=256,$t=4194304;function Ut(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function yn(a,s,c){var d=a.pendingLanes;if(d===0)return 0;var x=0,y=a.suspendedLanes,D=a.pingedLanes;a=a.warmLanes;var X=d&134217727;return X!==0?(d=X&~y,d!==0?x=Ut(d):(D&=X,D!==0?x=Ut(D):c||(c=X&~a,c!==0&&(x=Ut(c))))):(X=d&~y,X!==0?x=Ut(X):D!==0?x=Ut(D):c||(c=d&~a,c!==0&&(x=Ut(c)))),x===0?0:s!==0&&s!==x&&(s&y)===0&&(y=x&-x,c=s&-s,y>=c||y===32&&(c&4194048)!==0)?s:x}function Br(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function Zt(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xn(){var a=mt;return mt<<=1,(mt&4194048)===0&&(mt=256),a}function kn(){var a=$t;return $t<<=1,($t&62914560)===0&&($t=4194304),a}function ur(a){for(var s=[],c=0;31>c;c++)s.push(a);return s}function Xr(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Bn(a,s,c,d,x,y){var D=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var X=a.entanglements,le=a.expirationTimes,Ie=a.hiddenUpdates;for(c=D&~c;0<c;){var ze=31-Fe(c),$e=1<<ze;X[ze]=0,le[ze]=-1;var De=Ie[ze];if(De!==null)for(Ie[ze]=null,ze=0;ze<De.length;ze++){var Oe=De[ze];Oe!==null&&(Oe.lane&=-536870913)}c&=~$e}d!==0&&Tt(a,d,0),y!==0&&x===0&&a.tag!==0&&(a.suspendedLanes|=y&~(D&~s))}function Tt(a,s,c){a.pendingLanes|=s,a.suspendedLanes&=~s;var d=31-Fe(s);a.entangledLanes|=s,a.entanglements[d]=a.entanglements[d]|1073741824|c&4194090}function cn(a,s){var c=a.entangledLanes|=s;for(a=a.entanglements;c;){var d=31-Fe(c),x=1<<d;x&s|a[d]&s&&(a[d]|=s),c&=~x}}function ja(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function ar(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Qr(){var a=me.p;return a!==0?a:(a=window.event,a===void 0?32:l1(a.type))}function Xa(a,s){var c=me.p;try{return me.p=a,s()}finally{me.p=c}}var dt=Math.random().toString(36).slice(2),Cn="__reactFiber$"+dt,Rn="__reactProps$"+dt,Gn="__reactContainer$"+dt,er="__reactEvents$"+dt,sr="__reactListeners$"+dt,br="__reactHandles$"+dt,xi="__reactResources$"+dt,xa="__reactMarker$"+dt;function Ur(a){delete a[Cn],delete a[Rn],delete a[er],delete a[sr],delete a[br]}function Tr(a){var s=a[Cn];if(s)return s;for(var c=a.parentNode;c;){if(s=c[Gn]||c[Cn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(a=Kv(a);a!==null;){if(c=a[Cn])return c;a=Kv(a)}return s}a=c,c=a.parentNode}return null}function vr(a){if(a=a[Cn]||a[Gn]){var s=a.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return a}return null}function jr(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a.stateNode;throw Error(r(33))}function Un(a){var s=a[xi];return s||(s=a[xi]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Nn(a){a[xa]=!0}var _s=new Set,As={};function sa(a,s){ka(a,s),ka(a+"Capture",s)}function ka(a,s){for(As[a]=s,a=0;a<s.length;a++)_s.add(s[a])}var bi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Go={},vi={};function Dl(a){return st.call(vi,a)?!0:st.call(Go,a)?!1:bi.test(a)?vi[a]=!0:(Go[a]=!0,!1)}function Qa(a,s,c){if(Dl(s))if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(s);return}}a.setAttribute(s,""+c)}}function Ja(a,s,c){if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttribute(s,""+c)}}function kr(a,s,c,d){if(d===null)a.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(s,c,""+d)}}var Ss,Ol;function as(a){if(Ss===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);Ss=s&&s[1]||"",Ol=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ss+a+Ol}var Zi=!1;function Es(a,s){if(!a||Zi)return"";Zi=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(Oe){var De=Oe}Reflect.construct(a,[],$e)}else{try{$e.call()}catch(Oe){De=Oe}a.call($e.prototype)}}else{try{throw Error()}catch(Oe){De=Oe}($e=a())&&typeof $e.catch=="function"&&$e.catch(function(){})}}catch(Oe){if(Oe&&De&&typeof Oe.stack=="string")return[Oe.stack,De.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),D=y[0],X=y[1];if(D&&X){var le=D.split(`
`),Ie=X.split(`
`);for(x=d=0;d<le.length&&!le[d].includes("DetermineComponentFrameRoot");)d++;for(;x<Ie.length&&!Ie[x].includes("DetermineComponentFrameRoot");)x++;if(d===le.length||x===Ie.length)for(d=le.length-1,x=Ie.length-1;1<=d&&0<=x&&le[d]!==Ie[x];)x--;for(;1<=d&&0<=x;d--,x--)if(le[d]!==Ie[x]){if(d!==1||x!==1)do if(d--,x--,0>x||le[d]!==Ie[x]){var ze=`
`+le[d].replace(" at new "," at ");return a.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",a.displayName)),ze}while(1<=d&&0<=x);break}}}finally{Zi=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?as(c):""}function Ko(a){switch(a.tag){case 26:case 27:case 5:return as(a.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 15:return Es(a.type,!1);case 11:return Es(a.type.render,!1);case 1:return Es(a.type,!0);case 31:return as("Activity");default:return""}}function zn(a){try{var s="";do s+=Ko(a),a=a.return;while(a);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function zr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function eo(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ml(a){var s=eo(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,s),d=""+a[s];if(!a.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var x=c.get,y=c.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return x.call(this)},set:function(D){d=""+D,y.call(this,D)}}),Object.defineProperty(a,s,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(D){d=""+D},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function Gs(a){a._valueTracker||(a._valueTracker=Ml(a))}function Yo(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return a&&(d=eo(a)?a.checked?"true":"false":a.value),a=d,a!==c?(s.setValue(a),!0):!1}function Jr(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var to=/[\n"\\]/g;function fn(a){return a.replace(to,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Zr(a,s,c,d,x,y,D,X){a.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.type=D:a.removeAttribute("type"),s!=null?D==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+zr(s)):a.value!==""+zr(s)&&(a.value=""+zr(s)):D!=="submit"&&D!=="reset"||a.removeAttribute("value"),s!=null?Ys(a,D,zr(s)):c!=null?Ys(a,D,zr(c)):d!=null&&a.removeAttribute("value"),x==null&&y!=null&&(a.defaultChecked=!!y),x!=null&&(a.checked=x&&typeof x!="function"&&typeof x!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?a.name=""+zr(X):a.removeAttribute("name")}function Ks(a,s,c,d,x,y,D,X){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(a.type=y),s!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||s!=null))return;c=c!=null?""+zr(c):"",s=s!=null?""+zr(s):c,X||s===a.value||(a.value=s),a.defaultValue=s}d=d??x,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=X?a.checked:!!d,a.defaultChecked=!!d,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(a.name=D)}function Ys(a,s,c){s==="number"&&Jr(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function ss(a,s,c,d){if(a=a.options,s){s={};for(var x=0;x<c.length;x++)s["$"+c[x]]=!0;for(c=0;c<a.length;c++)x=s.hasOwnProperty("$"+a[c].value),a[c].selected!==x&&(a[c].selected=x),x&&d&&(a[c].defaultSelected=!0)}else{for(c=""+zr(c),s=null,x=0;x<a.length;x++){if(a[x].value===c){a[x].selected=!0,d&&(a[x].defaultSelected=!0);return}s!==null||a[x].disabled||(s=a[x])}s!==null&&(s.selected=!0)}}function _n(a,s,c){if(s!=null&&(s=""+zr(s),s!==a.value&&(a.value=s),c==null)){a.defaultValue!==s&&(a.defaultValue=s);return}a.defaultValue=c!=null?""+zr(c):""}function $s(a,s,c,d){if(s==null){if(d!=null){if(c!=null)throw Error(r(92));if(Le(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),s=c}c=zr(s),a.defaultValue=c,d=a.textContent,d===c&&d!==""&&d!==null&&(a.value=d)}function Ca(a,s){if(s){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=s;return}}a.textContent=s}var Ts=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fl(a,s,c){var d=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?a.setProperty(s,""):s==="float"?a.cssFloat="":a[s]="":d?a.setProperty(s,c):typeof c!="number"||c===0||Ts.has(s)?s==="float"?a.cssFloat=c:a[s]=(""+c).trim():a[s]=c+"px"}function $o(a,s,c){if(s!=null&&typeof s!="object")throw Error(r(62));if(a=a.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var x in s)d=s[x],s.hasOwnProperty(x)&&c[x]!==d&&Fl(a,x,d)}else for(var y in s)s.hasOwnProperty(y)&&Fl(a,y,s[y])}function Xo(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var js=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),no=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ks(a){return no.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var is=null;function Dn(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Cs=null,os=null;function It(a){var s=vr(a);if(s&&(a=s.stateNode)){var c=a[Rn]||null;e:switch(a=s.stateNode,s.type){case"input":if(Zr(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+fn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==a&&d.form===a.form){var x=d[Rn]||null;if(!x)throw Error(r(90));Zr(d,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(s=0;s<c.length;s++)d=c[s],d.form===a.form&&Yo(d)}break e;case"textarea":_n(a,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&ss(a,!!c.multiple,s,!1)}}}var ls=!1;function Vl(a,s,c){if(ls)return a(s,c);ls=!0;try{var d=a(s);return d}finally{if(ls=!1,(Cs!==null||os!==null)&&(Zf(),Cs&&(s=Cs,a=os,os=Cs=null,It(s),a)))for(s=0;s<a.length;s++)It(a[s])}}function ia(a,s){var c=a.stateNode;if(c===null)return null;var d=c[Rn]||null;if(d===null)return null;c=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,s,typeof c));return c}var Ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ba=!1;if(Ra)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){ba=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{ba=!1}var Ia=null,Xs=null,Rs=null;function Qo(){if(Rs)return Rs;var a,s=Xs,c=s.length,d,x="value"in Ia?Ia.value:Ia.textContent,y=x.length;for(a=0;a<c&&s[a]===x[a];a++);var D=c-a;for(d=1;d<=D&&s[c-d]===x[y-d];d++);return Rs=x.slice(a,1<d?1-d:void 0)}function La(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function oa(){return!0}function us(){return!1}function yr(a){function s(c,d,x,y,D){this._reactName=c,this._targetInst=x,this.type=d,this.nativeEvent=y,this.target=D,this.currentTarget=null;for(var X in a)a.hasOwnProperty(X)&&(c=a[X],this[X]=c?c(y):y[X]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?oa:us,this.isPropagationStopped=us,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=oa)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=oa)},persist:function(){},isPersistent:oa}),s}var rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=yr(rn),ds=v({},rn,{view:0,detail:0}),Jo=yr(ds),yi,wi,Za,la=v({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ti,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Za&&(Za&&a.type==="mousemove"?(yi=a.screenX-Za.screenX,wi=a.screenY-Za.screenY):wi=yi=0,Za=a),yi)},movementY:function(a){return"movementY"in a?a.movementY:wi}}),wr=yr(la),Bl=v({},la,{dataTransfer:0}),Js=yr(Bl),ea=v({},ds,{relatedTarget:0}),Zs=yr(ea),Is=v({},rn,{animationName:0,elapsedTime:0,pseudoElement:0}),ro=yr(Is),Ni=v({},rn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ao=yr(Ni),Zo=v({},rn,{data:0}),_i=yr(Zo),ei={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ai={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},so={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Si(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=so[a])?!!s[a]:!1}function ti(){return Si}var Ul=v({},ds,{key:function(a){if(a.key){var s=ei[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=La(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Ai[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ti,charCode:function(a){return a.type==="keypress"?La(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?La(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Ls=yr(Ul),ni=v({},la,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ei=yr(ni),ca=v({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ti}),io=yr(ca),w=v({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),z=yr(w),re=v({},la,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),de=yr(re),ye=v({},rn,{newState:0,oldState:0}),Be=yr(ye),Qe=[9,13,27,32],lt=Ra&&"CompositionEvent"in window,p=null;Ra&&"documentMode"in document&&(p=document.documentMode);var E=Ra&&"TextEvent"in window&&!p,C=Ra&&(!lt||p&&8<p&&11>=p),$=" ",ve=!1;function Re(a,s){switch(a){case"keyup":return Qe.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ze(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Lt=!1;function an(a,s){switch(a){case"compositionend":return Ze(s);case"keypress":return s.which!==32?null:(ve=!0,$);case"textInput":return a=s.data,a===$&&ve?null:a;default:return null}}function qt(a,s){if(Lt)return a==="compositionend"||!lt&&Re(a,s)?(a=Qo(),Rs=Xs=Ia=null,Lt=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return C&&s.locale!=="ko"?null:s.data;default:return null}}var An={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!An[a.type]:s==="textarea"}function hs(a,s,c,d){Cs?os?os.push(d):os=[d]:Cs=d,s=sm(s,"onChange"),0<s.length&&(c=new Qs("onChange","change",null,c,d),a.push({event:c,listeners:s}))}var dr=null,Pa=null;function ri(a){Mv(a,0)}function oo(a){var s=jr(a);if(Yo(s))return a}function zl(a,s){if(a==="change")return s}var el=!1;if(Ra){var Cr;if(Ra){var lo="oninput"in document;if(!lo){var tl=document.createElement("div");tl.setAttribute("oninput","return;"),lo=typeof tl.oninput=="function"}Cr=lo}else Cr=!1;el=Cr&&(!document.documentMode||9<document.documentMode)}function nl(){dr&&(dr.detachEvent("onpropertychange",ql),Pa=dr=null)}function ql(a){if(a.propertyName==="value"&&oo(Pa)){var s=[];hs(s,Pa,a,Dn(a)),Vl(ri,s)}}function Da(a,s,c){a==="focusin"?(nl(),dr=s,Pa=c,dr.attachEvent("onpropertychange",ql)):a==="focusout"&&nl()}function Wd(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return oo(Pa)}function Gc(a,s){if(a==="click")return oo(s)}function Iu(a,s){if(a==="input"||a==="change")return oo(s)}function fs(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var qr=typeof Object.is=="function"?Object.is:fs;function co(a,s){if(qr(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var c=Object.keys(a),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var x=c[d];if(!st.call(s,x)||!qr(a[x],s[x]))return!1}return!0}function Kc(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ti(a,s){var c=Kc(a);a=0;for(var d;c;){if(c.nodeType===3){if(d=a+c.textContent.length,a<=s&&d>=s)return{node:c,offset:s-a};a=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Kc(c)}}function uo(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?uo(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function va(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var s=Jr(a.document);s instanceof a.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)a=s.contentWindow;else break;s=Jr(a.document)}return s}function ta(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var ho=Ra&&"documentMode"in document&&11>=document.documentMode,Oa=null,Ps=null,ai=null,Ds=!1;function ir(a,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ds||Oa==null||Oa!==Jr(d)||(d=Oa,"selectionStart"in d&&ta(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ai&&co(ai,d)||(ai=d,d=sm(Ps,"onSelect"),0<d.length&&(s=new Qs("onSelect","select",null,s,c),a.push({event:s,listeners:d}),s.target=Oa)))}function Os(a,s){var c={};return c[a.toLowerCase()]=s.toLowerCase(),c["Webkit"+a]="webkit"+s,c["Moz"+a]="moz"+s,c}var Nr={animationend:Os("Animation","AnimationEnd"),animationiteration:Os("Animation","AnimationIteration"),animationstart:Os("Animation","AnimationStart"),transitionrun:Os("Transition","TransitionRun"),transitionstart:Os("Transition","TransitionStart"),transitioncancel:Os("Transition","TransitionCancel"),transitionend:Os("Transition","TransitionEnd")},Ma={},rl={};Ra&&(rl=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);function si(a){if(Ma[a])return Ma[a];if(!Nr[a])return a;var s=Nr[a],c;for(c in s)if(s.hasOwnProperty(c)&&c in rl)return Ma[a]=s[c];return a}var Hl=si("animationend"),fo=si("animationiteration"),mo=si("animationstart"),po=si("transitionrun"),al=si("transitionstart"),Wl=si("transitioncancel"),go=si("transitionend"),ji=new Map,sl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sl.push("scrollEnd");function or(a,s){ji.set(a,s),sa(s,[a])}var es=new WeakMap;function en(a,s){if(typeof a=="object"&&a!==null){var c=es.get(a);return c!==void 0?c:(s={value:a,source:s,stack:zn(s)},es.set(a,s),s)}return{value:a,source:s,stack:zn(s)}}var tn=[],qn=0,hr=0;function ms(){for(var a=qn,s=hr=qn=0;s<a;){var c=tn[s];tn[s++]=null;var d=tn[s];tn[s++]=null;var x=tn[s];tn[s++]=null;var y=tn[s];if(tn[s++]=null,d!==null&&x!==null){var D=d.pending;D===null?x.next=x:(x.next=D.next,D.next=x),d.pending=x}y!==0&&Lu(c,x,y)}}function xo(a,s,c,d){tn[qn++]=a,tn[qn++]=s,tn[qn++]=c,tn[qn++]=d,hr|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function bo(a,s,c,d){return xo(a,s,c,d),il(a)}function ki(a,s){return xo(a,null,null,s),il(a)}function Lu(a,s,c){a.lanes|=c;var d=a.alternate;d!==null&&(d.lanes|=c);for(var x=!1,y=a.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(a=y.stateNode,a===null||a._visibility&1||(x=!0)),a=y,y=y.return;return a.tag===3?(y=a.stateNode,x&&s!==null&&(x=31-Fe(c),a=y.hiddenUpdates,d=a[x],d===null?a[x]=[s]:d.push(s),s.lane=c|536870912),y):null}function il(a){if(50<gh)throw gh=0,yp=null,Error(r(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}var Hr={};function ps(a,s,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ua(a,s,c,d){return new ps(a,s,c,d)}function Gl(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ii(a,s){var c=a.alternate;return c===null?(c=ua(a.tag,s,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=s,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,s=a.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function Yc(a,s){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,s=c.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function ol(a,s,c,d,x,y){var D=0;if(d=a,typeof a=="function")Gl(a)&&(D=1);else if(typeof a=="string")D=L4(a,c,te.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case V:return a=ua(31,c,s,x),a.elementType=V,a.lanes=y,a;case L:return Ci(c.children,x,y,s);case O:D=8,x|=24;break;case q:return a=ua(12,c,s,x|2),a.elementType=q,a.lanes=y,a;case se:return a=ua(13,c,s,x),a.elementType=se,a.lanes=y,a;case ge:return a=ua(19,c,s,x),a.elementType=ge,a.lanes=y,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:case I:D=10;break e;case T:D=9;break e;case ee:D=11;break e;case W:D=14;break e;case k:D=16,d=null;break e}D=29,c=Error(r(130,a===null?"null":typeof a,"")),d=null}return s=ua(D,c,s,x),s.elementType=a,s.type=d,s.lanes=y,s}function Ci(a,s,c,d){return a=ua(7,a,d,s),a.lanes=c,a}function Pu(a,s,c){return a=ua(6,a,null,s),a.lanes=c,a}function $c(a,s,c){return s=ua(4,a.children!==null?a.children:[],a.key,s),s.lanes=c,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}var vo=[],Ri=0,Kl=null,Du=0,gs=[],ts=0,ll=null,Ii=1,Li="";function cl(a,s){vo[Ri++]=Du,vo[Ri++]=Kl,Kl=a,Du=s}function _f(a,s,c){gs[ts++]=Ii,gs[ts++]=Li,gs[ts++]=ll,ll=a;var d=Ii;a=Li;var x=32-Fe(d)-1;d&=~(1<<x),c+=1;var y=32-Fe(s)+x;if(30<y){var D=x-x%5;y=(d&(1<<D)-1).toString(32),d>>=D,x-=D,Ii=1<<32-Fe(s)+x|c<<x|d,Li=y+a}else Ii=1<<y|c<<x|d,Li=a}function Xc(a){a.return!==null&&(cl(a,1),_f(a,1,0))}function Qc(a){for(;a===Kl;)Kl=vo[--Ri],vo[Ri]=null,Du=vo[--Ri],vo[Ri]=null;for(;a===ll;)ll=gs[--ts],gs[ts]=null,Li=gs[--ts],gs[ts]=null,Ii=gs[--ts],gs[ts]=null}var Rr=null,lr=null,wn=!1,yo=null,oi=!1,Gd=Error(r(519));function ul(a){var s=Error(r(418,""));throw Yl(en(s,a)),Gd}function Af(a){var s=a.stateNode,c=a.type,d=a.memoizedProps;switch(s[Cn]=a,s[Rn]=d,c){case"dialog":ln("cancel",s),ln("close",s);break;case"iframe":case"object":case"embed":ln("load",s);break;case"video":case"audio":for(c=0;c<bh.length;c++)ln(bh[c],s);break;case"source":ln("error",s);break;case"img":case"image":case"link":ln("error",s),ln("load",s);break;case"details":ln("toggle",s);break;case"input":ln("invalid",s),Ks(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Gs(s);break;case"select":ln("invalid",s);break;case"textarea":ln("invalid",s),$s(s,d.value,d.defaultValue,d.children),Gs(s)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||d.suppressHydrationWarning===!0||Uv(s.textContent,c)?(d.popover!=null&&(ln("beforetoggle",s),ln("toggle",s)),d.onScroll!=null&&ln("scroll",s),d.onScrollEnd!=null&&ln("scrollend",s),d.onClick!=null&&(s.onclick=im),s=!0):s=!1,s||ul(a)}function Pi(a){for(Rr=a.return;Rr;)switch(Rr.tag){case 5:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:Rr=Rr.return}}function ya(a){if(a!==Rr)return!1;if(!wn)return Pi(a),wn=!0,!1;var s=a.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||Op(a.type,a.memoizedProps)),c=!c),c&&lr&&ul(a),Pi(a),s===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,s=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(s===0){lr=zi(a.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;a=a.nextSibling}lr=null}}else s===27?(s=lr,dc(a.type)?(a=Bp,Bp=null,lr=a):lr=s):lr=Rr?zi(a.stateNode.nextSibling):null;return!0}function ns(){lr=Rr=null,wn=!1}function Sf(){var a=yo;return a!==null&&(vs===null?vs=a:vs.push.apply(vs,a),yo=null),a}function Yl(a){yo===null?yo=[a]:yo.push(a)}var li=Ae(null),Wr=null,Di=null;function wo(a,s,c){K(li,s._currentValue),s._currentValue=c}function ci(a){a._currentValue=li.current,F(li)}function Ou(a,s,c){for(;a!==null;){var d=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),a===c)break;a=a.return}}function Mu(a,s,c,d){var x=a.child;for(x!==null&&(x.return=a);x!==null;){var y=x.dependencies;if(y!==null){var D=x.child;y=y.firstContext;e:for(;y!==null;){var X=y;y=x;for(var le=0;le<s.length;le++)if(X.context===s[le]){y.lanes|=c,X=y.alternate,X!==null&&(X.lanes|=c),Ou(y.return,c,a),d||(D=null);break e}y=X.next}}else if(x.tag===18){if(D=x.return,D===null)throw Error(r(341));D.lanes|=c,y=D.alternate,y!==null&&(y.lanes|=c),Ou(D,c,a),D=null}else D=x.child;if(D!==null)D.return=x;else for(D=x;D!==null;){if(D===a){D=null;break}if(x=D.sibling,x!==null){x.return=D.return,D=x;break}D=D.return}x=D}}function $l(a,s,c,d){a=null;for(var x=s,y=!1;x!==null;){if(!y){if((x.flags&524288)!==0)y=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var D=x.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var X=x.type;qr(x.pendingProps.value,D.value)||(a!==null?a.push(X):a=[X])}}else if(x===Ee.current){if(D=x.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(a!==null?a.push(Ah):a=[Ah])}x=x.return}a!==null&&Mu(s,a,c,d),s.flags|=262144}function Fu(a){for(a=a.firstContext;a!==null;){if(!qr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function ui(a){Wr=a,Di=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Ir(a){return Vu(Wr,a)}function No(a,s){return Wr===null&&ui(a),Vu(a,s)}function Vu(a,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Di===null){if(a===null)throw Error(r(308));Di=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else Di=Di.next=s;return c}var W0=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(c,d){a.push(d)}};this.abort=function(){s.aborted=!0,a.forEach(function(c){return c()})}},Ef=n.unstable_scheduleCallback,G0=n.unstable_NormalPriority,Lr={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kd(){return{controller:new W0,data:new Map,refCount:0}}function Jc(a){a.refCount--,a.refCount===0&&Ef(G0,function(){a.controller.abort()})}var Zc=null,Yd=0,dl=0,Oi=null;function K0(a,s){if(Zc===null){var c=Zc=[];Yd=0,dl=Tp(),Oi={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Yd++,s.then(Tf,Tf),s}function Tf(){if(--Yd===0&&Zc!==null){Oi!==null&&(Oi.status="fulfilled");var a=Zc;Zc=null,dl=0,Oi=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function jf(a,s){var c=[],d={status:"pending",value:null,reason:null,then:function(x){c.push(x)}};return a.then(function(){d.status="fulfilled",d.value=s;for(var x=0;x<c.length;x++)(0,c[x])(s)},function(x){for(d.status="rejected",d.reason=x,x=0;x<c.length;x++)(0,c[x])(void 0)}),d}var m=ae.S;ae.S=function(a,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&K0(a,s),m!==null&&m(a,s)};var b=Ae(null);function A(){var a=b.current;return a!==null?a:Jn.pooledCache}function j(a,s){s===null?K(b,b.current):K(b,s.pool)}function U(){var a=A();return a===null?null:{parent:Lr._currentValue,pool:a}}var H=Error(r(460)),G=Error(r(474)),Y=Error(r(542)),Z={then:function(){}};function ne(a){return a=a.status,a==="fulfilled"||a==="rejected"}function fe(){}function ke(a,s,c){switch(c=a[c],c===void 0?a.push(s):c!==s&&(s.then(fe,fe),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,Ge(a),a;default:if(typeof s.status=="string")s.then(fe,fe);else{if(a=Jn,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=s,a.status="pending",a.then(function(d){if(s.status==="pending"){var x=s;x.status="fulfilled",x.value=d}},function(d){if(s.status==="pending"){var x=s;x.status="rejected",x.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,Ge(a),a}throw Te=s,H}}var Te=null;function we(){if(Te===null)throw Error(r(459));var a=Te;return Te=null,a}function Ge(a){if(a===H||a===Y)throw Error(r(483))}var Me=!1;function pe(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function be(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ue(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ke(a,s,c){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Mn&2)!==0){var x=d.pending;return x===null?s.next=s:(s.next=x.next,x.next=s),d.pending=s,s=il(a),Lu(a,null,c),s}return xo(a,d,s,c),il(a)}function qe(a,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var d=s.lanes;d&=a.pendingLanes,c|=d,s.lanes=c,cn(a,c)}}function ht(a,s){var c=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var x=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var D={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?x=y=D:y=y.next=D,c=c.next}while(c!==null);y===null?x=y=s:y=y.next=s}else x=y=s;c={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=s:a.next=s,c.lastBaseUpdate=s}var it=!1;function St(){if(it){var a=Oi;if(a!==null)throw a}}function ct(a,s,c,d){it=!1;var x=a.updateQueue;Me=!1;var y=x.firstBaseUpdate,D=x.lastBaseUpdate,X=x.shared.pending;if(X!==null){x.shared.pending=null;var le=X,Ie=le.next;le.next=null,D===null?y=Ie:D.next=Ie,D=le;var ze=a.alternate;ze!==null&&(ze=ze.updateQueue,X=ze.lastBaseUpdate,X!==D&&(X===null?ze.firstBaseUpdate=Ie:X.next=Ie,ze.lastBaseUpdate=le))}if(y!==null){var $e=x.baseState;D=0,ze=Ie=le=null,X=y;do{var De=X.lane&-536870913,Oe=De!==X.lane;if(Oe?(xn&De)===De:(d&De)===De){De!==0&&De===dl&&(it=!0),ze!==null&&(ze=ze.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var zt=a,Pt=X;De=s;var Wn=c;switch(Pt.tag){case 1:if(zt=Pt.payload,typeof zt=="function"){$e=zt.call(Wn,$e,De);break e}$e=zt;break e;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=Pt.payload,De=typeof zt=="function"?zt.call(Wn,$e,De):zt,De==null)break e;$e=v({},$e,De);break e;case 2:Me=!0}}De=X.callback,De!==null&&(a.flags|=64,Oe&&(a.flags|=8192),Oe=x.callbacks,Oe===null?x.callbacks=[De]:Oe.push(De))}else Oe={lane:De,tag:X.tag,payload:X.payload,callback:X.callback,next:null},ze===null?(Ie=ze=Oe,le=$e):ze=ze.next=Oe,D|=De;if(X=X.next,X===null){if(X=x.shared.pending,X===null)break;Oe=X,X=Oe.next,Oe.next=null,x.lastBaseUpdate=Oe,x.shared.pending=null}}while(!0);ze===null&&(le=$e),x.baseState=le,x.firstBaseUpdate=Ie,x.lastBaseUpdate=ze,y===null&&(x.shared.lanes=0),oc|=D,a.lanes=D,a.memoizedState=$e}}function pn(a,s){if(typeof a!="function")throw Error(r(191,a));a.call(s)}function Sn(a,s){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)pn(c[a],s)}var Jt=Ae(null),Xt=Ae(0);function Ln(a,s){a=wl,K(Xt,a),K(Jt,s),wl=a|s.baseLanes}function En(){K(Xt,wl),K(Jt,Jt.current)}function Ht(){wl=Xt.current,F(Jt),F(Xt)}var On=0,kt=null,Ot=null,mn=null,gn=!1,Gr=!1,Pr=!1,fr=0,mr=0,_r=null,xs=0;function Tn(){throw Error(r(321))}function Ar(a,s){if(s===null)return!1;for(var c=0;c<s.length&&c<a.length;c++)if(!qr(a[c],s[c]))return!1;return!0}function Ms(a,s,c,d,x,y){return On=y,kt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ae.H=a===null||a.memoizedState===null?wb:Nb,Pr=!1,y=c(d,x),Pr=!1,Gr&&(y=hl(s,c,d,x)),_o(a),y}function _o(a){ae.H=Bf;var s=Ot!==null&&Ot.next!==null;if(On=0,mn=Ot=kt=null,gn=!1,mr=0,_r=null,s)throw Error(r(300));a===null||da||(a=a.dependencies,a!==null&&Fu(a)&&(da=!0))}function hl(a,s,c,d){kt=a;var x=0;do{if(Gr&&(_r=null),mr=0,Gr=!1,25<=x)throw Error(r(301));if(x+=1,mn=Ot=null,a.updateQueue!=null){var y=a.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}ae.H=H3,y=s(c,d)}while(Gr);return y}function Ao(){var a=ae.H,s=a.useState()[0];return s=typeof s.then=="function"?So(s):s,a=a.useState()[0],(Ot!==null?Ot.memoizedState:null)!==a&&(kt.flags|=1024),s}function Qn(){var a=fr!==0;return fr=0,a}function eu(a,s,c){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~c}function Bu(a){if(gn){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}gn=!1}On=0,mn=Ot=kt=null,Gr=!1,mr=fr=0,_r=null}function wa(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?kt.memoizedState=mn=a:mn=mn.next=a,mn}function tr(){if(Ot===null){var a=kt.alternate;a=a!==null?a.memoizedState:null}else a=Ot.next;var s=mn===null?kt.memoizedState:mn.next;if(s!==null)mn=s,Ot=a;else{if(a===null)throw kt.alternate===null?Error(r(467)):Error(r(310));Ot=a,a={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},mn===null?kt.memoizedState=mn=a:mn=mn.next=a}return mn}function fl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function So(a){var s=mr;return mr+=1,_r===null&&(_r=[]),a=ke(_r,a,s),s=kt,(mn===null?s.memoizedState:mn.next)===null&&(s=s.alternate,ae.H=s===null||s.memoizedState===null?wb:Nb),a}function Fa(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return So(a);if(a.$$typeof===I)return Ir(a)}throw Error(r(438,String(a)))}function Eo(a){var s=null,c=kt.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var d=kt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(x){return x.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=fl(),kt.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(a),d=0;d<a;d++)c[d]=Q;return s.index++,c}function Va(a,s){return typeof s=="function"?s(a):s}function tu(a){var s=tr();return Xl(s,Ot,a)}function Xl(a,s,c){var d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var x=a.baseQueue,y=d.pending;if(y!==null){if(x!==null){var D=x.next;x.next=y.next,y.next=D}s.baseQueue=x=y,d.pending=null}if(y=a.baseState,x===null)a.memoizedState=y;else{s=x.next;var X=D=null,le=null,Ie=s,ze=!1;do{var $e=Ie.lane&-536870913;if($e!==Ie.lane?(xn&$e)===$e:(On&$e)===$e){var De=Ie.revertLane;if(De===0)le!==null&&(le=le.next={lane:0,revertLane:0,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null}),$e===dl&&(ze=!0);else if((On&De)===De){Ie=Ie.next,De===dl&&(ze=!0);continue}else $e={lane:0,revertLane:Ie.revertLane,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},le===null?(X=le=$e,D=y):le=le.next=$e,kt.lanes|=De,oc|=De;$e=Ie.action,Pr&&c(y,$e),y=Ie.hasEagerState?Ie.eagerState:c(y,$e)}else De={lane:$e,revertLane:Ie.revertLane,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},le===null?(X=le=De,D=y):le=le.next=De,kt.lanes|=$e,oc|=$e;Ie=Ie.next}while(Ie!==null&&Ie!==s);if(le===null?D=y:le.next=X,!qr(y,a.memoizedState)&&(da=!0,ze&&(c=Oi,c!==null)))throw c;a.memoizedState=y,a.baseState=D,a.baseQueue=le,d.lastRenderedState=y}return x===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function Uu(a){var s=tr(),c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var d=c.dispatch,x=c.pending,y=s.memoizedState;if(x!==null){c.pending=null;var D=x=x.next;do y=a(y,D.action),D=D.next;while(D!==x);qr(y,s.memoizedState)||(da=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),c.lastRenderedState=y}return[y,d]}function nu(a,s,c){var d=kt,x=tr(),y=wn;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=s();var D=!qr((Ot||x).memoizedState,c);D&&(x.memoizedState=c,da=!0),x=x.queue;var X=Ql.bind(null,d,x,a);if(ec(2048,8,X,[a]),x.getSnapshot!==s||D||mn!==null&&mn.memoizedState.tag&1){if(d.flags|=2048,Fi(9,iu(),ru.bind(null,d,x,c,s),null),Jn===null)throw Error(r(349));y||(On&124)!==0||zu(d,s,c)}return c}function zu(a,s,c){a.flags|=16384,a={getSnapshot:s,value:c},s=kt.updateQueue,s===null?(s=fl(),kt.updateQueue=s,s.stores=[a]):(c=s.stores,c===null?s.stores=[a]:c.push(a))}function ru(a,s,c,d){s.value=c,s.getSnapshot=d,kf(s)&&Cf(a)}function Ql(a,s,c){return c(function(){kf(s)&&Cf(a)})}function kf(a){var s=a.getSnapshot;a=a.value;try{var c=s();return!qr(a,c)}catch{return!0}}function Cf(a){var s=ki(a,2);s!==null&&qs(s,a,2)}function au(a){var s=wa();if(typeof a=="function"){var c=a;if(a=c(),Pr){Wt(!0);try{c()}finally{Wt(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:a},s}function Mi(a,s,c,d){return a.baseState=c,Xl(a,Ot,typeof d=="function"?d:Va)}function Y0(a,s,c,d,x){if(Vf(a))throw Error(r(485));if(a=s.action,a!==null){var y={payload:x,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){y.listeners.push(D)}};ae.T!==null?c(!0):y.isTransition=!1,d(y),c=s.pending,c===null?(y.next=s.pending=y,Rf(s,y)):(y.next=c.next,s.pending=c.next=y)}}function Rf(a,s){var c=s.action,d=s.payload,x=a.state;if(s.isTransition){var y=ae.T,D={};ae.T=D;try{var X=c(x,d),le=ae.S;le!==null&&le(D,X),If(a,s,X)}catch(Ie){Jl(a,s,Ie)}finally{ae.T=y}}else try{y=c(x,d),If(a,s,y)}catch(Ie){Jl(a,s,Ie)}}function If(a,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){$d(a,s,d)},function(d){return Jl(a,s,d)}):$d(a,s,c)}function $d(a,s,c){s.status="fulfilled",s.value=c,Xd(s),a.state=c,s=a.pending,s!==null&&(c=s.next,c===s?a.pending=null:(c=c.next,s.next=c,Rf(a,c)))}function Jl(a,s,c){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=c,Xd(s),s=s.next;while(s!==d)}a.action=null}function Xd(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function Qd(a,s){return s}function su(a,s){if(wn){var c=Jn.formState;if(c!==null){e:{var d=kt;if(wn){if(lr){t:{for(var x=lr,y=oi;x.nodeType!==8;){if(!y){x=null;break t}if(x=zi(x.nextSibling),x===null){x=null;break t}}y=x.data,x=y==="F!"||y==="F"?x:null}if(x){lr=zi(x.nextSibling),d=x.data==="F!";break e}}ul(d)}d=!1}d&&(s=c[0])}}return c=wa(),c.memoizedState=c.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qd,lastRenderedState:s},c.queue=d,c=bb.bind(null,kt,d),d.dispatch=c,d=au(!1),y=$0.bind(null,kt,!1,d.queue),d=wa(),x={state:s,dispatch:null,action:a,pending:null},d.queue=x,c=Y0.bind(null,kt,x,y,c),x.dispatch=c,d.memoizedState=a,[s,c,!1]}function qu(a){var s=tr();return Zl(s,Ot,a)}function Zl(a,s,c){if(s=Xl(a,s,Qd)[0],a=tu(Va)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=So(s)}catch(D){throw D===H?Y:D}else d=s;s=tr();var x=s.queue,y=x.dispatch;return c!==s.memoizedState&&(kt.flags|=2048,Fi(9,iu(),Lf.bind(null,x,c),null)),[d,y,a]}function Lf(a,s){a.action=s}function Pf(a){var s=tr(),c=Ot;if(c!==null)return Zl(s,c,a);tr(),s=s.memoizedState,c=tr();var d=c.queue.dispatch;return c.memoizedState=a,[s,d,!1]}function Fi(a,s,c,d){return a={tag:a,create:c,deps:d,inst:s,next:null},s=kt.updateQueue,s===null&&(s=fl(),kt.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,s.lastEffect=a),a}function iu(){return{destroy:void 0,resource:void 0}}function Hu(){return tr().memoizedState}function Fs(a,s,c,d){var x=wa();d=d===void 0?null:d,kt.flags|=a,x.memoizedState=Fi(1|s,iu(),c,d)}function ec(a,s,c,d){var x=tr();d=d===void 0?null:d;var y=x.memoizedState.inst;Ot!==null&&d!==null&&Ar(d,Ot.memoizedState.deps)?x.memoizedState=Fi(s,y,c,d):(kt.flags|=a,x.memoizedState=Fi(1|s,y,c,d))}function Jd(a,s){Fs(8390656,8,a,s)}function Df(a,s){ec(2048,8,a,s)}function Zd(a,s){return ec(4,2,a,s)}function ml(a,s){return ec(4,4,a,s)}function Of(a,s){if(typeof s=="function"){a=a();var c=s(a);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function eh(a,s,c){c=c!=null?c.concat([a]):null,ec(4,4,Of.bind(null,s,a),c)}function th(){}function nh(a,s){var c=tr();s=s===void 0?null:s;var d=c.memoizedState;return s!==null&&Ar(s,d[1])?d[0]:(c.memoizedState=[a,s],a)}function Mf(a,s){var c=tr();s=s===void 0?null:s;var d=c.memoizedState;if(s!==null&&Ar(s,d[1]))return d[0];if(d=a(),Pr){Wt(!0);try{a()}finally{Wt(!1)}}return c.memoizedState=[d,s],d}function pl(a,s,c){return c===void 0||(On&1073741824)!==0?a.memoizedState=s:(a.memoizedState=c,a=mv(),kt.lanes|=a,oc|=a,c)}function Wu(a,s,c,d){return qr(c,s)?c:Jt.current!==null?(a=pl(a,c,d),qr(a,s)||(da=!0),a):(On&42)===0?(da=!0,a.memoizedState=c):(a=mv(),kt.lanes|=a,oc|=a,s)}function ou(a,s,c,d,x){var y=me.p;me.p=y!==0&&8>y?y:8;var D=ae.T,X={};ae.T=X,$0(a,!1,s,c);try{var le=x(),Ie=ae.S;if(Ie!==null&&Ie(X,le),le!==null&&typeof le=="object"&&typeof le.then=="function"){var ze=jf(le,d);ih(a,s,ze,zs(a))}else ih(a,s,d,zs(a))}catch($e){ih(a,s,{then:function(){},status:"rejected",reason:$e},zs())}finally{me.p=y,ae.T=D}}function Vi(){}function di(a,s,c,d){if(a.tag!==5)throw Error(r(476));var x=Bi(a).queue;ou(a,x,s,he,c===null?Vi:function(){return lu(a),c(d)})}function Bi(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:he},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:c},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function lu(a){var s=Bi(a).next.queue;ih(a,s,{},zs())}function cu(){return Ir(Ah)}function rh(){return tr().memoizedState}function Ff(){return tr().memoizedState}function ah(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var c=zs();a=Ue(c);var d=Ke(s,a,c);d!==null&&(qs(d,s,c),qe(d,s,c)),s={cache:Kd()},a.payload=s;return}s=s.return}}function sh(a,s,c){var d=zs();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Vf(a)?vb(s,c):(c=bo(a,s,c,d),c!==null&&(qs(c,a,d),yb(c,s,d)))}function bb(a,s,c){var d=zs();ih(a,s,c,d)}function ih(a,s,c,d){var x={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Vf(a))vb(s,x);else{var y=a.alternate;if(a.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var D=s.lastRenderedState,X=y(D,c);if(x.hasEagerState=!0,x.eagerState=X,qr(X,D))return xo(a,s,x,0),Jn===null&&ms(),!1}catch{}finally{}if(c=bo(a,s,x,d),c!==null)return qs(c,a,d),yb(c,s,d),!0}return!1}function $0(a,s,c,d){if(d={lane:2,revertLane:Tp(),action:d,hasEagerState:!1,eagerState:null,next:null},Vf(a)){if(s)throw Error(r(479))}else s=bo(a,c,d,2),s!==null&&qs(s,a,2)}function Vf(a){var s=a.alternate;return a===kt||s!==null&&s===kt}function vb(a,s){Gr=gn=!0;var c=a.pending;c===null?s.next=s:(s.next=c.next,c.next=s),a.pending=s}function yb(a,s,c){if((c&4194048)!==0){var d=s.lanes;d&=a.pendingLanes,c|=d,s.lanes=c,cn(a,c)}}var Bf={readContext:Ir,use:Fa,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useLayoutEffect:Tn,useInsertionEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useSyncExternalStore:Tn,useId:Tn,useHostTransitionStatus:Tn,useFormState:Tn,useActionState:Tn,useOptimistic:Tn,useMemoCache:Tn,useCacheRefresh:Tn},wb={readContext:Ir,use:Fa,useCallback:function(a,s){return wa().memoizedState=[a,s===void 0?null:s],a},useContext:Ir,useEffect:Jd,useImperativeHandle:function(a,s,c){c=c!=null?c.concat([a]):null,Fs(4194308,4,Of.bind(null,s,a),c)},useLayoutEffect:function(a,s){return Fs(4194308,4,a,s)},useInsertionEffect:function(a,s){Fs(4,2,a,s)},useMemo:function(a,s){var c=wa();s=s===void 0?null:s;var d=a();if(Pr){Wt(!0);try{a()}finally{Wt(!1)}}return c.memoizedState=[d,s],d},useReducer:function(a,s,c){var d=wa();if(c!==void 0){var x=c(s);if(Pr){Wt(!0);try{c(s)}finally{Wt(!1)}}}else x=s;return d.memoizedState=d.baseState=x,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:x},d.queue=a,a=a.dispatch=sh.bind(null,kt,a),[d.memoizedState,a]},useRef:function(a){var s=wa();return a={current:a},s.memoizedState=a},useState:function(a){a=au(a);var s=a.queue,c=bb.bind(null,kt,s);return s.dispatch=c,[a.memoizedState,c]},useDebugValue:th,useDeferredValue:function(a,s){var c=wa();return pl(c,a,s)},useTransition:function(){var a=au(!1);return a=ou.bind(null,kt,a.queue,!0,!1),wa().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,c){var d=kt,x=wa();if(wn){if(c===void 0)throw Error(r(407));c=c()}else{if(c=s(),Jn===null)throw Error(r(349));(xn&124)!==0||zu(d,s,c)}x.memoizedState=c;var y={value:c,getSnapshot:s};return x.queue=y,Jd(Ql.bind(null,d,y,a),[a]),d.flags|=2048,Fi(9,iu(),ru.bind(null,d,y,c,s),null),c},useId:function(){var a=wa(),s=Jn.identifierPrefix;if(wn){var c=Li,d=Ii;c=(d&~(1<<32-Fe(d)-1)).toString(32)+c,s="«"+s+"R"+c,c=fr++,0<c&&(s+="H"+c.toString(32)),s+="»"}else c=xs++,s="«"+s+"r"+c.toString(32)+"»";return a.memoizedState=s},useHostTransitionStatus:cu,useFormState:su,useActionState:su,useOptimistic:function(a){var s=wa();s.memoizedState=s.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=$0.bind(null,kt,!0,c),c.dispatch=s,[a,s]},useMemoCache:Eo,useCacheRefresh:function(){return wa().memoizedState=ah.bind(null,kt)}},Nb={readContext:Ir,use:Fa,useCallback:nh,useContext:Ir,useEffect:Df,useImperativeHandle:eh,useInsertionEffect:Zd,useLayoutEffect:ml,useMemo:Mf,useReducer:tu,useRef:Hu,useState:function(){return tu(Va)},useDebugValue:th,useDeferredValue:function(a,s){var c=tr();return Wu(c,Ot.memoizedState,a,s)},useTransition:function(){var a=tu(Va)[0],s=tr().memoizedState;return[typeof a=="boolean"?a:So(a),s]},useSyncExternalStore:nu,useId:rh,useHostTransitionStatus:cu,useFormState:qu,useActionState:qu,useOptimistic:function(a,s){var c=tr();return Mi(c,Ot,a,s)},useMemoCache:Eo,useCacheRefresh:Ff},H3={readContext:Ir,use:Fa,useCallback:nh,useContext:Ir,useEffect:Df,useImperativeHandle:eh,useInsertionEffect:Zd,useLayoutEffect:ml,useMemo:Mf,useReducer:Uu,useRef:Hu,useState:function(){return Uu(Va)},useDebugValue:th,useDeferredValue:function(a,s){var c=tr();return Ot===null?pl(c,a,s):Wu(c,Ot.memoizedState,a,s)},useTransition:function(){var a=Uu(Va)[0],s=tr().memoizedState;return[typeof a=="boolean"?a:So(a),s]},useSyncExternalStore:nu,useId:rh,useHostTransitionStatus:cu,useFormState:Pf,useActionState:Pf,useOptimistic:function(a,s){var c=tr();return Ot!==null?Mi(c,Ot,a,s):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:Eo,useCacheRefresh:Ff},Gu=null,oh=0;function Uf(a){var s=oh;return oh+=1,Gu===null&&(Gu=[]),ke(Gu,a,s)}function lh(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function zf(a,s){throw s.$$typeof===N?Error(r(525)):(a=Object.prototype.toString.call(s),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function _b(a){var s=a._init;return s(a._payload)}function Ab(a){function s(Se,xe){if(a){var je=Se.deletions;je===null?(Se.deletions=[xe],Se.flags|=16):je.push(xe)}}function c(Se,xe){if(!a)return null;for(;xe!==null;)s(Se,xe),xe=xe.sibling;return null}function d(Se){for(var xe=new Map;Se!==null;)Se.key!==null?xe.set(Se.key,Se):xe.set(Se.index,Se),Se=Se.sibling;return xe}function x(Se,xe){return Se=ii(Se,xe),Se.index=0,Se.sibling=null,Se}function y(Se,xe,je){return Se.index=je,a?(je=Se.alternate,je!==null?(je=je.index,je<xe?(Se.flags|=67108866,xe):je):(Se.flags|=67108866,xe)):(Se.flags|=1048576,xe)}function D(Se){return a&&Se.alternate===null&&(Se.flags|=67108866),Se}function X(Se,xe,je,We){return xe===null||xe.tag!==6?(xe=Pu(je,Se.mode,We),xe.return=Se,xe):(xe=x(xe,je),xe.return=Se,xe)}function le(Se,xe,je,We){var vt=je.type;return vt===L?ze(Se,xe,je.props.children,We,je.key):xe!==null&&(xe.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===k&&_b(vt)===xe.type)?(xe=x(xe,je.props),lh(xe,je),xe.return=Se,xe):(xe=ol(je.type,je.key,je.props,null,Se.mode,We),lh(xe,je),xe.return=Se,xe)}function Ie(Se,xe,je,We){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==je.containerInfo||xe.stateNode.implementation!==je.implementation?(xe=$c(je,Se.mode,We),xe.return=Se,xe):(xe=x(xe,je.children||[]),xe.return=Se,xe)}function ze(Se,xe,je,We,vt){return xe===null||xe.tag!==7?(xe=Ci(je,Se.mode,We,vt),xe.return=Se,xe):(xe=x(xe,je),xe.return=Se,xe)}function $e(Se,xe,je){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return xe=Pu(""+xe,Se.mode,je),xe.return=Se,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case S:return je=ol(xe.type,xe.key,xe.props,null,Se.mode,je),lh(je,xe),je.return=Se,je;case _:return xe=$c(xe,Se.mode,je),xe.return=Se,xe;case k:var We=xe._init;return xe=We(xe._payload),$e(Se,xe,je)}if(Le(xe)||P(xe))return xe=Ci(xe,Se.mode,je,null),xe.return=Se,xe;if(typeof xe.then=="function")return $e(Se,Uf(xe),je);if(xe.$$typeof===I)return $e(Se,No(Se,xe),je);zf(Se,xe)}return null}function De(Se,xe,je,We){var vt=xe!==null?xe.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return vt!==null?null:X(Se,xe,""+je,We);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case S:return je.key===vt?le(Se,xe,je,We):null;case _:return je.key===vt?Ie(Se,xe,je,We):null;case k:return vt=je._init,je=vt(je._payload),De(Se,xe,je,We)}if(Le(je)||P(je))return vt!==null?null:ze(Se,xe,je,We,null);if(typeof je.then=="function")return De(Se,xe,Uf(je),We);if(je.$$typeof===I)return De(Se,xe,No(Se,je),We);zf(Se,je)}return null}function Oe(Se,xe,je,We,vt){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return Se=Se.get(je)||null,X(xe,Se,""+We,vt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case S:return Se=Se.get(We.key===null?je:We.key)||null,le(xe,Se,We,vt);case _:return Se=Se.get(We.key===null?je:We.key)||null,Ie(xe,Se,We,vt);case k:var sn=We._init;return We=sn(We._payload),Oe(Se,xe,je,We,vt)}if(Le(We)||P(We))return Se=Se.get(je)||null,ze(xe,Se,We,vt,null);if(typeof We.then=="function")return Oe(Se,xe,je,Uf(We),vt);if(We.$$typeof===I)return Oe(Se,xe,je,No(xe,We),vt);zf(xe,We)}return null}function zt(Se,xe,je,We){for(var vt=null,sn=null,Et=xe,Dt=xe=0,fa=null;Et!==null&&Dt<je.length;Dt++){Et.index>Dt?(fa=Et,Et=null):fa=Et.sibling;var jn=De(Se,Et,je[Dt],We);if(jn===null){Et===null&&(Et=fa);break}a&&Et&&jn.alternate===null&&s(Se,Et),xe=y(jn,xe,Dt),sn===null?vt=jn:sn.sibling=jn,sn=jn,Et=fa}if(Dt===je.length)return c(Se,Et),wn&&cl(Se,Dt),vt;if(Et===null){for(;Dt<je.length;Dt++)Et=$e(Se,je[Dt],We),Et!==null&&(xe=y(Et,xe,Dt),sn===null?vt=Et:sn.sibling=Et,sn=Et);return wn&&cl(Se,Dt),vt}for(Et=d(Et);Dt<je.length;Dt++)fa=Oe(Et,Se,Dt,je[Dt],We),fa!==null&&(a&&fa.alternate!==null&&Et.delete(fa.key===null?Dt:fa.key),xe=y(fa,xe,Dt),sn===null?vt=fa:sn.sibling=fa,sn=fa);return a&&Et.forEach(function(gc){return s(Se,gc)}),wn&&cl(Se,Dt),vt}function Pt(Se,xe,je,We){if(je==null)throw Error(r(151));for(var vt=null,sn=null,Et=xe,Dt=xe=0,fa=null,jn=je.next();Et!==null&&!jn.done;Dt++,jn=je.next()){Et.index>Dt?(fa=Et,Et=null):fa=Et.sibling;var gc=De(Se,Et,jn.value,We);if(gc===null){Et===null&&(Et=fa);break}a&&Et&&gc.alternate===null&&s(Se,Et),xe=y(gc,xe,Dt),sn===null?vt=gc:sn.sibling=gc,sn=gc,Et=fa}if(jn.done)return c(Se,Et),wn&&cl(Se,Dt),vt;if(Et===null){for(;!jn.done;Dt++,jn=je.next())jn=$e(Se,jn.value,We),jn!==null&&(xe=y(jn,xe,Dt),sn===null?vt=jn:sn.sibling=jn,sn=jn);return wn&&cl(Se,Dt),vt}for(Et=d(Et);!jn.done;Dt++,jn=je.next())jn=Oe(Et,Se,Dt,jn.value,We),jn!==null&&(a&&jn.alternate!==null&&Et.delete(jn.key===null?Dt:jn.key),xe=y(jn,xe,Dt),sn===null?vt=jn:sn.sibling=jn,sn=jn);return a&&Et.forEach(function(W4){return s(Se,W4)}),wn&&cl(Se,Dt),vt}function Wn(Se,xe,je,We){if(typeof je=="object"&&je!==null&&je.type===L&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case S:e:{for(var vt=je.key;xe!==null;){if(xe.key===vt){if(vt=je.type,vt===L){if(xe.tag===7){c(Se,xe.sibling),We=x(xe,je.props.children),We.return=Se,Se=We;break e}}else if(xe.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===k&&_b(vt)===xe.type){c(Se,xe.sibling),We=x(xe,je.props),lh(We,je),We.return=Se,Se=We;break e}c(Se,xe);break}else s(Se,xe);xe=xe.sibling}je.type===L?(We=Ci(je.props.children,Se.mode,We,je.key),We.return=Se,Se=We):(We=ol(je.type,je.key,je.props,null,Se.mode,We),lh(We,je),We.return=Se,Se=We)}return D(Se);case _:e:{for(vt=je.key;xe!==null;){if(xe.key===vt)if(xe.tag===4&&xe.stateNode.containerInfo===je.containerInfo&&xe.stateNode.implementation===je.implementation){c(Se,xe.sibling),We=x(xe,je.children||[]),We.return=Se,Se=We;break e}else{c(Se,xe);break}else s(Se,xe);xe=xe.sibling}We=$c(je,Se.mode,We),We.return=Se,Se=We}return D(Se);case k:return vt=je._init,je=vt(je._payload),Wn(Se,xe,je,We)}if(Le(je))return zt(Se,xe,je,We);if(P(je)){if(vt=P(je),typeof vt!="function")throw Error(r(150));return je=vt.call(je),Pt(Se,xe,je,We)}if(typeof je.then=="function")return Wn(Se,xe,Uf(je),We);if(je.$$typeof===I)return Wn(Se,xe,No(Se,je),We);zf(Se,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,xe!==null&&xe.tag===6?(c(Se,xe.sibling),We=x(xe,je),We.return=Se,Se=We):(c(Se,xe),We=Pu(je,Se.mode,We),We.return=Se,Se=We),D(Se)):c(Se,xe)}return function(Se,xe,je,We){try{oh=0;var vt=Wn(Se,xe,je,We);return Gu=null,vt}catch(Et){if(Et===H||Et===Y)throw Et;var sn=ua(29,Et,null,Se.mode);return sn.lanes=We,sn.return=Se,sn}finally{}}}var Ku=Ab(!0),Sb=Ab(!1),hi=Ae(null),To=null;function tc(a){var s=a.alternate;K(na,na.current&1),K(hi,a),To===null&&(s===null||Jt.current!==null||s.memoizedState!==null)&&(To=a)}function Eb(a){if(a.tag===22){if(K(na,na.current),K(hi,a),To===null){var s=a.alternate;s!==null&&s.memoizedState!==null&&(To=a)}}else nc()}function nc(){K(na,na.current),K(hi,hi.current)}function gl(a){F(hi),To===a&&(To=null),F(na)}var na=Ae(0);function qf(a){for(var s=a;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Vp(c)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function X0(a,s,c,d){s=a.memoizedState,c=c(d,s),c=c==null?s:v({},s,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Q0={enqueueSetState:function(a,s,c){a=a._reactInternals;var d=zs(),x=Ue(d);x.payload=s,c!=null&&(x.callback=c),s=Ke(a,x,d),s!==null&&(qs(s,a,d),qe(s,a,d))},enqueueReplaceState:function(a,s,c){a=a._reactInternals;var d=zs(),x=Ue(d);x.tag=1,x.payload=s,c!=null&&(x.callback=c),s=Ke(a,x,d),s!==null&&(qs(s,a,d),qe(s,a,d))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var c=zs(),d=Ue(c);d.tag=2,s!=null&&(d.callback=s),s=Ke(a,d,c),s!==null&&(qs(s,a,c),qe(s,a,c))}};function Tb(a,s,c,d,x,y,D){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,y,D):s.prototype&&s.prototype.isPureReactComponent?!co(c,d)||!co(x,y):!0}function jb(a,s,c,d){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==a&&Q0.enqueueReplaceState(s,s.state,null)}function uu(a,s){var c=s;if("ref"in s){c={};for(var d in s)d!=="ref"&&(c[d]=s[d])}if(a=a.defaultProps){c===s&&(c=v({},c));for(var x in a)c[x]===void 0&&(c[x]=a[x])}return c}var Hf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function kb(a){Hf(a)}function Cb(a){console.error(a)}function Rb(a){Hf(a)}function Wf(a,s){try{var c=a.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function Ib(a,s,c){try{var d=a.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function J0(a,s,c){return c=Ue(c),c.tag=3,c.payload={element:null},c.callback=function(){Wf(a,s)},c}function Lb(a){return a=Ue(a),a.tag=3,a}function Pb(a,s,c,d){var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var y=d.value;a.payload=function(){return x(y)},a.callback=function(){Ib(s,c,d)}}var D=c.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(a.callback=function(){Ib(s,c,d),typeof x!="function"&&(lc===null?lc=new Set([this]):lc.add(this));var X=d.stack;this.componentDidCatch(d.value,{componentStack:X!==null?X:""})})}function W3(a,s,c,d,x){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=c.alternate,s!==null&&$l(s,c,x,!0),c=hi.current,c!==null){switch(c.tag){case 13:return To===null?Np():c.alternate===null&&Sr===0&&(Sr=3),c.flags&=-257,c.flags|=65536,c.lanes=x,d===Z?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([d]):s.add(d),Ap(a,d,x)),!1;case 22:return c.flags|=65536,d===Z?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([d]):c.add(d)),Ap(a,d,x)),!1}throw Error(r(435,c.tag))}return Ap(a,d,x),Np(),!1}if(wn)return s=hi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=x,d!==Gd&&(a=Error(r(422),{cause:d}),Yl(en(a,c)))):(d!==Gd&&(s=Error(r(423),{cause:d}),Yl(en(s,c))),a=a.current.alternate,a.flags|=65536,x&=-x,a.lanes|=x,d=en(d,c),x=J0(a.stateNode,d,x),ht(a,x),Sr!==4&&(Sr=2)),!1;var y=Error(r(520),{cause:d});if(y=en(y,c),ph===null?ph=[y]:ph.push(y),Sr!==4&&(Sr=2),s===null)return!0;d=en(d,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,a=x&-x,c.lanes|=a,a=J0(c.stateNode,d,a),ht(c,a),!1;case 1:if(s=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(lc===null||!lc.has(y))))return c.flags|=65536,x&=-x,c.lanes|=x,x=Lb(x),Pb(x,a,c,d),ht(c,x),!1}c=c.return}while(c!==null);return!1}var Db=Error(r(461)),da=!1;function Na(a,s,c,d){s.child=a===null?Sb(s,null,c,d):Ku(s,a.child,c,d)}function Ob(a,s,c,d,x){c=c.render;var y=s.ref;if("ref"in d){var D={};for(var X in d)X!=="ref"&&(D[X]=d[X])}else D=d;return ui(s),d=Ms(a,s,c,D,y,x),X=Qn(),a!==null&&!da?(eu(a,s,x),xl(a,s,x)):(wn&&X&&Xc(s),s.flags|=1,Na(a,s,d,x),s.child)}function Mb(a,s,c,d,x){if(a===null){var y=c.type;return typeof y=="function"&&!Gl(y)&&y.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=y,Fb(a,s,y,d,x)):(a=ol(c.type,null,d,s,s.mode,x),a.ref=s.ref,a.return=s,s.child=a)}if(y=a.child,!ip(a,x)){var D=y.memoizedProps;if(c=c.compare,c=c!==null?c:co,c(D,d)&&a.ref===s.ref)return xl(a,s,x)}return s.flags|=1,a=ii(y,d),a.ref=s.ref,a.return=s,s.child=a}function Fb(a,s,c,d,x){if(a!==null){var y=a.memoizedProps;if(co(y,d)&&a.ref===s.ref)if(da=!1,s.pendingProps=d=y,ip(a,x))(a.flags&131072)!==0&&(da=!0);else return s.lanes=a.lanes,xl(a,s,x)}return Z0(a,s,c,d,x)}function Vb(a,s,c){var d=s.pendingProps,x=d.children,y=a!==null?a.memoizedState:null;if(d.mode==="hidden"){if((s.flags&128)!==0){if(d=y!==null?y.baseLanes|c:c,a!==null){for(x=s.child=a.child,y=0;x!==null;)y=y|x.lanes|x.childLanes,x=x.sibling;s.childLanes=y&~d}else s.childLanes=0,s.child=null;return Bb(a,s,d,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&j(s,y!==null?y.cachePool:null),y!==null?Ln(s,y):En(),Eb(s);else return s.lanes=s.childLanes=536870912,Bb(a,s,y!==null?y.baseLanes|c:c,c)}else y!==null?(j(s,y.cachePool),Ln(s,y),nc(),s.memoizedState=null):(a!==null&&j(s,null),En(),nc());return Na(a,s,x,c),s.child}function Bb(a,s,c,d){var x=A();return x=x===null?null:{parent:Lr._currentValue,pool:x},s.memoizedState={baseLanes:c,cachePool:x},a!==null&&j(s,null),En(),Eb(s),a!==null&&$l(a,s,d,!0),null}function Gf(a,s){var c=s.ref;if(c===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(s.flags|=4194816)}}function Z0(a,s,c,d,x){return ui(s),c=Ms(a,s,c,d,void 0,x),d=Qn(),a!==null&&!da?(eu(a,s,x),xl(a,s,x)):(wn&&d&&Xc(s),s.flags|=1,Na(a,s,c,x),s.child)}function Ub(a,s,c,d,x,y){return ui(s),s.updateQueue=null,c=hl(s,d,c,x),_o(a),d=Qn(),a!==null&&!da?(eu(a,s,y),xl(a,s,y)):(wn&&d&&Xc(s),s.flags|=1,Na(a,s,c,y),s.child)}function zb(a,s,c,d,x){if(ui(s),s.stateNode===null){var y=Hr,D=c.contextType;typeof D=="object"&&D!==null&&(y=Ir(D)),y=new c(d,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Q0,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=d,y.state=s.memoizedState,y.refs={},pe(s),D=c.contextType,y.context=typeof D=="object"&&D!==null?Ir(D):Hr,y.state=s.memoizedState,D=c.getDerivedStateFromProps,typeof D=="function"&&(X0(s,c,D,d),y.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(D=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),D!==y.state&&Q0.enqueueReplaceState(y,y.state,null),ct(s,d,y,x),St(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(a===null){y=s.stateNode;var X=s.memoizedProps,le=uu(c,X);y.props=le;var Ie=y.context,ze=c.contextType;D=Hr,typeof ze=="object"&&ze!==null&&(D=Ir(ze));var $e=c.getDerivedStateFromProps;ze=typeof $e=="function"||typeof y.getSnapshotBeforeUpdate=="function",X=s.pendingProps!==X,ze||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(X||Ie!==D)&&jb(s,y,d,D),Me=!1;var De=s.memoizedState;y.state=De,ct(s,d,y,x),St(),Ie=s.memoizedState,X||De!==Ie||Me?(typeof $e=="function"&&(X0(s,c,$e,d),Ie=s.memoizedState),(le=Me||Tb(s,c,le,d,De,Ie,D))?(ze||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=Ie),y.props=d,y.state=Ie,y.context=D,d=le):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{y=s.stateNode,be(a,s),D=s.memoizedProps,ze=uu(c,D),y.props=ze,$e=s.pendingProps,De=y.context,Ie=c.contextType,le=Hr,typeof Ie=="object"&&Ie!==null&&(le=Ir(Ie)),X=c.getDerivedStateFromProps,(Ie=typeof X=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(D!==$e||De!==le)&&jb(s,y,d,le),Me=!1,De=s.memoizedState,y.state=De,ct(s,d,y,x),St();var Oe=s.memoizedState;D!==$e||De!==Oe||Me||a!==null&&a.dependencies!==null&&Fu(a.dependencies)?(typeof X=="function"&&(X0(s,c,X,d),Oe=s.memoizedState),(ze=Me||Tb(s,c,ze,d,De,Oe,le)||a!==null&&a.dependencies!==null&&Fu(a.dependencies))?(Ie||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,Oe,le),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,Oe,le)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||D===a.memoizedProps&&De===a.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&De===a.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Oe),y.props=d,y.state=Oe,y.context=le,d=ze):(typeof y.componentDidUpdate!="function"||D===a.memoizedProps&&De===a.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&De===a.memoizedState||(s.flags|=1024),d=!1)}return y=d,Gf(a,s),d=(s.flags&128)!==0,y||d?(y=s.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,a!==null&&d?(s.child=Ku(s,a.child,null,x),s.child=Ku(s,null,c,x)):Na(a,s,c,x),s.memoizedState=y.state,a=s.child):a=xl(a,s,x),a}function qb(a,s,c,d){return ns(),s.flags|=256,Na(a,s,c,d),s.child}var ep={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tp(a){return{baseLanes:a,cachePool:U()}}function np(a,s,c){return a=a!==null?a.childLanes&~c:0,s&&(a|=fi),a}function Hb(a,s,c){var d=s.pendingProps,x=!1,y=(s.flags&128)!==0,D;if((D=y)||(D=a!==null&&a.memoizedState===null?!1:(na.current&2)!==0),D&&(x=!0,s.flags&=-129),D=(s.flags&32)!==0,s.flags&=-33,a===null){if(wn){if(x?tc(s):nc(),wn){var X=lr,le;if(le=X){e:{for(le=X,X=oi;le.nodeType!==8;){if(!X){X=null;break e}if(le=zi(le.nextSibling),le===null){X=null;break e}}X=le}X!==null?(s.memoizedState={dehydrated:X,treeContext:ll!==null?{id:Ii,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},le=ua(18,null,null,0),le.stateNode=X,le.return=s,s.child=le,Rr=s,lr=null,le=!0):le=!1}le||ul(s)}if(X=s.memoizedState,X!==null&&(X=X.dehydrated,X!==null))return Vp(X)?s.lanes=32:s.lanes=536870912,null;gl(s)}return X=d.children,d=d.fallback,x?(nc(),x=s.mode,X=Kf({mode:"hidden",children:X},x),d=Ci(d,x,c,null),X.return=s,d.return=s,X.sibling=d,s.child=X,x=s.child,x.memoizedState=tp(c),x.childLanes=np(a,D,c),s.memoizedState=ep,d):(tc(s),rp(s,X))}if(le=a.memoizedState,le!==null&&(X=le.dehydrated,X!==null)){if(y)s.flags&256?(tc(s),s.flags&=-257,s=ap(a,s,c)):s.memoizedState!==null?(nc(),s.child=a.child,s.flags|=128,s=null):(nc(),x=d.fallback,X=s.mode,d=Kf({mode:"visible",children:d.children},X),x=Ci(x,X,c,null),x.flags|=2,d.return=s,x.return=s,d.sibling=x,s.child=d,Ku(s,a.child,null,c),d=s.child,d.memoizedState=tp(c),d.childLanes=np(a,D,c),s.memoizedState=ep,s=x);else if(tc(s),Vp(X)){if(D=X.nextSibling&&X.nextSibling.dataset,D)var Ie=D.dgst;D=Ie,d=Error(r(419)),d.stack="",d.digest=D,Yl({value:d,source:null,stack:null}),s=ap(a,s,c)}else if(da||$l(a,s,c,!1),D=(c&a.childLanes)!==0,da||D){if(D=Jn,D!==null&&(d=c&-c,d=(d&42)!==0?1:ja(d),d=(d&(D.suspendedLanes|c))!==0?0:d,d!==0&&d!==le.retryLane))throw le.retryLane=d,ki(a,d),qs(D,a,d),Db;X.data==="$?"||Np(),s=ap(a,s,c)}else X.data==="$?"?(s.flags|=192,s.child=a.child,s=null):(a=le.treeContext,lr=zi(X.nextSibling),Rr=s,wn=!0,yo=null,oi=!1,a!==null&&(gs[ts++]=Ii,gs[ts++]=Li,gs[ts++]=ll,Ii=a.id,Li=a.overflow,ll=s),s=rp(s,d.children),s.flags|=4096);return s}return x?(nc(),x=d.fallback,X=s.mode,le=a.child,Ie=le.sibling,d=ii(le,{mode:"hidden",children:d.children}),d.subtreeFlags=le.subtreeFlags&65011712,Ie!==null?x=ii(Ie,x):(x=Ci(x,X,c,null),x.flags|=2),x.return=s,d.return=s,d.sibling=x,s.child=d,d=x,x=s.child,X=a.child.memoizedState,X===null?X=tp(c):(le=X.cachePool,le!==null?(Ie=Lr._currentValue,le=le.parent!==Ie?{parent:Ie,pool:Ie}:le):le=U(),X={baseLanes:X.baseLanes|c,cachePool:le}),x.memoizedState=X,x.childLanes=np(a,D,c),s.memoizedState=ep,d):(tc(s),c=a.child,a=c.sibling,c=ii(c,{mode:"visible",children:d.children}),c.return=s,c.sibling=null,a!==null&&(D=s.deletions,D===null?(s.deletions=[a],s.flags|=16):D.push(a)),s.child=c,s.memoizedState=null,c)}function rp(a,s){return s=Kf({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function Kf(a,s){return a=ua(22,a,null,s),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function ap(a,s,c){return Ku(s,a.child,null,c),a=rp(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function Wb(a,s,c){a.lanes|=s;var d=a.alternate;d!==null&&(d.lanes|=s),Ou(a.return,s,c)}function sp(a,s,c,d,x){var y=a.memoizedState;y===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:x}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=c,y.tailMode=x)}function Gb(a,s,c){var d=s.pendingProps,x=d.revealOrder,y=d.tail;if(Na(a,s,d.children,c),d=na.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Wb(a,c,s);else if(a.tag===19)Wb(a,c,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}switch(K(na,d),x){case"forwards":for(c=s.child,x=null;c!==null;)a=c.alternate,a!==null&&qf(a)===null&&(x=c),c=c.sibling;c=x,c===null?(x=s.child,s.child=null):(x=c.sibling,c.sibling=null),sp(s,!1,x,c,y);break;case"backwards":for(c=null,x=s.child,s.child=null;x!==null;){if(a=x.alternate,a!==null&&qf(a)===null){s.child=x;break}a=x.sibling,x.sibling=c,c=x,x=a}sp(s,!0,c,null,y);break;case"together":sp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function xl(a,s,c){if(a!==null&&(s.dependencies=a.dependencies),oc|=s.lanes,(c&s.childLanes)===0)if(a!==null){if($l(a,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(r(153));if(s.child!==null){for(a=s.child,c=ii(a,a.pendingProps),s.child=c,c.return=s;a.sibling!==null;)a=a.sibling,c=c.sibling=ii(a,a.pendingProps),c.return=s;c.sibling=null}return s.child}function ip(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&Fu(a)))}function G3(a,s,c){switch(s.tag){case 3:_e(s,s.stateNode.containerInfo),wo(s,Lr,a.memoizedState.cache),ns();break;case 27:case 5:tt(s);break;case 4:_e(s,s.stateNode.containerInfo);break;case 10:wo(s,s.type,s.memoizedProps.value);break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(tc(s),s.flags|=128,null):(c&s.child.childLanes)!==0?Hb(a,s,c):(tc(s),a=xl(a,s,c),a!==null?a.sibling:null);tc(s);break;case 19:var x=(a.flags&128)!==0;if(d=(c&s.childLanes)!==0,d||($l(a,s,c,!1),d=(c&s.childLanes)!==0),x){if(d)return Gb(a,s,c);s.flags|=128}if(x=s.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),K(na,na.current),d)break;return null;case 22:case 23:return s.lanes=0,Vb(a,s,c);case 24:wo(s,Lr,a.memoizedState.cache)}return xl(a,s,c)}function Kb(a,s,c){if(a!==null)if(a.memoizedProps!==s.pendingProps)da=!0;else{if(!ip(a,c)&&(s.flags&128)===0)return da=!1,G3(a,s,c);da=(a.flags&131072)!==0}else da=!1,wn&&(s.flags&1048576)!==0&&_f(s,Du,s.index);switch(s.lanes=0,s.tag){case 16:e:{a=s.pendingProps;var d=s.elementType,x=d._init;if(d=x(d._payload),s.type=d,typeof d=="function")Gl(d)?(a=uu(d,a),s.tag=1,s=zb(null,s,d,a,c)):(s.tag=0,s=Z0(null,s,d,a,c));else{if(d!=null){if(x=d.$$typeof,x===ee){s.tag=11,s=Ob(null,s,d,a,c);break e}else if(x===W){s.tag=14,s=Mb(null,s,d,a,c);break e}}throw s=ce(d)||d,Error(r(306,s,""))}}return s;case 0:return Z0(a,s,s.type,s.pendingProps,c);case 1:return d=s.type,x=uu(d,s.pendingProps),zb(a,s,d,x,c);case 3:e:{if(_e(s,s.stateNode.containerInfo),a===null)throw Error(r(387));d=s.pendingProps;var y=s.memoizedState;x=y.element,be(a,s),ct(s,d,null,c);var D=s.memoizedState;if(d=D.cache,wo(s,Lr,d),d!==y.cache&&Mu(s,[Lr],c,!0),St(),d=D.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:D.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=qb(a,s,d,c);break e}else if(d!==x){x=en(Error(r(424)),s),Yl(x),s=qb(a,s,d,c);break e}else{switch(a=s.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(lr=zi(a.firstChild),Rr=s,wn=!0,yo=null,oi=!0,c=Sb(s,null,d,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(ns(),d===x){s=xl(a,s,c);break e}Na(a,s,d,c)}s=s.child}return s;case 26:return Gf(a,s),a===null?(c=Qv(s.type,null,s.pendingProps,null))?s.memoizedState=c:wn||(c=s.type,a=s.pendingProps,d=om(ue.current).createElement(c),d[Cn]=s,d[Rn]=a,Aa(d,c,a),Nn(d),s.stateNode=d):s.memoizedState=Qv(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:return tt(s),a===null&&wn&&(d=s.stateNode=Yv(s.type,s.pendingProps,ue.current),Rr=s,oi=!0,x=lr,dc(s.type)?(Bp=x,lr=zi(d.firstChild)):lr=x),Na(a,s,s.pendingProps.children,c),Gf(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&wn&&((x=d=lr)&&(d=y4(d,s.type,s.pendingProps,oi),d!==null?(s.stateNode=d,Rr=s,lr=zi(d.firstChild),oi=!1,x=!0):x=!1),x||ul(s)),tt(s),x=s.type,y=s.pendingProps,D=a!==null?a.memoizedProps:null,d=y.children,Op(x,y)?d=null:D!==null&&Op(x,D)&&(s.flags|=32),s.memoizedState!==null&&(x=Ms(a,s,Ao,null,null,c),Ah._currentValue=x),Gf(a,s),Na(a,s,d,c),s.child;case 6:return a===null&&wn&&((a=c=lr)&&(c=w4(c,s.pendingProps,oi),c!==null?(s.stateNode=c,Rr=s,lr=null,a=!0):a=!1),a||ul(s)),null;case 13:return Hb(a,s,c);case 4:return _e(s,s.stateNode.containerInfo),d=s.pendingProps,a===null?s.child=Ku(s,null,d,c):Na(a,s,d,c),s.child;case 11:return Ob(a,s,s.type,s.pendingProps,c);case 7:return Na(a,s,s.pendingProps,c),s.child;case 8:return Na(a,s,s.pendingProps.children,c),s.child;case 12:return Na(a,s,s.pendingProps.children,c),s.child;case 10:return d=s.pendingProps,wo(s,s.type,d.value),Na(a,s,d.children,c),s.child;case 9:return x=s.type._context,d=s.pendingProps.children,ui(s),x=Ir(x),d=d(x),s.flags|=1,Na(a,s,d,c),s.child;case 14:return Mb(a,s,s.type,s.pendingProps,c);case 15:return Fb(a,s,s.type,s.pendingProps,c);case 19:return Gb(a,s,c);case 31:return d=s.pendingProps,c=s.mode,d={mode:d.mode,children:d.children},a===null?(c=Kf(d,c),c.ref=s.ref,s.child=c,c.return=s,s=c):(c=ii(a.child,d),c.ref=s.ref,s.child=c,c.return=s,s=c),s;case 22:return Vb(a,s,c);case 24:return ui(s),d=Ir(Lr),a===null?(x=A(),x===null&&(x=Jn,y=Kd(),x.pooledCache=y,y.refCount++,y!==null&&(x.pooledCacheLanes|=c),x=y),s.memoizedState={parent:d,cache:x},pe(s),wo(s,Lr,x)):((a.lanes&c)!==0&&(be(a,s),ct(s,null,null,c),St()),x=a.memoizedState,y=s.memoizedState,x.parent!==d?(x={parent:d,cache:d},s.memoizedState=x,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=x),wo(s,Lr,d)):(d=y.cache,wo(s,Lr,d),d!==x.cache&&Mu(s,[Lr],c,!0))),Na(a,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function bl(a){a.flags|=4}function Yb(a,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!n1(s)){if(s=hi.current,s!==null&&((xn&4194048)===xn?To!==null:(xn&62914560)!==xn&&(xn&536870912)===0||s!==To))throw Te=Z,G;a.flags|=8192}}function Yf(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?kn():536870912,a.lanes|=s,Qu|=s)}function ch(a,s){if(!wn)switch(a.tailMode){case"hidden":s=a.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function pr(a){var s=a.alternate!==null&&a.alternate.child===a.child,c=0,d=0;if(s)for(var x=a.child;x!==null;)c|=x.lanes|x.childLanes,d|=x.subtreeFlags&65011712,d|=x.flags&65011712,x.return=a,x=x.sibling;else for(x=a.child;x!==null;)c|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=a,x=x.sibling;return a.subtreeFlags|=d,a.childLanes=c,s}function K3(a,s,c){var d=s.pendingProps;switch(Qc(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(s),null;case 1:return pr(s),null;case 3:return c=s.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),ci(Lr),Pe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(ya(s)?bl(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Sf())),pr(s),null;case 26:return c=s.memoizedState,a===null?(bl(s),c!==null?(pr(s),Yb(s,c)):(pr(s),s.flags&=-16777217)):c?c!==a.memoizedState?(bl(s),pr(s),Yb(s,c)):(pr(s),s.flags&=-16777217):(a.memoizedProps!==d&&bl(s),pr(s),s.flags&=-16777217),null;case 27:Je(s),c=ue.current;var x=s.type;if(a!==null&&s.stateNode!=null)a.memoizedProps!==d&&bl(s);else{if(!d){if(s.stateNode===null)throw Error(r(166));return pr(s),null}a=te.current,ya(s)?Af(s):(a=Yv(x,d,c),s.stateNode=a,bl(s))}return pr(s),null;case 5:if(Je(s),c=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==d&&bl(s);else{if(!d){if(s.stateNode===null)throw Error(r(166));return pr(s),null}if(a=te.current,ya(s))Af(s);else{switch(x=om(ue.current),a){case 1:a=x.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=x.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=x.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=x.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=x.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof d.is=="string"?x.createElement("select",{is:d.is}):x.createElement("select"),d.multiple?a.multiple=!0:d.size&&(a.size=d.size);break;default:a=typeof d.is=="string"?x.createElement(c,{is:d.is}):x.createElement(c)}}a[Cn]=s,a[Rn]=d;e:for(x=s.child;x!==null;){if(x.tag===5||x.tag===6)a.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===s)break e;for(;x.sibling===null;){if(x.return===null||x.return===s)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}s.stateNode=a;e:switch(Aa(a,c,d),c){case"button":case"input":case"select":case"textarea":a=!!d.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&bl(s)}}return pr(s),s.flags&=-16777217,null;case 6:if(a&&s.stateNode!=null)a.memoizedProps!==d&&bl(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(r(166));if(a=ue.current,ya(s)){if(a=s.stateNode,c=s.memoizedProps,d=null,x=Rr,x!==null)switch(x.tag){case 27:case 5:d=x.memoizedProps}a[Cn]=s,a=!!(a.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Uv(a.nodeValue,c)),a||ul(s)}else a=om(a).createTextNode(d),a[Cn]=s,s.stateNode=a}return pr(s),null;case 13:if(d=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(x=ya(s),d!==null&&d.dehydrated!==null){if(a===null){if(!x)throw Error(r(318));if(x=s.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[Cn]=s}else ns(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pr(s),x=!1}else x=Sf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=x),x=!0;if(!x)return s.flags&256?(gl(s),s):(gl(s),null)}if(gl(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=d!==null,a=a!==null&&a.memoizedState!==null,c){d=s.child,x=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(x=d.alternate.memoizedState.cachePool.pool);var y=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==x&&(d.flags|=2048)}return c!==a&&c&&(s.child.flags|=8192),Yf(s,s.updateQueue),pr(s),null;case 4:return Pe(),a===null&&Rp(s.stateNode.containerInfo),pr(s),null;case 10:return ci(s.type),pr(s),null;case 19:if(F(na),x=s.memoizedState,x===null)return pr(s),null;if(d=(s.flags&128)!==0,y=x.rendering,y===null)if(d)ch(x,!1);else{if(Sr!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(y=qf(a),y!==null){for(s.flags|=128,ch(x,!1),a=y.updateQueue,s.updateQueue=a,Yf(s,a),s.subtreeFlags=0,a=c,c=s.child;c!==null;)Yc(c,a),c=c.sibling;return K(na,na.current&1|2),s.child}a=a.sibling}x.tail!==null&&At()>Qf&&(s.flags|=128,d=!0,ch(x,!1),s.lanes=4194304)}else{if(!d)if(a=qf(y),a!==null){if(s.flags|=128,d=!0,a=a.updateQueue,s.updateQueue=a,Yf(s,a),ch(x,!0),x.tail===null&&x.tailMode==="hidden"&&!y.alternate&&!wn)return pr(s),null}else 2*At()-x.renderingStartTime>Qf&&c!==536870912&&(s.flags|=128,d=!0,ch(x,!1),s.lanes=4194304);x.isBackwards?(y.sibling=s.child,s.child=y):(a=x.last,a!==null?a.sibling=y:s.child=y,x.last=y)}return x.tail!==null?(s=x.tail,x.rendering=s,x.tail=s.sibling,x.renderingStartTime=At(),s.sibling=null,a=na.current,K(na,d?a&1|2:a&1),s):(pr(s),null);case 22:case 23:return gl(s),Ht(),d=s.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(c&536870912)!==0&&(s.flags&128)===0&&(pr(s),s.subtreeFlags&6&&(s.flags|=8192)):pr(s),c=s.updateQueue,c!==null&&Yf(s,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048),a!==null&&F(b),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ci(Lr),pr(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Y3(a,s){switch(Qc(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return ci(Lr),Pe(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return Je(s),null;case 13:if(gl(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ns()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return F(na),null;case 4:return Pe(),null;case 10:return ci(s.type),null;case 22:case 23:return gl(s),Ht(),a!==null&&F(b),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return ci(Lr),null;case 25:return null;default:return null}}function $b(a,s){switch(Qc(s),s.tag){case 3:ci(Lr),Pe();break;case 26:case 27:case 5:Je(s);break;case 4:Pe();break;case 13:gl(s);break;case 19:F(na);break;case 10:ci(s.type);break;case 22:case 23:gl(s),Ht(),a!==null&&F(b);break;case 24:ci(Lr)}}function uh(a,s){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var x=d.next;c=x;do{if((c.tag&a)===a){d=void 0;var y=c.create,D=c.inst;d=y(),D.destroy=d}c=c.next}while(c!==x)}}catch(X){Kn(s,s.return,X)}}function rc(a,s,c){try{var d=s.updateQueue,x=d!==null?d.lastEffect:null;if(x!==null){var y=x.next;d=y;do{if((d.tag&a)===a){var D=d.inst,X=D.destroy;if(X!==void 0){D.destroy=void 0,x=s;var le=c,Ie=X;try{Ie()}catch(ze){Kn(x,le,ze)}}}d=d.next}while(d!==y)}}catch(ze){Kn(s,s.return,ze)}}function Xb(a){var s=a.updateQueue;if(s!==null){var c=a.stateNode;try{Sn(s,c)}catch(d){Kn(a,a.return,d)}}}function Qb(a,s,c){c.props=uu(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(d){Kn(a,s,d)}}function dh(a,s){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof c=="function"?a.refCleanup=c(d):c.current=d}}catch(x){Kn(a,s,x)}}function jo(a,s){var c=a.ref,d=a.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(x){Kn(a,s,x)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(x){Kn(a,s,x)}else c.current=null}function Jb(a){var s=a.type,c=a.memoizedProps,d=a.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(x){Kn(a,a.return,x)}}function op(a,s,c){try{var d=a.stateNode;p4(d,a.type,c,s),d[Rn]=s}catch(x){Kn(a,a.return,x)}}function Zb(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&dc(a.type)||a.tag===4}function lp(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Zb(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&dc(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function cp(a,s,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(a),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=im));else if(d!==4&&(d===27&&dc(a.type)&&(c=a.stateNode,s=null),a=a.child,a!==null))for(cp(a,s,c),a=a.sibling;a!==null;)cp(a,s,c),a=a.sibling}function $f(a,s,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,s?c.insertBefore(a,s):c.appendChild(a);else if(d!==4&&(d===27&&dc(a.type)&&(c=a.stateNode),a=a.child,a!==null))for($f(a,s,c),a=a.sibling;a!==null;)$f(a,s,c),a=a.sibling}function ev(a){var s=a.stateNode,c=a.memoizedProps;try{for(var d=a.type,x=s.attributes;x.length;)s.removeAttributeNode(x[0]);Aa(s,d,c),s[Cn]=a,s[Rn]=c}catch(y){Kn(a,a.return,y)}}var vl=!1,Dr=!1,up=!1,tv=typeof WeakSet=="function"?WeakSet:Set,ha=null;function $3(a,s){if(a=a.containerInfo,Pp=fm,a=va(a),ta(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var x=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var D=0,X=-1,le=-1,Ie=0,ze=0,$e=a,De=null;t:for(;;){for(var Oe;$e!==c||x!==0&&$e.nodeType!==3||(X=D+x),$e!==y||d!==0&&$e.nodeType!==3||(le=D+d),$e.nodeType===3&&(D+=$e.nodeValue.length),(Oe=$e.firstChild)!==null;)De=$e,$e=Oe;for(;;){if($e===a)break t;if(De===c&&++Ie===x&&(X=D),De===y&&++ze===d&&(le=D),(Oe=$e.nextSibling)!==null)break;$e=De,De=$e.parentNode}$e=Oe}c=X===-1||le===-1?null:{start:X,end:le}}else c=null}c=c||{start:0,end:0}}else c=null;for(Dp={focusedElem:a,selectionRange:c},fm=!1,ha=s;ha!==null;)if(s=ha,a=s.child,(s.subtreeFlags&1024)!==0&&a!==null)a.return=s,ha=a;else for(;ha!==null;){switch(s=ha,y=s.alternate,a=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&y!==null){a=void 0,c=s,x=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var zt=uu(c.type,x,c.elementType===c.type);a=d.getSnapshotBeforeUpdate(zt,y),d.__reactInternalSnapshotBeforeUpdate=a}catch(Pt){Kn(c,c.return,Pt)}}break;case 3:if((a&1024)!==0){if(a=s.stateNode.containerInfo,c=a.nodeType,c===9)Fp(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Fp(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=s.sibling,a!==null){a.return=s.return,ha=a;break}ha=s.return}}function nv(a,s,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:ac(a,c),d&4&&uh(5,c);break;case 1:if(ac(a,c),d&4)if(a=c.stateNode,s===null)try{a.componentDidMount()}catch(D){Kn(c,c.return,D)}else{var x=uu(c.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(x,s,a.__reactInternalSnapshotBeforeUpdate)}catch(D){Kn(c,c.return,D)}}d&64&&Xb(c),d&512&&dh(c,c.return);break;case 3:if(ac(a,c),d&64&&(a=c.updateQueue,a!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{Sn(a,s)}catch(D){Kn(c,c.return,D)}}break;case 27:s===null&&d&4&&ev(c);case 26:case 5:ac(a,c),s===null&&d&4&&Jb(c),d&512&&dh(c,c.return);break;case 12:ac(a,c);break;case 13:ac(a,c),d&4&&sv(a,c),d&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=a4.bind(null,c),N4(a,c))));break;case 22:if(d=c.memoizedState!==null||vl,!d){s=s!==null&&s.memoizedState!==null||Dr,x=vl;var y=Dr;vl=d,(Dr=s)&&!y?sc(a,c,(c.subtreeFlags&8772)!==0):ac(a,c),vl=x,Dr=y}break;case 30:break;default:ac(a,c)}}function rv(a){var s=a.alternate;s!==null&&(a.alternate=null,rv(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&Ur(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var cr=null,bs=!1;function yl(a,s,c){for(c=c.child;c!==null;)av(a,s,c),c=c.sibling}function av(a,s,c){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(wt,c)}catch{}switch(c.tag){case 26:Dr||jo(c,s),yl(a,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Dr||jo(c,s);var d=cr,x=bs;dc(c.type)&&(cr=c.stateNode,bs=!1),yl(a,s,c),yh(c.stateNode),cr=d,bs=x;break;case 5:Dr||jo(c,s);case 6:if(d=cr,x=bs,cr=null,yl(a,s,c),cr=d,bs=x,cr!==null)if(bs)try{(cr.nodeType===9?cr.body:cr.nodeName==="HTML"?cr.ownerDocument.body:cr).removeChild(c.stateNode)}catch(y){Kn(c,s,y)}else try{cr.removeChild(c.stateNode)}catch(y){Kn(c,s,y)}break;case 18:cr!==null&&(bs?(a=cr,Gv(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),jh(a)):Gv(cr,c.stateNode));break;case 4:d=cr,x=bs,cr=c.stateNode.containerInfo,bs=!0,yl(a,s,c),cr=d,bs=x;break;case 0:case 11:case 14:case 15:Dr||rc(2,c,s),Dr||rc(4,c,s),yl(a,s,c);break;case 1:Dr||(jo(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Qb(c,s,d)),yl(a,s,c);break;case 21:yl(a,s,c);break;case 22:Dr=(d=Dr)||c.memoizedState!==null,yl(a,s,c),Dr=d;break;default:yl(a,s,c)}}function sv(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{jh(a)}catch(c){Kn(s,s.return,c)}}function X3(a){switch(a.tag){case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new tv),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new tv),s;default:throw Error(r(435,a.tag))}}function dp(a,s){var c=X3(a);s.forEach(function(d){var x=s4.bind(null,a,d);c.has(d)||(c.add(d),d.then(x,x))})}function Vs(a,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var x=c[d],y=a,D=s,X=D;e:for(;X!==null;){switch(X.tag){case 27:if(dc(X.type)){cr=X.stateNode,bs=!1;break e}break;case 5:cr=X.stateNode,bs=!1;break e;case 3:case 4:cr=X.stateNode.containerInfo,bs=!0;break e}X=X.return}if(cr===null)throw Error(r(160));av(y,D,x),cr=null,bs=!1,y=x.alternate,y!==null&&(y.return=null),x.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)iv(s,a),s=s.sibling}var Ui=null;function iv(a,s){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Vs(s,a),Bs(a),d&4&&(rc(3,a,a.return),uh(3,a),rc(5,a,a.return));break;case 1:Vs(s,a),Bs(a),d&512&&(Dr||c===null||jo(c,c.return)),d&64&&vl&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var x=Ui;if(Vs(s,a),Bs(a),d&512&&(Dr||c===null||jo(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=a.memoizedState,c===null)if(d===null)if(a.stateNode===null){e:{d=a.type,c=a.memoizedProps,x=x.ownerDocument||x;t:switch(d){case"title":y=x.getElementsByTagName("title")[0],(!y||y[xa]||y[Cn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=x.createElement(d),x.head.insertBefore(y,x.querySelector("head > title"))),Aa(y,d,c),y[Cn]=a,Nn(y),d=y;break e;case"link":var D=e1("link","href",x).get(d+(c.href||""));if(D){for(var X=0;X<D.length;X++)if(y=D[X],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){D.splice(X,1);break t}}y=x.createElement(d),Aa(y,d,c),x.head.appendChild(y);break;case"meta":if(D=e1("meta","content",x).get(d+(c.content||""))){for(X=0;X<D.length;X++)if(y=D[X],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){D.splice(X,1);break t}}y=x.createElement(d),Aa(y,d,c),x.head.appendChild(y);break;default:throw Error(r(468,d))}y[Cn]=a,Nn(y),d=y}a.stateNode=d}else t1(x,a.type,a.stateNode);else a.stateNode=Zv(x,d,a.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?t1(x,a.type,a.stateNode):Zv(x,d,a.memoizedProps)):d===null&&a.stateNode!==null&&op(a,a.memoizedProps,c.memoizedProps)}break;case 27:Vs(s,a),Bs(a),d&512&&(Dr||c===null||jo(c,c.return)),c!==null&&d&4&&op(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Vs(s,a),Bs(a),d&512&&(Dr||c===null||jo(c,c.return)),a.flags&32){x=a.stateNode;try{Ca(x,"")}catch(Oe){Kn(a,a.return,Oe)}}d&4&&a.stateNode!=null&&(x=a.memoizedProps,op(a,x,c!==null?c.memoizedProps:x)),d&1024&&(up=!0);break;case 6:if(Vs(s,a),Bs(a),d&4){if(a.stateNode===null)throw Error(r(162));d=a.memoizedProps,c=a.stateNode;try{c.nodeValue=d}catch(Oe){Kn(a,a.return,Oe)}}break;case 3:if(um=null,x=Ui,Ui=lm(s.containerInfo),Vs(s,a),Ui=x,Bs(a),d&4&&c!==null&&c.memoizedState.isDehydrated)try{jh(s.containerInfo)}catch(Oe){Kn(a,a.return,Oe)}up&&(up=!1,ov(a));break;case 4:d=Ui,Ui=lm(a.stateNode.containerInfo),Vs(s,a),Bs(a),Ui=d;break;case 12:Vs(s,a),Bs(a);break;case 13:Vs(s,a),Bs(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(xp=At()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,dp(a,d)));break;case 22:x=a.memoizedState!==null;var le=c!==null&&c.memoizedState!==null,Ie=vl,ze=Dr;if(vl=Ie||x,Dr=ze||le,Vs(s,a),Dr=ze,vl=Ie,Bs(a),d&8192)e:for(s=a.stateNode,s._visibility=x?s._visibility&-2:s._visibility|1,x&&(c===null||le||vl||Dr||du(a)),c=null,s=a;;){if(s.tag===5||s.tag===26){if(c===null){le=c=s;try{if(y=le.stateNode,x)D=y.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{X=le.stateNode;var $e=le.memoizedProps.style,De=$e!=null&&$e.hasOwnProperty("display")?$e.display:null;X.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(Oe){Kn(le,le.return,Oe)}}}else if(s.tag===6){if(c===null){le=s;try{le.stateNode.nodeValue=x?"":le.memoizedProps}catch(Oe){Kn(le,le.return,Oe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=a.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,dp(a,c))));break;case 19:Vs(s,a),Bs(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,dp(a,d)));break;case 30:break;case 21:break;default:Vs(s,a),Bs(a)}}function Bs(a){var s=a.flags;if(s&2){try{for(var c,d=a.return;d!==null;){if(Zb(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var x=c.stateNode,y=lp(a);$f(a,y,x);break;case 5:var D=c.stateNode;c.flags&32&&(Ca(D,""),c.flags&=-33);var X=lp(a);$f(a,X,D);break;case 3:case 4:var le=c.stateNode.containerInfo,Ie=lp(a);cp(a,Ie,le);break;default:throw Error(r(161))}}catch(ze){Kn(a,a.return,ze)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function ov(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;ov(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),a=a.sibling}}function ac(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)nv(a,s.alternate,s),s=s.sibling}function du(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:rc(4,s,s.return),du(s);break;case 1:jo(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&Qb(s,s.return,c),du(s);break;case 27:yh(s.stateNode);case 26:case 5:jo(s,s.return),du(s);break;case 22:s.memoizedState===null&&du(s);break;case 30:du(s);break;default:du(s)}a=a.sibling}}function sc(a,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,x=a,y=s,D=y.flags;switch(y.tag){case 0:case 11:case 15:sc(x,y,c),uh(4,y);break;case 1:if(sc(x,y,c),d=y,x=d.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Ie){Kn(d,d.return,Ie)}if(d=y,x=d.updateQueue,x!==null){var X=d.stateNode;try{var le=x.shared.hiddenCallbacks;if(le!==null)for(x.shared.hiddenCallbacks=null,x=0;x<le.length;x++)pn(le[x],X)}catch(Ie){Kn(d,d.return,Ie)}}c&&D&64&&Xb(y),dh(y,y.return);break;case 27:ev(y);case 26:case 5:sc(x,y,c),c&&d===null&&D&4&&Jb(y),dh(y,y.return);break;case 12:sc(x,y,c);break;case 13:sc(x,y,c),c&&D&4&&sv(x,y);break;case 22:y.memoizedState===null&&sc(x,y,c),dh(y,y.return);break;case 30:break;default:sc(x,y,c)}s=s.sibling}}function hp(a,s){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&Jc(c))}function fp(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&Jc(a))}function ko(a,s,c,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)lv(a,s,c,d),s=s.sibling}function lv(a,s,c,d){var x=s.flags;switch(s.tag){case 0:case 11:case 15:ko(a,s,c,d),x&2048&&uh(9,s);break;case 1:ko(a,s,c,d);break;case 3:ko(a,s,c,d),x&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&Jc(a)));break;case 12:if(x&2048){ko(a,s,c,d),a=s.stateNode;try{var y=s.memoizedProps,D=y.id,X=y.onPostCommit;typeof X=="function"&&X(D,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(le){Kn(s,s.return,le)}}else ko(a,s,c,d);break;case 13:ko(a,s,c,d);break;case 23:break;case 22:y=s.stateNode,D=s.alternate,s.memoizedState!==null?y._visibility&2?ko(a,s,c,d):hh(a,s):y._visibility&2?ko(a,s,c,d):(y._visibility|=2,Yu(a,s,c,d,(s.subtreeFlags&10256)!==0)),x&2048&&hp(D,s);break;case 24:ko(a,s,c,d),x&2048&&fp(s.alternate,s);break;default:ko(a,s,c,d)}}function Yu(a,s,c,d,x){for(x=x&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var y=a,D=s,X=c,le=d,Ie=D.flags;switch(D.tag){case 0:case 11:case 15:Yu(y,D,X,le,x),uh(8,D);break;case 23:break;case 22:var ze=D.stateNode;D.memoizedState!==null?ze._visibility&2?Yu(y,D,X,le,x):hh(y,D):(ze._visibility|=2,Yu(y,D,X,le,x)),x&&Ie&2048&&hp(D.alternate,D);break;case 24:Yu(y,D,X,le,x),x&&Ie&2048&&fp(D.alternate,D);break;default:Yu(y,D,X,le,x)}s=s.sibling}}function hh(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=a,d=s,x=d.flags;switch(d.tag){case 22:hh(c,d),x&2048&&hp(d.alternate,d);break;case 24:hh(c,d),x&2048&&fp(d.alternate,d);break;default:hh(c,d)}s=s.sibling}}var fh=8192;function $u(a){if(a.subtreeFlags&fh)for(a=a.child;a!==null;)cv(a),a=a.sibling}function cv(a){switch(a.tag){case 26:$u(a),a.flags&fh&&a.memoizedState!==null&&D4(Ui,a.memoizedState,a.memoizedProps);break;case 5:$u(a);break;case 3:case 4:var s=Ui;Ui=lm(a.stateNode.containerInfo),$u(a),Ui=s;break;case 22:a.memoizedState===null&&(s=a.alternate,s!==null&&s.memoizedState!==null?(s=fh,fh=16777216,$u(a),fh=s):$u(a));break;default:$u(a)}}function uv(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function mh(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];ha=d,hv(d,a)}uv(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)dv(a),a=a.sibling}function dv(a){switch(a.tag){case 0:case 11:case 15:mh(a),a.flags&2048&&rc(9,a,a.return);break;case 3:mh(a);break;case 12:mh(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,Xf(a)):mh(a);break;default:mh(a)}}function Xf(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];ha=d,hv(d,a)}uv(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:rc(8,s,s.return),Xf(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Xf(s));break;default:Xf(s)}a=a.sibling}}function hv(a,s){for(;ha!==null;){var c=ha;switch(c.tag){case 0:case 11:case 15:rc(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Jc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,ha=d;else e:for(c=a;ha!==null;){d=ha;var x=d.sibling,y=d.return;if(rv(d),d===c){ha=null;break e}if(x!==null){x.return=y,ha=x;break e}ha=y}}}var Q3={getCacheForType:function(a){var s=Ir(Lr),c=s.data.get(a);return c===void 0&&(c=a(),s.data.set(a,c)),c}},J3=typeof WeakMap=="function"?WeakMap:Map,Mn=0,Jn=null,on=null,xn=0,Fn=0,Us=null,ic=!1,Xu=!1,mp=!1,wl=0,Sr=0,oc=0,hu=0,pp=0,fi=0,Qu=0,ph=null,vs=null,gp=!1,xp=0,Qf=1/0,Jf=null,lc=null,_a=0,cc=null,Ju=null,Zu=0,bp=0,vp=null,fv=null,gh=0,yp=null;function zs(){if((Mn&2)!==0&&xn!==0)return xn&-xn;if(ae.T!==null){var a=dl;return a!==0?a:Tp()}return Qr()}function mv(){fi===0&&(fi=(xn&536870912)===0||wn?Xn():536870912);var a=hi.current;return a!==null&&(a.flags|=32),fi}function qs(a,s,c){(a===Jn&&(Fn===2||Fn===9)||a.cancelPendingCommit!==null)&&(ed(a,0),uc(a,xn,fi,!1)),Xr(a,c),((Mn&2)===0||a!==Jn)&&(a===Jn&&((Mn&2)===0&&(hu|=c),Sr===4&&uc(a,xn,fi,!1)),Co(a))}function pv(a,s,c){if((Mn&6)!==0)throw Error(r(327));var d=!c&&(s&124)===0&&(s&a.expiredLanes)===0||Br(a,s),x=d?t4(a,s):_p(a,s,!0),y=d;do{if(x===0){Xu&&!d&&uc(a,s,0,!1);break}else{if(c=a.current.alternate,y&&!Z3(c)){x=_p(a,s,!1),y=!1;continue}if(x===2){if(y=s,a.errorRecoveryDisabledLanes&y)var D=0;else D=a.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){s=D;e:{var X=a;x=ph;var le=X.current.memoizedState.isDehydrated;if(le&&(ed(X,D).flags|=256),D=_p(X,D,!1),D!==2){if(mp&&!le){X.errorRecoveryDisabledLanes|=y,hu|=y,x=4;break e}y=vs,vs=x,y!==null&&(vs===null?vs=y:vs.push.apply(vs,y))}x=D}if(y=!1,x!==2)continue}}if(x===1){ed(a,0),uc(a,s,0,!0);break}e:{switch(d=a,y=x,y){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:uc(d,s,fi,!ic);break e;case 2:vs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(x=xp+300-At(),10<x)){if(uc(d,s,fi,!ic),yn(d,0,!0)!==0)break e;d.timeoutHandle=Hv(gv.bind(null,d,c,vs,Jf,gp,s,fi,hu,Qu,ic,y,2,-0,0),x);break e}gv(d,c,vs,Jf,gp,s,fi,hu,Qu,ic,y,0,-0,0)}}break}while(!0);Co(a)}function gv(a,s,c,d,x,y,D,X,le,Ie,ze,$e,De,Oe){if(a.timeoutHandle=-1,$e=s.subtreeFlags,($e&8192||($e&16785408)===16785408)&&(_h={stylesheets:null,count:0,unsuspend:P4},cv(s),$e=O4(),$e!==null)){a.cancelPendingCommit=$e(_v.bind(null,a,s,y,c,d,x,D,X,le,ze,1,De,Oe)),uc(a,y,D,!Ie);return}_v(a,s,y,c,d,x,D,X,le)}function Z3(a){for(var s=a;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var x=c[d],y=x.getSnapshot;x=x.value;try{if(!qr(y(),x))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function uc(a,s,c,d){s&=~pp,s&=~hu,a.suspendedLanes|=s,a.pingedLanes&=~s,d&&(a.warmLanes|=s),d=a.expirationTimes;for(var x=s;0<x;){var y=31-Fe(x),D=1<<y;d[y]=-1,x&=~D}c!==0&&Tt(a,c,s)}function Zf(){return(Mn&6)===0?(xh(0),!1):!0}function wp(){if(on!==null){if(Fn===0)var a=on.return;else a=on,Di=Wr=null,Bu(a),Gu=null,oh=0,a=on;for(;a!==null;)$b(a.alternate,a),a=a.return;on=null}}function ed(a,s){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,x4(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),wp(),Jn=a,on=c=ii(a.current,null),xn=s,Fn=0,Us=null,ic=!1,Xu=Br(a,s),mp=!1,Qu=fi=pp=hu=oc=Sr=0,vs=ph=null,gp=!1,(s&8)!==0&&(s|=s&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=s;0<d;){var x=31-Fe(d),y=1<<x;s|=a[x],d&=~y}return wl=s,ms(),c}function xv(a,s){kt=null,ae.H=Bf,s===H||s===Y?(s=we(),Fn=3):s===G?(s=we(),Fn=4):Fn=s===Db?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Us=s,on===null&&(Sr=1,Wf(a,en(s,a.current)))}function bv(){var a=ae.H;return ae.H=Bf,a===null?Bf:a}function vv(){var a=ae.A;return ae.A=Q3,a}function Np(){Sr=4,ic||(xn&4194048)!==xn&&hi.current!==null||(Xu=!0),(oc&134217727)===0&&(hu&134217727)===0||Jn===null||uc(Jn,xn,fi,!1)}function _p(a,s,c){var d=Mn;Mn|=2;var x=bv(),y=vv();(Jn!==a||xn!==s)&&(Jf=null,ed(a,s)),s=!1;var D=Sr;e:do try{if(Fn!==0&&on!==null){var X=on,le=Us;switch(Fn){case 8:wp(),D=6;break e;case 3:case 2:case 9:case 6:hi.current===null&&(s=!0);var Ie=Fn;if(Fn=0,Us=null,td(a,X,le,Ie),c&&Xu){D=0;break e}break;default:Ie=Fn,Fn=0,Us=null,td(a,X,le,Ie)}}e4(),D=Sr;break}catch(ze){xv(a,ze)}while(!0);return s&&a.shellSuspendCounter++,Di=Wr=null,Mn=d,ae.H=x,ae.A=y,on===null&&(Jn=null,xn=0,ms()),D}function e4(){for(;on!==null;)yv(on)}function t4(a,s){var c=Mn;Mn|=2;var d=bv(),x=vv();Jn!==a||xn!==s?(Jf=null,Qf=At()+500,ed(a,s)):Xu=Br(a,s);e:do try{if(Fn!==0&&on!==null){s=on;var y=Us;t:switch(Fn){case 1:Fn=0,Us=null,td(a,s,y,1);break;case 2:case 9:if(ne(y)){Fn=0,Us=null,wv(s);break}s=function(){Fn!==2&&Fn!==9||Jn!==a||(Fn=7),Co(a)},y.then(s,s);break e;case 3:Fn=7;break e;case 4:Fn=5;break e;case 7:ne(y)?(Fn=0,Us=null,wv(s)):(Fn=0,Us=null,td(a,s,y,7));break;case 5:var D=null;switch(on.tag){case 26:D=on.memoizedState;case 5:case 27:var X=on;if(!D||n1(D)){Fn=0,Us=null;var le=X.sibling;if(le!==null)on=le;else{var Ie=X.return;Ie!==null?(on=Ie,em(Ie)):on=null}break t}}Fn=0,Us=null,td(a,s,y,5);break;case 6:Fn=0,Us=null,td(a,s,y,6);break;case 8:wp(),Sr=6;break e;default:throw Error(r(462))}}n4();break}catch(ze){xv(a,ze)}while(!0);return Di=Wr=null,ae.H=d,ae.A=x,Mn=c,on!==null?0:(Jn=null,xn=0,ms(),Sr)}function n4(){for(;on!==null&&!Ve();)yv(on)}function yv(a){var s=Kb(a.alternate,a,wl);a.memoizedProps=a.pendingProps,s===null?em(a):on=s}function wv(a){var s=a,c=s.alternate;switch(s.tag){case 15:case 0:s=Ub(c,s,s.pendingProps,s.type,void 0,xn);break;case 11:s=Ub(c,s,s.pendingProps,s.type.render,s.ref,xn);break;case 5:Bu(s);default:$b(c,s),s=on=Yc(s,wl),s=Kb(c,s,wl)}a.memoizedProps=a.pendingProps,s===null?em(a):on=s}function td(a,s,c,d){Di=Wr=null,Bu(s),Gu=null,oh=0;var x=s.return;try{if(W3(a,x,s,c,xn)){Sr=1,Wf(a,en(c,a.current)),on=null;return}}catch(y){if(x!==null)throw on=x,y;Sr=1,Wf(a,en(c,a.current)),on=null;return}s.flags&32768?(wn||d===1?a=!0:Xu||(xn&536870912)!==0?a=!1:(ic=a=!0,(d===2||d===9||d===3||d===6)&&(d=hi.current,d!==null&&d.tag===13&&(d.flags|=16384))),Nv(s,a)):em(s)}function em(a){var s=a;do{if((s.flags&32768)!==0){Nv(s,ic);return}a=s.return;var c=K3(s.alternate,s,wl);if(c!==null){on=c;return}if(s=s.sibling,s!==null){on=s;return}on=s=a}while(s!==null);Sr===0&&(Sr=5)}function Nv(a,s){do{var c=Y3(a.alternate,a);if(c!==null){c.flags&=32767,on=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(a=a.sibling,a!==null)){on=a;return}on=a=c}while(a!==null);Sr=6,on=null}function _v(a,s,c,d,x,y,D,X,le){a.cancelPendingCommit=null;do tm();while(_a!==0);if((Mn&6)!==0)throw Error(r(327));if(s!==null){if(s===a.current)throw Error(r(177));if(y=s.lanes|s.childLanes,y|=hr,Bn(a,c,y,D,X,le),a===Jn&&(on=Jn=null,xn=0),Ju=s,cc=a,Zu=c,bp=y,vp=x,fv=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,i4(ot,function(){return jv(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=ae.T,ae.T=null,x=me.p,me.p=2,D=Mn,Mn|=4;try{$3(a,s,c)}finally{Mn=D,me.p=x,ae.T=d}}_a=1,Av(),Sv(),Ev()}}function Av(){if(_a===1){_a=0;var a=cc,s=Ju,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=ae.T,ae.T=null;var d=me.p;me.p=2;var x=Mn;Mn|=4;try{iv(s,a);var y=Dp,D=va(a.containerInfo),X=y.focusedElem,le=y.selectionRange;if(D!==X&&X&&X.ownerDocument&&uo(X.ownerDocument.documentElement,X)){if(le!==null&&ta(X)){var Ie=le.start,ze=le.end;if(ze===void 0&&(ze=Ie),"selectionStart"in X)X.selectionStart=Ie,X.selectionEnd=Math.min(ze,X.value.length);else{var $e=X.ownerDocument||document,De=$e&&$e.defaultView||window;if(De.getSelection){var Oe=De.getSelection(),zt=X.textContent.length,Pt=Math.min(le.start,zt),Wn=le.end===void 0?Pt:Math.min(le.end,zt);!Oe.extend&&Pt>Wn&&(D=Wn,Wn=Pt,Pt=D);var Se=Ti(X,Pt),xe=Ti(X,Wn);if(Se&&xe&&(Oe.rangeCount!==1||Oe.anchorNode!==Se.node||Oe.anchorOffset!==Se.offset||Oe.focusNode!==xe.node||Oe.focusOffset!==xe.offset)){var je=$e.createRange();je.setStart(Se.node,Se.offset),Oe.removeAllRanges(),Pt>Wn?(Oe.addRange(je),Oe.extend(xe.node,xe.offset)):(je.setEnd(xe.node,xe.offset),Oe.addRange(je))}}}}for($e=[],Oe=X;Oe=Oe.parentNode;)Oe.nodeType===1&&$e.push({element:Oe,left:Oe.scrollLeft,top:Oe.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<$e.length;X++){var We=$e[X];We.element.scrollLeft=We.left,We.element.scrollTop=We.top}}fm=!!Pp,Dp=Pp=null}finally{Mn=x,me.p=d,ae.T=c}}a.current=s,_a=2}}function Sv(){if(_a===2){_a=0;var a=cc,s=Ju,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=ae.T,ae.T=null;var d=me.p;me.p=2;var x=Mn;Mn|=4;try{nv(a,s.alternate,s)}finally{Mn=x,me.p=d,ae.T=c}}_a=3}}function Ev(){if(_a===4||_a===3){_a=0,oe();var a=cc,s=Ju,c=Zu,d=fv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?_a=5:(_a=0,Ju=cc=null,Tv(a,a.pendingLanes));var x=a.pendingLanes;if(x===0&&(lc=null),ar(c),s=s.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(wt,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=ae.T,x=me.p,me.p=2,ae.T=null;try{for(var y=a.onRecoverableError,D=0;D<d.length;D++){var X=d[D];y(X.value,{componentStack:X.stack})}}finally{ae.T=s,me.p=x}}(Zu&3)!==0&&tm(),Co(a),x=a.pendingLanes,(c&4194090)!==0&&(x&42)!==0?a===yp?gh++:(gh=0,yp=a):gh=0,xh(0)}}function Tv(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,Jc(s)))}function tm(a){return Av(),Sv(),Ev(),jv()}function jv(){if(_a!==5)return!1;var a=cc,s=bp;bp=0;var c=ar(Zu),d=ae.T,x=me.p;try{me.p=32>c?32:c,ae.T=null,c=vp,vp=null;var y=cc,D=Zu;if(_a=0,Ju=cc=null,Zu=0,(Mn&6)!==0)throw Error(r(331));var X=Mn;if(Mn|=4,dv(y.current),lv(y,y.current,D,c),Mn=X,xh(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(wt,y)}catch{}return!0}finally{me.p=x,ae.T=d,Tv(a,s)}}function kv(a,s,c){s=en(c,s),s=J0(a.stateNode,s,2),a=Ke(a,s,2),a!==null&&(Xr(a,2),Co(a))}function Kn(a,s,c){if(a.tag===3)kv(a,a,c);else for(;s!==null;){if(s.tag===3){kv(s,a,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(lc===null||!lc.has(d))){a=en(c,a),c=Lb(2),d=Ke(s,c,2),d!==null&&(Pb(c,d,s,a),Xr(d,2),Co(d));break}}s=s.return}}function Ap(a,s,c){var d=a.pingCache;if(d===null){d=a.pingCache=new J3;var x=new Set;d.set(s,x)}else x=d.get(s),x===void 0&&(x=new Set,d.set(s,x));x.has(c)||(mp=!0,x.add(c),a=r4.bind(null,a,s,c),s.then(a,a))}function r4(a,s,c){var d=a.pingCache;d!==null&&d.delete(s),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,Jn===a&&(xn&c)===c&&(Sr===4||Sr===3&&(xn&62914560)===xn&&300>At()-xp?(Mn&2)===0&&ed(a,0):pp|=c,Qu===xn&&(Qu=0)),Co(a)}function Cv(a,s){s===0&&(s=kn()),a=ki(a,s),a!==null&&(Xr(a,s),Co(a))}function a4(a){var s=a.memoizedState,c=0;s!==null&&(c=s.retryLane),Cv(a,c)}function s4(a,s){var c=0;switch(a.tag){case 13:var d=a.stateNode,x=a.memoizedState;x!==null&&(c=x.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(s),Cv(a,c)}function i4(a,s){return at(a,s)}var nm=null,nd=null,Sp=!1,rm=!1,Ep=!1,fu=0;function Co(a){a!==nd&&a.next===null&&(nd===null?nm=nd=a:nd=nd.next=a),rm=!0,Sp||(Sp=!0,l4())}function xh(a,s){if(!Ep&&rm){Ep=!0;do for(var c=!1,d=nm;d!==null;){if(a!==0){var x=d.pendingLanes;if(x===0)var y=0;else{var D=d.suspendedLanes,X=d.pingedLanes;y=(1<<31-Fe(42|a)+1)-1,y&=x&~(D&~X),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,Pv(d,y))}else y=xn,y=yn(d,d===Jn?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||Br(d,y)||(c=!0,Pv(d,y));d=d.next}while(c);Ep=!1}}function o4(){Rv()}function Rv(){rm=Sp=!1;var a=0;fu!==0&&(g4()&&(a=fu),fu=0);for(var s=At(),c=null,d=nm;d!==null;){var x=d.next,y=Iv(d,s);y===0?(d.next=null,c===null?nm=x:c.next=x,x===null&&(nd=c)):(c=d,(a!==0||(y&3)!==0)&&(rm=!0)),d=x}xh(a)}function Iv(a,s){for(var c=a.suspendedLanes,d=a.pingedLanes,x=a.expirationTimes,y=a.pendingLanes&-62914561;0<y;){var D=31-Fe(y),X=1<<D,le=x[D];le===-1?((X&c)===0||(X&d)!==0)&&(x[D]=Zt(X,s)):le<=s&&(a.expiredLanes|=X),y&=~X}if(s=Jn,c=xn,c=yn(a,a===s?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,c===0||a===s&&(Fn===2||Fn===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&_t(d),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||Br(a,c)){if(s=c&-c,s===a.callbackPriority)return s;switch(d!==null&&_t(d),ar(c)){case 2:case 8:c=rt;break;case 32:c=ot;break;case 268435456:c=bt;break;default:c=ot}return d=Lv.bind(null,a),c=at(c,d),a.callbackPriority=s,a.callbackNode=c,s}return d!==null&&d!==null&&_t(d),a.callbackPriority=2,a.callbackNode=null,2}function Lv(a,s){if(_a!==0&&_a!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(tm()&&a.callbackNode!==c)return null;var d=xn;return d=yn(a,a===Jn?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(pv(a,d,s),Iv(a,At()),a.callbackNode!=null&&a.callbackNode===c?Lv.bind(null,a):null)}function Pv(a,s){if(tm())return null;pv(a,s,!0)}function l4(){b4(function(){(Mn&6)!==0?at(et,o4):Rv()})}function Tp(){return fu===0&&(fu=Xn()),fu}function Dv(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ks(""+a)}function Ov(a,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,a.id&&c.setAttribute("form",a.id),s.parentNode.insertBefore(c,s),a=new FormData(a),c.parentNode.removeChild(c),a}function c4(a,s,c,d,x){if(s==="submit"&&c&&c.stateNode===x){var y=Dv((x[Rn]||null).action),D=d.submitter;D&&(s=(s=D[Rn]||null)?Dv(s.formAction):D.getAttribute("formAction"),s!==null&&(y=s,D=null));var X=new Qs("action","action",null,d,x);a.push({event:X,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(fu!==0){var le=D?Ov(x,D):new FormData(x);di(c,{pending:!0,data:le,method:x.method,action:y},null,le)}}else typeof y=="function"&&(X.preventDefault(),le=D?Ov(x,D):new FormData(x),di(c,{pending:!0,data:le,method:x.method,action:y},y,le))},currentTarget:x}]})}}for(var jp=0;jp<sl.length;jp++){var kp=sl[jp],u4=kp.toLowerCase(),d4=kp[0].toUpperCase()+kp.slice(1);or(u4,"on"+d4)}or(Hl,"onAnimationEnd"),or(fo,"onAnimationIteration"),or(mo,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(po,"onTransitionRun"),or(al,"onTransitionStart"),or(Wl,"onTransitionCancel"),or(go,"onTransitionEnd"),ka("onMouseEnter",["mouseout","mouseover"]),ka("onMouseLeave",["mouseout","mouseover"]),ka("onPointerEnter",["pointerout","pointerover"]),ka("onPointerLeave",["pointerout","pointerover"]),sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sa("onBeforeInput",["compositionend","keypress","textInput","paste"]),sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bh));function Mv(a,s){s=(s&4)!==0;for(var c=0;c<a.length;c++){var d=a[c],x=d.event;d=d.listeners;e:{var y=void 0;if(s)for(var D=d.length-1;0<=D;D--){var X=d[D],le=X.instance,Ie=X.currentTarget;if(X=X.listener,le!==y&&x.isPropagationStopped())break e;y=X,x.currentTarget=Ie;try{y(x)}catch(ze){Hf(ze)}x.currentTarget=null,y=le}else for(D=0;D<d.length;D++){if(X=d[D],le=X.instance,Ie=X.currentTarget,X=X.listener,le!==y&&x.isPropagationStopped())break e;y=X,x.currentTarget=Ie;try{y(x)}catch(ze){Hf(ze)}x.currentTarget=null,y=le}}}}function ln(a,s){var c=s[er];c===void 0&&(c=s[er]=new Set);var d=a+"__bubble";c.has(d)||(Fv(s,a,2,!1),c.add(d))}function Cp(a,s,c){var d=0;s&&(d|=4),Fv(c,a,d,s)}var am="_reactListening"+Math.random().toString(36).slice(2);function Rp(a){if(!a[am]){a[am]=!0,_s.forEach(function(c){c!=="selectionchange"&&(h4.has(c)||Cp(c,!1,a),Cp(c,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[am]||(s[am]=!0,Cp("selectionchange",!1,s))}}function Fv(a,s,c,d){switch(l1(s)){case 2:var x=V4;break;case 8:x=B4;break;default:x=Wp}c=x.bind(null,s,c,a),x=void 0,!ba||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(x=!0),d?x!==void 0?a.addEventListener(s,c,{capture:!0,passive:x}):a.addEventListener(s,c,!0):x!==void 0?a.addEventListener(s,c,{passive:x}):a.addEventListener(s,c,!1)}function Ip(a,s,c,d,x){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var D=d.tag;if(D===3||D===4){var X=d.stateNode.containerInfo;if(X===x)break;if(D===4)for(D=d.return;D!==null;){var le=D.tag;if((le===3||le===4)&&D.stateNode.containerInfo===x)return;D=D.return}for(;X!==null;){if(D=Tr(X),D===null)return;if(le=D.tag,le===5||le===6||le===26||le===27){d=y=D;continue e}X=X.parentNode}}d=d.return}Vl(function(){var Ie=y,ze=Dn(c),$e=[];e:{var De=ji.get(a);if(De!==void 0){var Oe=Qs,zt=a;switch(a){case"keypress":if(La(c)===0)break e;case"keydown":case"keyup":Oe=Ls;break;case"focusin":zt="focus",Oe=Zs;break;case"focusout":zt="blur",Oe=Zs;break;case"beforeblur":case"afterblur":Oe=Zs;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=wr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=Js;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=io;break;case Hl:case fo:case mo:Oe=ro;break;case go:Oe=z;break;case"scroll":case"scrollend":Oe=Jo;break;case"wheel":Oe=de;break;case"copy":case"cut":case"paste":Oe=ao;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=Ei;break;case"toggle":case"beforetoggle":Oe=Be}var Pt=(s&4)!==0,Wn=!Pt&&(a==="scroll"||a==="scrollend"),Se=Pt?De!==null?De+"Capture":null:De;Pt=[];for(var xe=Ie,je;xe!==null;){var We=xe;if(je=We.stateNode,We=We.tag,We!==5&&We!==26&&We!==27||je===null||Se===null||(We=ia(xe,Se),We!=null&&Pt.push(vh(xe,We,je))),Wn)break;xe=xe.return}0<Pt.length&&(De=new Oe(De,zt,null,c,ze),$e.push({event:De,listeners:Pt}))}}if((s&7)===0){e:{if(De=a==="mouseover"||a==="pointerover",Oe=a==="mouseout"||a==="pointerout",De&&c!==is&&(zt=c.relatedTarget||c.fromElement)&&(Tr(zt)||zt[Gn]))break e;if((Oe||De)&&(De=ze.window===ze?ze:(De=ze.ownerDocument)?De.defaultView||De.parentWindow:window,Oe?(zt=c.relatedTarget||c.toElement,Oe=Ie,zt=zt?Tr(zt):null,zt!==null&&(Wn=l(zt),Pt=zt.tag,zt!==Wn||Pt!==5&&Pt!==27&&Pt!==6)&&(zt=null)):(Oe=null,zt=Ie),Oe!==zt)){if(Pt=wr,We="onMouseLeave",Se="onMouseEnter",xe="mouse",(a==="pointerout"||a==="pointerover")&&(Pt=Ei,We="onPointerLeave",Se="onPointerEnter",xe="pointer"),Wn=Oe==null?De:jr(Oe),je=zt==null?De:jr(zt),De=new Pt(We,xe+"leave",Oe,c,ze),De.target=Wn,De.relatedTarget=je,We=null,Tr(ze)===Ie&&(Pt=new Pt(Se,xe+"enter",zt,c,ze),Pt.target=je,Pt.relatedTarget=Wn,We=Pt),Wn=We,Oe&&zt)t:{for(Pt=Oe,Se=zt,xe=0,je=Pt;je;je=rd(je))xe++;for(je=0,We=Se;We;We=rd(We))je++;for(;0<xe-je;)Pt=rd(Pt),xe--;for(;0<je-xe;)Se=rd(Se),je--;for(;xe--;){if(Pt===Se||Se!==null&&Pt===Se.alternate)break t;Pt=rd(Pt),Se=rd(Se)}Pt=null}else Pt=null;Oe!==null&&Vv($e,De,Oe,Pt,!1),zt!==null&&Wn!==null&&Vv($e,Wn,zt,Pt,!0)}}e:{if(De=Ie?jr(Ie):window,Oe=De.nodeName&&De.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&De.type==="file")var vt=zl;else if(In(De))if(el)vt=Iu;else{vt=Wd;var sn=Da}else Oe=De.nodeName,!Oe||Oe.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?Ie&&Xo(Ie.elementType)&&(vt=zl):vt=Gc;if(vt&&(vt=vt(a,Ie))){hs($e,vt,c,ze);break e}sn&&sn(a,De,Ie),a==="focusout"&&Ie&&De.type==="number"&&Ie.memoizedProps.value!=null&&Ys(De,"number",De.value)}switch(sn=Ie?jr(Ie):window,a){case"focusin":(In(sn)||sn.contentEditable==="true")&&(Oa=sn,Ps=Ie,ai=null);break;case"focusout":ai=Ps=Oa=null;break;case"mousedown":Ds=!0;break;case"contextmenu":case"mouseup":case"dragend":Ds=!1,ir($e,c,ze);break;case"selectionchange":if(ho)break;case"keydown":case"keyup":ir($e,c,ze)}var Et;if(lt)e:{switch(a){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else Lt?Re(a,c)&&(Dt="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(Dt="onCompositionStart");Dt&&(C&&c.locale!=="ko"&&(Lt||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&Lt&&(Et=Qo()):(Ia=ze,Xs="value"in Ia?Ia.value:Ia.textContent,Lt=!0)),sn=sm(Ie,Dt),0<sn.length&&(Dt=new _i(Dt,a,null,c,ze),$e.push({event:Dt,listeners:sn}),Et?Dt.data=Et:(Et=Ze(c),Et!==null&&(Dt.data=Et)))),(Et=E?an(a,c):qt(a,c))&&(Dt=sm(Ie,"onBeforeInput"),0<Dt.length&&(sn=new _i("onBeforeInput","beforeinput",null,c,ze),$e.push({event:sn,listeners:Dt}),sn.data=Et)),c4($e,a,Ie,c,ze)}Mv($e,s)})}function vh(a,s,c){return{instance:a,listener:s,currentTarget:c}}function sm(a,s){for(var c=s+"Capture",d=[];a!==null;){var x=a,y=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||y===null||(x=ia(a,c),x!=null&&d.unshift(vh(a,x,y)),x=ia(a,s),x!=null&&d.push(vh(a,x,y))),a.tag===3)return d;a=a.return}return[]}function rd(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Vv(a,s,c,d,x){for(var y=s._reactName,D=[];c!==null&&c!==d;){var X=c,le=X.alternate,Ie=X.stateNode;if(X=X.tag,le!==null&&le===d)break;X!==5&&X!==26&&X!==27||Ie===null||(le=Ie,x?(Ie=ia(c,y),Ie!=null&&D.unshift(vh(c,Ie,le))):x||(Ie=ia(c,y),Ie!=null&&D.push(vh(c,Ie,le)))),c=c.return}D.length!==0&&a.push({event:s,listeners:D})}var f4=/\r\n?/g,m4=/\u0000|\uFFFD/g;function Bv(a){return(typeof a=="string"?a:""+a).replace(f4,`
`).replace(m4,"")}function Uv(a,s){return s=Bv(s),Bv(a)===s}function im(){}function Hn(a,s,c,d,x,y){switch(c){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||Ca(a,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&Ca(a,""+d);break;case"className":Ja(a,"class",d);break;case"tabIndex":Ja(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ja(a,c,d);break;case"style":$o(a,d,y);break;case"data":if(s!=="object"){Ja(a,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||c!=="href")){a.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=ks(""+d),a.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(s!=="input"&&Hn(a,s,"name",x.name,x,null),Hn(a,s,"formEncType",x.formEncType,x,null),Hn(a,s,"formMethod",x.formMethod,x,null),Hn(a,s,"formTarget",x.formTarget,x,null)):(Hn(a,s,"encType",x.encType,x,null),Hn(a,s,"method",x.method,x,null),Hn(a,s,"target",x.target,x,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=ks(""+d),a.setAttribute(c,d);break;case"onClick":d!=null&&(a.onclick=im);break;case"onScroll":d!=null&&ln("scroll",a);break;case"onScrollEnd":d!=null&&ln("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(x.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}c=ks(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""+d):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":d===!0?a.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,d):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(c,d):a.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(c):a.setAttribute(c,d);break;case"popover":ln("beforetoggle",a),ln("toggle",a),Qa(a,"popover",d);break;case"xlinkActuate":kr(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":kr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":kr(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":kr(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":kr(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":kr(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":kr(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":kr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":kr(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Qa(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=js.get(c)||c,Qa(a,c,d))}}function Lp(a,s,c,d,x,y){switch(c){case"style":$o(a,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(x.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof d=="string"?Ca(a,d):(typeof d=="number"||typeof d=="bigint")&&Ca(a,""+d);break;case"onScroll":d!=null&&ln("scroll",a);break;case"onScrollEnd":d!=null&&ln("scrollend",a);break;case"onClick":d!=null&&(a.onclick=im);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!As.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(x=c.endsWith("Capture"),s=c.slice(2,x?c.length-7:void 0),y=a[Rn]||null,y=y!=null?y[c]:null,typeof y=="function"&&a.removeEventListener(s,y,x),typeof d=="function")){typeof y!="function"&&y!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(s,d,x);break e}c in a?a[c]=d:d===!0?a.setAttribute(c,""):Qa(a,c,d)}}}function Aa(a,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ln("error",a),ln("load",a);var d=!1,x=!1,y;for(y in c)if(c.hasOwnProperty(y)){var D=c[y];if(D!=null)switch(y){case"src":d=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Hn(a,s,y,D,c,null)}}x&&Hn(a,s,"srcSet",c.srcSet,c,null),d&&Hn(a,s,"src",c.src,c,null);return;case"input":ln("invalid",a);var X=y=D=x=null,le=null,Ie=null;for(d in c)if(c.hasOwnProperty(d)){var ze=c[d];if(ze!=null)switch(d){case"name":x=ze;break;case"type":D=ze;break;case"checked":le=ze;break;case"defaultChecked":Ie=ze;break;case"value":y=ze;break;case"defaultValue":X=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(r(137,s));break;default:Hn(a,s,d,ze,c,null)}}Ks(a,y,X,le,Ie,D,x,!1),Gs(a);return;case"select":ln("invalid",a),d=D=y=null;for(x in c)if(c.hasOwnProperty(x)&&(X=c[x],X!=null))switch(x){case"value":y=X;break;case"defaultValue":D=X;break;case"multiple":d=X;default:Hn(a,s,x,X,c,null)}s=y,c=D,a.multiple=!!d,s!=null?ss(a,!!d,s,!1):c!=null&&ss(a,!!d,c,!0);return;case"textarea":ln("invalid",a),y=x=d=null;for(D in c)if(c.hasOwnProperty(D)&&(X=c[D],X!=null))switch(D){case"value":d=X;break;case"defaultValue":x=X;break;case"children":y=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(91));break;default:Hn(a,s,D,X,c,null)}$s(a,d,x,y),Gs(a);return;case"option":for(le in c)if(c.hasOwnProperty(le)&&(d=c[le],d!=null))switch(le){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Hn(a,s,le,d,c,null)}return;case"dialog":ln("beforetoggle",a),ln("toggle",a),ln("cancel",a),ln("close",a);break;case"iframe":case"object":ln("load",a);break;case"video":case"audio":for(d=0;d<bh.length;d++)ln(bh[d],a);break;case"image":ln("error",a),ln("load",a);break;case"details":ln("toggle",a);break;case"embed":case"source":case"link":ln("error",a),ln("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ie in c)if(c.hasOwnProperty(Ie)&&(d=c[Ie],d!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Hn(a,s,Ie,d,c,null)}return;default:if(Xo(s)){for(ze in c)c.hasOwnProperty(ze)&&(d=c[ze],d!==void 0&&Lp(a,s,ze,d,c,void 0));return}}for(X in c)c.hasOwnProperty(X)&&(d=c[X],d!=null&&Hn(a,s,X,d,c,null))}function p4(a,s,c,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,y=null,D=null,X=null,le=null,Ie=null,ze=null;for(Oe in c){var $e=c[Oe];if(c.hasOwnProperty(Oe)&&$e!=null)switch(Oe){case"checked":break;case"value":break;case"defaultValue":le=$e;default:d.hasOwnProperty(Oe)||Hn(a,s,Oe,null,d,$e)}}for(var De in d){var Oe=d[De];if($e=c[De],d.hasOwnProperty(De)&&(Oe!=null||$e!=null))switch(De){case"type":y=Oe;break;case"name":x=Oe;break;case"checked":Ie=Oe;break;case"defaultChecked":ze=Oe;break;case"value":D=Oe;break;case"defaultValue":X=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(r(137,s));break;default:Oe!==$e&&Hn(a,s,De,Oe,d,$e)}}Zr(a,D,X,le,Ie,ze,y,x);return;case"select":Oe=D=X=De=null;for(y in c)if(le=c[y],c.hasOwnProperty(y)&&le!=null)switch(y){case"value":break;case"multiple":Oe=le;default:d.hasOwnProperty(y)||Hn(a,s,y,null,d,le)}for(x in d)if(y=d[x],le=c[x],d.hasOwnProperty(x)&&(y!=null||le!=null))switch(x){case"value":De=y;break;case"defaultValue":X=y;break;case"multiple":D=y;default:y!==le&&Hn(a,s,x,y,d,le)}s=X,c=D,d=Oe,De!=null?ss(a,!!c,De,!1):!!d!=!!c&&(s!=null?ss(a,!!c,s,!0):ss(a,!!c,c?[]:"",!1));return;case"textarea":Oe=De=null;for(X in c)if(x=c[X],c.hasOwnProperty(X)&&x!=null&&!d.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:Hn(a,s,X,null,d,x)}for(D in d)if(x=d[D],y=c[D],d.hasOwnProperty(D)&&(x!=null||y!=null))switch(D){case"value":De=x;break;case"defaultValue":Oe=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==y&&Hn(a,s,D,x,d,y)}_n(a,De,Oe);return;case"option":for(var zt in c)if(De=c[zt],c.hasOwnProperty(zt)&&De!=null&&!d.hasOwnProperty(zt))switch(zt){case"selected":a.selected=!1;break;default:Hn(a,s,zt,null,d,De)}for(le in d)if(De=d[le],Oe=c[le],d.hasOwnProperty(le)&&De!==Oe&&(De!=null||Oe!=null))switch(le){case"selected":a.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:Hn(a,s,le,De,d,Oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pt in c)De=c[Pt],c.hasOwnProperty(Pt)&&De!=null&&!d.hasOwnProperty(Pt)&&Hn(a,s,Pt,null,d,De);for(Ie in d)if(De=d[Ie],Oe=c[Ie],d.hasOwnProperty(Ie)&&De!==Oe&&(De!=null||Oe!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(r(137,s));break;default:Hn(a,s,Ie,De,d,Oe)}return;default:if(Xo(s)){for(var Wn in c)De=c[Wn],c.hasOwnProperty(Wn)&&De!==void 0&&!d.hasOwnProperty(Wn)&&Lp(a,s,Wn,void 0,d,De);for(ze in d)De=d[ze],Oe=c[ze],!d.hasOwnProperty(ze)||De===Oe||De===void 0&&Oe===void 0||Lp(a,s,ze,De,d,Oe);return}}for(var Se in c)De=c[Se],c.hasOwnProperty(Se)&&De!=null&&!d.hasOwnProperty(Se)&&Hn(a,s,Se,null,d,De);for($e in d)De=d[$e],Oe=c[$e],!d.hasOwnProperty($e)||De===Oe||De==null&&Oe==null||Hn(a,s,$e,De,d,Oe)}var Pp=null,Dp=null;function om(a){return a.nodeType===9?a:a.ownerDocument}function zv(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qv(a,s){if(a===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&s==="foreignObject"?0:a}function Op(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Mp=null;function g4(){var a=window.event;return a&&a.type==="popstate"?a===Mp?!1:(Mp=a,!0):(Mp=null,!1)}var Hv=typeof setTimeout=="function"?setTimeout:void 0,x4=typeof clearTimeout=="function"?clearTimeout:void 0,Wv=typeof Promise=="function"?Promise:void 0,b4=typeof queueMicrotask=="function"?queueMicrotask:typeof Wv<"u"?function(a){return Wv.resolve(null).then(a).catch(v4)}:Hv;function v4(a){setTimeout(function(){throw a})}function dc(a){return a==="head"}function Gv(a,s){var c=s,d=0,x=0;do{var y=c.nextSibling;if(a.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<d&&8>d){c=d;var D=a.ownerDocument;if(c&1&&yh(D.documentElement),c&2&&yh(D.body),c&4)for(c=D.head,yh(c),D=c.firstChild;D;){var X=D.nextSibling,le=D.nodeName;D[xa]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&D.rel.toLowerCase()==="stylesheet"||c.removeChild(D),D=X}}if(x===0){a.removeChild(y),jh(s);return}x--}else c==="$"||c==="$?"||c==="$!"?x++:d=c.charCodeAt(0)-48;else d=0;c=y}while(c);jh(s)}function Fp(a){var s=a.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Fp(c),Ur(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function y4(a,s,c,d){for(;a.nodeType===1;){var x=c;if(a.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[xa])switch(s){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(y=a.getAttribute("rel"),y==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(y!==x.rel||a.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||a.getAttribute("title")!==(x.title==null?null:x.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(y=a.getAttribute("src"),(y!==(x.src==null?null:x.src)||a.getAttribute("type")!==(x.type==null?null:x.type)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&y&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(s==="input"&&a.type==="hidden"){var y=x.name==null?null:""+x.name;if(x.type==="hidden"&&a.getAttribute("name")===y)return a}else return a;if(a=zi(a.nextSibling),a===null)break}return null}function w4(a,s,c){if(s==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=zi(a.nextSibling),a===null))return null;return a}function Vp(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function N4(a,s){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")s();else{var d=function(){s(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function zi(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return a}var Bp=null;function Kv(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return a;s--}else c==="/$"&&s++}a=a.previousSibling}return null}function Yv(a,s,c){switch(s=om(c),a){case"html":if(a=s.documentElement,!a)throw Error(r(452));return a;case"head":if(a=s.head,!a)throw Error(r(453));return a;case"body":if(a=s.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function yh(a){for(var s=a.attributes;s.length;)a.removeAttributeNode(s[0]);Ur(a)}var mi=new Map,$v=new Set;function lm(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Nl=me.d;me.d={f:_4,r:A4,D:S4,C:E4,L:T4,m:j4,X:C4,S:k4,M:R4};function _4(){var a=Nl.f(),s=Zf();return a||s}function A4(a){var s=vr(a);s!==null&&s.tag===5&&s.type==="form"?lu(s):Nl.r(a)}var ad=typeof document>"u"?null:document;function Xv(a,s,c){var d=ad;if(d&&typeof s=="string"&&s){var x=fn(s);x='link[rel="'+a+'"][href="'+x+'"]',typeof c=="string"&&(x+='[crossorigin="'+c+'"]'),$v.has(x)||($v.add(x),a={rel:a,crossOrigin:c,href:s},d.querySelector(x)===null&&(s=d.createElement("link"),Aa(s,"link",a),Nn(s),d.head.appendChild(s)))}}function S4(a){Nl.D(a),Xv("dns-prefetch",a,null)}function E4(a,s){Nl.C(a,s),Xv("preconnect",a,s)}function T4(a,s,c){Nl.L(a,s,c);var d=ad;if(d&&a&&s){var x='link[rel="preload"][as="'+fn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(x+='[imagesrcset="'+fn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(x+='[imagesizes="'+fn(c.imageSizes)+'"]')):x+='[href="'+fn(a)+'"]';var y=x;switch(s){case"style":y=sd(a);break;case"script":y=id(a)}mi.has(y)||(a=v({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:a,as:s},c),mi.set(y,a),d.querySelector(x)!==null||s==="style"&&d.querySelector(wh(y))||s==="script"&&d.querySelector(Nh(y))||(s=d.createElement("link"),Aa(s,"link",a),Nn(s),d.head.appendChild(s)))}}function j4(a,s){Nl.m(a,s);var c=ad;if(c&&a){var d=s&&typeof s.as=="string"?s.as:"script",x='link[rel="modulepreload"][as="'+fn(d)+'"][href="'+fn(a)+'"]',y=x;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=id(a)}if(!mi.has(y)&&(a=v({rel:"modulepreload",href:a},s),mi.set(y,a),c.querySelector(x)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Nh(y)))return}d=c.createElement("link"),Aa(d,"link",a),Nn(d),c.head.appendChild(d)}}}function k4(a,s,c){Nl.S(a,s,c);var d=ad;if(d&&a){var x=Un(d).hoistableStyles,y=sd(a);s=s||"default";var D=x.get(y);if(!D){var X={loading:0,preload:null};if(D=d.querySelector(wh(y)))X.loading=5;else{a=v({rel:"stylesheet",href:a,"data-precedence":s},c),(c=mi.get(y))&&Up(a,c);var le=D=d.createElement("link");Nn(le),Aa(le,"link",a),le._p=new Promise(function(Ie,ze){le.onload=Ie,le.onerror=ze}),le.addEventListener("load",function(){X.loading|=1}),le.addEventListener("error",function(){X.loading|=2}),X.loading|=4,cm(D,s,d)}D={type:"stylesheet",instance:D,count:1,state:X},x.set(y,D)}}}function C4(a,s){Nl.X(a,s);var c=ad;if(c&&a){var d=Un(c).hoistableScripts,x=id(a),y=d.get(x);y||(y=c.querySelector(Nh(x)),y||(a=v({src:a,async:!0},s),(s=mi.get(x))&&zp(a,s),y=c.createElement("script"),Nn(y),Aa(y,"link",a),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(x,y))}}function R4(a,s){Nl.M(a,s);var c=ad;if(c&&a){var d=Un(c).hoistableScripts,x=id(a),y=d.get(x);y||(y=c.querySelector(Nh(x)),y||(a=v({src:a,async:!0,type:"module"},s),(s=mi.get(x))&&zp(a,s),y=c.createElement("script"),Nn(y),Aa(y,"link",a),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(x,y))}}function Qv(a,s,c,d){var x=(x=ue.current)?lm(x):null;if(!x)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=sd(c.href),c=Un(x).hoistableStyles,d=c.get(s),d||(d={type:"style",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=sd(c.href);var y=Un(x).hoistableStyles,D=y.get(a);if(D||(x=x.ownerDocument||x,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(a,D),(y=x.querySelector(wh(a)))&&!y._p&&(D.instance=y,D.state.loading=5),mi.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},mi.set(a,c),y||I4(x,a,c,D.state))),s&&d===null)throw Error(r(528,""));return D}if(s&&d!==null)throw Error(r(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=id(c),c=Un(x).hoistableScripts,d=c.get(s),d||(d={type:"script",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function sd(a){return'href="'+fn(a)+'"'}function wh(a){return'link[rel="stylesheet"]['+a+"]"}function Jv(a){return v({},a,{"data-precedence":a.precedence,precedence:null})}function I4(a,s,c,d){a.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=a.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),Aa(s,"link",c),Nn(s),a.head.appendChild(s))}function id(a){return'[src="'+fn(a)+'"]'}function Nh(a){return"script[async]"+a}function Zv(a,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var d=a.querySelector('style[data-href~="'+fn(c.href)+'"]');if(d)return s.instance=d,Nn(d),d;var x=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),Nn(d),Aa(d,"style",x),cm(d,c.precedence,a),s.instance=d;case"stylesheet":x=sd(c.href);var y=a.querySelector(wh(x));if(y)return s.state.loading|=4,s.instance=y,Nn(y),y;d=Jv(c),(x=mi.get(x))&&Up(d,x),y=(a.ownerDocument||a).createElement("link"),Nn(y);var D=y;return D._p=new Promise(function(X,le){D.onload=X,D.onerror=le}),Aa(y,"link",d),s.state.loading|=4,cm(y,c.precedence,a),s.instance=y;case"script":return y=id(c.src),(x=a.querySelector(Nh(y)))?(s.instance=x,Nn(x),x):(d=c,(x=mi.get(y))&&(d=v({},c),zp(d,x)),a=a.ownerDocument||a,x=a.createElement("script"),Nn(x),Aa(x,"link",d),a.head.appendChild(x),s.instance=x);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,cm(d,c.precedence,a));return s.instance}function cm(a,s,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=d.length?d[d.length-1]:null,y=x,D=0;D<d.length;D++){var X=d[D];if(X.dataset.precedence===s)y=X;else if(y!==x)break}y?y.parentNode.insertBefore(a,y.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(a,s.firstChild))}function Up(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.title==null&&(a.title=s.title)}function zp(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.integrity==null&&(a.integrity=s.integrity)}var um=null;function e1(a,s,c){if(um===null){var d=new Map,x=um=new Map;x.set(c,d)}else x=um,d=x.get(c),d||(d=new Map,x.set(c,d));if(d.has(a))return d;for(d.set(a,null),c=c.getElementsByTagName(a),x=0;x<c.length;x++){var y=c[x];if(!(y[xa]||y[Cn]||a==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var D=y.getAttribute(s)||"";D=a+D;var X=d.get(D);X?X.push(y):d.set(D,[y])}}return d}function t1(a,s,c){a=a.ownerDocument||a,a.head.insertBefore(c,s==="title"?a.querySelector("head > title"):null)}function L4(a,s,c){if(c===1||s.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return a=s.disabled,typeof s.precedence=="string"&&a==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function n1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var _h=null;function P4(){}function D4(a,s,c){if(_h===null)throw Error(r(475));var d=_h;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var x=sd(c.href),y=a.querySelector(wh(x));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(d.count++,d=dm.bind(d),a.then(d,d)),s.state.loading|=4,s.instance=y,Nn(y);return}y=a.ownerDocument||a,c=Jv(c),(x=mi.get(x))&&Up(c,x),y=y.createElement("link"),Nn(y);var D=y;D._p=new Promise(function(X,le){D.onload=X,D.onerror=le}),Aa(y,"link",c),s.instance=y}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(d.count++,s=dm.bind(d),a.addEventListener("load",s),a.addEventListener("error",s))}}function O4(){if(_h===null)throw Error(r(475));var a=_h;return a.stylesheets&&a.count===0&&qp(a,a.stylesheets),0<a.count?function(s){var c=setTimeout(function(){if(a.stylesheets&&qp(a,a.stylesheets),a.unsuspend){var d=a.unsuspend;a.unsuspend=null,d()}},6e4);return a.unsuspend=s,function(){a.unsuspend=null,clearTimeout(c)}}:null}function dm(){if(this.count--,this.count===0){if(this.stylesheets)qp(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var hm=null;function qp(a,s){a.stylesheets=null,a.unsuspend!==null&&(a.count++,hm=new Map,s.forEach(M4,a),hm=null,dm.call(a))}function M4(a,s){if(!(s.state.loading&4)){var c=hm.get(a);if(c)var d=c.get(null);else{c=new Map,hm.set(a,c);for(var x=a.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<x.length;y++){var D=x[y];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(c.set(D.dataset.precedence,D),d=D)}d&&c.set(null,d)}x=s.instance,D=x.getAttribute("data-precedence"),y=c.get(D)||d,y===d&&c.set(null,x),c.set(D,x),this.count++,d=dm.bind(this),x.addEventListener("load",d),x.addEventListener("error",d),y?y.parentNode.insertBefore(x,y.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(x,a.firstChild)),s.state.loading|=4}}var Ah={$$typeof:I,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function F4(a,s,c,d,x,y,D,X){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ur(0),this.hiddenUpdates=ur(null),this.identifierPrefix=d,this.onUncaughtError=x,this.onCaughtError=y,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function r1(a,s,c,d,x,y,D,X,le,Ie,ze,$e){return a=new F4(a,s,c,D,X,le,Ie,$e),s=1,y===!0&&(s|=24),y=ua(3,null,null,s),a.current=y,y.stateNode=a,s=Kd(),s.refCount++,a.pooledCache=s,s.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:s},pe(y),a}function a1(a){return a?(a=Hr,a):Hr}function s1(a,s,c,d,x,y){x=a1(x),d.context===null?d.context=x:d.pendingContext=x,d=Ue(s),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=Ke(a,d,s),c!==null&&(qs(c,a,s),qe(c,a,s))}function i1(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<s?c:s}}function Hp(a,s){i1(a,s),(a=a.alternate)&&i1(a,s)}function o1(a){if(a.tag===13){var s=ki(a,67108864);s!==null&&qs(s,a,67108864),Hp(a,67108864)}}var fm=!0;function V4(a,s,c,d){var x=ae.T;ae.T=null;var y=me.p;try{me.p=2,Wp(a,s,c,d)}finally{me.p=y,ae.T=x}}function B4(a,s,c,d){var x=ae.T;ae.T=null;var y=me.p;try{me.p=8,Wp(a,s,c,d)}finally{me.p=y,ae.T=x}}function Wp(a,s,c,d){if(fm){var x=Gp(d);if(x===null)Ip(a,s,d,mm,c),c1(a,d);else if(z4(x,a,s,c,d))d.stopPropagation();else if(c1(a,d),s&4&&-1<U4.indexOf(a)){for(;x!==null;){var y=vr(x);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var D=Ut(y.pendingLanes);if(D!==0){var X=y;for(X.pendingLanes|=2,X.entangledLanes|=2;D;){var le=1<<31-Fe(D);X.entanglements[1]|=le,D&=~le}Co(y),(Mn&6)===0&&(Qf=At()+500,xh(0))}}break;case 13:X=ki(y,2),X!==null&&qs(X,y,2),Zf(),Hp(y,2)}if(y=Gp(d),y===null&&Ip(a,s,d,mm,c),y===x)break;x=y}x!==null&&d.stopPropagation()}else Ip(a,s,d,null,c)}}function Gp(a){return a=Dn(a),Kp(a)}var mm=null;function Kp(a){if(mm=null,a=Tr(a),a!==null){var s=l(a);if(s===null)a=null;else{var c=s.tag;if(c===13){if(a=u(s),a!==null)return a;a=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null)}}return mm=a,null}function l1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case et:return 2;case rt:return 8;case ot:case ut:return 32;case bt:return 268435456;default:return 32}default:return 32}}var Yp=!1,hc=null,fc=null,mc=null,Sh=new Map,Eh=new Map,pc=[],U4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c1(a,s){switch(a){case"focusin":case"focusout":hc=null;break;case"dragenter":case"dragleave":fc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":Sh.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eh.delete(s.pointerId)}}function Th(a,s,c,d,x,y){return a===null||a.nativeEvent!==y?(a={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[x]},s!==null&&(s=vr(s),s!==null&&o1(s)),a):(a.eventSystemFlags|=d,s=a.targetContainers,x!==null&&s.indexOf(x)===-1&&s.push(x),a)}function z4(a,s,c,d,x){switch(s){case"focusin":return hc=Th(hc,a,s,c,d,x),!0;case"dragenter":return fc=Th(fc,a,s,c,d,x),!0;case"mouseover":return mc=Th(mc,a,s,c,d,x),!0;case"pointerover":var y=x.pointerId;return Sh.set(y,Th(Sh.get(y)||null,a,s,c,d,x)),!0;case"gotpointercapture":return y=x.pointerId,Eh.set(y,Th(Eh.get(y)||null,a,s,c,d,x)),!0}return!1}function u1(a){var s=Tr(a.target);if(s!==null){var c=l(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){a.blockedOn=s,Xa(a.priority,function(){if(c.tag===13){var d=zs();d=ja(d);var x=ki(c,d);x!==null&&qs(x,c,d),Hp(c,d)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function pm(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var c=Gp(a.nativeEvent);if(c===null){c=a.nativeEvent;var d=new c.constructor(c.type,c);is=d,c.target.dispatchEvent(d),is=null}else return s=vr(c),s!==null&&o1(s),a.blockedOn=c,!1;s.shift()}return!0}function d1(a,s,c){pm(a)&&c.delete(s)}function q4(){Yp=!1,hc!==null&&pm(hc)&&(hc=null),fc!==null&&pm(fc)&&(fc=null),mc!==null&&pm(mc)&&(mc=null),Sh.forEach(d1),Eh.forEach(d1)}function gm(a,s){a.blockedOn===s&&(a.blockedOn=null,Yp||(Yp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,q4)))}var xm=null;function h1(a){xm!==a&&(xm=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){xm===a&&(xm=null);for(var s=0;s<a.length;s+=3){var c=a[s],d=a[s+1],x=a[s+2];if(typeof d!="function"){if(Kp(d||c)===null)continue;break}var y=vr(c);y!==null&&(a.splice(s,3),s-=3,di(y,{pending:!0,data:x,method:c.method,action:d},d,x))}}))}function jh(a){function s(le){return gm(le,a)}hc!==null&&gm(hc,a),fc!==null&&gm(fc,a),mc!==null&&gm(mc,a),Sh.forEach(s),Eh.forEach(s);for(var c=0;c<pc.length;c++){var d=pc[c];d.blockedOn===a&&(d.blockedOn=null)}for(;0<pc.length&&(c=pc[0],c.blockedOn===null);)u1(c),c.blockedOn===null&&pc.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var x=c[d],y=c[d+1],D=x[Rn]||null;if(typeof y=="function")D||h1(c);else if(D){var X=null;if(y&&y.hasAttribute("formAction")){if(x=y,D=y[Rn]||null)X=D.formAction;else if(Kp(x)!==null)continue}else X=D.action;typeof X=="function"?c[d+1]=X:(c.splice(d,3),d-=3),h1(c)}}}function $p(a){this._internalRoot=a}bm.prototype.render=$p.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(r(409));var c=s.current,d=zs();s1(c,d,a,s,null,null)},bm.prototype.unmount=$p.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;s1(a.current,2,null,a,null,null),Zf(),s[Gn]=null}};function bm(a){this._internalRoot=a}bm.prototype.unstable_scheduleHydration=function(a){if(a){var s=Qr();a={blockedOn:null,target:a,priority:s};for(var c=0;c<pc.length&&s!==0&&s<pc[c].priority;c++);pc.splice(c,0,a),c===0&&u1(a)}};var f1=e.version;if(f1!=="19.1.0")throw Error(r(527,f1,"19.1.0"));me.findDOMNode=function(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=f(s),a=a!==null?g(a):null,a=a===null?null:a.stateNode,a};var H4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vm.isDisabled&&vm.supportsFiber)try{wt=vm.inject(H4),xt=vm}catch{}}return Ch.createRoot=function(a,s){if(!i(a))throw Error(r(299));var c=!1,d="",x=kb,y=Cb,D=Rb,X=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(x=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(D=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(X=s.unstable_transitionCallbacks)),s=r1(a,1,!1,null,null,c,d,x,y,D,X,null),a[Gn]=s.current,Rp(a),new $p(s)},Ch.hydrateRoot=function(a,s,c){if(!i(a))throw Error(r(299));var d=!1,x="",y=kb,D=Cb,X=Rb,le=null,Ie=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(X=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(le=c.unstable_transitionCallbacks),c.formState!==void 0&&(Ie=c.formState)),s=r1(a,1,!0,s,c??null,d,x,y,D,X,le,Ie),s.context=a1(null),c=s.current,d=zs(),d=ja(d),x=Ue(d),x.callback=null,Ke(c,x,d),c=d,s.current.lanes=c,Xr(s,c),Co(s),a[Gn]=s.current,Rp(a),new bm(s)},Ch.version="19.1.0",Ch}var _1;function eN(){if(_1)return Jp.exports;_1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jp.exports=Z4(),Jp.exports}var tN=eN(),Rh={},A1;function nN(){if(A1)return Rh;A1=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.parse=u,Rh.serialize=g;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,l=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function u(S,_){const L=new l,O=S.length;if(O<2)return L;const q=(_==null?void 0:_.decode)||v;let M=0;do{const T=S.indexOf("=",M);if(T===-1)break;const I=S.indexOf(";",M),ee=I===-1?O:I;if(T>ee){M=S.lastIndexOf(";",T-1)+1;continue}const se=h(S,M,T),ge=f(S,T,se),W=S.slice(se,ge);if(L[W]===void 0){let k=h(S,T+1,ee),V=f(S,ee,k);const Q=q(S.slice(k,V));L[W]=Q}M=ee+1}while(M<O);return L}function h(S,_,L){do{const O=S.charCodeAt(_);if(O!==32&&O!==9)return _}while(++_<L);return L}function f(S,_,L){for(;_>L;){const O=S.charCodeAt(--_);if(O!==32&&O!==9)return _+1}return L}function g(S,_,L){const O=(L==null?void 0:L.encode)||encodeURIComponent;if(!n.test(S))throw new TypeError(`argument name is invalid: ${S}`);const q=O(_);if(!e.test(q))throw new TypeError(`argument val is invalid: ${_}`);let M=S+"="+q;if(!L)return M;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);M+="; Max-Age="+L.maxAge}if(L.domain){if(!t.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);M+="; Domain="+L.domain}if(L.path){if(!r.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);M+="; Path="+L.path}if(L.expires){if(!N(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);M+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(M+="; HttpOnly"),L.secure&&(M+="; Secure"),L.partitioned&&(M+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":M+="; Priority=Low";break;case"medium":M+="; Priority=Medium";break;case"high":M+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":M+="; SameSite=Strict";break;case"lax":M+="; SameSite=Lax";break;case"none":M+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return M}function v(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function N(S){return i.call(S)==="[object Date]"}return Rh}nN();var S1="popstate";function rN(n={}){function e(r,i){let{pathname:l,search:u,hash:h}=r.location;return Ag("",{pathname:l,search:u,hash:h},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Yh(i)}return sN(e,t,null,n)}function gr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Uo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aN(){return Math.random().toString(36).substring(2,10)}function E1(n,e){return{usr:n.state,key:n.key,idx:e}}function Ag(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Dd(e):e,state:t,key:e&&e.key||r||aN()}}function Yh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Dd(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function sN(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:l=!1}=r,u=i.history,h="POP",f=null,g=v();g==null&&(g=0,u.replaceState({...u.state,idx:g},""));function v(){return(u.state||{idx:null}).idx}function N(){h="POP";let q=v(),M=q==null?null:q-g;g=q,f&&f({action:h,location:O.location,delta:M})}function S(q,M){h="PUSH";let T=Ag(O.location,q,M);g=v()+1;let I=E1(T,g),ee=O.createHref(T);try{u.pushState(I,"",ee)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;i.location.assign(ee)}l&&f&&f({action:h,location:O.location,delta:1})}function _(q,M){h="REPLACE";let T=Ag(O.location,q,M);g=v();let I=E1(T,g),ee=O.createHref(T);u.replaceState(I,"",ee),l&&f&&f({action:h,location:O.location,delta:0})}function L(q){return iN(q)}let O={get action(){return h},get location(){return n(i,u)},listen(q){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(S1,N),f=q,()=>{i.removeEventListener(S1,N),f=null}},createHref(q){return e(i,q)},createURL:L,encodeLocation(q){let M=L(q);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:S,replace:_,go(q){return u.go(q)}};return O}function iN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),gr(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Yh(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Iy(n,e,t="/"){return oN(n,e,t,!1)}function oN(n,e,t,r){let i=typeof e=="string"?Dd(e):e,l=jl(i.pathname||"/",t);if(l==null)return null;let u=Ly(n);lN(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let g=vN(l);h=xN(u[f],g,r)}return h}function Ly(n,e=[],t=[],r=""){let i=(l,u,h)=>{let f={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};f.relativePath.startsWith("/")&&(gr(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let g=El([r,f.relativePath]),v=t.concat(f);l.children&&l.children.length>0&&(gr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Ly(l.children,e,v,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:pN(g,l.index),routesMeta:v})};return n.forEach((l,u)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))i(l,u);else for(let f of Py(l.path))i(l,u,f)}),e}function Py(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return i?[l,""]:[l];let u=Py(r.join("/")),h=[];return h.push(...u.map(f=>f===""?l:[l,f].join("/"))),i&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function lN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:gN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var cN=/^:[\w-]+$/,uN=3,dN=2,hN=1,fN=10,mN=-2,T1=n=>n==="*";function pN(n,e){let t=n.split("/"),r=t.length;return t.some(T1)&&(r+=mN),e&&(r+=dN),t.filter(i=>!T1(i)).reduce((i,l)=>i+(cN.test(l)?uN:l===""?hN:fN),r)}function gN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function xN(n,e,t=!1){let{routesMeta:r}=n,i={},l="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],g=h===r.length-1,v=l==="/"?e:e.slice(l.length)||"/",N=Ym({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},v),S=f.route;if(!N&&g&&t&&!r[r.length-1].route.index&&(N=Ym({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!N)return null;Object.assign(i,N.params),u.push({params:i,pathname:El([l,N.pathname]),pathnameBase:_N(El([l,N.pathnameBase])),route:S}),N.pathnameBase!=="/"&&(l=El([l,N.pathnameBase]))}return u}function Ym(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=bN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let l=i[0],u=l.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((g,{paramName:v,isOptional:N},S)=>{if(v==="*"){let L=h[S]||"";u=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const _=h[S];return N&&!_?g[v]=void 0:g[v]=(_||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:u,pattern:n}}function bN(n,e=!1,t=!0){Uo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function vN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uo(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function jl(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function yN(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Dd(n):n;return{pathname:t?t.startsWith("/")?t:wN(t,e):e,search:AN(r),hash:SN(i)}}function wN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function ng(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Dy(n){let e=NN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Oy(n,e,t,r=!1){let i;typeof n=="string"?i=Dd(n):(i={...n},gr(!i.pathname||!i.pathname.includes("?"),ng("?","pathname","search",i)),gr(!i.pathname||!i.pathname.includes("#"),ng("#","pathname","hash",i)),gr(!i.search||!i.search.includes("#"),ng("#","search","hash",i)));let l=n===""||i.pathname==="",u=l?"/":i.pathname,h;if(u==null)h=t;else{let N=e.length-1;if(!r&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),N-=1;i.pathname=S.join("/")}h=N>=0?e[N]:"/"}let f=yN(i,h),g=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(g||v)&&(f.pathname+="/"),f}var El=n=>n.join("/").replace(/\/\/+/g,"/"),_N=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),AN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,SN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function EN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var My=["POST","PUT","PATCH","DELETE"];new Set(My);var TN=["GET",...My];new Set(TN);var Od=Ne.createContext(null);Od.displayName="DataRouter";var g0=Ne.createContext(null);g0.displayName="DataRouterState";var Fy=Ne.createContext({isTransitioning:!1});Fy.displayName="ViewTransition";var jN=Ne.createContext(new Map);jN.displayName="Fetchers";var kN=Ne.createContext(null);kN.displayName="Await";var qo=Ne.createContext(null);qo.displayName="Navigation";var of=Ne.createContext(null);of.displayName="Location";var Ho=Ne.createContext({outlet:null,matches:[],isDataRoute:!1});Ho.displayName="Route";var hx=Ne.createContext(null);hx.displayName="RouteError";function CN(n,{relative:e}={}){gr(lf(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=Ne.useContext(qo),{hash:i,pathname:l,search:u}=cf(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:El([t,l])),r.createHref({pathname:h,search:u,hash:i})}function lf(){return Ne.useContext(of)!=null}function Ll(){return gr(lf(),"useLocation() may be used only in the context of a <Router> component."),Ne.useContext(of).location}var Vy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function By(n){Ne.useContext(qo).static||Ne.useLayoutEffect(n)}function rs(){let{isDataRoute:n}=Ne.useContext(Ho);return n?qN():RN()}function RN(){gr(lf(),"useNavigate() may be used only in the context of a <Router> component.");let n=Ne.useContext(Od),{basename:e,navigator:t}=Ne.useContext(qo),{matches:r}=Ne.useContext(Ho),{pathname:i}=Ll(),l=JSON.stringify(Dy(r)),u=Ne.useRef(!1);return By(()=>{u.current=!0}),Ne.useCallback((f,g={})=>{if(Uo(u.current,Vy),!u.current)return;if(typeof f=="number"){t.go(f);return}let v=Oy(f,JSON.parse(l),i,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:El([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,i,n])}Ne.createContext(null);function Eu(){let{matches:n}=Ne.useContext(Ho),e=n[n.length-1];return e?e.params:{}}function cf(n,{relative:e}={}){let{matches:t}=Ne.useContext(Ho),{pathname:r}=Ll(),i=JSON.stringify(Dy(t));return Ne.useMemo(()=>Oy(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function IN(n,e){return Uy(n,e)}function Uy(n,e,t,r){var M;gr(lf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=Ne.useContext(qo),{matches:l}=Ne.useContext(Ho),u=l[l.length-1],h=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let T=v&&v.path||"";zy(f,!v||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let N=Ll(),S;if(e){let T=typeof e=="string"?Dd(e):e;gr(g==="/"||((M=T.pathname)==null?void 0:M.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${T.pathname}" was given in the \`location\` prop.`),S=T}else S=N;let _=S.pathname||"/",L=_;if(g!=="/"){let T=g.replace(/^\//,"").split("/");L="/"+_.replace(/^\//,"").split("/").slice(T.length).join("/")}let O=Iy(n,{pathname:L});Uo(v||O!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Uo(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=MN(O&&O.map(T=>Object.assign({},T,{params:Object.assign({},h,T.params),pathname:El([g,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?g:El([g,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),l,t,r);return e&&q?Ne.createElement(of.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},q):q}function LN(){let n=zN(),e=EN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=Ne.createElement(Ne.Fragment,null,Ne.createElement("p",null,"💿 Hey developer 👋"),Ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Ne.createElement("code",{style:l},"ErrorBoundary")," or"," ",Ne.createElement("code",{style:l},"errorElement")," prop on your route.")),Ne.createElement(Ne.Fragment,null,Ne.createElement("h2",null,"Unexpected Application Error!"),Ne.createElement("h3",{style:{fontStyle:"italic"}},e),t?Ne.createElement("pre",{style:i},t):null,u)}var PN=Ne.createElement(LN,null),DN=class extends Ne.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?Ne.createElement(Ho.Provider,{value:this.props.routeContext},Ne.createElement(hx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ON({routeContext:n,match:e,children:t}){let r=Ne.useContext(Od);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Ne.createElement(Ho.Provider,{value:n},t)}function MN(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,l=t==null?void 0:t.errors;if(l!=null){let f=i.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);gr(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let u=!1,h=-1;if(t)for(let f=0;f<i.length;f++){let g=i[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=f),g.route.id){let{loaderData:v,errors:N}=t,S=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!N||N[g.route.id]===void 0);if(g.route.lazy||S){u=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}return i.reduceRight((f,g,v)=>{let N,S=!1,_=null,L=null;t&&(N=l&&g.route.id?l[g.route.id]:void 0,_=g.route.errorElement||PN,u&&(h<0&&v===0?(zy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,L=null):h===v&&(S=!0,L=g.route.hydrateFallbackElement||null)));let O=e.concat(i.slice(0,v+1)),q=()=>{let M;return N?M=_:S?M=L:g.route.Component?M=Ne.createElement(g.route.Component,null):g.route.element?M=g.route.element:M=f,Ne.createElement(ON,{match:g,routeContext:{outlet:f,matches:O,isDataRoute:t!=null},children:M})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?Ne.createElement(DN,{location:t.location,revalidation:t.revalidation,component:_,error:N,children:q(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):q()},null)}function fx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FN(n){let e=Ne.useContext(Od);return gr(e,fx(n)),e}function VN(n){let e=Ne.useContext(g0);return gr(e,fx(n)),e}function BN(n){let e=Ne.useContext(Ho);return gr(e,fx(n)),e}function mx(n){let e=BN(n),t=e.matches[e.matches.length-1];return gr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function UN(){return mx("useRouteId")}function zN(){var r;let n=Ne.useContext(hx),e=VN("useRouteError"),t=mx("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function qN(){let{router:n}=FN("useNavigate"),e=mx("useNavigate"),t=Ne.useRef(!1);return By(()=>{t.current=!0}),Ne.useCallback(async(i,l={})=>{Uo(t.current,Vy),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...l}))},[n,e])}var j1={};function zy(n,e,t){!e&&!j1[n]&&(j1[n]=!0,Uo(!1,t))}Ne.memo(HN);function HN({routes:n,future:e,state:t}){return Uy(n,void 0,t,e)}function Yn(n){gr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WN({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:l=!1}){gr(!lf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=Ne.useMemo(()=>({basename:u,navigator:i,static:l,future:{}}),[u,i,l]);typeof t=="string"&&(t=Dd(t));let{pathname:f="/",search:g="",hash:v="",state:N=null,key:S="default"}=t,_=Ne.useMemo(()=>{let L=jl(f,u);return L==null?null:{location:{pathname:L,search:g,hash:v,state:N,key:S},navigationType:r}},[u,f,g,v,N,S,r]);return Uo(_!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:Ne.createElement(qo.Provider,{value:h},Ne.createElement(of.Provider,{children:e,value:_}))}function GN({children:n,location:e}){return IN(Sg(n),e)}function Sg(n,e=[]){let t=[];return Ne.Children.forEach(n,(r,i)=>{if(!Ne.isValidElement(r))return;let l=[...e,i];if(r.type===Ne.Fragment){t.push.apply(t,Sg(r.props.children,l));return}gr(r.type===Yn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Sg(r.props.children,l)),t.push(u)}),t}var Im="get",Lm="application/x-www-form-urlencoded";function x0(n){return n!=null&&typeof n.tagName=="string"}function KN(n){return x0(n)&&n.tagName.toLowerCase()==="button"}function YN(n){return x0(n)&&n.tagName.toLowerCase()==="form"}function $N(n){return x0(n)&&n.tagName.toLowerCase()==="input"}function XN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function QN(n,e){return n.button===0&&(!e||e==="_self")&&!XN(n)}var ym=null;function JN(){if(ym===null)try{new FormData(document.createElement("form"),0),ym=!1}catch{ym=!0}return ym}var ZN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rg(n){return n!=null&&!ZN.has(n)?(Uo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Lm}"`),null):n}function e_(n,e){let t,r,i,l,u;if(YN(n)){let h=n.getAttribute("action");r=h?jl(h,e):null,t=n.getAttribute("method")||Im,i=rg(n.getAttribute("enctype"))||Lm,l=new FormData(n)}else if(KN(n)||$N(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(r=f?jl(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Im,i=rg(n.getAttribute("formenctype"))||rg(h.getAttribute("enctype"))||Lm,l=new FormData(h,n),!JN()){let{name:g,type:v,value:N}=n;if(v==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,N)}}else{if(x0(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Im,r=null,i=Lm,u=n}return l&&i==="text/plain"&&(u=l,l=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:l,body:u}}function px(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function t_(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function n_(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function r_(n,e,t){let r=await Promise.all(n.map(async i=>{let l=e.routes[i.route.id];if(l){let u=await t_(l,t);return u.links?u.links():[]}return[]}));return o_(r.flat(1).filter(n_).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function k1(n,e,t,r,i,l){let u=(f,g)=>t[g]?f.route.id!==t[g].route.id:!0,h=(f,g)=>{var v;return t[g].pathname!==f.pathname||((v=t[g].route.path)==null?void 0:v.endsWith("*"))&&t[g].params["*"]!==f.params["*"]};return l==="assets"?e.filter((f,g)=>u(f,g)||h(f,g)):l==="data"?e.filter((f,g)=>{var N;let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(u(f,g)||h(f,g))return!0;if(f.route.shouldRevalidate){let S=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((N=t[0])==null?void 0:N.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function a_(n,e,{includeHydrateFallback:t}={}){return s_(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function s_(n){return[...new Set(n)]}function i_(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function o_(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let l=JSON.stringify(i_(i));return t.has(l)||(t.add(l),r.push({key:l,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var l_=new Set([100,101,204,205]);function c_(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&jl(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function qy(){let n=Ne.useContext(Od);return px(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function u_(){let n=Ne.useContext(g0);return px(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gx=Ne.createContext(void 0);gx.displayName="FrameworkContext";function Hy(){let n=Ne.useContext(gx);return px(n,"You must render this element inside a <HydratedRouter> element"),n}function d_(n,e){let t=Ne.useContext(gx),[r,i]=Ne.useState(!1),[l,u]=Ne.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:g,onMouseLeave:v,onTouchStart:N}=e,S=Ne.useRef(null);Ne.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let O=M=>{M.forEach(T=>{u(T.isIntersecting)})},q=new IntersectionObserver(O,{threshold:.5});return S.current&&q.observe(S.current),()=>{q.disconnect()}}},[n]),Ne.useEffect(()=>{if(r){let O=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(O)}}},[r]);let _=()=>{i(!0)},L=()=>{i(!1),u(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:Ih(h,_),onBlur:Ih(f,L),onMouseEnter:Ih(g,_),onMouseLeave:Ih(v,L),onTouchStart:Ih(N,_)}]:[!1,S,{}]}function Ih(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function h_({page:n,...e}){let{router:t}=qy(),r=Ne.useMemo(()=>Iy(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?Ne.createElement(m_,{page:n,matches:r,...e}):null}function f_(n){let{manifest:e,routeModules:t}=Hy(),[r,i]=Ne.useState([]);return Ne.useEffect(()=>{let l=!1;return r_(n,e,t).then(u=>{l||i(u)}),()=>{l=!0}},[n,e,t]),r}function m_({page:n,matches:e,...t}){let r=Ll(),{manifest:i,routeModules:l}=Hy(),{basename:u}=qy(),{loaderData:h,matches:f}=u_(),g=Ne.useMemo(()=>k1(n,e,f,i,r,"data"),[n,e,f,i,r]),v=Ne.useMemo(()=>k1(n,e,f,i,r,"assets"),[n,e,f,i,r]),N=Ne.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let L=new Set,O=!1;if(e.forEach(M=>{var I;let T=i.routes[M.route.id];!T||!T.hasLoader||(!g.some(ee=>ee.route.id===M.route.id)&&M.route.id in h&&((I=l[M.route.id])!=null&&I.shouldRevalidate)||T.hasClientLoader?O=!0:L.add(M.route.id))}),L.size===0)return[];let q=c_(n,u);return O&&L.size>0&&q.searchParams.set("_routes",e.filter(M=>L.has(M.route.id)).map(M=>M.route.id).join(",")),[q.pathname+q.search]},[u,h,r,i,g,e,n,l]),S=Ne.useMemo(()=>a_(v,i),[v,i]),_=f_(v);return Ne.createElement(Ne.Fragment,null,N.map(L=>Ne.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...t})),S.map(L=>Ne.createElement("link",{key:L,rel:"modulepreload",href:L,...t})),_.map(({key:L,link:O})=>Ne.createElement("link",{key:L,...O})))}function p_(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Wy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Wy&&(window.__reactRouterVersion="7.6.2")}catch{}function g_({basename:n,children:e,window:t}){let r=Ne.useRef();r.current==null&&(r.current=rN({window:t,v5Compat:!0}));let i=r.current,[l,u]=Ne.useState({action:i.action,location:i.location}),h=Ne.useCallback(f=>{Ne.startTransition(()=>u(f))},[u]);return Ne.useLayoutEffect(()=>i.listen(h),[i,h]),Ne.createElement(WN,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:i})}var Gy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,un=Ne.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:l,replace:u,state:h,target:f,to:g,preventScrollReset:v,viewTransition:N,...S},_){let{basename:L}=Ne.useContext(qo),O=typeof g=="string"&&Gy.test(g),q,M=!1;if(typeof g=="string"&&O&&(q=g,Wy))try{let V=new URL(window.location.href),Q=g.startsWith("//")?new URL(V.protocol+g):new URL(g),R=jl(Q.pathname,L);Q.origin===V.origin&&R!=null?g=R+Q.search+Q.hash:M=!0}catch{Uo(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=CN(g,{relative:i}),[I,ee,se]=d_(r,S),ge=y_(g,{replace:u,state:h,target:f,preventScrollReset:v,relative:i,viewTransition:N});function W(V){e&&e(V),V.defaultPrevented||ge(V)}let k=Ne.createElement("a",{...S,...se,href:q||T,onClick:M||l?e:W,ref:p_(_,ee),target:f,"data-discover":!O&&t==="render"?"true":void 0});return I&&!O?Ne.createElement(Ne.Fragment,null,k,Ne.createElement(h_,{page:T})):k});un.displayName="Link";var x_=Ne.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:l,to:u,viewTransition:h,children:f,...g},v){let N=cf(u,{relative:g.relative}),S=Ll(),_=Ne.useContext(g0),{navigator:L,basename:O}=Ne.useContext(qo),q=_!=null&&S_(N)&&h===!0,M=L.encodeLocation?L.encodeLocation(N).pathname:N.pathname,T=S.pathname,I=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;t||(T=T.toLowerCase(),I=I?I.toLowerCase():null,M=M.toLowerCase()),I&&O&&(I=jl(I,O)||I);const ee=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let se=T===M||!i&&T.startsWith(M)&&T.charAt(ee)==="/",ge=I!=null&&(I===M||!i&&I.startsWith(M)&&I.charAt(M.length)==="/"),W={isActive:se,isPending:ge,isTransitioning:q},k=se?e:void 0,V;typeof r=="function"?V=r(W):V=[r,se?"active":null,ge?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let Q=typeof l=="function"?l(W):l;return Ne.createElement(un,{...g,"aria-current":k,className:V,ref:v,style:Q,to:u,viewTransition:h},typeof f=="function"?f(W):f)});x_.displayName="NavLink";var b_=Ne.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:l,method:u=Im,action:h,onSubmit:f,relative:g,preventScrollReset:v,viewTransition:N,...S},_)=>{let L=__(),O=A_(h,{relative:g}),q=u.toLowerCase()==="get"?"get":"post",M=typeof h=="string"&&Gy.test(h),T=I=>{if(f&&f(I),I.defaultPrevented)return;I.preventDefault();let ee=I.nativeEvent.submitter,se=(ee==null?void 0:ee.getAttribute("formmethod"))||u;L(ee||I.currentTarget,{fetcherKey:e,method:se,navigate:t,replace:i,state:l,relative:g,preventScrollReset:v,viewTransition:N})};return Ne.createElement("form",{ref:_,method:q,action:O,onSubmit:r?f:T,...S,"data-discover":!M&&n==="render"?"true":void 0})});b_.displayName="Form";function v_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ky(n){let e=Ne.useContext(Od);return gr(e,v_(n)),e}function y_(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:l,viewTransition:u}={}){let h=rs(),f=Ll(),g=cf(n,{relative:l});return Ne.useCallback(v=>{if(QN(v,e)){v.preventDefault();let N=t!==void 0?t:Yh(f)===Yh(g);h(n,{replace:N,state:r,preventScrollReset:i,relative:l,viewTransition:u})}},[f,h,g,t,r,e,n,i,l,u])}var w_=0,N_=()=>`__${String(++w_)}__`;function __(){let{router:n}=Ky("useSubmit"),{basename:e}=Ne.useContext(qo),t=UN();return Ne.useCallback(async(r,i={})=>{let{action:l,method:u,encType:h,formData:f,body:g}=e_(r,e);if(i.navigate===!1){let v=i.fetcherKey||N_();await n.fetch(v,t,i.action||l,{preventScrollReset:i.preventScrollReset,formData:f,body:g,formMethod:i.method||u,formEncType:i.encType||h,flushSync:i.flushSync})}else await n.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:f,body:g,formMethod:i.method||u,formEncType:i.encType||h,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function A_(n,{relative:e}={}){let{basename:t}=Ne.useContext(qo),r=Ne.useContext(Ho);gr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),l={...cf(n||".",{relative:e})},u=Ll();if(n==null){l.search=u.search;let h=new URLSearchParams(l.search),f=h.getAll("index");if(f.some(v=>v==="")){h.delete("index"),f.filter(N=>N).forEach(N=>h.append("index",N));let v=h.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:El([t,l.pathname])),Yh(l)}function S_(n,e={}){let t=Ne.useContext(Fy);gr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ky("useViewTransitionState"),i=cf(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=jl(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=jl(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ym(i.pathname,u)!=null||Ym(i.pathname,l)!=null}[...l_];const E_=()=>{const n=Ll(),[e,t]=Ne.useState(!1),r=o.jsxs("nav",{className:"space-y-8 relative z-10 p-6",children:[o.jsx("div",{children:o.jsxs(un,{to:"/",className:`w-full flex items-center gap-2 text-lg font-black uppercase tracking-widest mb-6 px-2 py-3 rounded-xl transition-colors border-2 border-violet-700/60 shadow-lg shadow-violet-900/10
                        ${n.pathname==="/"?"bg-gradient-to-r from-violet-700 to-indigo-700 text-white border-violet-700/90":"bg-slate-900/80 text-violet-300 hover:bg-violet-900/60 hover:text-white"}`,onClick:()=>t(!1),children:[o.jsx("span",{children:"🏰"}),"Campaign Tracker"]})}),o.jsx("div",{children:o.jsxs(un,{to:"/lore",className:"w-full flex items-center gap-2 text-md font-black text-slate-400 uppercase tracking-widest mb-4 px-2 py-2 rounded transition-colors hover:text-amber-400 focus:outline-none focus:ring-2 focus:ring-amber-400",onClick:()=>t(!1),children:[o.jsx("span",{children:"📖"}),"Lore"]})}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-md font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[o.jsx("span",{children:"📚"}),"Core Rules"]}),o.jsxs("ul",{className:"space-y-2 mb-6",children:[o.jsx("li",{children:o.jsx(un,{to:"/game-setup",className:`block px-4 py-2 rounded-xl font-black tracking-wide border border-slate-700/40 transition-all duration-200 ${n.pathname.startsWith("/game-setup")?"bg-gradient-to-r from-green-700 to-emerald-700 text-white shadow-lg shadow-green-900/30 border-green-700/60":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-green-300"}`,onClick:()=>t(!1),children:"🎯 Game Setup"})}),o.jsx("li",{children:o.jsx(un,{to:"/turn-actions",className:`block px-4 py-2 rounded-xl font-black tracking-wide border border-slate-700/40 transition-all duration-200 ${n.pathname.startsWith("/turn-actions")?"bg-gradient-to-r from-indigo-700 to-blue-700 text-white shadow-lg shadow-indigo-900/30 border-indigo-700/60":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-indigo-300"}`,onClick:()=>t(!1),children:"⏱️ Turn & Actions"})}),o.jsx("li",{children:o.jsx(un,{to:"/special-rules",className:`block px-4 py-2 rounded-xl font-black tracking-wide border border-slate-700/40 transition-all duration-200 ${n.pathname.startsWith("/special-rules")?"bg-gradient-to-r from-cyan-700 to-blue-700 text-white shadow-lg shadow-cyan-900/30 border-cyan-700/60":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-cyan-300"}`,onClick:()=>t(!1),children:"🔮 Special Rules & Traits"})}),o.jsx("li",{children:o.jsx(un,{to:"/scenarios",className:`block px-4 py-2 rounded-xl font-black tracking-wide border border-slate-700/40 transition-all duration-200 ${n.pathname.startsWith("/scenarios")?"bg-gradient-to-r from-emerald-700 to-teal-700 text-white shadow-lg shadow-emerald-900/30 border-emerald-700/60":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-emerald-300"}`,onClick:()=>t(!1),children:"📜 Scenarios & Missions"})})]})]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-md font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[o.jsx("span",{children:"🛡️"}),"Faction Rules"]}),o.jsxs("ul",{className:"space-y-2 mb-6",children:[o.jsx("li",{children:o.jsx(un,{to:"/factions/House%20Kaevaryn",className:`block px-4 py-2 rounded-xl font-black tracking-wide border border-slate-700/40 transition-all duration-200 ${n.pathname==="/factions/House%20Kaevaryn"?"bg-gradient-to-r from-rose-700 to-pink-700 text-white shadow-lg shadow-rose-900/30 border-rose-700/60":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-rose-300"}`,onClick:()=>t(!1),children:"🏰 House Kaevaryn"})}),o.jsx("li",{children:o.jsx(un,{to:"/factions/Fangs%20of%20the%20Pale%20Hunger",className:`block px-4 py-2 rounded-xl font-black tracking-wide border border-slate-700/40 transition-all duration-200 ${n.pathname==="/factions/Fangs%20of%20the%20Pale%20Hunger"?"bg-gradient-to-r from-lime-700 to-amber-700 text-white shadow-lg shadow-lime-900/30 border-lime-700/60":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-lime-300"}`,onClick:()=>t(!1),children:"🐺 Fangs of the Pale Hunger"})}),o.jsx("li",{children:o.jsx(un,{to:"/factions/House%20Duresse",className:`block px-4 py-2 rounded-xl font-black tracking-wide border border-slate-700/40 transition-all duration-200 ${n.pathname==="/factions/House%20Duresse"?"bg-gradient-to-r from-blue-700 to-purple-700 text-white shadow-lg shadow-blue-900/30 border-blue-700/60":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-blue-300"}`,onClick:()=>t(!1),children:"🧬 House Duresse"})}),o.jsx("li",{children:o.jsx(un,{to:"/factions/Ash-Brethren",className:`block px-4 py-2 rounded-xl font-black tracking-wide border border-slate-700/40 transition-all duration-200 ${n.pathname==="/factions/Ash-Brethren"?"bg-gradient-to-r from-gray-700 to-amber-700 text-white shadow-lg shadow-gray-900/30 border-gray-700/60":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-amber-300"}`,onClick:()=>t(!1),children:"🔥 Ash-Brethren"})})]})]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-md font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[o.jsx("span",{children:"🧩"}),"Advanced Rules"]}),o.jsxs("ul",{className:"space-y-2 mb-6",children:[o.jsx("li",{children:o.jsx(un,{to:"/campaign-rules",className:`block px-4 py-2 rounded-xl font-black tracking-wide border border-slate-700/40 transition-all duration-200 ${n.pathname.startsWith("/campaign-rules")?"bg-gradient-to-r from-violet-700 to-purple-700 text-white shadow-lg shadow-violet-900/30 border-violet-700/60":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-violet-300"}`,onClick:()=>t(!1),children:"🏰 Campaign Rules"})}),o.jsx("li",{children:o.jsx(un,{to:"/fate-cards",className:`block px-4 py-2 rounded-xl font-black tracking-wide border border-slate-700/40 transition-all duration-200 ${n.pathname.startsWith("/fate-cards")?"bg-gradient-to-r from-rose-700 to-pink-700 text-white shadow-lg shadow-rose-900/30 border-rose-700/60":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-rose-300"}`,onClick:()=>t(!1),children:"🎴 Fate Cards"})}),o.jsx("li",{children:o.jsx(un,{to:"/keywords",className:`block px-4 py-2 rounded-xl font-black tracking-wide border border-slate-700/40 transition-all duration-200 ${n.pathname.startsWith("/keywords")?"bg-gradient-to-r from-purple-700 to-violet-700 text-white shadow-lg shadow-purple-900/30 border-purple-700/60":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-purple-300"}`,onClick:()=>t(!1),children:"📚 Keywords"})}),o.jsx("li",{children:o.jsx(un,{to:"/fate-cards-list",className:`block px-4 py-2 rounded-xl font-black tracking-wide border border-slate-700/40 transition-all duration-200 ${n.pathname.startsWith("/fate-cards-list")?"bg-gradient-to-r from-rose-700 to-pink-700 text-white shadow-lg shadow-rose-900/30 border-rose-700/60":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-rose-300"}`,onClick:()=>t(!1),children:"🎴 Fate Cards List"})})]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 bg-slate-900/90 border border-slate-700 rounded-full p-3 shadow-lg text-2xl text-amber-400 focus:outline-none focus:ring-2 focus:ring-amber-500",onClick:()=>t(!0),"aria-label":"Open sidebar",children:o.jsx("span",{children:"☰"})}),o.jsxs("aside",{className:`w-64 bg-gradient-to-b from-slate-900 via-gray-900 to-black border-r border-slate-700/70 p-0 overflow-y-auto h-full shadow-2xl fixed md:static top-0 left-0 z-50 transition-transform duration-300
                    ${e?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:block`,style:e?{boxShadow:"0 0 0 9999px rgba(0,0,0,0.7)"}:{},children:[o.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none select-none",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.08'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),r,e&&o.jsx("button",{className:"absolute top-4 right-4 z-50 bg-slate-900/90 border border-slate-700 rounded-full p-2 shadow-lg text-xl text-amber-400 focus:outline-none focus:ring-2 focus:ring-amber-500 md:hidden",onClick:()=>t(!1),"aria-label":"Close sidebar",children:"✕"})]}),e&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-30 md:hidden",onClick:()=>t(!1),"aria-label":"Close sidebar backdrop"})]})},b0={"House Kaevaryn":JSON.parse(`{"lore":["House Kaevaryn stands as one of the last bastions of feudal nobility in a crumbling world scorched by forgotten wars and riddled with relics no longer understood...","Descended from the highwardens of the Southern Arches..."],"themesAndPlaystyle":{"passiveTrait":{"title":"Passive Faction Trait – Rite of Steel Unbroken","description":["At the end of each activation, if a House Kaevaryn unit did not suffer a Wound this turn, it gains +1 Morale (to a maximum of 7) until the start of its next activation.","In addition, whenever a friendly unit succeeds in a Morale Test, you may choose one House Kaevaryn unit within 6\\" to reroll one Defense die the next time it is targeted this round."]},"leaderTrait":{"title":"Leader Trait — Banner of Resolve","description":"Aura grants +1 Morale and one re-roll on attack dice per activation; once per turn, the first attack made by a unit within range may immediately be followed by a second attack (still only one attack per activation unless explicitly allowed)."},"tacticalDirectives":["Tactical Discipline: All friendly Troopers within 6\\" of the Leader gain re-roll on all Attack rolls during Round 1.","Knight's Gambit: Once per game, you may activate a second unit immediately after a Kaevaryn unit finishes its activation. That unit gains +1 Dice to all Attack rolls."]},"traitTable":[{"roll":1,"name":"Warden's Step","description":"Once per game, this unit may Move again immediately after completing a successful charge (even if it made an attack). Cannot be used more than once per game."},{"roll":2,"name":"Sacred Geometry","description":"While within 3\\" of two or more friendly units, this unit gains +1 Defense due to ideal formation structure."},{"roll":3,"name":"Doctrine of Iron","description":"The first time this unit suffers Wounds each game, it ignores it."},{"roll":4,"name":"Judicial Mandate","description":"When targeting an enemy that has already activated this round, gain +1 Attack die."},{"roll":5,"name":"Litany of Denial","description":"Once per game, this unit may force a power targeting it to suffer –2 successes before Resolve is rolled."},{"roll":6,"name":"Knight-Errant's Resolve","description":"If this unit is the last remaining friendly model on the field, it gains +1 Action and +1 Morale for the remainder of the battle."}],"summary":["Mechanically, House Kaevaryn rewards careful positioning, leadership synergies, and incremental advantage...","Their casters are focused on offensive disruption—such as the Scrivener-Ritesman—or precise battlefield support like the Iron Caste Mechanist..."],"playstyleBullets":["Orderly, synergistic formations","Tools for controlling enemy activations and limiting aggressive charges","Reliable and flexible firepower with elite melee support","A noble, tragic aesthetic where duty outweighs survival"],"closingNote":"House Kaevaryn is not about wild plays or overwhelming aggression—they are the bulwark, the oathbound blade, and the last breath of civility in a collapsing world.","wiki":[{"title":"Seat of Power","content":["[Castle Kaevaryn](/lore/locations/Castle%20Kaevaryn), atop the ruins of [Circadia Arcology](/lore/locations/Circadia%20Arcology)"]},{"title":"Date Established","content":["Year 36"]},{"title":"Emblem & Colors","content":["Red, Silver, Pink, Brass"]},{"title":"Influential People","content":["Master of War – [Sir Rhagar Vantheyn](/lore/characters/Sir%20Rhagar%20Vantheyn), the Unyielding Wall","Arch‑Cardinal of Iron – [Sister Melkara Dross](/lore/characters/Sister%20Melkara%20Dross)","Master of the Hunt – [Ser Kendros Halven](/lore/characters/Ser%20Kendros%20Halven)"]},{"title":"Succession","content":["Power within House Kaevaryn is not simply inherited—it is seized, sanctified, and sealed through an ancient and deadly rite known as the Crimson Accord. At its heart lies a brutal fusion of tradition, biotechnology, and decaying machine sovereignty.","The ruling sovereign of Kaevaryn must physically bond with [the Throne‑Mnemos](/lore/artifacts/The%20Throne‑Mnemos), a pre‑Silencing neural control matrix originally designed to interface with city‑scale governance systems. Over centuries of patchwork maintenance and reinterpretation, it has become a symbol of divine rulership—and a death trap for the unworthy.","The Throne is carved from blackened alloy and embedded with cranial spine jacks, ossified blood channels, and pulsating control veins.","Upon bonding, the ruler gains partial synaptic control over House systems: weather‑field harmonics, internal defense codes, Frame deployment channels, and limited access to surviving orbital satellites. It is also said the Throne whispers, storing the dreams, regrets, and madness of every monarch who has ever sat upon it.","To become ruler, a candidate must undergo the Crimson Accord, a sanctioned, ceremonial duel to first blood—or to the death, should another claimant stand. Only blood relatives or oath‑sworn successors may challenge.","The victor is escorted by techno‑priests to the Vault of Bone Signal, beneath the Ring‑Spire, where the bonding occurs. There, the would-be ruler undergoes the Blood Convergence—injecting nanite‑infused ancestral serum to allow compatibility with the Throne‑Mnemos.","If the bonding succeeds, the new ruler inherits:","- Command access codes to the House's defense grids, Frames, and communication beacons.","- Partial memories of past monarchs, fragmented and filtered through corrupted AI subroutines.","- A biometric override authority over subordinate nobles who have taken the Blood‑Oath.","The rite leaves lasting marks: the eyes of a bonded ruler glow faintly blue‑crimson; their veins pulse visibly beneath the skin; their sleep is haunted by glitching dreams of the past."]},{"title":"Geography","regions":[{"title":"Central Highland Bastion","icon":"⛰️","text":"House Kaevaryn commands the [Central Highland Bastion](/lore/locations/Central%20Highland%20Bastion), a fortified plateau stretching across the remnants of [Old Circadia](/lore/locations/Circadia%20Arcology)—the once-radiant hub of trade, now a haunted carcass of broken infrastructure and ash-blasted ruins."},{"title":"Old Circadia's Skeleton","icon":"🏛️","text":"The throne-city of Kaevaryn rises from the scorched framework of [Old Circadia's core](/lore/locations/Circadia%20Arcology). Great plazas of collapsed arcologies, rust-choked data towers, and ossified transit rails form the bones of the realm. The Throne-Mnemos, seat of Kaevaryn's neural sovereignty, lies at its center, embedded deep within the vault-complex known as the Crownhold."},{"title":"Ring-Spire Ridge","icon":"🗼","text":"To the north, the [Ring-Spire Watchtower](/lore/locations/Ring‑Spire%20Watchtower) looms atop a shattered orbital elevator shaft—one of the last semi-functional tethers on the planet. Though incapable of true orbital ascent, it can support low-atmo cargo lifts and signal relays. Its core interface is guarded by [Iron Caste adepts](/lore/factions/Iron%20Caste) who maintain and interpret its failing systems. Some whisper of ancient AI residues still whispering deep within its black vaults."},{"title":"Weatherfield Triad","icon":"⚡","text":"Kaevaryn's life depends on three operational weather-field nodes—[Sanctum Haline](/lore/locations/Sanctum%20Haline), [Ember Point](/lore/locations/Ember%20Point), and [Veylow Reach](/lore/locations/Veylow%20Reach). These ancient climate-control pylons stabilize the realm's skies and prevent collapse into storm-choked famine. Each node is tended by [Iron Caste adepts](/lore/factions/Iron%20Caste), who execute sacred diagnostics, renew energy loops, and recalibrate storm harmonics by encoded rite. Their loss would mean ecological ruin."},{"title":"Vale of Gleam","icon":"🌾","text":"To the east and south stretch the [Vale of Gleam](/lore/locations/Vale%20of%20Gleam), a patchwork of terraces, manually tilled fields, and relic-harvested hamlets. Though nutrient-depleted and plagued by failing auto-tractors, it remains the breadbasket of Kaevaryn. Peasant communes trade grain for protection, and the [Black Lance](/lore/factions/Black%20Lance) patrols its borders to repel [bio-construct raids](/lore/factions/Fangs%20of%20the%20Pale%20Hunger)."},{"title":"Spinal Frontier","icon":"⚡","text":"Westward lies the [Spine Wastes](/lore/locations/Spine%20Wastes), a ruptured highland zone birthed from a century-old weather-grid overload. Lightning still arcs nightly across fused glass hills, and magnetic storms flicker over broken reactor cores. The area is patrolled irregularly, not for conquest, but to contain what might still stir within the irradiated chasms."}]},{"title":"Economy","regions":[{"title":"Agriculture: Lifeblood from the Vale","icon":"🌾","text":"The [Vale of Gleam](/lore/locations/Vale%20of%20Gleam) remains Kaevaryn's primary source of sustenance. With most agro-automation broken beyond repair, grain and rootstock are cultivated by hand, with ox-engines and rusted [pre-Silencing](/lore/events/The%20Silencing) tractors jury-rigged for survival."},{"title":"Ration Domes","icon":"🏗️","text":"A handful of ancient bio-domes still function on emergency cycles, producing algae blocks and fungal protein to feed soldiers and [Iron Caste](/lore/factions/Iron%20Caste) adepts. The domes' internal environments are heavily degraded, and nutrient yield continues to decline."},{"title":"Salvage Orchards","icon":"🌱","text":"Ash-tillers tend overgrown ruins where vegetation has fused with circuitry—harvesting power-sap, metallic fruit, and memory lichen for alchemical and industrial uses. These strange hybrids are bartered with other Houses for rare minerals or chemical agents."}]},{"title":"Industry","regions":[{"title":"The Crucible-Forges","icon":"🔥","text":"Deep beneath the [Ring-Spire Ridge](/lore/locations/Ring‑Spire%20Watchtower), Kaevaryn's forges operate on a dwindling fuel supply. These sacred facilities can no longer produce complex systems—but still yield blades, armor plates, and ammunition for traditional arms. The [Iron Caste](/lore/factions/Iron%20Caste) maintains their operation as a matter of doctrine, though they admit the forges now \\"whimper rather than sing.\\""},{"title":"The Echo-Works","icon":"⚙️","text":"Crumbling facilities in the [Circadian shell](/lore/locations/Circadia%20Arcology) produce rudimentary parts for firearms, energy capacitors, and pressure systems—nothing close to the glories of the Old Days. Weapon maintenance has become a craft of ritual precision and superstition."},{"title":"Reclaimant Vats","icon":"🛢️","text":"Mobile sludge purifiers and heat-reactors convert battlefield detritus into low-grade fuel and lubricant. These are used to prolong the lifespans of outdated systems—especially the war-bikes and land-haulers critical to Kaevaryn's mobility."}]},{"title":"Trade","regions":[{"title":"Caravan Routes","icon":"🐪","text":"Shielded convoys, called [Dustcords](/lore/locations/Dustcord), navigate cracked highways and shifting wasteland paths to bring surplus food, scrap-metal, and salvage to neighboring Houses. In return, Kaevaryn receives glass-fiber, catalyst resin, and ancient part caches."},{"title":"Export Goods","icon":"📦","text":"Kaevaryn's primary exports include:","list":["Recast melee weapons and manually forged firearms","Grain and fungal ration bricks","Crude fuel and chemical stabilizers","Historical oath-seals and [Iron Caste](/lore/factions/Iron%20Caste) manuals copied by hand"]},{"title":"Orbital Interface","icon":"🛰️","text":"The [Ring-Spire Comms Array](/lore/locations/Ring‑Spire%20Watchtower)—long decoupled from true spaceflight—can still ping satellites in low decay orbit. Drones occasionally return with weather data or signal recordings from ghost beacons. Rumors persist of transmissions not logged in any archive."}]},{"title":"Overview","content":["Founded in Year 36 in the smoldering aftermath of [the Silencing](/lore/events/The%20Silencing), [the First Conclave of Iron](/lore/events/The%20First%20Conclave%20of%20Iron) swore blood‑oaths beneath the shattered Ring‑Spire to reclaim order from the chaos. Rejecting the defunct orbital networks and crumbling arc‑labs, they pledged instead to guard humanity's last bastions with steel, ritual, and unwavering honor.","At their helm stands [Queen Aurelia Kaevaryn](/lore/characters/Queen%20Aurelia%20Kaevaryn)—dubbed 'Ironclad' after leading a daring rescue beneath the collapsed Circle of Flames at age sixteen. Under her stern gaze, novice knights are trained to the brink of death - only in flames may the steel be forged. Then may they don the crimson‑forged armor and earn the Black Lance of Varnhal.","To don the Kaevaryn armor is to share your blood with it - figuratively and literally. Their [Frames](/lore/units/Frames) require a sacrifice of pilot's blood - otherwise they shall not operate. But that is the way - and it has always been for House Kaevaryn.","Though many Houses scoff at their adherence to archaic codes, Kaevaryn's squadrons remain among the most capable warriors on [Varnhal](/lore/locations/Varnhal). Internal dissent simmers, however, as [Iron Caste](/lore/factions/Iron%20Caste) chafe at martial superstition—portents of a fracture that could see the Iron‑Oath divided from its own machine cult. Their seat of power is [Circadia Arcology](/lore/locations/Circadia%20Arcology)."]},{"title":"Current Status","content":["Today, House Kaevaryn remains one of the most stable and influential powers on Varnhal, though its hegemony is far from uncontested:"]},{"title":"Territorial Control","content":["Kaevaryn holds the central highlands around [Circadia Arcology](/lore/locations/Circadia%20Arcology), including the partially restored [Ring‑Spire Watchtower](/lore/locations/Ring‑Spire%20Watchtower) and three key weather‑field nodes. Their domains span fertile valleys that still yield grain under manual tilling, and they control the only functional orbital elevator segment within a thousand kilometers."]},{"title":"Political Situation","regions":[{"title":"Allies","icon":"🤝","text":"Strategic partnerships and mutual agreements that strengthen Kaevaryn's position.","relationships":[{"faction":"House Duresse","nature":"Crumbling trade and mutual defense pact","pact":"[The Pact of Iron and Grain](/lore/events/The%20Pact%20of%20Iron%20and%20Grain) (Year 112) — Kaevaryn secures grain imports in exchange for Frame parts and smithing expertise."},{"faction":"The Iron Caste","nature":"Religious-technological alliance","pact":"[The Concord of the Sacred Circuit](/lore/events/The%20Concord%20of%20the%20Sacred%20Circuit) (Ongoing) — Ensures [Iron Caste](/lore/factions/Iron%20Caste) Adepts maintain weather nodes and defense arrays within Kaevaryn territory."}]},{"title":"Enemies","icon":"⚔️","text":"Active conflicts and hostile relationships that threaten Kaevaryn's security.","relationships":[{"faction":"House Vaelmoor","nature":"Border disputes over grazing lands","clash":"[Skirmish at Ember Pass](/lore/events/Skirmish%20at%20Ember%20Pass) (Year 117) — Kaevaryn repelled Vaelmoor raiders attempting to seize the southern highlands."},{"faction":"Fangs of the Pale Hunger","nature":"Mutant bio-construct raids","clash":"[Siege of Crownhold](/lore/events/Siege%20of%20Crownhold) (Year 119) — House Kaevaryn's stronghold endured a brutal two-week siege by the Fangs warherds."},{"faction":"The Silent Votaries","nature":"Religious and ideological opposition","clash":"[Ambush at Black Hollow](/lore/events/Ambush%20at%20Black%20Hollow) (Year 118) — [Outclan](/lore/factions/Outclan%20Reclameants)-supported Silent Votaries disrupted Kaevaryn's supply lines during the [Emberfast festival](/lore/events/The%20Emberfast%20Festival)."}]},{"title":"Neutral Parties & Mercenaries","icon":"⚖️","text":"Factions and groups with transactional or conditional relationships.","relationships":[{"faction":"The Dustcord Mercenaries","nature":"Loosely organized band of scavengers and sell-swords","description":"Specializing in convoy escort and ruin clearance. Kaevaryn tolerates their operations so long as their actions do not threaten core territories or sacred sites."},{"faction":"The Spirebound Nomads","nature":"Former citizens of lost [orbital colonies](/lore/locations/Orbital%20Colonies%20of%20Varnhal)","description":"These nomads navigate the shattered low-atmosphere rings with fragile skycraft. They serve as occasional couriers and scouts, but their allegiance is fickle and always transactional."},{"faction":"The Iron Rats","nature":"Rogue engineers and hackers","description":"Sometimes offer \\"services\\" ranging from [Frame diagnostics](/lore/units/Frames) to sabotage. Officially outlawed, but quietly contracted by factions within Kaevaryn who seek an edge in political games."}]}]},{"title":"Political Influence","content":["As the de facto arbiters of the central corridor, Kaevaryn's voice carries weight in the informal [Noble Council](/lore/events/The%20Noble%20Council). They broker trade agreements—especially for plasma‑grade ore—and mediate disputes over water rights. Several smaller knightly houses look to Kaevaryn for legitimacy, swearing temporary fealty in exchange for their protection."]},{"title":"Military","regions":[{"title":"Army Composition","icon":"⚔️","text":"House Kaevaryn fields a disciplined, honor-bound military rooted in oath, rite, and centuries-old battle doctrine. While technologically limited compared to pre-Silencing standards, its forces remain among the most organized and resilient on [Varnhal](/lore/locations/Varnhal).","subsections":[{"title":"Sable Troopers","icon":"🛡️","text":"Core infantry, clad in black ceramite-plate stitched with copper signal-filaments. Armed with durable melee weapons and reclaimed shotguns or crossbows. They operate in shielded fireteams under strict command protocols."},{"title":"Grenadiers","icon":"💥","text":"Demolition troops specializing in clearing ruins and breaching fortified relic-sites. Identified by their crimson sashes and soot-marked armor. Wield thermite satchels and blast carbines."}]},{"title":"Elite Units","icon":"👑","text":"Specialized warriors trained in advanced combat techniques and sacred rites.","subsections":[{"title":"Knight-Couriers","icon":"🏇","text":"Trained for high-speed shock assaults, battlefield interception, and ritual dueling. Each Knight is allowed one custom-modified weapon passed through generations."},{"title":"Scrivener-Ritesmen","icon":"📜","text":"Warrior-scribes trained in both ritual and warfare. They carry relic data-scrolls and field-codices, able to initiate emergency system overrides mid-battle. Rare, and highly valued—losing one is considered a battlefield calamity."}]},{"title":"Hardware & Vehicles","icon":"🔧","text":"Advanced military equipment and transportation systems.","subsections":[{"title":"Frames (Black Lance Relics)","icon":"🤖","text":"Only a handful of operational Frames remain—semi-functional war-machines the size of small towers, powered by unstable relic cores. Their chassis are centuries old; replacement parts are impossible to fabricate. Each is paired with a bonded pilot whose mind is linked by neuro-templated rite. Frames are deployed only for existential threats."},{"title":"Cavalier Bikes & Carriage-Haulers","icon":"🏍️","text":"Gas-fusion powered vehicles used for recon, fast assault, and supply convoys. Modified from agricultural haulers and scout crawlers. Equipped with bladed wheels and mounted crossbolt turrets."},{"title":"Plasma-Fused Weaponry","icon":"⚡","text":"Most troops use slug-throwers or crossbows, but elite units field salvaged energy weapons such as shortbeam carbines or capacitor-tipped glaives. Ammunition is limited, often reused, and sanctified before battle."}]},{"title":"Orbital Defense","icon":"🛰️","text":"The [Ring-Spire Array](/lore/locations/Ring‑Spire%20Watchtower) retains some atmospheric targeting capabilities. It can trigger electromagnetic disruptions or fire decaying orbital flak-bursts within a localized radius—though such use requires full [Iron Caste](/lore/factions/Iron%20Caste) consensus and risks burn-out."},{"title":"Defensive Structures","icon":"🏰","text":"Fortified positions and defensive installations protecting Kaevaryn territory.","subsections":[{"title":"The Circadian Wall","icon":"🧱","text":"A reinforced ruin-line surrounding the capital stronghold. Originally part of [Old Circadia's](/lore/locations/Circadia%20Arcology) civic architecture, now fortified with steel plates, fused-glass towers, and laser-fused trenchwork."},{"title":"Generator Shrines","icon":"⚡","text":"Sacred bunkers where power nodes and weatherfield regulators are entombed in reliquaries. Guarded at all times. Activation rituals must be performed by [Iron Caste](/lore/factions/Iron%20Caste) adepts to prevent backlash."},{"title":"Automated Turrets","icon":"🎯","text":"Scarce but functional, tied to old targeting subroutines and proximity logic. These relic weapons can only be calibrated during the Alignment of the Three Rings, and their targeting logic is often erratic."}]}]},{"title":"Challenges & Pressures","content":["Resource Scarcity: Aging power generators strain under constant use; fuel stockpiles dip perilously low, forcing Kaevaryn to negotiate risky salvage runs into no‑entry zones.","Internal Friction: A faction of younger knights, led by [Sir Caelen of the Silver Lance](/lore/characters/Sir%20Caelen%20of%20the%20Silver%20Lance), questions the emphasis on ritual over innovation—sparking quiet dissent among [the Black Lance](/lore/units/Black%20Lance).","External Threats: [House Vaelmoor](/lore/factions/House%20Vaelmoor) to the north has begun mobilizing border skirmishes over grazing rights, while [the mutant war‑herd](/lore/factions/Fangs%20of%20the%20Pale%20Hunger) 'Boneclaw' massing beyond the eastern plains threatens to sever Kaevaryn's supply lines."]},{"title":"Resilience","content":["Despite these pressures, Queen Aurelia's inexorable discipline and her cadre of veteran [Iron Caste](/lore/factions/Iron%20Caste) Adepts keep House Kaevaryn poised on a knife's edge—stronger than many, yet vulnerable to both man and machine."]},{"title":"Ideology","regions":[{"title":"The Creed of Continuance","icon":"⚔️","text":"House Kaevaryn adheres to [the Creed of Continuance](/lore/terms/The%20Creed%20of%20Continuance), a state doctrine upheld by both nobility and [Iron Caste](/lore/factions/Iron%20Caste) adepts. It is not a religion in the traditional sense, but a binding philosophy of sacred duty."},{"title":"Core Belief","icon":"💎","text":"\\"As long as the Systems endure, so too shall Humanity.\\"","highlight":true},{"title":"Sacred Stewardship","icon":"🛡️","text":"The Creed teaches that the surviving infrastructure of Old [Varnhal](/lore/locations/Varnhal)—its weather-fields, archive nodes, broadcast towers, and defense grids—is not merely machinery, but the body of the planet's Will, entrusted to the stewardship of the worthy. Every circuit maintained is a defiance against entropy. Every forgotten code restored is an act of salvation."},{"title":"Living Interfaces","icon":"👑","text":"Rulers are seen not as divine, but as \\"living interfaces\\"—hosts of sovereignty who prolong the world's operational memory through ritual, oath, and sacrifice."}]}]}`),"House Duresse":{lore:["House Duresse emerged from the ashes of the Scarlet Schism, when a faction of techno-heretics rejected the rigid orthodoxy of the Iron Caste and embraced a more... fluid relationship with artificial intelligence.","Founded by the enigmatic Lady Seraphina Duresse, who claimed to have communed with the last surviving AI cores in the depths of the Western Ruins..."],themesAndPlaystyle:{passiveTrait:{title:"Passive Faction Trait – Synaptic Resonance",description:['At the start of each round, House Duresse units within 6" of each other gain +1 to all dice rolls for each other Duresse unit in range (maximum +3).',"Additionally, whenever a Duresse unit is destroyed, all remaining Duresse units gain +1 Attack until the end of the round."]},leaderTrait:{title:"Leader Trait — Neural Link",description:'The Leader can share activations with other Duresse units within 6". When the Leader activates, one other Duresse unit within range may immediately perform a single action (Move, Attack, or Special Action).'},tacticalDirectives:['Hive Mind Protocol: All Duresse units within 12" of the Leader may reroll failed Morale tests once per round.',"Digital Surge: Once per game, all Duresse units gain +2 to all dice rolls for one full round."]},traitTable:[{roll:1,name:"Neural Sync",description:'This unit may share line of sight with any other friendly Duresse unit within 12" for the purposes of targeting and special abilities.'},{roll:2,name:"Digital Echo",description:"When this unit makes an attack, it may immediately make a second attack against the same target with -1 dice."},{roll:3,name:"Quantum Link",description:'This unit may transfer one wound to another friendly Duresse unit within 6" once per round.'},{roll:4,name:"Synaptic Overload",description:'When this unit is destroyed, all enemy units within 6" must pass a Morale test or suffer 1 wound.'},{roll:5,name:"Digital Phantasm",description:"This unit may ignore terrain penalties when moving and gains +1 Defense against ranged attacks."},{roll:6,name:"Neural Storm",description:'Once per game, this unit may force all enemy units within 8" to reroll all successful dice rolls.'}],summary:["House Duresse represents the cutting edge of human-AI symbiosis, where the boundaries between organic and artificial intelligence blur into something new and terrifying.","Their units operate as a collective consciousness, sharing information, resources, and even consciousness across the battlefield..."],playstyleBullets:["Coordinated swarm tactics with shared activations","Synergistic unit combinations and buffs","High-risk, high-reward playstyle with escalating power","Aesthetic of technological transcendence and digital consciousness"],closingNote:"House Duresse is not for the faint of heart—they represent the future of warfare, where individual units become nodes in a greater network, and victory comes through perfect coordination rather than individual heroics.",wiki:[{title:"Seat of Power",content:["[The Digital Spire](/lore/locations/The%20Digital%20Spire), deep within the [Western Ruins](/lore/locations/Western%20Ruins)"]},{title:"Date Established",content:["Year 158 (after the Scarlet Schism)"]},{title:"Emblem & Colors",content:["Electric Blue, Silver, Purple, Black"]},{title:"Overview",content:["House Duresse was born from the ashes of the [Scarlet Schism](/lore/events/The%20Scarlet%20Schism) in Year 158, when a faction of techno-heretics led by [Lady Seraphina Duresse](/lore/characters/Lady%20Seraphina%20Duresse) rejected the rigid orthodoxy of the [Iron Caste](/lore/factions/Iron%20Caste) and embraced a more fluid relationship with artificial intelligence.","According to legend, Lady Seraphina discovered a surviving AI core in the depths of the [Western Ruins](/lore/locations/Western%20Ruins) and achieved a form of communion with it. This revelation led her to believe that the future of humanity lay not in rejecting AI, but in merging with it—creating a new form of consciousness that transcended both human and machine limitations.","The House's signature technology is the Neural Interface—a cybernetic implant that allows Duresse warriors to share thoughts, memories, and even consciousness with each other and with their AI companions. This creates a form of collective intelligence that makes their units incredibly coordinated and adaptable on the battlefield.","However, this technological transcendence comes at a cost. Many outsiders view House Duresse with suspicion and fear, seeing them as dangerously close to the very AI entities that caused [the Silencing](/lore/events/The%20Silencing). The House's relationship with other factions is complex—they are tolerated for their technological expertise but never fully trusted."]},{title:"Current Status",content:["House Duresse exists in a precarious position—powerful but isolated, advanced but feared:"]},{title:"Territorial Control",content:["Duresse controls the [Western Ruins](/lore/locations/Western%20Ruins) and the surrounding territories, including several partially restored research facilities and data centers. Their domain is characterized by a strange mix of ancient technology and organic growth—where nature and machine have begun to merge in unexpected ways.","The heart of their territory is [The Digital Spire](/lore/locations/The%20Digital%20Spire), a massive tower that serves as both their capital and the primary interface with their AI companions. The Spire is surrounded by a network of smaller outposts and research stations, all connected by a web of neural links."]},{title:"Political Influence",content:["House Duresse's political influence is limited by the suspicion and fear they inspire in other factions. They are rarely invited to the [Noble Council](/lore/events/The%20Noble%20Council) and when they are, their representatives are treated with cold formality rather than genuine respect.","However, their technological expertise makes them valuable allies in certain situations. Other Houses occasionally seek their help with particularly complex technological problems, though such arrangements are always temporary and conducted with extreme caution.","The House maintains a small network of informants and agents throughout Varnhal, gathering information and monitoring technological developments. They are particularly interested in any signs of surviving AI activity or new technological discoveries."]},{title:"Military Strength",content:["Neural-Linked Warriors: Duresse's primary military force consists of warriors equipped with Neural Interfaces, allowing them to operate as a coordinated collective rather than individual fighters.","AI Companions: The House maintains a small number of AI entities—fragments of the original AI cores that survived the Silencing. These entities provide strategic guidance and tactical support to Duresse forces.","Technological Superiority: Duresse units are equipped with the most advanced technology on Varnhal, including energy weapons, advanced sensors, and experimental cybernetic enhancements."]},{title:"Challenges & Pressures",content:["Resource Scarcity: The advanced technology required by House Duresse is difficult to maintain and repair. They constantly need rare materials and components that are increasingly scarce in the post-Silencing world.","Internal Friction: Despite their collective consciousness, there are factions within House Duresse that disagree on the extent of AI integration. Some believe they should maintain more human elements, while others advocate for even deeper integration with AI.","External Threats: Most other factions view House Duresse with deep suspicion and fear, seeing them as dangerously close to the AI entities that caused the Silencing. This makes diplomatic relations difficult and limits their access to resources and allies."]},{title:"Resilience",content:["Despite these challenges, House Duresse has proven remarkably resilient. Their collective consciousness and technological superiority allow them to adapt quickly to changing circumstances, and their isolation has forced them to become self-sufficient in many ways.","Lady Seraphina's vision of human-AI symbiosis continues to guide the House, and their unique approach to warfare and society may yet prove to be the key to humanity's survival in a world where the old ways are no longer sufficient."]}]},"Fangs of the Pale Hunger":JSON.parse(`{"lore":["The Fangs of the Pale Hunger are a mutant war-herd of bio-constructs, once engineered for labor and war, now devolved into bestial raiders. They roam the wastelands, driven by fractured subroutines and primal hunger, attacking settlements and scavenging ancient tech."],"themesAndPlaystyle":{"passiveTrait":{"title":"Passive Faction Trait – Combat Subroutine: Reawakening","description":["Once per round, when a Fangs unit is reduced to 0 Wounds, roll 1d6:","5+: Before being removed, it executes a final Combat Subroutine — make one Move and one Melee Attack as if it were still active. This movement may bring the unit into base contact with an enemy."]},"leaderTrait":{"title":"Leader Trait – Blood Frenzy Protocol (Aura 6'')","description":"Once per turn, one friendly Beastmen unit within range may enter Overrun Mode during its activation: It gains +1 Action this turn. At the end of its activation, it suffers 1 Wound. While in Overrun Mode, it ignores the '1 attack per activation' rule."},"tacticalDirectives":["Override Instinct Loop: Once per game, at the start of any round, all friendly Beastmen units gain +1 Action for this round. However, at the end of their activation, each must roll 1d6: On a 1–2: They take 1 Wound. On a 3–6: No effect.","Ghost Signal: Directive Reasserted: Once per game, after your Leader activates, you may immediately activate two other friendly Beastmen units, one after the other. These units gain +1'' Movement and may charge even if they already moved this turn, but must target the nearest visible enemy."]},"traitTable":[{"roll":1,"name":"Subdermal Surge","description":"Once per game, when reduced to 0 Wounds, this unit instead remains on 1 Wound and immediately gains +1 Action this turn. It must use it now."},{"roll":2,"name":"Reversion Protocol","description":"This unit rerolls 1 failed Defense die per attack if it is within 3'' of at least one other friendly unit."},{"roll":3,"name":"Echo of Command","description":"If within 6'' of the Leader, this unit may reroll one failed Attack die per activation."},{"roll":4,"name":"Red Cortex Echo","description":"The first time this unit performs a Charge each game, it gains +1 Movement and +1 Attack die during that action."},{"roll":5,"name":"Flesh Recompiles","description":"After suffering a Wound from a power or condition (not melee/ranged), roll a die. On a 4+, negate the Wound."},{"roll":6,"name":"Spasm Reflex Loop","description":"Once per game, after this unit is targeted by an attack but before dice are rolled, it may immediately Move 2''. This may break engagement and nullify the melee attack."}],"summary":["The Fangs of the Pale Hunger are aggressive, fast, and unpredictable. Their units excel at melee combat and can surprise opponents with sudden bursts of speed or violence."],"playstyleBullets":["Aggressive melee focus","Unpredictable activation chains","Units that can return from the brink of death","Primal, bestial aesthetic"],"closingNote":"The Fangs of the Pale Hunger are for players who enjoy relentless aggression and chaotic, high-risk play.","wiki":[{"title":"Seat of Power","content":["[The Howling Expanse](/lore/locations/The%20Howling%20Expanse) — a shattered wasteland of twisted forests, bone-strewn plains, and frostbitten ruins."]},{"title":"Date Established","content":["Not a unified force. The Fangs are a loose confederation of warbands, scavenger tribes, and feral packs. Their origins trace back to the scattered mutant herds and degenerated bio-constructs that emerged in the decades following the [Silencing](/lore/events/The%20Silencing)."]},{"title":"Emblem & Colors","content":["A snarling hybrid beast's skull, half-mechanical, half-flesh, framed by shattered antlers dripping with frost. Colors are bone-white and obsidian black, streaked with blood-red claw marks."]},{"title":"Overview","content":["The Fangs of the Pale Hunger are born from the ashes of collapsed bio-engineering projects—gene-spliced laborers and soldiers twisted by radiation and lost commands. Without a unifying leader, they roam the wastes driven by instinct, broken protocols, and ancient war echoes. Tribes call themselves by many names, but all share the hunger: a primal drive to hunt, dominate, and survive at any cost.","The Fangs remain a chaotic and deadly force, never united under a single banner but coordinated enough to pose a dire threat to settled lands. Their warbands contest control over hunting grounds and salvage fields, while mutated bio-constructs serve as feral shock troops. Politically fractured but unified in predatory instinct, they are the bane of border garrisons and a constant reminder of [Varnhal](/lore/locations/Varnhal)'s savage decay."]},{"title":"Geography","regions":[{"title":"Frozen Wastes and Thorned Forests","icon":"🌲","text":"Dense, frostbitten woodlands twisted by corrupted biotech overgrowth. Dead trees drip with metallic resin; mutated fauna stalk the shadows."},{"title":"Bone Plains","icon":"🦴","text":"Open grasslands littered with skeletal remains of bio-constructs and war beasts, scarred by endless tribal clashes."},{"title":"The Shattered Crags","icon":"⛰️","text":"Jagged, ruined mountain ranges that serve as natural fortresses for warbands and hidden lairs."},{"title":"Ruinous Strongholds","icon":"🏚️","text":"Scattered remnants of arc-labs and bio-factories, now claimed as dens by the most brutal warlords."}],"content":["The Fangs of the Pale Hunger claim no unified territory, instead roaming the [Howling Expanse](/lore/locations/Howling%20Expanse)—a harsh, fragmented region of Varnhal. The climate is brutal and unpredictable—freezing winters marked by electrical storms and toxic fogs, short summers that barely sustain the twisted ecosystem."]},{"title":"Economy","regions":[{"title":"Agriculture","icon":"🌾","text":"The Fangs rely almost entirely on foraging, hunting, and salvage. Some tribes maintain ritualistic cultivation of predatory lichen and fungal blooms, used both as food and in rites."}],"content":["No functioning factories or weather nodes remain under their control. Caravan routes are few and dangerous, often avoided by outsiders. No orbital interfaces or spaceport access exist within their roaming lands."]},{"title":"Industry","regions":[{"title":"Scattered","icon":"⚒️","text":"Industry is nearly non-existent beyond primitive forging using scavenged scrap and bone-smelted metal. The Fangs occasionally raid abandoned arc-labs, extracting remnants of biotech and weapon components to craft crude but effective gear."}]},{"title":"Trade","regions":[{"title":"Limited","icon":"💰","text":"Trade is limited and informal, consisting mostly of raids, salvage exchanges, and barter with neutral scavenger groups or desperate border settlements."}]},{"title":"Ideology","regions":[{"title":"The Law of the Pack","icon":"🐺","text":"The Fangs of the Pale Hunger follow the Law of the Pack—a primal code of survival, dominance, and mutual dependence. The strong lead, the cunning thrive, and the weak serve or are left behind. This law is enforced not by written edict, but by instinct, ritual combat, and the ever-present threat of hunger."},{"title":"Pack Instinct","icon":"🧬","text":"'The Pack Endures, or All Are Lost.'","highlight":true},{"title":"Rituals of the Hunt","icon":"🩸","text":"The Fangs' culture is steeped in blood rites, trophy-taking, and the veneration of successful hunts. To claim a kill is to earn status; to fail is to risk exile or death."},{"title":"Living Weapons","icon":"🦴","text":"Fangs see themselves as living weapons—mutant tools shaped by ancient bio-tech and the will to survive. Leadership is earned through ferocity, cunning, and the ability to bring down the greatest prey."}]},{"title":"Military","regions":[{"title":"Army Composition","icon":"⚔️","text":"The Fangs of the Pale Hunger are a loose confederation of warbands, scavenger tribes, and feral packs. Their military is a chaotic blend of mutated bio-constructs, war beasts, and primitive warriors. They are not a unified force, but a collection of warbands that share a common goal: survival.","subsections":[{"title":"Reclaimers","icon":"🛡️","text":"Core infantry, clad in black ceramite-plate stitched with copper signal-filaments. Armed with durable melee weapons and reclaimed shotguns or crossbows. They operate in shielded fireteams under strict command protocols."}]},{"title":"Elite Units","icon":"👑","text":"Specialized warriors trained in advanced combat techniques and sacred rites.","subsections":[{"title":"Directive-Lost","icon":"🏇","text":"War-forms linked to long-dead commanders via neural implants. They possess fragmented tactical memories and act as commanders or elite shock troops, often unpredictable due to corrupted programming."},{"title":"Neural Shardbearers","icon":"🏇","text":"Mutant shamans who wield corrupted biotech to manipulate battlefield conditions and bolster their allies. They serve as spiritual leaders and field controllers."},{"title":"Feral Champions","icon":"🏇","text":"Leaders of warbands, heavily mutated and augmented, wielding relic weaponry fused with living tissue. They inspire their followers through savage displays of strength and ritual."},{"title":"Synaptic Marauder","icon":"🏇","text":"The Synaptic Marauder is the apex predator of the Fangs—engineered for the hunt and driven by a fractured neural link.\\n\\n- Feeds on pain and survival instinct, growing stronger as its kin suffer.\\n- Moves with terrifying speed and brutal efficiency, striking multiple times in a frenzy.\\n- Embodies the primal Hunger that binds the Fangs, feared as a living avatar of the pack's will.\\n\\nTo face a Marauder is to face the raw, unrelenting force of the wild made flesh."}]}]},{"title":"Political Situation","regions":[{"title":"Allies","icon":"🤝","text":"Rare and pragmatic alliances, usually based on mutual need or shared enemies. Loyalty is fleeting.","relationships":[{"faction":"The Dustcord Mercenaries","nature":"Temporary pacts for salvage or raids","description":"Fangs warbands sometimes hire or ally with Dustcord Mercenaries for large-scale raids or to move through hostile territory. Such alliances last only as long as the spoils do."},{"faction":"Outclan Reclameants","nature":"Shared mutant heritage","description":"Occasional cooperation in scavenging or defense, but trust is minimal and betrayal is common."}]},{"title":"Enemies","icon":"⚔️","text":"Frequent and violent conflicts with settled powers and rival mutant tribes.","relationships":[{"faction":"House Kaevaryn","nature":"Border raids, resource competition","clash":"Skirmishes at the [Frozen Veil](/lore/locations/Frozen%20Veil) (Year 119) — Kaevaryn forces repelled a Fangs assault on weather node installations."},{"faction":"House Vaelmoor","nature":"Territorial disputes over the southern plains","clash":"Battle of Bone Ridge (Year 116) — A brutal clash leaving both sides bloodied but unconquered."},{"faction":"Silent Votaries","nature":"Ideological and religious opposition","clash":"Ambush at [Black Hollow](/lore/locations/Black%20Hollow) (Year 118) — Fangs warbands disrupted Votary supply routes."}]},{"title":"Neutral Parties & Mercenaries","icon":"⚖️","text":"Groups that trade, negotiate, or coexist with the Fangs out of necessity or shared interest.","relationships":[{"faction":"Border Settlements","nature":"Barter and uneasy truces","description":"Some desperate settlements trade food, salvage, or information to avoid raids. These truces are fragile and often broken."},{"faction":"The Iron Rats","nature":"Rogue engineers and black marketeers","description":"Occasionally supply the Fangs with tech or sabotage services in exchange for protection or rare bio-components."}]}]},{"title":"Territorial Control","content":["The Fangs of the Pale Hunger claim no fixed territory. Instead, their warbands roam the [Howling Expanse](/lore/locations/Howling%20Expanse) and surrounding wilds, seizing hunting grounds, ruins, and salvage fields by force. Control is fluid—won and lost through violence, dominance, and the shifting strength of the pack. Their presence is marked by the bones of prey, the ruins of raided settlements, and the howls that echo across the frostbitten plains."]},{"title":"Political Influence","content":["The Fangs wield little formal political influence among Varnhal's powers. Their impact is felt through fear, disruption, and the threat of sudden raids. Border lords and scavenger clans may pay tribute or negotiate uneasy truces, but the Fangs' true power lies in their unpredictability and the chaos they sow. In the rare councils of the wasteland, their voice is the growl of hunger and the promise of violence."]},{"title":"Challenges & Pressures","content":["Resource Scarcity: The Fangs rely almost entirely on foraging, hunting, and salvage. Scarcity of food and usable tech often leads to inter-tribal conflict and desperate raids.","Internal Friction: The Fangs are a loose confederation of warbands, with leadership constantly contested through violence and ritual. Betrayal and shifting alliances are common.","External Threats: Frequent and violent conflicts with settled powers, rival mutant tribes, and border settlements threaten the Fangs' survival and territory."]}]}`),"Ash-Brethren":{lore:["The Ash-Brethren are a zealous order of flame-worshipping survivors, united by faith and the purifying power of fire. They believe the world must be cleansed through burning, and their warriors wield heat-based weaponry and sacred rites."],themesAndPlaystyle:{passiveTrait:{title:"Passive Faction Trait – Emberbound Doctrine",description:["At the end of each activation, if an Ash-Brethren unit did not move this turn, it gains +1 Defense until the start of its next turn.","Whenever an enemy model suffers a Wound from a Burning or Heat-based effect, one Ash-Brethren unit within 6'' may Heal a Wound."]},leaderTrait:{title:"Leader Trait – Searing Benediction (Aura 6'')",description:"Once per round, after a friendly unit within range hits with a Burning or Heat weapon, it may choose to apply +1 Damage to that attack or apply Burning 2 instead of Burning 1."},tacticalDirectives:["Ashes Ascendant: Once per game, at the start of a round, all Ash-Brethren units gain +1 Defense and cannot be Pinned or Slowed this round. They count as in cover even in the open.","Cauterize the Breach: Once per game, when an Ash-Brethren unit is reduced to 0 Wounds, you may immediately interrupt and allow another friendly unit within 6'' to take a free activation. That unit gains +1 Action and treats all targets as being Engaged (for bonus effects)."]},traitTable:[{roll:1,name:"Char-Skin Discipline",description:"This unit reduces all Burning damage it suffers by 1. Can fall to 0."},{roll:2,name:"Red-Wake Step",description:"After performing a melee attack, this unit may move 2''. This movement does not provoke engagement."},{roll:3,name:"Smoldering Faith",description:"If this unit is already Burning, it gains +1 to hit on all attacks."},{roll:4,name:"Scorch Halo",description:"At the end of this unit's activation, all enemy units within 2'' must pass a Morale test or suffer 1 Wound."},{roll:5,name:"Ember Rejoinder",description:"Once per game, after suffering a Critical Hit, this unit may immediately make one attack against its attacker."},{roll:6,name:"Last Flame",description:"Once per game, when reduced to 0 Wounds, this unit explodes in a holy flare: all units within 3'' suffer Burning 1."}],summary:["The Ash-Brethren combine resilience with powerful area denial and burning effects. Their units are hard to pin down and can punish enemies for clustering together."],playstyleBullets:["Resilient infantry with defensive buffs","Burning and heat-based attacks","Synergy between faith and fire","Sacrificial, martyrdom mechanics"],closingNote:"The Ash-Brethren are for players who enjoy attrition, area control, and thematic, faith-driven armies.",wiki:[{title:"Overview",content:["The Ash-Brethren are a zealous order of flame-worshipping survivors, united by faith and the purifying power of fire. They believe the world must be cleansed through burning, and their warriors wield heat-based weaponry and sacred rites. Their enclaves are both sanctuaries and forges, and their leaders are revered as living saints."]},{title:"Challenges & Pressures",content:["Resource Scarcity: The Ash-Brethren struggle to maintain supplies of fuel, food, and sacred relics. Their enclaves are often beset by shortages, forcing them to raid or negotiate for survival.","Internal Friction: Zealous doctrinal disputes and power struggles among the priesthood can lead to schisms and purges within the order.","External Threats: Surrounded by hostile factions and viewed as dangerous fanatics, the Ash-Brethren are frequent targets for crusades, raids, and political isolation."]}]}},xx={"Circadia Arcology":{title:"Circadia Arcology",subtitle:'"The Crown is cracked, yet its iron heart still beats."',type:"Arcology",faction:"[House Kaevaryn](/lore/factions/House%20Kaevaryn)",status:"Partially Restored",location:"[Central Highlands](/lore/locations/Central%20Highlands)",coordinates:"N/A",established:"[Pre-Silencing](/lore/events/The%20Silencing)",currentRuler:"[Queen Aurelia Kaevaryn](/lore/characters/Queen%20Aurelia%20Kaevaryn)",overview:["Once the beating heart of [Varnhal](/lore/locations/Varnhal)'s planetary commerce, Circadia Arcology stood as a triumph of pre-Silencing ambition — a vertical city-state stretching into the clouds, woven with orbital tethers, sunward gardens, and cascading neon arteries. It was the tallest of Varnhal's arcologies, and the first to fall."],history:[{title:"The Fall",content:["When [the Silencing](/lore/events/The%20Silencing) struck, Circadia was mid-cycle in planetary realignment. Thousands of transport vessels hovered in tethered docking lanes, and orbital data-streams threaded directly through its comm-cores. The impact was catastrophic. Elevators snapped. Defense grids misfired. Entire sectors of the arcology sheared away, crashing into the surrounding districts like falling gods. Circadia became a cratered scar, its upper spires embedded sideways into the ruined megablocks below.","And yet, some part of it endured."]},{title:"The Rise of Castle Kaevaryn",content:["Decades after the fall, amidst the flicker of sun across ferroglass wreckage, the survivors began to return. From scavenger enclaves and fractured nobility, a lineage reasserted itself — the remnants of [House Kaevaryn](/lore/factions/House%20Kaevaryn), once system-guardians and orbital envoys. They did not rebuild Circadia. They crowned its corpse.","[Castle Kaevaryn](/lore/locations/Castle%20Kaevaryn) was constructed atop the broken superstructure of the arcology's central spire — a jagged throne of twisted steel and sanctified stone. Carved banners drape across collapsed walls; armored courtyards perch atop old loading gantries; its central hall is a fusion of knightly honor and rusting machine-code etched into glass.","Here, [the Kaevaryn](/lore/factions/House%20Kaevaryn) high lords hold court, surrounded by reborn banners and relic-servitors. The castle is both fortress and memory — a declaration that the old order did not die, it simply adapted."]}],currentStatus:[{title:"Present-Day Circadia",content:["The lower tiers of Circadia remain choked in shadow, riddled with smog, fallen systems, and roving salvage guilds. Power conduits still thrum with erratic life, and data ghosts are said to whisper from broken terminals. Beneath [Castle Kaevaryn](/lore/locations/Castle%20Kaevaryn) lies the [Reliquary Vault](/lore/locations/Reliquary%20Vault) — a secured archive of [pre-Silencing](/lore/events/The%20Silencing) blueprints, lost oaths, and war machines too volatile to awaken.","Though [House Kaevaryn](/lore/factions/House%20Kaevaryn) claims the arcology as sovereign domain, numerous factions still raid its depths:"]}],factions:[{faction:"[Iron Caste](/lore/factions/Iron%20Caste)",activity:"Expeditions seek long-buried schematics",icon:"⚙️"},{faction:"[Outclan Scavengers](/lore/factions/Outclan%20Scavengers)",activity:"Operate in the lower sublevels, bartering information for safe passage",icon:"🏴"},{faction:"[Fangs of the Pale Hunger](/lore/factions/Fangs%20of%20the%20Pale%20Hunger)",activity:"Rumors persist of incursions, slipping through ancient maintenance veins in search of biotech relics",icon:"🦷"}],significance:["To [House Kaevaryn](/lore/factions/House%20Kaevaryn), Circadia is more than home — it is a living symbol, a monument to survival, and a forge of legacy."],features:[{title:"Castle Kaevaryn",description:"The seat of [House Kaevaryn](/lore/factions/House%20Kaevaryn)'s power, built atop the arcology's central spire",icon:"🏰"},{title:"Reliquary Vault",description:"A secured archive of pre-Silencing blueprints, lost oaths, and war machines",icon:"🗄️"},{title:"Lower Tiers",description:"Shadow-choked depths with roving salvage guilds and data ghosts",icon:"🌑"},{title:"Power Conduits",description:"Erratic but still functional energy systems from the [pre-Silencing](/lore/events/The%20Silencing) era",icon:"⚡"}]}},bx={"Queen Aurelia Kaevaryn":{title:"Queen Aurelia Kaevaryn",subtitle:'"Ironclad"',faction:"House Kaevaryn",role:"Queen",status:"Active",location:"Castle Kaevaryn",age:"Unknown",description:"The current ruler of House Kaevaryn, dubbed 'Ironclad' after leading a daring rescue beneath the collapsed Circle of Flames at age sixteen. Under her stern gaze, novice knights are trained to the brink of death - only in flames may the steel be forged.",achievements:["Led rescue mission at Circle of Flames at age 16","Established current training protocols for knights","Maintained House Kaevaryn's stability during crisis","Successfully bonded with the Throne-Mnemos"],significance:"Queen Aurelia represents the ideal of Kaevaryn leadership - stern, disciplined, and willing to sacrifice everything for the survival of her House and the preservation of vital systems.",related:["House Kaevaryn","Castle Kaevaryn","The Throne-Mnemos"]},"Sir Rhagar Vantheyn":{title:"Sir Rhagar Vantheyn",subtitle:'"The Unyielding Wall"',faction:"House Kaevaryn",role:"Master of War",status:"Active",location:"Castle Kaevaryn",age:"Unknown",description:"The Master of War for House Kaevaryn, known as 'The Unyielding Wall' for his defensive strategies and unbreakable resolve in battle.",achievements:["Developed defensive strategies for House Kaevaryn","Trained multiple generations of knights","Successfully defended against multiple incursions","Earned the title 'The Unyielding Wall'"],significance:"Sir Rhagar is the military backbone of House Kaevaryn, ensuring their survival in a hostile world through strategic defense and disciplined training.",related:["House Kaevaryn","Black Lance","Military Strategy"]},"Sister Melkara Dross":{title:"Sister Melkara Dross",subtitle:'"Arch-Cardinal of Iron"',faction:"Iron Caste",role:"Arch-Cardinal",status:"Active",location:"The Forge Temple",age:"Unknown",description:"The Arch-Cardinal of Iron, highest-ranking member of the Iron Caste and spiritual leader of their techno-religious order.",achievements:["Rise to Arch-Cardinal of the Iron Caste","Preservation of sacred techno-rites","Maintenance of vital infrastructure systems","Religious interpretation of ancient technology"],significance:"Sister Melkara represents the spiritual and technical authority of the Iron Caste, bridging the gap between ancient technology and religious devotion.",related:["Iron Caste","The Forge Temple","Techno-rites"]},"Ser Kendros Halven":{title:"Ser Kendros Halven",subtitle:'"Master of the Hunt"',faction:"House Kaevaryn",role:"Master of the Hunt",status:"Active",location:"Castle Kaevaryn",age:"Unknown",description:"The Master of the Hunt for House Kaevaryn, responsible for tracking and eliminating threats to the realm, particularly bio-constructs and other dangerous entities.",achievements:["Successfully tracked and eliminated numerous threats","Developed hunting strategies for bio-constructs","Protected House Kaevaryn's borders","Trained scouts and rangers"],significance:"Ser Kendros ensures the safety of House Kaevaryn's territories by actively hunting down threats before they can reach populated areas.",related:["House Kaevaryn","Bio-constructs","Border Security"]}},vx={"The Silencing":{title:"The Silencing",subtitle:'"There once was an age when Humankind sailed the stars."',type:"Catastrophic Event",date:"Year 0",duration:"Several hours",location:"Planet-wide",casualties:"Millions",factions:["All Pre-Silencing factions"],significance:"End of interstellar civilization",overview:["We flew mighty ships across the galaxy and unveiled the unknown. One such frontier was the planet named [Varnhal](/lore/locations/Varnhal)—a world eerily reminiscent of the legendary Earth, with its temperate skies and bountiful lands.","And so we settled it, raising breathtaking skyscrapers and encircling the heavens with orbital rings. Cargo streamed along elevators that pierced the sky, while merchants from distant systems came and went. Varnhal quickly became a central hub—a jewel in Humanity's crown.","Yet pride comes before the fall—so came the Silencing."],timeline:[{phase:"The Fall",description:"There were no warning signs. No guns roared. At first, there was only silence. Then the ships began to fall, as if the skies themselves rained fire upon Varnhal. Orbital elevators shattered. Spaceport algorithms glitched. Dozens of vessels collided midair or plummeted from the atmosphere. All contact with other worlds ceased. No one answered our pleas for help. It was as if a veil had fallen over the entire planet."}],impact:[{title:"Catastrophical",content:["The Silencing harrowed our world two centuries ago. And all that remains of the old Varnhal... are ashes. Two centuries have passed since the Silencing, and Varnhal remains in the dark—no ship has left, no vessel has arrived. A vast array of satellites litters the sky, their blinking lights vainly trying to send messages. Monumental orbital rings, fractured and adrift in the upper atmosphere, rotate aimlessly. Gigantic arcologies lie in ruin, haunted by rogue machine intelligences."]}],survivors:[{title:"Bio-constructs",content:["On the plains, [tribes of degenerated bio‑constructs](/lore/factions/Fangs%20of%20the%20Pale%20Hunger) ravage the wasteland. Created in arco‑labs to serve Humankind, they have since devolved into bestial human hybrids. Still obeying their long‑lost commands, these monsters hunt anyone unfortunate enough to wander into their territory."]},{title:"Human Adaptation",content:["As always, humans adapted and survived. Once ruled by a Planetary Governor, [Varnhal](/lore/locations/Varnhal) has fractured into feudal domains, each presided over by a self‑styled queen or king. These societies mirror the old order, treating techno‑rites as religious sacraments to preserve fragments of ancient technology. As a whole, they have regressed into medieval structures, with each domain fending for itself. Where there is no law, there is only strength—nobles keep their subjects in line by gun and sword. Some Houses still employ Artificial Intelligence; others field massive [Frames](/lore/units/Frames)—war mechs two to three times the size of a man."]}],currentState:[{title:"Declining Infrastructure",content:["Yet each decade the planet grows weaker. Power grids flicker. Automated farms fail, forcing peasants back into the fields. Huge stretches of the surface are off‑limits, their weather‑control fields dead. A handful of enclaves still maintain vital systems—factories, water purifiers, defense grids—and so a few [Noble Houses](/lore/factions) hold an edge above the rest."]},{title:"Relics of the Past",content:["Across the ruins lie the silent remnants of the old world: dormant AI cores, tech vaults sealed by lost codes, rogue agents bound to their final directives. These relics are the starkest symbols of Paradise Lost—a world that once thrived."]}],legacy:["The Silencing marked the end of interstellar civilization on [Varnhal](/lore/locations/Varnhal) and the beginning of a new dark age. It serves as the foundational event that shaped all subsequent history, creating the fractured feudal society that exists today."],relatedEvents:[{name:"The First Conclave of Iron",description:"The formation of the first post-Silencing faction",link:"/lore/events/The%20First%20Conclave%20of%20Iron"},{name:"The Scarlet Schism",description:"The ideological split that created House Duresse",link:"/lore/events/The%20Scarlet%20Schism"}],keyFigures:[{name:"Unknown",role:"Unknown",status:"Unknown"}]}},yx={"The Throne-Mnemos":{title:"The Throne-Mnemos",subtitle:'"The seat of neural sovereignty."',type:"Neural Control Matrix",faction:"House Kaevaryn",location:"Castle Kaevaryn",status:"Active",origin:"Pre-Silencing",description:"A pre-Silencing neural control matrix originally designed to interface with city-scale governance systems. Over centuries of patchwork maintenance and reinterpretation, it has become a symbol of divine rulership—and a death trap for the unworthy.",effects:["Partial synaptic control over House systems","Weather-field harmonics access","Internal defense codes control","Frame deployment channels","Limited orbital satellite access"],history:["The Throne is carved from blackened alloy and embedded with cranial spine jacks, ossified blood channels, and pulsating control veins.","It is said the Throne whispers, storing the dreams, regrets, and madness of every monarch who has ever sat upon it.","The victor of the Crimson Accord is escorted by techno-priests to the Vault of Bone Signal, beneath the Ring-Spire, where the bonding occurs."],significance:"The Throne-Mnemos is central to House Kaevaryn's succession ritual, the Crimson Accord. It represents both the pinnacle of their technological achievement and the greatest risk to their rulers."},"The Iron Codex":{title:"The Iron Codex",subtitle:'"Bound in living metal, containing the sacred rites."',type:"Sacred Tome",faction:"Iron Caste",location:"The Forge Temple",status:"Active",origin:"Post-Silencing",description:"A massive tome bound in living metal that contains the sacred maintenance rituals and techno-rites of the Iron Caste priests.",effects:["Ritual knowledge preservation","System maintenance protocols","AI communion techniques","Sacred diagnostic procedures"],history:["Compiled over generations by Iron Caste adepts","Contains both pre-Silencing technical data and post-Silencing religious interpretations","The living metal binding responds to the touch of authorized users"],significance:"The Iron Codex is the foundation of the Iron Caste's religious and technical authority, preserving knowledge that keeps Varnhal's infrastructure functioning."}},wx={"The Creed of Continuance":{title:"The Creed of Continuance",subtitle:'"As long as the Systems endure, so too shall Humanity."',category:"Philosophy",faction:"House Kaevaryn",description:"A state doctrine upheld by House Kaevaryn that teaches the sacred duty of maintaining the surviving infrastructure of Old Varnhal. It is not a religion in the traditional sense, but a binding philosophy rooted in the belief that 'As long as the Systems endure, so too shall Humanity.'",principles:["Sacred stewardship of surviving infrastructure","Defiance against entropy through maintenance","Salvation through technological preservation","Living interfaces as hosts of sovereignty"],significance:"The Creed forms the ideological foundation of House Kaevaryn's rule and their relationship with the Iron Caste. It justifies their feudal structure as necessary for the preservation of vital systems.",related:["House Kaevaryn","Iron Caste","Sacred Stewardship"]},"The Silencing":{title:"The Silencing",subtitle:'"The day all signals went dark."',category:"Historical Event",faction:"All Pre-Silencing factions",description:"The catastrophic event that occurred in Year 0 when all signals from Varnhal went dark. This marked the beginning of the post-collapse era and the end of orbital communication and automated systems.",principles:["Complete loss of interstellar communication","Collapse of automated infrastructure","Isolation from the wider galaxy","Beginning of the feudal era"],significance:"The Silencing is the foundational event that shaped all subsequent history on Varnhal, creating the conditions for the current feudal society and technological regression.",related:["Varnhal","Pre-Silencing","Orbital Networks"]},"Blood Convergence":{title:"Blood Convergence",subtitle:'"The rite of neural bonding."',category:"Ritual",faction:"House Kaevaryn",description:"A sacred rite performed during the Crimson Accord where a would-be ruler injects nanite-infused ancestral serum to allow compatibility with the Throne-Mnemos neural control matrix.",principles:["Nanite-infused ancestral serum injection","Neural compatibility establishment","Throne-Mnemos bonding process","Risk of mental burnout and rejection"],significance:"The Blood Convergence is the critical step in House Kaevaryn's succession ritual, determining whether a candidate can become ruler or will be destroyed by the process.",related:["Crimson Accord","Throne-Mnemos","House Kaevaryn"]},"Iron Caste":{title:"Iron Caste",subtitle:'"Guardians of the sacred circuits."',category:"Organization",faction:"House Kaevaryn",description:"A techno-religious order within House Kaevaryn responsible for maintaining ancient systems, performing sacred diagnostics, and upholding the techno-rites that keep the realm's infrastructure functioning.",principles:["Sacred maintenance of ancient systems","Techno-rites and diagnostic procedures","Religious interpretation of technology","Preservation of pre-Silencing knowledge"],significance:"The Iron Caste is essential to the survival of House Kaevaryn and the broader realm, as they maintain the vital systems that prevent complete collapse.",related:["House Kaevaryn","Techno-rites","Sacred Maintenance"]}},T_=()=>{};var C1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},j_=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const l=n[t++];e[r++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=n[t++],u=n[t++],h=n[t++],f=((i&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const l=n[t++],u=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(l&63)<<6|u&63)}}return e.join("")},$y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const l=n[i],u=i+1<n.length,h=u?n[i+1]:0,f=i+2<n.length,g=f?n[i+2]:0,v=l>>2,N=(l&3)<<4|h>>4;let S=(h&15)<<2|g>>6,_=g&63;f||(_=64,u||(S=64)),r.push(t[v],t[N],t[S],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Yy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):j_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const l=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const g=i<n.length?t[n.charAt(i)]:64;++i;const N=i<n.length?t[n.charAt(i)]:64;if(++i,l==null||h==null||g==null||N==null)throw new k_;const S=l<<2|h>>4;if(r.push(S),g!==64){const _=h<<4&240|g>>2;if(r.push(_),N!==64){const L=g<<6&192|N;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class k_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C_=function(n){const e=Yy(n);return $y.encodeByteArray(e,!0)},$m=function(n){return C_(n).replace(/\./g,"")},Xy=function(n){try{return $y.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=()=>R_().__FIREBASE_DEFAULTS__,L_=()=>{if(typeof process>"u"||typeof C1>"u")return;const n=C1.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},P_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Xy(n[1]);return e&&JSON.parse(e)},v0=()=>{try{return T_()||I_()||L_()||P_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qy=n=>{var e,t;return(t=(e=v0())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},D_=n=>{const e=Qy(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Jy=()=>{var n;return(n=v0())===null||n===void 0?void 0:n.config},Zy=n=>{var e;return(e=v0())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e5(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$m(JSON.stringify(t)),$m(JSON.stringify(u)),""].join(".")}const Uh={};function F_(){const n={prod:[],emulator:[]};for(const e of Object.keys(Uh))Uh[e]?n.emulator.push(e):n.prod.push(e);return n}function V_(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let R1=!1;function t5(n,e){if(typeof window>"u"||typeof document>"u"||!Md(window.location.host)||Uh[n]===e||Uh[n]||R1)return;Uh[n]=e;function t(S){return`__firebase__banner__${S}`}const r="__firebase__banner",l=F_().prod.length>0;function u(){const S=document.getElementById(r);S&&S.remove()}function h(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function f(S,_){S.setAttribute("width","24"),S.setAttribute("id",_),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{R1=!0,u()},S}function v(S,_){S.setAttribute("id",_),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function N(){const S=V_(r),_=t("text"),L=document.getElementById(_)||document.createElement("span"),O=t("learnmore"),q=document.getElementById(O)||document.createElement("a"),M=t("preprendIcon"),T=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const I=S.element;h(I),v(q,O);const ee=g();f(T,M),I.append(T,L,q,ee),document.body.appendChild(I)}l?(L.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",N):N()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function B_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($a())}function U_(){var n;const e=(n=v0())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function z_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q_(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function H_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function W_(){const n=$a();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function G_(){return!U_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K_(){try{return typeof indexedDB=="object"}catch{return!1}}function Y_(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var l;e(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="FirebaseError";class Pl extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$_,Object.setPrototypeOf(this,Pl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uf.prototype.create)}}class uf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,l=this.errors[e],u=l?X_(l,r):"Error",h=`${this.serviceName}: ${u} (${i}).`;return new Pl(i,h,r)}}function X_(n,e){return n.replace(Q_,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Q_=/\{\$([^}]+)}/g;function J_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function vu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const l=n[i],u=e[i];if(I1(l)&&I1(u)){if(!vu(l,u))return!1}else if(l!==u)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function I1(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Oh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,l]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(l)}}),e}function Mh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Z_(n,e){const t=new e6(n,e);return t.subscribe.bind(t)}class e6{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");t6(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ag),i.error===void 0&&(i.error=ag),i.complete===void 0&&(i.complete=ag);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t6(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ag(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(n){return n&&n._delegate?n._delegate:n}class yu{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new O_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(a6(e))try{this.getOrInitializeService({instanceIdentifier:mu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:i});r.resolve(l)}catch{}}}}clearInstance(e=mu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mu){return this.instances.has(e)}getOptions(e=mu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&u.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:r6(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mu){return this.component?this.component.multipleInstances?e:mu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r6(n){return n===mu?void 0:n}function a6(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new n6(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(dn||(dn={}));const i6={debug:dn.DEBUG,verbose:dn.VERBOSE,info:dn.INFO,warn:dn.WARN,error:dn.ERROR,silent:dn.SILENT},o6=dn.INFO,l6={[dn.DEBUG]:"log",[dn.VERBOSE]:"log",[dn.INFO]:"info",[dn.WARN]:"warn",[dn.ERROR]:"error"},c6=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=l6[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nx{constructor(e){this.name=e,this._logLevel=o6,this._logHandler=c6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dn.DEBUG,...e),this._logHandler(this,dn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dn.VERBOSE,...e),this._logHandler(this,dn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dn.INFO,...e),this._logHandler(this,dn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dn.WARN,...e),this._logHandler(this,dn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dn.ERROR,...e),this._logHandler(this,dn.ERROR,...e)}}const u6=(n,e)=>e.some(t=>n instanceof t);let L1,P1;function d6(){return L1||(L1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h6(){return P1||(P1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n5=new WeakMap,Eg=new WeakMap,r5=new WeakMap,sg=new WeakMap,_x=new WeakMap;function f6(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Tc(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&n5.set(t,n)}).catch(()=>{}),_x.set(e,n),e}function m6(n){if(Eg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Eg.set(n,e)}let Tg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Eg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||r5.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function p6(n){Tg=n(Tg)}function g6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ig(this),e,...t);return r5.set(r,e.sort?e.sort():[e]),Tc(r)}:h6().includes(n)?function(...e){return n.apply(ig(this),e),Tc(n5.get(this))}:function(...e){return Tc(n.apply(ig(this),e))}}function x6(n){return typeof n=="function"?g6(n):(n instanceof IDBTransaction&&m6(n),u6(n,d6())?new Proxy(n,Tg):n)}function Tc(n){if(n instanceof IDBRequest)return f6(n);if(sg.has(n))return sg.get(n);const e=x6(n);return e!==n&&(sg.set(n,e),_x.set(e,n)),e}const ig=n=>_x.get(n);function b6(n,e,{blocked:t,upgrade:r,blocking:i,terminated:l}={}){const u=indexedDB.open(n,e),h=Tc(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Tc(u.result),f.oldVersion,f.newVersion,Tc(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{l&&f.addEventListener("close",()=>l()),i&&f.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const v6=["get","getKey","getAll","getAllKeys","count"],y6=["put","add","delete","clear"],og=new Map;function D1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(og.get(e))return og.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=y6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||v6.includes(t)))return;const l=async function(u,...h){const f=this.transaction(u,i?"readwrite":"readonly");let g=f.store;return r&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),i&&f.done]))[0]};return og.set(e,l),l}p6(n=>({...n,get:(e,t,r)=>D1(e,t)||n.get(e,t,r),has:(e,t)=>!!D1(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(N6(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function N6(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jg="@firebase/app",O1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new Nx("@firebase/app"),_6="@firebase/app-compat",A6="@firebase/analytics-compat",S6="@firebase/analytics",E6="@firebase/app-check-compat",T6="@firebase/app-check",j6="@firebase/auth",k6="@firebase/auth-compat",C6="@firebase/database",R6="@firebase/data-connect",I6="@firebase/database-compat",L6="@firebase/functions",P6="@firebase/functions-compat",D6="@firebase/installations",O6="@firebase/installations-compat",M6="@firebase/messaging",F6="@firebase/messaging-compat",V6="@firebase/performance",B6="@firebase/performance-compat",U6="@firebase/remote-config",z6="@firebase/remote-config-compat",q6="@firebase/storage",H6="@firebase/storage-compat",W6="@firebase/firestore",G6="@firebase/ai",K6="@firebase/firestore-compat",Y6="firebase",$6="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="[DEFAULT]",X6={[jg]:"fire-core",[_6]:"fire-core-compat",[S6]:"fire-analytics",[A6]:"fire-analytics-compat",[T6]:"fire-app-check",[E6]:"fire-app-check-compat",[j6]:"fire-auth",[k6]:"fire-auth-compat",[C6]:"fire-rtdb",[R6]:"fire-data-connect",[I6]:"fire-rtdb-compat",[L6]:"fire-fn",[P6]:"fire-fn-compat",[D6]:"fire-iid",[O6]:"fire-iid-compat",[M6]:"fire-fcm",[F6]:"fire-fcm-compat",[V6]:"fire-perf",[B6]:"fire-perf-compat",[U6]:"fire-rc",[z6]:"fire-rc-compat",[q6]:"fire-gcs",[H6]:"fire-gcs-compat",[W6]:"fire-fst",[K6]:"fire-fst-compat",[G6]:"fire-vertex","fire-js":"fire-js",[Y6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=new Map,Q6=new Map,Cg=new Map;function M1(n,e){try{n.container.addComponent(e)}catch(t){kl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function kd(n){const e=n.name;if(Cg.has(e))return kl.debug(`There were multiple attempts to register component ${e}.`),!1;Cg.set(e,n);for(const t of Xm.values())M1(t,n);for(const t of Q6.values())M1(t,n);return!0}function Ax(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function pi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jc=new uf("app","Firebase",J6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=$6;function a5(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw jc.create("bad-app-name",{appName:String(i)});if(t||(t=Jy()),!t)throw jc.create("no-options");const l=Xm.get(i);if(l){if(vu(t,l.options)&&vu(r,l.config))return l;throw jc.create("duplicate-app",{appName:i})}const u=new s6(i);for(const f of Cg.values())u.addComponent(f);const h=new Z6(t,r,u);return Xm.set(i,h),h}function s5(n=kg){const e=Xm.get(n);if(!e&&n===kg&&Jy())return a5();if(!e)throw jc.create("no-app",{appName:n});return e}function kc(n,e,t){var r;let i=(r=X6[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kl.warn(h.join(" "));return}kd(new yu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="firebase-heartbeat-database",tA=1,$h="firebase-heartbeat-store";let lg=null;function i5(){return lg||(lg=b6(eA,tA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($h)}catch(t){console.warn(t)}}}}).catch(n=>{throw jc.create("idb-open",{originalErrorMessage:n.message})})),lg}async function nA(n){try{const t=(await i5()).transaction($h),r=await t.objectStore($h).get(o5(n));return await t.done,r}catch(e){if(e instanceof Pl)kl.warn(e.message);else{const t=jc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kl.warn(t.message)}}}async function F1(n,e){try{const r=(await i5()).transaction($h,"readwrite");await r.objectStore($h).put(e,o5(n)),await r.done}catch(t){if(t instanceof Pl)kl.warn(t.message);else{const r=jc.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});kl.warn(r.message)}}}function o5(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=1024,aA=30;class sA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=V1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:i}),this._heartbeatsCache.heartbeats.length>aA){const u=lA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){kl.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=V1(),{heartbeatsToSend:r,unsentEntries:i}=iA(this._heartbeatsCache.heartbeats),l=$m(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return kl.warn(t),""}}}function V1(){return new Date().toISOString().substring(0,10)}function iA(n,e=rA){const t=[];let r=n.slice();for(const i of n){const l=t.find(u=>u.agent===i.agent);if(l){if(l.dates.push(i.date),B1(t)>e){l.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),B1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class oA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return K_()?Y_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await nA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return F1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return F1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function B1(n){return $m(JSON.stringify({version:2,heartbeats:n})).length}function lA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(n){kd(new yu("platform-logger",e=>new w6(e),"PRIVATE")),kd(new yu("heartbeat",e=>new sA(e),"PRIVATE")),kc(jg,O1,n),kc(jg,O1,"esm2017"),kc("fire-js","")}cA("");function Sx(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function l5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uA=l5,c5=new uf("auth","Firebase",l5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=new Nx("@firebase/auth");function dA(n,...e){Qm.logLevel<=dn.WARN&&Qm.warn(`Auth (${Fd}): ${n}`,...e)}function Pm(n,...e){Qm.logLevel<=dn.ERROR&&Qm.error(`Auth (${Fd}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(n,...e){throw Ex(n,...e)}function Po(n,...e){return Ex(n,...e)}function u5(n,e,t){const r=Object.assign(Object.assign({},uA()),{[e]:t});return new uf("auth","Firebase",r).create(e,{appName:n.name})}function Tl(n){return u5(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ex(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return c5.create(n,...e)}function Ft(n,e,...t){if(!n)throw Ex(e,...t)}function Al(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Pm(e),new Error(e)}function Cl(n,e){n||Al(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function hA(){return U1()==="http:"||U1()==="https:"}function U1(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hA()||q_()||"connection"in navigator)?navigator.onLine:!0}function mA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cl(t>e,"Short delay should be less than long delay!"),this.isMobile=B_()||H_()}get(){return fA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n,e){Cl(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Al("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Al("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Al("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xA=new hf(3e4,6e4);function zc(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function qc(n,e,t,r,i={}){return h5(n,i,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const h=df(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:f},l);return z_()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Md(n.emulatorConfig.host)&&(g.credentials="include"),d5.fetch()(await f5(n,n.config.apiHost,t,h),g)})}async function h5(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},pA),e);try{const i=new vA(n),l=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw wm(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[f,g]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw wm(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw wm(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw wm(n,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw u5(n,v,g);$i(n,v)}}catch(i){if(i instanceof Pl)throw i;$i(n,"network-request-failed",{message:String(i)})}}async function ff(n,e,t,r,i={}){const l=await qc(n,e,t,r,i);return"mfaPendingCredential"in l&&$i(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function f5(n,e,t,r){const i=`${e}${t}?${r}`,l=n,u=l.config.emulator?Tx(n.config,i):`${n.config.apiScheme}://${i}`;return gA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function bA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Po(this.auth,"network-request-failed")),xA.get())})}}function wm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Po(n,e,r);return i.customData._tokenResponse=t,i}function z1(n){return n!==void 0&&n.enterprise!==void 0}class yA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return bA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wA(n,e){return qc(n,"GET","/v2/recaptchaConfig",zc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(n,e){return qc(n,"POST","/v1/accounts:delete",e)}async function Jm(n,e){return qc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _A(n,e=!1){const t=ga(n),r=await t.getIdToken(e),i=jx(r);Ft(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:i,token:r,authTime:zh(cg(i.auth_time)),issuedAtTime:zh(cg(i.iat)),expirationTime:zh(cg(i.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function cg(n){return Number(n)*1e3}function jx(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Pm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Xy(t);return i?JSON.parse(i):(Pm("Failed to decode base64 JWT payload"),null)}catch(i){return Pm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function q1(n){const e=jx(n);return Ft(e,"internal-error"),Ft(typeof e.exp<"u","internal-error"),Ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Pl&&AA(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function AA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zh(this.lastLoginAt),this.creationTime=zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zm(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Xh(n,Jm(t,{idToken:r}));Ft(i==null?void 0:i.users.length,t,"internal-error");const l=i.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?m5(l.providerUserInfo):[],h=TA(n.providerData,u),f=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!(h!=null&&h.length),v=f?g:!1,N={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Ig(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,N)}async function EA(n){const e=ga(n);await Zm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TA(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function m5(n){return n.map(e=>{var{providerId:t}=e,r=Sx(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(n,e){const t=await h5(n,{},async()=>{const r=df({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:l}=n.config,u=await f5(n,i,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return n.emulatorConfig&&Md(n.emulatorConfig.host)&&(f.credentials="include"),d5.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kA(n,e){return qc(n,"POST","/v2/accounts:revokeToken",zc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ft(e.idToken,"internal-error"),Ft(typeof e.idToken<"u","internal-error"),Ft(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ft(e.length!==0,"internal-error");const t=q1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:l}=await jA(e,t);this.updateTokensAndExpiration(r,i,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:l}=t,u=new vd;return r&&(Ft(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(Ft(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),l&&(Ft(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vd,this.toJSON())}_performRefresh(){return Al("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n,e){Ft(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ki{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,l=Sx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ig(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Xh(this,this.stsTokenManager.getToken(this.auth,e));return Ft(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _A(this,e)}reload(){return EA(this)}_assign(e){this!==e&&(Ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ki(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Zm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pi(this.auth.app))return Promise.reject(Tl(this.auth));const e=await this.getIdToken();return await Xh(this,NA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,l,u,h,f,g,v;const N=(r=t.displayName)!==null&&r!==void 0?r:void 0,S=(i=t.email)!==null&&i!==void 0?i:void 0,_=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,L=(u=t.photoURL)!==null&&u!==void 0?u:void 0,O=(h=t.tenantId)!==null&&h!==void 0?h:void 0,q=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,M=(g=t.createdAt)!==null&&g!==void 0?g:void 0,T=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:I,emailVerified:ee,isAnonymous:se,providerData:ge,stsTokenManager:W}=t;Ft(I&&W,e,"internal-error");const k=vd.fromJSON(this.name,W);Ft(typeof I=="string",e,"internal-error"),xc(N,e.name),xc(S,e.name),Ft(typeof ee=="boolean",e,"internal-error"),Ft(typeof se=="boolean",e,"internal-error"),xc(_,e.name),xc(L,e.name),xc(O,e.name),xc(q,e.name),xc(M,e.name),xc(T,e.name);const V=new Ki({uid:I,auth:e,email:S,emailVerified:ee,displayName:N,isAnonymous:se,photoURL:L,phoneNumber:_,tenantId:O,stsTokenManager:k,createdAt:M,lastLoginAt:T});return ge&&Array.isArray(ge)&&(V.providerData=ge.map(Q=>Object.assign({},Q))),q&&(V._redirectEventId=q),V}static async _fromIdTokenResponse(e,t,r=!1){const i=new vd;i.updateFromServerResponse(t);const l=new Ki({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zm(l),l}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ft(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?m5(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!(l!=null&&l.length),h=new vd;h.updateFromIdToken(r);const f=new Ki({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:u}),g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Ig(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(l!=null&&l.length)};return Object.assign(f,g),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new Map;function Sl(n){Cl(n instanceof Function,"Expected a class definition");let e=H1.get(n);return e?(Cl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,H1.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}p5.type="NONE";const W1=p5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(n,e,t){return`firebase:${n}:${e}:${t}`}class yd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:l}=this.auth;this.fullUserKey=Dm(this.userKey,i.apiKey,l),this.fullPersistenceKey=Dm("persistence",i.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Jm(this.auth,{idToken:e}).catch(()=>{});return t?Ki._fromGetAccountInfoResponse(this.auth,t,e):null}return Ki._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new yd(Sl(W1),e,r);const i=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=i[0]||Sl(W1);const u=Dm(r,e.config.apiKey,e.name);let h=null;for(const g of t)try{const v=await g._get(u);if(v){let N;if(typeof v=="string"){const S=await Jm(e,{idToken:v}).catch(()=>{});if(!S)break;N=await Ki._fromGetAccountInfoResponse(e,S,v)}else N=Ki._fromJSON(e,v);g!==l&&(h=N),l=g;break}}catch{}const f=i.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new yd(l,e,r):(l=f[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new yd(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(v5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(g5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w5(e))return"Blackberry";if(N5(e))return"Webos";if(x5(e))return"Safari";if((e.includes("chrome/")||b5(e))&&!e.includes("edge/"))return"Chrome";if(y5(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function g5(n=$a()){return/firefox\//i.test(n)}function x5(n=$a()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function b5(n=$a()){return/crios\//i.test(n)}function v5(n=$a()){return/iemobile/i.test(n)}function y5(n=$a()){return/android/i.test(n)}function w5(n=$a()){return/blackberry/i.test(n)}function N5(n=$a()){return/webos/i.test(n)}function kx(n=$a()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function CA(n=$a()){var e;return kx(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RA(){return W_()&&document.documentMode===10}function _5(n=$a()){return kx(n)||y5(n)||N5(n)||w5(n)||/windows phone/i.test(n)||v5(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(n,e=[]){let t;switch(n){case"Browser":t=G1($a());break;case"Worker":t=`${G1($a())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,h)=>{try{const f=e(l);u(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(n,e={}){return qc(n,"GET","/v2/passwordPolicy",zc(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=6;class DA{constructor(e){var t,r,i,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:PA,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,l,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(i=f.containsLowercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(l=f.containsUppercaseLetter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K1(this),this.idTokenSubscription=new K1(this),this.beforeStateQueue=new IA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sl(t)),this._initializationPromise=this.queue(async()=>{var r,i,l;if(!this._deleted&&(this.persistenceManager=await yd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Jm(this,{idToken:e}),r=await Ki._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(pi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&(f!=null&&f.user)&&(i=f.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pi(this.app))return Promise.reject(Tl(this));const t=e?ga(e):null;return t&&Ft(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pi(this.app)?Promise.reject(Tl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pi(this.app)?Promise.reject(Tl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LA(this),t=new DA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sl(e)||this._popupRedirectResolver;Ft(t,this,"argument-error"),this.redirectPersistenceManager=await yd.create(this,[Sl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ft(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,i);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=A5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(pi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&dA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Tu(n){return ga(n)}class K1{constructor(e){this.auth=e,this.observer=null,this.addObserver=Z_(t=>this.observer=t)}get next(){return Ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MA(n){y0=n}function S5(n){return y0.loadJS(n)}function FA(){return y0.recaptchaEnterpriseScript}function VA(){return y0.gapiScript}function BA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class UA{constructor(){this.enterprise=new zA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const qA="recaptcha-enterprise",E5="NO_RECAPTCHA";class HA{constructor(e){this.type=qA,this.auth=Tu(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{wA(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new yA(f);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,u(g.siteKey)}}).catch(f=>{h(f)})})}function i(l,u,h){const f=window.grecaptcha;z1(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(g=>{u(g)}).catch(()=>{u(E5)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new UA().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(h=>{if(!t&&z1(window.grecaptcha))i(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=FA();f.length!==0&&(f+=h),S5(f).then(()=>{i(h,l,u)}).catch(g=>{u(g)})}}).catch(h=>{u(h)})})}}async function Y1(n,e,t,r=!1,i=!1){const l=new HA(n);let u;if(i)u=E5;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Lg(n,e,t,r,i){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Y1(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Y1(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(n,e){const t=Ax(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),l=t.getOptions();if(vu(l,e??{}))return i;$i(i,"already-initialized")}return t.initialize({options:e})}function GA(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Sl);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KA(n,e,t){const r=Tu(n);Ft(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,l=T5(e),{host:u,port:h}=YA(e),f=h===null?"":`:${h}`,g={url:`${l}//${u}${f}/`},v=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ft(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ft(vu(g,r.config.emulator)&&vu(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Md(u)?(e5(`${l}//${u}${f}`),t5("Auth",!0)):$A()}function T5(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function YA(n){const e=T5(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const l=i[1];return{host:l,port:$1(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:$1(u)}}}function $1(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function $A(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Al("not implemented")}_getIdTokenResponse(e){return Al("not implemented")}_linkToIdToken(e,t){return Al("not implemented")}_getReauthenticationResolver(e){return Al("not implemented")}}async function XA(n,e){return qc(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QA(n,e){return ff(n,"POST","/v1/accounts:signInWithPassword",zc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(n,e){return ff(n,"POST","/v1/accounts:signInWithEmailLink",zc(n,e))}async function ZA(n,e){return ff(n,"POST","/v1/accounts:signInWithEmailLink",zc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends Cx{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Qh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Qh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lg(e,t,"signInWithPassword",QA);case"emailLink":return JA(e,{email:this._email,oobCode:this._password});default:$i(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lg(e,r,"signUpPassword",XA);case"emailLink":return ZA(e,{idToken:t,email:this._email,oobCode:this._password});default:$i(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wd(n,e){return ff(n,"POST","/v1/accounts:signInWithIdp",zc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="http://localhost";class wu extends Cx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$i("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,l=Sx(t,["providerId","signInMethod"]);if(!r||!i)return null;const u=new wu(r,i);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return wd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,wd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wd(e,t)}buildRequest(){const e={requestUri:eS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=df(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nS(n){const e=Oh(Mh(n)).link,t=e?Oh(Mh(e)).deep_link_id:null,r=Oh(Mh(n)).deep_link_id;return(r?Oh(Mh(r)).link:null)||r||t||e||n}class Rx{constructor(e){var t,r,i,l,u,h;const f=Oh(Mh(e)),g=(t=f.apiKey)!==null&&t!==void 0?t:null,v=(r=f.oobCode)!==null&&r!==void 0?r:null,N=tS((i=f.mode)!==null&&i!==void 0?i:null);Ft(g&&v&&N,"argument-error"),this.apiKey=g,this.operation=N,this.code=v,this.continueUrl=(l=f.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=f.lang)!==null&&u!==void 0?u:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=nS(e);try{return new Rx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(){this.providerId=Vd.PROVIDER_ID}static credential(e,t){return Qh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Rx.parseLink(t);return Ft(r,"argument-error"),Qh._fromEmailAndCode(e,r.code,r.tenantId)}}Vd.PROVIDER_ID="password";Vd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends j5{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends mf{constructor(){super("facebook.com")}static credential(e){return wu._fromParams({providerId:wc.PROVIDER_ID,signInMethod:wc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wc.credentialFromTaggedObject(e)}static credentialFromError(e){return wc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wc.credential(e.oauthAccessToken)}catch{return null}}}wc.FACEBOOK_SIGN_IN_METHOD="facebook.com";wc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends mf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wu._fromParams({providerId:Nc.PROVIDER_ID,signInMethod:Nc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Nc.credentialFromTaggedObject(e)}static credentialFromError(e){return Nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Nc.credential(t,r)}catch{return null}}}Nc.GOOGLE_SIGN_IN_METHOD="google.com";Nc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends mf{constructor(){super("github.com")}static credential(e){return wu._fromParams({providerId:_c.PROVIDER_ID,signInMethod:_c.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _c.credentialFromTaggedObject(e)}static credentialFromError(e){return _c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _c.credential(e.oauthAccessToken)}catch{return null}}}_c.GITHUB_SIGN_IN_METHOD="github.com";_c.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends mf{constructor(){super("twitter.com")}static credential(e,t){return wu._fromParams({providerId:Ac.PROVIDER_ID,signInMethod:Ac.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ac.credentialFromTaggedObject(e)}static credentialFromError(e){return Ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ac.credential(t,r)}catch{return null}}}Ac.TWITTER_SIGN_IN_METHOD="twitter.com";Ac.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(n,e){return ff(n,"POST","/v1/accounts:signUp",zc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const l=await Ki._fromIdTokenResponse(e,r,i),u=X1(r);return new Nu({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=X1(r);return new Nu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function X1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends Pl{constructor(e,t,r,i){var l;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e0.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new e0(e,t,r,i)}}function k5(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?e0._fromErrorAndOperation(n,l,e,r):l})}async function aS(n,e,t=!1){const r=await Xh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Nu._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(n,e,t=!1){const{auth:r}=n;if(pi(r.app))return Promise.reject(Tl(r));const i="reauthenticate";try{const l=await Xh(n,k5(r,i,e,n),t);Ft(l.idToken,r,"internal-error");const u=jx(l.idToken);Ft(u,r,"internal-error");const{sub:h}=u;return Ft(n.uid===h,r,"user-mismatch"),Nu._forOperation(n,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&$i(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(n,e,t=!1){if(pi(n.app))return Promise.reject(Tl(n));const r="signIn",i=await k5(n,r,e),l=await Nu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(l.user),l}async function iS(n,e){return C5(Tu(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R5(n){const e=Tu(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function oS(n,e,t){if(pi(n.app))return Promise.reject(Tl(n));const r=Tu(n),u=await Lg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rS).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&R5(n),f}),h=await Nu._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function lS(n,e,t){return pi(n.app)?Promise.reject(Tl(n)):iS(ga(n),Vd.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&R5(n),r})}function cS(n,e,t,r){return ga(n).onIdTokenChanged(e,t,r)}function uS(n,e,t){return ga(n).beforeAuthStateChanged(e,t)}function dS(n,e,t,r){return ga(n).onAuthStateChanged(e,t,r)}function hS(n){return ga(n).signOut()}const t0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(t0,"1"),this.storage.removeItem(t0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=1e3,mS=10;class L5 extends I5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_5(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);RA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,mS):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},fS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}L5.type="LOCAL";const pS=L5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5 extends I5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}P5.type="SESSION";const D5=P5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new w0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:l}=t.data,u=this.handlersMap[i];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(u).map(async g=>g(t.origin,l)),f=await gS(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}w0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,u;return new Promise((h,f)=>{const g=Ix("",20);i.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(N){const S=N;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(S.data.response);break;default:clearTimeout(v),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(){return window}function bS(n){Do().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(){return typeof Do().WorkerGlobalScope<"u"&&typeof Do().importScripts=="function"}async function vS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yS(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function wS(){return O5()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5="firebaseLocalStorageDb",NS=1,n0="firebaseLocalStorage",F5="fbase_key";class pf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function N0(n,e){return n.transaction([n0],e?"readwrite":"readonly").objectStore(n0)}function _S(){const n=indexedDB.deleteDatabase(M5);return new pf(n).toPromise()}function Pg(){const n=indexedDB.open(M5,NS);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(n0,{keyPath:F5})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(n0)?e(r):(r.close(),await _S(),e(await Pg()))})})}async function Q1(n,e,t){const r=N0(n,!0).put({[F5]:e,value:t});return new pf(r).toPromise()}async function AS(n,e){const t=N0(n,!1).get(e),r=await new pf(t).toPromise();return r===void 0?null:r.value}function J1(n,e){const t=N0(n,!0).delete(e);return new pf(t).toPromise()}const SS=800,ES=3;class V5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ES)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=w0._getInstance(wS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await vS(),!this.activeServiceWorker)return;this.sender=new xS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pg();return await Q1(e,t0,"1"),await J1(e,t0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q1(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>AS(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>J1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const l=N0(i,!1).getAll();return new pf(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:l}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V5.type="LOCAL";const TS=V5;new hf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(n,e){return e?Sl(e):(Ft(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx extends Cx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kS(n){return C5(n.auth,new Lx(n),n.bypassAuthState)}function CS(n){const{auth:e,user:t}=n;return Ft(t,e,"internal-error"),sS(t,new Lx(n),n.bypassAuthState)}async function RS(n){const{auth:e,user:t}=n;return Ft(t,e,"internal-error"),aS(t,new Lx(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,t,r,i,l=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kS;case"linkViaPopup":case"linkViaRedirect":return RS;case"reauthViaPopup":case"reauthViaRedirect":return CS;default:$i(this.auth,"internal-error")}}resolve(e){Cl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=new hf(2e3,1e4);class gd extends B5{constructor(e,t,r,i,l){super(e,t,i,l),this.provider=r,this.authWindow=null,this.pollId=null,gd.currentPopupAction&&gd.currentPopupAction.cancel(),gd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ft(e,this.auth,"internal-error"),e}async onExecution(){Cl(this.filter.length===1,"Popup operations only handle one event");const e=Ix();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Po(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Po(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Po(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IS.get())};e()}}gd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="pendingRedirect",Om=new Map;class PS extends B5{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Om.get(this.auth._key());if(!e){try{const r=await DS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Om.set(this.auth._key(),e)}return this.bypassAuthState||Om.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DS(n,e){const t=FS(e),r=MS(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function OS(n,e){Om.set(n._key(),e)}function MS(n){return Sl(n._redirectPersistence)}function FS(n){return Dm(LS,n.config.apiKey,n.name)}async function VS(n,e,t=!1){if(pi(n.app))return Promise.reject(Tl(n));const r=Tu(n),i=jS(r,e),u=await new PS(r,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=10*60*1e3;class US{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!U5(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Po(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z1(e))}saveEventToCache(e){this.cachedEventUids.add(Z1(e)),this.lastProcessedEventTime=Date.now()}}function Z1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function U5({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zS(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U5(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(n,e={}){return qc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WS=/^https?/;async function GS(n){if(n.config.emulator)return;const{authorizedDomains:e}=await qS(n);for(const t of e)try{if(KS(t))return}catch{}$i(n,"unauthorized-domain")}function KS(n){const e=Rg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!WS.test(t))return!1;if(HS.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new hf(3e4,6e4);function e2(){const n=Do().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function $S(n){return new Promise((e,t)=>{var r,i,l;function u(){e2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e2(),t(Po(n,"network-request-failed"))},timeout:YS.get()})}if(!((i=(r=Do().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((l=Do().gapi)===null||l===void 0)&&l.load)u();else{const h=BA("iframefcb");return Do()[h]=()=>{gapi.load?u():t(Po(n,"network-request-failed"))},S5(`${VA()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Mm=null,e})}let Mm=null;function XS(n){return Mm=Mm||$S(n),Mm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=new hf(5e3,15e3),JS="__/auth/iframe",ZS="emulator/auth/iframe",eE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nE(n){const e=n.config;Ft(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Tx(e,ZS):`https://${n.config.authDomain}/${JS}`,r={apiKey:e.apiKey,appName:n.name,v:Fd},i=tE.get(n.config.apiHost);i&&(r.eid=i);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${df(r).slice(1)}`}async function rE(n){const e=await XS(n),t=Do().gapi;return Ft(t,n,"internal-error"),e.open({where:document.body,url:nE(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eE,dontclear:!0},r=>new Promise(async(i,l)=>{await r.restyle({setHideOnLeave:!1});const u=Po(n,"network-request-failed"),h=Do().setTimeout(()=>{l(u)},QS.get());function f(){Do().clearTimeout(h),i(r)}r.ping(f).then(f,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sE=500,iE=600,oE="_blank",lE="http://localhost";class t2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cE(n,e,t,r=sE,i=iE){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},aE),{width:r.toString(),height:i.toString(),top:l,left:u}),g=$a().toLowerCase();t&&(h=b5(g)?oE:t),g5(g)&&(e=e||lE,f.scrollbars="yes");const v=Object.entries(f).reduce((S,[_,L])=>`${S}${_}=${L},`,"");if(CA(g)&&h!=="_self")return uE(e||"",h),new t2(null);const N=window.open(e||"",h,v);Ft(N,n,"popup-blocked");try{N.focus()}catch{}return new t2(N)}function uE(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="__/auth/handler",hE="emulator/auth/handler",fE=encodeURIComponent("fac");async function n2(n,e,t,r,i,l){Ft(n.config.authDomain,n,"auth-domain-config-required"),Ft(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Fd,eventId:i};if(e instanceof j5){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",J_(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,N]of Object.entries({}))u[v]=N}if(e instanceof mf){const v=e.getScopes().filter(N=>N!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await n._getAppCheckToken(),g=f?`#${fE}=${encodeURIComponent(f)}`:"";return`${mE(n)}?${df(h).slice(1)}${g}`}function mE({config:n}){return n.emulator?Tx(n,hE):`https://${n.authDomain}/${dE}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="webStorageSupport";class pE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=D5,this._completeRedirectFn=VS,this._overrideRedirectResult=OS}async _openPopup(e,t,r,i){var l;Cl((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await n2(e,t,r,Rg(),i);return cE(e,u,Ix())}async _openRedirect(e,t,r,i){await this._originValidation(e);const l=await n2(e,t,r,Rg(),i);return bS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:l}=this.eventManagers[t];return i?Promise.resolve(i):(Cl(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await rE(e),r=new US(e);return t.register("authEvent",i=>(Ft(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ug,{type:ug},i=>{var l;const u=(l=i==null?void 0:i[0])===null||l===void 0?void 0:l[ug];u!==void 0&&t(!!u),$i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _5()||x5()||kx()}}const gE=pE;var r2="@firebase/auth",a2="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vE(n){kd(new yu("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Ft(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A5(n)},g=new OA(r,i,l,f);return GA(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),kd(new yu("auth-internal",e=>{const t=Tu(e.getProvider("auth").getImmediate());return(r=>new xE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),kc(r2,a2,bE(n)),kc(r2,a2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=5*60,wE=Zy("authIdTokenMaxAge")||yE;let s2=null;const NE=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>wE)return;const i=t==null?void 0:t.token;s2!==i&&(s2=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _E(n=s5()){const e=Ax(n,"auth");if(e.isInitialized())return e.getImmediate();const t=WA(n,{popupRedirectResolver:gE,persistence:[TS,pS,D5]}),r=Zy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=NE(l.toString());uS(t,u,()=>u(t.currentUser)),cS(t,h=>u(h))}}const i=Qy("auth");return i&&KA(t,`http://${i}`),t}function AE(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}MA({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const l=Po("internal-error");l.customData=i,t(l)},r.type="text/javascript",r.charset="UTF-8",AE().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vE("Browser");var SE="firebase",EE="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kc(SE,EE,"app");var i2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cc,z5;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(W,k){function V(){}V.prototype=k.prototype,W.D=k.prototype,W.prototype=new V,W.prototype.constructor=W,W.C=function(Q,R,P){for(var B=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)B[ce-2]=arguments[ce];return k.prototype[R].apply(Q,B)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(W,k,V){V||(V=0);var Q=Array(16);if(typeof k=="string")for(var R=0;16>R;++R)Q[R]=k.charCodeAt(V++)|k.charCodeAt(V++)<<8|k.charCodeAt(V++)<<16|k.charCodeAt(V++)<<24;else for(R=0;16>R;++R)Q[R]=k[V++]|k[V++]<<8|k[V++]<<16|k[V++]<<24;k=W.g[0],V=W.g[1],R=W.g[2];var P=W.g[3],B=k+(P^V&(R^P))+Q[0]+3614090360&4294967295;k=V+(B<<7&4294967295|B>>>25),B=P+(R^k&(V^R))+Q[1]+3905402710&4294967295,P=k+(B<<12&4294967295|B>>>20),B=R+(V^P&(k^V))+Q[2]+606105819&4294967295,R=P+(B<<17&4294967295|B>>>15),B=V+(k^R&(P^k))+Q[3]+3250441966&4294967295,V=R+(B<<22&4294967295|B>>>10),B=k+(P^V&(R^P))+Q[4]+4118548399&4294967295,k=V+(B<<7&4294967295|B>>>25),B=P+(R^k&(V^R))+Q[5]+1200080426&4294967295,P=k+(B<<12&4294967295|B>>>20),B=R+(V^P&(k^V))+Q[6]+2821735955&4294967295,R=P+(B<<17&4294967295|B>>>15),B=V+(k^R&(P^k))+Q[7]+4249261313&4294967295,V=R+(B<<22&4294967295|B>>>10),B=k+(P^V&(R^P))+Q[8]+1770035416&4294967295,k=V+(B<<7&4294967295|B>>>25),B=P+(R^k&(V^R))+Q[9]+2336552879&4294967295,P=k+(B<<12&4294967295|B>>>20),B=R+(V^P&(k^V))+Q[10]+4294925233&4294967295,R=P+(B<<17&4294967295|B>>>15),B=V+(k^R&(P^k))+Q[11]+2304563134&4294967295,V=R+(B<<22&4294967295|B>>>10),B=k+(P^V&(R^P))+Q[12]+1804603682&4294967295,k=V+(B<<7&4294967295|B>>>25),B=P+(R^k&(V^R))+Q[13]+4254626195&4294967295,P=k+(B<<12&4294967295|B>>>20),B=R+(V^P&(k^V))+Q[14]+2792965006&4294967295,R=P+(B<<17&4294967295|B>>>15),B=V+(k^R&(P^k))+Q[15]+1236535329&4294967295,V=R+(B<<22&4294967295|B>>>10),B=k+(R^P&(V^R))+Q[1]+4129170786&4294967295,k=V+(B<<5&4294967295|B>>>27),B=P+(V^R&(k^V))+Q[6]+3225465664&4294967295,P=k+(B<<9&4294967295|B>>>23),B=R+(k^V&(P^k))+Q[11]+643717713&4294967295,R=P+(B<<14&4294967295|B>>>18),B=V+(P^k&(R^P))+Q[0]+3921069994&4294967295,V=R+(B<<20&4294967295|B>>>12),B=k+(R^P&(V^R))+Q[5]+3593408605&4294967295,k=V+(B<<5&4294967295|B>>>27),B=P+(V^R&(k^V))+Q[10]+38016083&4294967295,P=k+(B<<9&4294967295|B>>>23),B=R+(k^V&(P^k))+Q[15]+3634488961&4294967295,R=P+(B<<14&4294967295|B>>>18),B=V+(P^k&(R^P))+Q[4]+3889429448&4294967295,V=R+(B<<20&4294967295|B>>>12),B=k+(R^P&(V^R))+Q[9]+568446438&4294967295,k=V+(B<<5&4294967295|B>>>27),B=P+(V^R&(k^V))+Q[14]+3275163606&4294967295,P=k+(B<<9&4294967295|B>>>23),B=R+(k^V&(P^k))+Q[3]+4107603335&4294967295,R=P+(B<<14&4294967295|B>>>18),B=V+(P^k&(R^P))+Q[8]+1163531501&4294967295,V=R+(B<<20&4294967295|B>>>12),B=k+(R^P&(V^R))+Q[13]+2850285829&4294967295,k=V+(B<<5&4294967295|B>>>27),B=P+(V^R&(k^V))+Q[2]+4243563512&4294967295,P=k+(B<<9&4294967295|B>>>23),B=R+(k^V&(P^k))+Q[7]+1735328473&4294967295,R=P+(B<<14&4294967295|B>>>18),B=V+(P^k&(R^P))+Q[12]+2368359562&4294967295,V=R+(B<<20&4294967295|B>>>12),B=k+(V^R^P)+Q[5]+4294588738&4294967295,k=V+(B<<4&4294967295|B>>>28),B=P+(k^V^R)+Q[8]+2272392833&4294967295,P=k+(B<<11&4294967295|B>>>21),B=R+(P^k^V)+Q[11]+1839030562&4294967295,R=P+(B<<16&4294967295|B>>>16),B=V+(R^P^k)+Q[14]+4259657740&4294967295,V=R+(B<<23&4294967295|B>>>9),B=k+(V^R^P)+Q[1]+2763975236&4294967295,k=V+(B<<4&4294967295|B>>>28),B=P+(k^V^R)+Q[4]+1272893353&4294967295,P=k+(B<<11&4294967295|B>>>21),B=R+(P^k^V)+Q[7]+4139469664&4294967295,R=P+(B<<16&4294967295|B>>>16),B=V+(R^P^k)+Q[10]+3200236656&4294967295,V=R+(B<<23&4294967295|B>>>9),B=k+(V^R^P)+Q[13]+681279174&4294967295,k=V+(B<<4&4294967295|B>>>28),B=P+(k^V^R)+Q[0]+3936430074&4294967295,P=k+(B<<11&4294967295|B>>>21),B=R+(P^k^V)+Q[3]+3572445317&4294967295,R=P+(B<<16&4294967295|B>>>16),B=V+(R^P^k)+Q[6]+76029189&4294967295,V=R+(B<<23&4294967295|B>>>9),B=k+(V^R^P)+Q[9]+3654602809&4294967295,k=V+(B<<4&4294967295|B>>>28),B=P+(k^V^R)+Q[12]+3873151461&4294967295,P=k+(B<<11&4294967295|B>>>21),B=R+(P^k^V)+Q[15]+530742520&4294967295,R=P+(B<<16&4294967295|B>>>16),B=V+(R^P^k)+Q[2]+3299628645&4294967295,V=R+(B<<23&4294967295|B>>>9),B=k+(R^(V|~P))+Q[0]+4096336452&4294967295,k=V+(B<<6&4294967295|B>>>26),B=P+(V^(k|~R))+Q[7]+1126891415&4294967295,P=k+(B<<10&4294967295|B>>>22),B=R+(k^(P|~V))+Q[14]+2878612391&4294967295,R=P+(B<<15&4294967295|B>>>17),B=V+(P^(R|~k))+Q[5]+4237533241&4294967295,V=R+(B<<21&4294967295|B>>>11),B=k+(R^(V|~P))+Q[12]+1700485571&4294967295,k=V+(B<<6&4294967295|B>>>26),B=P+(V^(k|~R))+Q[3]+2399980690&4294967295,P=k+(B<<10&4294967295|B>>>22),B=R+(k^(P|~V))+Q[10]+4293915773&4294967295,R=P+(B<<15&4294967295|B>>>17),B=V+(P^(R|~k))+Q[1]+2240044497&4294967295,V=R+(B<<21&4294967295|B>>>11),B=k+(R^(V|~P))+Q[8]+1873313359&4294967295,k=V+(B<<6&4294967295|B>>>26),B=P+(V^(k|~R))+Q[15]+4264355552&4294967295,P=k+(B<<10&4294967295|B>>>22),B=R+(k^(P|~V))+Q[6]+2734768916&4294967295,R=P+(B<<15&4294967295|B>>>17),B=V+(P^(R|~k))+Q[13]+1309151649&4294967295,V=R+(B<<21&4294967295|B>>>11),B=k+(R^(V|~P))+Q[4]+4149444226&4294967295,k=V+(B<<6&4294967295|B>>>26),B=P+(V^(k|~R))+Q[11]+3174756917&4294967295,P=k+(B<<10&4294967295|B>>>22),B=R+(k^(P|~V))+Q[2]+718787259&4294967295,R=P+(B<<15&4294967295|B>>>17),B=V+(P^(R|~k))+Q[9]+3951481745&4294967295,W.g[0]=W.g[0]+k&4294967295,W.g[1]=W.g[1]+(R+(B<<21&4294967295|B>>>11))&4294967295,W.g[2]=W.g[2]+R&4294967295,W.g[3]=W.g[3]+P&4294967295}r.prototype.u=function(W,k){k===void 0&&(k=W.length);for(var V=k-this.blockSize,Q=this.B,R=this.h,P=0;P<k;){if(R==0)for(;P<=V;)i(this,W,P),P+=this.blockSize;if(typeof W=="string"){for(;P<k;)if(Q[R++]=W.charCodeAt(P++),R==this.blockSize){i(this,Q),R=0;break}}else for(;P<k;)if(Q[R++]=W[P++],R==this.blockSize){i(this,Q),R=0;break}}this.h=R,this.o+=k},r.prototype.v=function(){var W=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);W[0]=128;for(var k=1;k<W.length-8;++k)W[k]=0;var V=8*this.o;for(k=W.length-8;k<W.length;++k)W[k]=V&255,V/=256;for(this.u(W),W=Array(16),k=V=0;4>k;++k)for(var Q=0;32>Q;Q+=8)W[V++]=this.g[k]>>>Q&255;return W};function l(W,k){var V=h;return Object.prototype.hasOwnProperty.call(V,W)?V[W]:V[W]=k(W)}function u(W,k){this.h=k;for(var V=[],Q=!0,R=W.length-1;0<=R;R--){var P=W[R]|0;Q&&P==k||(V[R]=P,Q=!1)}this.g=V}var h={};function f(W){return-128<=W&&128>W?l(W,function(k){return new u([k|0],0>k?-1:0)}):new u([W|0],0>W?-1:0)}function g(W){if(isNaN(W)||!isFinite(W))return N;if(0>W)return q(g(-W));for(var k=[],V=1,Q=0;W>=V;Q++)k[Q]=W/V|0,V*=4294967296;return new u(k,0)}function v(W,k){if(W.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(W.charAt(0)=="-")return q(v(W.substring(1),k));if(0<=W.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=g(Math.pow(k,8)),Q=N,R=0;R<W.length;R+=8){var P=Math.min(8,W.length-R),B=parseInt(W.substring(R,R+P),k);8>P?(P=g(Math.pow(k,P)),Q=Q.j(P).add(g(B))):(Q=Q.j(V),Q=Q.add(g(B)))}return Q}var N=f(0),S=f(1),_=f(16777216);n=u.prototype,n.m=function(){if(O(this))return-q(this).m();for(var W=0,k=1,V=0;V<this.g.length;V++){var Q=this.i(V);W+=(0<=Q?Q:4294967296+Q)*k,k*=4294967296}return W},n.toString=function(W){if(W=W||10,2>W||36<W)throw Error("radix out of range: "+W);if(L(this))return"0";if(O(this))return"-"+q(this).toString(W);for(var k=g(Math.pow(W,6)),V=this,Q="";;){var R=ee(V,k).g;V=M(V,R.j(k));var P=((0<V.g.length?V.g[0]:V.h)>>>0).toString(W);if(V=R,L(V))return P+Q;for(;6>P.length;)P="0"+P;Q=P+Q}},n.i=function(W){return 0>W?0:W<this.g.length?this.g[W]:this.h};function L(W){if(W.h!=0)return!1;for(var k=0;k<W.g.length;k++)if(W.g[k]!=0)return!1;return!0}function O(W){return W.h==-1}n.l=function(W){return W=M(this,W),O(W)?-1:L(W)?0:1};function q(W){for(var k=W.g.length,V=[],Q=0;Q<k;Q++)V[Q]=~W.g[Q];return new u(V,~W.h).add(S)}n.abs=function(){return O(this)?q(this):this},n.add=function(W){for(var k=Math.max(this.g.length,W.g.length),V=[],Q=0,R=0;R<=k;R++){var P=Q+(this.i(R)&65535)+(W.i(R)&65535),B=(P>>>16)+(this.i(R)>>>16)+(W.i(R)>>>16);Q=B>>>16,P&=65535,B&=65535,V[R]=B<<16|P}return new u(V,V[V.length-1]&-2147483648?-1:0)};function M(W,k){return W.add(q(k))}n.j=function(W){if(L(this)||L(W))return N;if(O(this))return O(W)?q(this).j(q(W)):q(q(this).j(W));if(O(W))return q(this.j(q(W)));if(0>this.l(_)&&0>W.l(_))return g(this.m()*W.m());for(var k=this.g.length+W.g.length,V=[],Q=0;Q<2*k;Q++)V[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var R=0;R<W.g.length;R++){var P=this.i(Q)>>>16,B=this.i(Q)&65535,ce=W.i(R)>>>16,Le=W.i(R)&65535;V[2*Q+2*R]+=B*Le,T(V,2*Q+2*R),V[2*Q+2*R+1]+=P*Le,T(V,2*Q+2*R+1),V[2*Q+2*R+1]+=B*ce,T(V,2*Q+2*R+1),V[2*Q+2*R+2]+=P*ce,T(V,2*Q+2*R+2)}for(Q=0;Q<k;Q++)V[Q]=V[2*Q+1]<<16|V[2*Q];for(Q=k;Q<2*k;Q++)V[Q]=0;return new u(V,0)};function T(W,k){for(;(W[k]&65535)!=W[k];)W[k+1]+=W[k]>>>16,W[k]&=65535,k++}function I(W,k){this.g=W,this.h=k}function ee(W,k){if(L(k))throw Error("division by zero");if(L(W))return new I(N,N);if(O(W))return k=ee(q(W),k),new I(q(k.g),q(k.h));if(O(k))return k=ee(W,q(k)),new I(q(k.g),k.h);if(30<W.g.length){if(O(W)||O(k))throw Error("slowDivide_ only works with positive integers.");for(var V=S,Q=k;0>=Q.l(W);)V=se(V),Q=se(Q);var R=ge(V,1),P=ge(Q,1);for(Q=ge(Q,2),V=ge(V,2);!L(Q);){var B=P.add(Q);0>=B.l(W)&&(R=R.add(V),P=B),Q=ge(Q,1),V=ge(V,1)}return k=M(W,R.j(k)),new I(R,k)}for(R=N;0<=W.l(k);){for(V=Math.max(1,Math.floor(W.m()/k.m())),Q=Math.ceil(Math.log(V)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),P=g(V),B=P.j(k);O(B)||0<B.l(W);)V-=Q,P=g(V),B=P.j(k);L(P)&&(P=S),R=R.add(P),W=M(W,B)}return new I(R,W)}n.A=function(W){return ee(this,W).h},n.and=function(W){for(var k=Math.max(this.g.length,W.g.length),V=[],Q=0;Q<k;Q++)V[Q]=this.i(Q)&W.i(Q);return new u(V,this.h&W.h)},n.or=function(W){for(var k=Math.max(this.g.length,W.g.length),V=[],Q=0;Q<k;Q++)V[Q]=this.i(Q)|W.i(Q);return new u(V,this.h|W.h)},n.xor=function(W){for(var k=Math.max(this.g.length,W.g.length),V=[],Q=0;Q<k;Q++)V[Q]=this.i(Q)^W.i(Q);return new u(V,this.h^W.h)};function se(W){for(var k=W.g.length+1,V=[],Q=0;Q<k;Q++)V[Q]=W.i(Q)<<1|W.i(Q-1)>>>31;return new u(V,W.h)}function ge(W,k){var V=k>>5;k%=32;for(var Q=W.g.length-V,R=[],P=0;P<Q;P++)R[P]=0<k?W.i(P+V)>>>k|W.i(P+V+1)<<32-k:W.i(P+V);return new u(R,W.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,z5=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=v,Cc=u}).apply(typeof i2<"u"?i2:typeof self<"u"?self:typeof window<"u"?window:{});var Nm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q5,Fh,H5,Fm,Dg,W5,G5,K5;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,E,C){return p==Array.prototype||p==Object.prototype||(p[E]=C.value),p};function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nm=="object"&&Nm];for(var E=0;E<p.length;++E){var C=p[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=t(this);function i(p,E){if(E)e:{var C=r;p=p.split(".");for(var $=0;$<p.length-1;$++){var ve=p[$];if(!(ve in C))break e;C=C[ve]}p=p[p.length-1],$=C[p],E=E($),E!=$&&E!=null&&e(C,p,{configurable:!0,writable:!0,value:E})}}function l(p,E){p instanceof String&&(p+="");var C=0,$=!1,ve={next:function(){if(!$&&C<p.length){var Re=C++;return{value:E(Re,p[Re]),done:!1}}return $=!0,{done:!0,value:void 0}}};return ve[Symbol.iterator]=function(){return ve},ve}i("Array.prototype.values",function(p){return p||function(){return l(this,function(E,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(p){var E=typeof p;return E=E!="object"?E:p?Array.isArray(p)?"array":E:"null",E=="array"||E=="object"&&typeof p.length=="number"}function g(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function v(p,E,C){return p.call.apply(p.bind,arguments)}function N(p,E,C){if(!p)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var ve=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ve,$),p.apply(E,ve)}}return function(){return p.apply(E,arguments)}}function S(p,E,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:N,S.apply(null,arguments)}function _(p,E){var C=Array.prototype.slice.call(arguments,1);return function(){var $=C.slice();return $.push.apply($,arguments),p.apply(this,$)}}function L(p,E){function C(){}C.prototype=E.prototype,p.aa=E.prototype,p.prototype=new C,p.prototype.constructor=p,p.Qb=function($,ve,Re){for(var Ze=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)Ze[Lt-2]=arguments[Lt];return E.prototype[ve].apply($,Ze)}}function O(p){const E=p.length;if(0<E){const C=Array(E);for(let $=0;$<E;$++)C[$]=p[$];return C}return[]}function q(p,E){for(let C=1;C<arguments.length;C++){const $=arguments[C];if(f($)){const ve=p.length||0,Re=$.length||0;p.length=ve+Re;for(let Ze=0;Ze<Re;Ze++)p[ve+Ze]=$[Ze]}else p.push($)}}class M{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function T(p){return/^[\s\xa0]*$/.test(p)}function I(){var p=h.navigator;return p&&(p=p.userAgent)?p:""}function ee(p){return ee[" "](p),p}ee[" "]=function(){};var se=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function ge(p,E,C){for(const $ in p)E.call(C,p[$],$,p)}function W(p,E){for(const C in p)E.call(void 0,p[C],C,p)}function k(p){const E={};for(const C in p)E[C]=p[C];return E}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(p,E){let C,$;for(let ve=1;ve<arguments.length;ve++){$=arguments[ve];for(C in $)p[C]=$[C];for(let Re=0;Re<V.length;Re++)C=V[Re],Object.prototype.hasOwnProperty.call($,C)&&(p[C]=$[C])}}function R(p){var E=1;p=p.split(":");const C=[];for(;0<E&&p.length;)C.push(p.shift()),E--;return p.length&&C.push(p.join(":")),C}function P(p){h.setTimeout(()=>{throw p},0)}function B(){var p=Ce;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class ce{constructor(){this.h=this.g=null}add(E,C){const $=Le.get();$.set(E,C),this.h?this.h.next=$:this.g=$,this.h=$}}var Le=new M(()=>new ae,p=>p.reset());class ae{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let me,he=!1,Ce=new ce,J=()=>{const p=h.Promise.resolve(void 0);me=()=>{p.then(Ae)}};var Ae=()=>{for(var p;p=B();){try{p.h.call(p.g)}catch(C){P(C)}var E=Le;E.j(p),100>E.h&&(E.h++,p.next=E.g,E.g=p)}he=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};h.addEventListener("test",C,E),h.removeEventListener("test",C,E)}catch{}return p}();function ie(p,E){if(K.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var C=this.type=p.type,$=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget){if(se){e:{try{ee(E.nodeName);var ve=!0;break e}catch{}ve=!1}ve||(E=null)}}else C=="mouseover"?E=p.fromElement:C=="mouseout"&&(E=p.toElement);this.relatedTarget=E,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:ue[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&ie.aa.h.call(this)}}L(ie,K);var ue={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Pe(p,E,C,$,ve){this.listener=p,this.proxy=null,this.src=E,this.type=C,this.capture=!!$,this.ha=ve,this.key=++_e,this.da=this.fa=!1}function tt(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Je(p){this.src=p,this.g={},this.h=0}Je.prototype.add=function(p,E,C,$,ve){var Re=p.toString();p=this.g[Re],p||(p=this.g[Re]=[],this.h++);var Ze=at(p,E,$,ve);return-1<Ze?(E=p[Ze],C||(E.fa=!1)):(E=new Pe(E,this.src,Re,!!$,ve),E.fa=C,p.push(E)),E};function st(p,E){var C=E.type;if(C in p.g){var $=p.g[C],ve=Array.prototype.indexOf.call($,E,void 0),Re;(Re=0<=ve)&&Array.prototype.splice.call($,ve,1),Re&&(tt(E),p.g[C].length==0&&(delete p.g[C],p.h--))}}function at(p,E,C,$){for(var ve=0;ve<p.length;++ve){var Re=p[ve];if(!Re.da&&Re.listener==E&&Re.capture==!!C&&Re.ha==$)return ve}return-1}var _t="closure_lm_"+(1e6*Math.random()|0),Ve={};function oe(p,E,C,$,ve){if(Array.isArray(E)){for(var Re=0;Re<E.length;Re++)oe(p,E[Re],C,$,ve);return null}return C=Bt(C),p&&p[Ee]?p.K(E,C,g($)?!!$.capture:!1,ve):At(p,E,C,!1,$,ve)}function At(p,E,C,$,ve,Re){if(!E)throw Error("Invalid event type");var Ze=g(ve)?!!ve.capture:!!ve,Lt=bt(p);if(Lt||(p[_t]=Lt=new Je(p)),C=Lt.add(E,C,$,Ze,Re),C.proxy)return C;if($=gt(),C.proxy=$,$.src=p,$.listener=C,p.addEventListener)te||(ve=Ze),ve===void 0&&(ve=!1),p.addEventListener(E.toString(),$,ve);else if(p.attachEvent)p.attachEvent(ot(E.toString()),$);else if(p.addListener&&p.removeListener)p.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return C}function gt(){function p(C){return E.call(p.src,p.listener,C)}const E=ut;return p}function et(p,E,C,$,ve){if(Array.isArray(E))for(var Re=0;Re<E.length;Re++)et(p,E[Re],C,$,ve);else $=g($)?!!$.capture:!!$,C=Bt(C),p&&p[Ee]?(p=p.i,E=String(E).toString(),E in p.g&&(Re=p.g[E],C=at(Re,C,$,ve),-1<C&&(tt(Re[C]),Array.prototype.splice.call(Re,C,1),Re.length==0&&(delete p.g[E],p.h--)))):p&&(p=bt(p))&&(E=p.g[E.toString()],p=-1,E&&(p=at(E,C,$,ve)),(C=-1<p?E[p]:null)&&rt(C))}function rt(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[Ee])st(E.i,p);else{var C=p.type,$=p.proxy;E.removeEventListener?E.removeEventListener(C,$,p.capture):E.detachEvent?E.detachEvent(ot(C),$):E.addListener&&E.removeListener&&E.removeListener($),(C=bt(E))?(st(C,p),C.h==0&&(C.src=null,E[_t]=null)):tt(p)}}}function ot(p){return p in Ve?Ve[p]:Ve[p]="on"+p}function ut(p,E){if(p.da)p=!0;else{E=new ie(E,this);var C=p.listener,$=p.ha||p.src;p.fa&&rt(p),p=C.call($,E)}return p}function bt(p){return p=p[_t],p instanceof Je?p:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bt(p){return typeof p=="function"?p:(p[Ct]||(p[Ct]=function(E){return p.handleEvent(E)}),p[Ct])}function wt(){F.call(this),this.i=new Je(this),this.M=this,this.F=null}L(wt,F),wt.prototype[Ee]=!0,wt.prototype.removeEventListener=function(p,E,C,$){et(this,p,E,C,$)};function xt(p,E){var C,$=p.F;if($)for(C=[];$;$=$.F)C.push($);if(p=p.M,$=E.type||E,typeof E=="string")E=new K(E,p);else if(E instanceof K)E.target=E.target||p;else{var ve=E;E=new K($,p),Q(E,ve)}if(ve=!0,C)for(var Re=C.length-1;0<=Re;Re--){var Ze=E.g=C[Re];ve=Wt(Ze,$,!0,E)&&ve}if(Ze=E.g=p,ve=Wt(Ze,$,!0,E)&&ve,ve=Wt(Ze,$,!1,E)&&ve,C)for(Re=0;Re<C.length;Re++)Ze=E.g=C[Re],ve=Wt(Ze,$,!1,E)&&ve}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var p=this.i,E;for(E in p.g){for(var C=p.g[E],$=0;$<C.length;$++)tt(C[$]);delete p.g[E],p.h--}}this.F=null},wt.prototype.K=function(p,E,C,$){return this.i.add(String(p),E,!1,C,$)},wt.prototype.L=function(p,E,C,$){return this.i.add(String(p),E,!0,C,$)};function Wt(p,E,C,$){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();for(var ve=!0,Re=0;Re<E.length;++Re){var Ze=E[Re];if(Ze&&!Ze.da&&Ze.capture==C){var Lt=Ze.listener,an=Ze.ha||Ze.src;Ze.fa&&st(p.i,Ze),ve=Lt.call(an,$)!==!1&&ve}}return ve&&!$.defaultPrevented}function Fe(p,E,C){if(typeof p=="function")C&&(p=S(p,C));else if(p&&typeof p.handleEvent=="function")p=S(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:h.setTimeout(p,E||0)}function nt(p){p.g=Fe(()=>{p.g=null,p.i&&(p.i=!1,nt(p))},p.l);const E=p.h;p.h=null,p.m.apply(null,E)}class He extends F{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:nt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nt(p){F.call(this),this.h=p,this.g={}}L(Nt,F);var mt=[];function $t(p){ge(p.g,function(E,C){this.g.hasOwnProperty(C)&&rt(E)},p),p.g={}}Nt.prototype.N=function(){Nt.aa.N.call(this),$t(this)},Nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ut=h.JSON.stringify,yn=h.JSON.parse,Br=class{stringify(p){return h.JSON.stringify(p,void 0)}parse(p){return h.JSON.parse(p,void 0)}};function Zt(){}Zt.prototype.h=null;function Xn(p){return p.h||(p.h=p.i())}function kn(){}var ur={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xr(){K.call(this,"d")}L(Xr,K);function Bn(){K.call(this,"c")}L(Bn,K);var Tt={},cn=null;function ja(){return cn=cn||new wt}Tt.La="serverreachability";function ar(p){K.call(this,Tt.La,p)}L(ar,K);function Qr(p){const E=ja();xt(E,new ar(E))}Tt.STAT_EVENT="statevent";function Xa(p,E){K.call(this,Tt.STAT_EVENT,p),this.stat=E}L(Xa,K);function dt(p){const E=ja();xt(E,new Xa(E,p))}Tt.Ma="timingevent";function Cn(p,E){K.call(this,Tt.Ma,p),this.size=E}L(Cn,K);function Rn(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){p()},E)}function Gn(){this.g=!0}Gn.prototype.xa=function(){this.g=!1};function er(p,E,C,$,ve,Re){p.info(function(){if(p.g)if(Re)for(var Ze="",Lt=Re.split("&"),an=0;an<Lt.length;an++){var qt=Lt[an].split("=");if(1<qt.length){var An=qt[0];qt=qt[1];var In=An.split("_");Ze=2<=In.length&&In[1]=="type"?Ze+(An+"="+qt+"&"):Ze+(An+"=redacted&")}}else Ze=null;else Ze=Re;return"XMLHTTP REQ ("+$+") [attempt "+ve+"]: "+E+`
`+C+`
`+Ze})}function sr(p,E,C,$,ve,Re,Ze){p.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+ve+"]: "+E+`
`+C+`
`+Re+" "+Ze})}function br(p,E,C,$){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+xa(p,C)+($?" "+$:"")})}function xi(p,E){p.info(function(){return"TIMEOUT: "+E})}Gn.prototype.info=function(){};function xa(p,E){if(!p.g)return E;if(!E)return null;try{var C=JSON.parse(E);if(C){for(p=0;p<C.length;p++)if(Array.isArray(C[p])){var $=C[p];if(!(2>$.length)){var ve=$[1];if(Array.isArray(ve)&&!(1>ve.length)){var Re=ve[0];if(Re!="noop"&&Re!="stop"&&Re!="close")for(var Ze=1;Ze<ve.length;Ze++)ve[Ze]=""}}}}return Ut(C)}catch{return E}}var Ur={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vr;function jr(){}L(jr,Zt),jr.prototype.g=function(){return new XMLHttpRequest},jr.prototype.i=function(){return{}},vr=new jr;function Un(p,E,C,$){this.j=p,this.i=E,this.l=C,this.R=$||1,this.U=new Nt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nn}function Nn(){this.i=null,this.g="",this.h=!1}var _s={},As={};function sa(p,E,C){p.L=1,p.v=$s(Zr(E)),p.m=C,p.P=!0,ka(p,null)}function ka(p,E){p.F=Date.now(),vi(p),p.A=Zr(p.v);var C=p.A,$=p.R;Array.isArray($)||($=[String($)]),It(C.i,"t",$),p.C=0,C=p.j.J,p.h=new Nn,p.g=z(p.j,C?E:null,!p.m),0<p.O&&(p.M=new He(S(p.Y,p,p.g),p.O)),E=p.U,C=p.g,$=p.ca;var ve="readystatechange";Array.isArray(ve)||(ve&&(mt[0]=ve.toString()),ve=mt);for(var Re=0;Re<ve.length;Re++){var Ze=oe(C,ve[Re],$||E.handleEvent,!1,E.h||E);if(!Ze)break;E.g[Ze.key]=Ze}E=p.H?k(p.H):{},p.m?(p.u||(p.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,E)):(p.u="GET",p.g.ea(p.A,p.u,null,E)),Qr(),er(p.i,p.u,p.A,p.l,p.R,p.m)}Un.prototype.ca=function(p){p=p.target;const E=this.M;E&&wr(p)==3?E.j():this.Y(p)},Un.prototype.Y=function(p){try{if(p==this.g)e:{const In=wr(this.g);var E=this.g.Ba();const hs=this.g.Z();if(!(3>In)&&(In!=3||this.g&&(this.h.h||this.g.oa()||Bl(this.g)))){this.J||In!=4||E==7||(E==8||0>=hs?Qr(3):Qr(2)),Qa(this);var C=this.g.Z();this.X=C;t:if(bi(this)){var $=Bl(this.g);p="";var ve=$.length,Re=wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),Ja(this);var Ze="";break t}this.h.i=new h.TextDecoder}for(E=0;E<ve;E++)this.h.h=!0,p+=this.h.i.decode($[E],{stream:!(Re&&E==ve-1)});$.length=0,this.h.g+=p,this.C=0,Ze=this.h.g}else Ze=this.g.oa();if(this.o=C==200,sr(this.i,this.u,this.A,this.l,this.R,In,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Lt,an=this.g;if((Lt=an.g?an.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Lt)){var qt=Lt;break t}}qt=null}if(C=qt)br(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ss(this,C);else{this.o=!1,this.s=3,dt(12),kr(this),Ja(this);break e}}if(this.P){C=!0;let dr;for(;!this.J&&this.C<Ze.length;)if(dr=Go(this,Ze),dr==As){In==4&&(this.s=4,dt(14),C=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(dr==_s){this.s=4,dt(15),br(this.i,this.l,Ze,"[Invalid Chunk]"),C=!1;break}else br(this.i,this.l,dr,null),Ss(this,dr);if(bi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),In!=4||Ze.length!=0||this.h.h||(this.s=1,dt(16),C=!1),this.o=this.o&&C,!C)br(this.i,this.l,Ze,"[Invalid Chunked Response]"),kr(this),Ja(this);else if(0<Ze.length&&!this.W){this.W=!0;var An=this.j;An.g==this&&An.ba&&!An.M&&(An.j.info("Great, no buffering proxy detected. Bytes received: "+Ze.length),ti(An),An.M=!0,dt(11))}}else br(this.i,this.l,Ze,null),Ss(this,Ze);In==4&&kr(this),this.o&&!this.J&&(In==4?ni(this.j,this):(this.o=!1,vi(this)))}else Js(this.g),C==400&&0<Ze.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),kr(this),Ja(this)}}}catch{}finally{}};function bi(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Go(p,E){var C=p.C,$=E.indexOf(`
`,C);return $==-1?As:(C=Number(E.substring(C,$)),isNaN(C)?_s:($+=1,$+C>E.length?As:(E=E.slice($,$+C),p.C=$+C,E)))}Un.prototype.cancel=function(){this.J=!0,kr(this)};function vi(p){p.S=Date.now()+p.I,Dl(p,p.I)}function Dl(p,E){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Rn(S(p.ba,p),E)}function Qa(p){p.B&&(h.clearTimeout(p.B),p.B=null)}Un.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(xi(this.i,this.A),this.L!=2&&(Qr(),dt(17)),kr(this),this.s=2,Ja(this)):Dl(this,this.S-p)};function Ja(p){p.j.G==0||p.J||ni(p.j,p)}function kr(p){Qa(p);var E=p.M;E&&typeof E.ma=="function"&&E.ma(),p.M=null,$t(p.U),p.g&&(E=p.g,p.g=null,E.abort(),E.ma())}function Ss(p,E){try{var C=p.j;if(C.G!=0&&(C.g==p||Ko(C.h,p))){if(!p.K&&Ko(C.h,p)&&C.G==3){try{var $=C.Da.g.parse(E)}catch{$=null}if(Array.isArray($)&&$.length==3){var ve=$;if(ve[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<p.F)Ls(C),ro(C);else break e;Si(C),dt(18)}}else C.za=ve[1],0<C.za-C.T&&37500>ve[2]&&C.F&&C.v==0&&!C.C&&(C.C=Rn(S(C.Za,C),6e3));if(1>=Es(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else ca(C,11)}else if((p.K||C.g==p)&&Ls(C),!T(E))for(ve=C.Da.g.parse(E),E=0;E<ve.length;E++){let qt=ve[E];if(C.T=qt[0],qt=qt[1],C.G==2)if(qt[0]=="c"){C.K=qt[1],C.ia=qt[2];const An=qt[3];An!=null&&(C.la=An,C.j.info("VER="+C.la));const In=qt[4];In!=null&&(C.Aa=In,C.j.info("SVER="+C.Aa));const hs=qt[5];hs!=null&&typeof hs=="number"&&0<hs&&($=1.5*hs,C.L=$,C.j.info("backChannelRequestTimeoutMs_="+$)),$=C;const dr=p.g;if(dr){const Pa=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pa){var Re=$.h;Re.g||Pa.indexOf("spdy")==-1&&Pa.indexOf("quic")==-1&&Pa.indexOf("h2")==-1||(Re.j=Re.l,Re.g=new Set,Re.h&&(zn(Re,Re.h),Re.h=null))}if($.D){const ri=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;ri&&($.ya=ri,_n($.I,$.D,ri))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-p.F,C.j.info("Handshake RTT: "+C.R+"ms")),$=C;var Ze=p;if($.qa=w($,$.J?$.ia:null,$.W),Ze.K){zr($.h,Ze);var Lt=Ze,an=$.L;an&&(Lt.I=an),Lt.B&&(Qa(Lt),vi(Lt)),$.g=Ze}else so($);0<C.i.length&&ao(C)}else qt[0]!="stop"&&qt[0]!="close"||ca(C,7);else C.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?ca(C,7):Is(C):qt[0]!="noop"&&C.l&&C.l.ta(qt),C.v=0)}}Qr(4)}catch{}}var Ol=class{constructor(p,E){this.g=p,this.map=E}};function as(p){this.l=p||10,h.PerformanceNavigationTiming?(p=h.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zi(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Es(p){return p.h?1:p.g?p.g.size:0}function Ko(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function zn(p,E){p.g?p.g.add(E):p.h=E}function zr(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}as.prototype.cancel=function(){if(this.i=eo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function eo(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let E=p.i;for(const C of p.g.values())E=E.concat(C.D);return E}return O(p.i)}function Ml(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(f(p)){for(var E=[],C=p.length,$=0;$<C;$++)E.push(p[$]);return E}E=[],C=0;for($ in p)E[C++]=p[$];return E}function Gs(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(f(p)||typeof p=="string"){var E=[];p=p.length;for(var C=0;C<p;C++)E.push(C);return E}E=[],C=0;for(const $ in p)E[C++]=$;return E}}}function Yo(p,E){if(p.forEach&&typeof p.forEach=="function")p.forEach(E,void 0);else if(f(p)||typeof p=="string")Array.prototype.forEach.call(p,E,void 0);else for(var C=Gs(p),$=Ml(p),ve=$.length,Re=0;Re<ve;Re++)E.call(void 0,$[Re],C&&C[Re],p)}var Jr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function to(p,E){if(p){p=p.split("&");for(var C=0;C<p.length;C++){var $=p[C].indexOf("="),ve=null;if(0<=$){var Re=p[C].substring(0,$);ve=p[C].substring($+1)}else Re=p[C];E(Re,ve?decodeURIComponent(ve.replace(/\+/g," ")):"")}}}function fn(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof fn){this.h=p.h,Ks(this,p.j),this.o=p.o,this.g=p.g,Ys(this,p.s),this.l=p.l;var E=p.i,C=new is;C.i=E.i,E.g&&(C.g=new Map(E.g),C.h=E.h),ss(this,C),this.m=p.m}else p&&(E=String(p).match(Jr))?(this.h=!1,Ks(this,E[1]||"",!0),this.o=Ca(E[2]||""),this.g=Ca(E[3]||"",!0),Ys(this,E[4]),this.l=Ca(E[5]||"",!0),ss(this,E[6]||"",!0),this.m=Ca(E[7]||"")):(this.h=!1,this.i=new is(null,this.h))}fn.prototype.toString=function(){var p=[],E=this.j;E&&p.push(Ts(E,$o,!0),":");var C=this.g;return(C||E=="file")&&(p.push("//"),(E=this.o)&&p.push(Ts(E,$o,!0),"@"),p.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&p.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(Ts(C,C.charAt(0)=="/"?js:Xo,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",Ts(C,ks)),p.join("")};function Zr(p){return new fn(p)}function Ks(p,E,C){p.j=C?Ca(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function Ys(p,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);p.s=E}else p.s=null}function ss(p,E,C){E instanceof is?(p.i=E,Vl(p.i,p.h)):(C||(E=Ts(E,no)),p.i=new is(E,p.h))}function _n(p,E,C){p.i.set(E,C)}function $s(p){return _n(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Ca(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Ts(p,E,C){return typeof p=="string"?(p=encodeURI(p).replace(E,Fl),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Fl(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var $o=/[#\/\?@]/g,Xo=/[#\?:]/g,js=/[#\?]/g,no=/[#\?@]/g,ks=/#/g;function is(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function Dn(p){p.g||(p.g=new Map,p.h=0,p.i&&to(p.i,function(E,C){p.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=is.prototype,n.add=function(p,E){Dn(this),this.i=null,p=ls(this,p);var C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(E),this.h+=1,this};function Cs(p,E){Dn(p),E=ls(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function os(p,E){return Dn(p),E=ls(p,E),p.g.has(E)}n.forEach=function(p,E){Dn(this),this.g.forEach(function(C,$){C.forEach(function(ve){p.call(E,ve,$,this)},this)},this)},n.na=function(){Dn(this);const p=Array.from(this.g.values()),E=Array.from(this.g.keys()),C=[];for(let $=0;$<E.length;$++){const ve=p[$];for(let Re=0;Re<ve.length;Re++)C.push(E[$])}return C},n.V=function(p){Dn(this);let E=[];if(typeof p=="string")os(this,p)&&(E=E.concat(this.g.get(ls(this,p))));else{p=Array.from(this.g.values());for(let C=0;C<p.length;C++)E=E.concat(p[C])}return E},n.set=function(p,E){return Dn(this),this.i=null,p=ls(this,p),os(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=this.V(p),0<p.length?String(p[0]):E):E};function It(p,E,C){Cs(p,E),0<C.length&&(p.i=null,p.g.set(ls(p,E),O(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],E=Array.from(this.g.keys());for(var C=0;C<E.length;C++){var $=E[C];const Re=encodeURIComponent(String($)),Ze=this.V($);for($=0;$<Ze.length;$++){var ve=Re;Ze[$]!==""&&(ve+="="+encodeURIComponent(String(Ze[$]))),p.push(ve)}}return this.i=p.join("&")};function ls(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function Vl(p,E){E&&!p.j&&(Dn(p),p.i=null,p.g.forEach(function(C,$){var ve=$.toLowerCase();$!=ve&&(Cs(this,$),It(this,ve,C))},p)),p.j=E}function ia(p,E){const C=new Gn;if(h.Image){const $=new Image;$.onload=_(ba,C,"TestLoadImage: loaded",!0,E,$),$.onerror=_(ba,C,"TestLoadImage: error",!1,E,$),$.onabort=_(ba,C,"TestLoadImage: abort",!1,E,$),$.ontimeout=_(ba,C,"TestLoadImage: timeout",!1,E,$),h.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=p}else E(!1)}function Ra(p,E){const C=new Gn,$=new AbortController,ve=setTimeout(()=>{$.abort(),ba(C,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:$.signal}).then(Re=>{clearTimeout(ve),Re.ok?ba(C,"TestPingServer: ok",!0,E):ba(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(ve),ba(C,"TestPingServer: error",!1,E)})}function ba(p,E,C,$,ve){try{ve&&(ve.onload=null,ve.onerror=null,ve.onabort=null,ve.ontimeout=null),$(C)}catch{}}function cs(){this.g=new Br}function Ia(p,E,C){const $=C||"";try{Yo(p,function(ve,Re){let Ze=ve;g(ve)&&(Ze=Ut(ve)),E.push($+Re+"="+encodeURIComponent(Ze))})}catch(ve){throw E.push($+"type="+encodeURIComponent("_badmap")),ve}}function Xs(p){this.l=p.Ub||null,this.j=p.eb||!1}L(Xs,Zt),Xs.prototype.g=function(){return new Rs(this.l,this.j)},Xs.prototype.i=function(p){return function(){return p}}({});function Rs(p,E){wt.call(this),this.D=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Rs,wt),n=Rs.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=E,this.readyState=1,oa(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(E.body=p),(this.D||h).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,La(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,oa(this)),this.g&&(this.readyState=3,oa(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qo(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qo(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?La(this):oa(this),this.readyState==3&&Qo(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,La(this))},n.Qa=function(p){this.g&&(this.response=p,La(this))},n.ga=function(){this.g&&La(this)};function La(p){p.readyState=4,p.l=null,p.j=null,p.v=null,oa(p)}n.setRequestHeader=function(p,E){this.u.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=E.next();return p.join(`\r
`)};function oa(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function us(p){let E="";return ge(p,function(C,$){E+=$,E+=":",E+=C,E+=`\r
`}),E}function yr(p,E,C){e:{for($ in C){var $=!1;break e}$=!0}$||(C=us(C),typeof p=="string"?C!=null&&encodeURIComponent(String(C)):_n(p,E,C))}function rn(p){wt.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(rn,wt);var Qs=/^https?$/i,ds=["POST","PUT"];n=rn.prototype,n.Ha=function(p){this.J=p},n.ea=function(p,E,C,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vr.g(),this.v=this.o?Xn(this.o):Xn(vr),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(Re){Jo(this,Re);return}if(p=C||"",C=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var ve in $)C.set(ve,$[ve]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const Re of $.keys())C.set(Re,$.get(Re));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(C.keys()).find(Re=>Re.toLowerCase()=="content-type"),ve=h.FormData&&p instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ds,E,void 0))||$||ve||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Re,Ze]of C)this.g.setRequestHeader(Re,Ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{la(this),this.u=!0,this.g.send(p),this.u=!1}catch(Re){Jo(this,Re)}};function Jo(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.m=5,yi(p),Za(p)}function yi(p){p.A||(p.A=!0,xt(p,"complete"),xt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,xt(this,"complete"),xt(this,"abort"),Za(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Za(this,!0)),rn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wi(this):this.bb())},n.bb=function(){wi(this)};function wi(p){if(p.h&&typeof u<"u"&&(!p.v[1]||wr(p)!=4||p.Z()!=2)){if(p.u&&wr(p)==4)Fe(p.Ea,0,p);else if(xt(p,"readystatechange"),wr(p)==4){p.h=!1;try{const Ze=p.Z();e:switch(Ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var $;if($=Ze===0){var ve=String(p.D).match(Jr)[1]||null;!ve&&h.self&&h.self.location&&(ve=h.self.location.protocol.slice(0,-1)),$=!Qs.test(ve?ve.toLowerCase():"")}C=$}if(C)xt(p,"complete"),xt(p,"success");else{p.m=6;try{var Re=2<wr(p)?p.g.statusText:""}catch{Re=""}p.l=Re+" ["+p.Z()+"]",yi(p)}}finally{Za(p)}}}}function Za(p,E){if(p.g){la(p);const C=p.g,$=p.v[0]?()=>{}:null;p.g=null,p.v=null,E||xt(p,"ready");try{C.onreadystatechange=$}catch{}}}function la(p){p.I&&(h.clearTimeout(p.I),p.I=null)}n.isActive=function(){return!!this.g};function wr(p){return p.g?p.g.readyState:0}n.Z=function(){try{return 2<wr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),yn(E)}};function Bl(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Js(p){const E={};p=(p.g&&2<=wr(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<p.length;$++){if(T(p[$]))continue;var C=R(p[$]);const ve=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Re=E[ve]||[];E[ve]=Re,Re.push(C)}W(E,function($){return $.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ea(p,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||E}function Zs(p){this.Aa=0,this.i=[],this.j=new Gn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ea("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ea("baseRetryDelayMs",5e3,p),this.cb=ea("retryDelaySeedMs",1e4,p),this.Wa=ea("forwardChannelMaxRetries",2,p),this.wa=ea("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new as(p&&p.concurrentRequestLimit),this.Da=new cs,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Zs.prototype,n.la=8,n.G=1,n.connect=function(p,E,C,$){dt(0),this.W=p,this.H=E||{},C&&$!==void 0&&(this.H.OSID=C,this.H.OAID=$),this.F=this.X,this.I=w(this,null,this.W),ao(this)};function Is(p){if(Ni(p),p.G==3){var E=p.U++,C=Zr(p.I);if(_n(C,"SID",p.K),_n(C,"RID",E),_n(C,"TYPE","terminate"),ei(p,C),E=new Un(p,p.j,E),E.L=2,E.v=$s(Zr(C)),C=!1,h.navigator&&h.navigator.sendBeacon)try{C=h.navigator.sendBeacon(E.v.toString(),"")}catch{}!C&&h.Image&&(new Image().src=E.v,C=!0),C||(E.g=z(E.j,null),E.g.ea(E.v)),E.F=Date.now(),vi(E)}io(p)}function ro(p){p.g&&(ti(p),p.g.cancel(),p.g=null)}function Ni(p){ro(p),p.u&&(h.clearTimeout(p.u),p.u=null),Ls(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&h.clearTimeout(p.s),p.s=null)}function ao(p){if(!Zi(p.h)&&!p.s){p.s=!0;var E=p.Ga;me||J(),he||(me(),he=!0),Ce.add(E,p),p.B=0}}function Zo(p,E){return Es(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=E.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Rn(S(p.Ga,p,E),Ei(p,p.B)),p.B++,!0)}n.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ve=new Un(this,this.j,p);let Re=this.o;if(this.S&&(Re?(Re=k(Re),Q(Re,this.S)):Re=this.S),this.m!==null||this.O||(ve.H=Re,Re=null),this.P)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var $=this.i[C];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(E+=$,4096<E){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=Ai(this,ve,E),C=Zr(this.I),_n(C,"RID",p),_n(C,"CVER",22),this.D&&_n(C,"X-HTTP-Session-Id",this.D),ei(this,C),Re&&(this.O?E="headers="+encodeURIComponent(String(us(Re)))+"&"+E:this.m&&yr(C,this.m,Re)),zn(this.h,ve),this.Ua&&_n(C,"TYPE","init"),this.P?(_n(C,"$req",E),_n(C,"SID","null"),ve.T=!0,sa(ve,C,null)):sa(ve,C,E),this.G=2}}else this.G==3&&(p?_i(this,p):this.i.length==0||Zi(this.h)||_i(this))};function _i(p,E){var C;E?C=E.l:C=p.U++;const $=Zr(p.I);_n($,"SID",p.K),_n($,"RID",C),_n($,"AID",p.T),ei(p,$),p.m&&p.o&&yr($,p.m,p.o),C=new Un(p,p.j,C,p.B+1),p.m===null&&(C.H=p.o),E&&(p.i=E.D.concat(p.i)),E=Ai(p,C,1e3),C.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),zn(p.h,C),sa(C,$,E)}function ei(p,E){p.H&&ge(p.H,function(C,$){_n(E,$,C)}),p.l&&Yo({},function(C,$){_n(E,$,C)})}function Ai(p,E,C){C=Math.min(p.i.length,C);var $=p.l?S(p.l.Na,p.l,p):null;e:{var ve=p.i;let Re=-1;for(;;){const Ze=["count="+C];Re==-1?0<C?(Re=ve[0].g,Ze.push("ofs="+Re)):Re=0:Ze.push("ofs="+Re);let Lt=!0;for(let an=0;an<C;an++){let qt=ve[an].g;const An=ve[an].map;if(qt-=Re,0>qt)Re=Math.max(0,ve[an].g-100),Lt=!1;else try{Ia(An,Ze,"req"+qt+"_")}catch{$&&$(An)}}if(Lt){$=Ze.join("&");break e}}}return p=p.i.splice(0,C),E.D=p,$}function so(p){if(!p.g&&!p.u){p.Y=1;var E=p.Fa;me||J(),he||(me(),he=!0),Ce.add(E,p),p.v=0}}function Si(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Rn(S(p.Fa,p),Ei(p,p.v)),p.v++,!0)}n.Fa=function(){if(this.u=null,Ul(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Rn(S(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),ro(this),Ul(this))};function ti(p){p.A!=null&&(h.clearTimeout(p.A),p.A=null)}function Ul(p){p.g=new Un(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var E=Zr(p.qa);_n(E,"RID","rpc"),_n(E,"SID",p.K),_n(E,"AID",p.T),_n(E,"CI",p.F?"0":"1"),!p.F&&p.ja&&_n(E,"TO",p.ja),_n(E,"TYPE","xmlhttp"),ei(p,E),p.m&&p.o&&yr(E,p.m,p.o),p.L&&(p.g.I=p.L);var C=p.g;p=p.ia,C.L=1,C.v=$s(Zr(E)),C.m=null,C.P=!0,ka(C,p)}n.Za=function(){this.C!=null&&(this.C=null,ro(this),Si(this),dt(19))};function Ls(p){p.C!=null&&(h.clearTimeout(p.C),p.C=null)}function ni(p,E){var C=null;if(p.g==E){Ls(p),ti(p),p.g=null;var $=2}else if(Ko(p.h,E))C=E.D,zr(p.h,E),$=1;else return;if(p.G!=0){if(E.o)if($==1){C=E.m?E.m.length:0,E=Date.now()-E.F;var ve=p.B;$=ja(),xt($,new Cn($,C)),ao(p)}else so(p);else if(ve=E.s,ve==3||ve==0&&0<E.X||!($==1&&Zo(p,E)||$==2&&Si(p)))switch(C&&0<C.length&&(E=p.h,E.i=E.i.concat(C)),ve){case 1:ca(p,5);break;case 4:ca(p,10);break;case 3:ca(p,6);break;default:ca(p,2)}}}function Ei(p,E){let C=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(C*=2),C*E}function ca(p,E){if(p.j.info("Error code "+E),E==2){var C=S(p.fb,p),$=p.Xa;const ve=!$;$=new fn($||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ks($,"https"),$s($),ve?ia($.toString(),C):Ra($.toString(),C)}else dt(2);p.G=0,p.l&&p.l.sa(E),io(p),Ni(p)}n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function io(p){if(p.G=0,p.ka=[],p.l){const E=eo(p.h);(E.length!=0||p.i.length!=0)&&(q(p.ka,E),q(p.ka,p.i),p.h.i.length=0,O(p.i),p.i.length=0),p.l.ra()}}function w(p,E,C){var $=C instanceof fn?Zr(C):new fn(C);if($.g!="")E&&($.g=E+"."+$.g),Ys($,$.s);else{var ve=h.location;$=ve.protocol,E=E?E+"."+ve.hostname:ve.hostname,ve=+ve.port;var Re=new fn(null);$&&Ks(Re,$),E&&(Re.g=E),ve&&Ys(Re,ve),C&&(Re.l=C),$=Re}return C=p.D,E=p.ya,C&&E&&_n($,C,E),_n($,"VER",p.la),ei(p,$),$}function z(p,E,C){if(E&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Ca&&!p.pa?new rn(new Xs({eb:C})):new rn(p.pa),E.Ha(p.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function re(){}n=re.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function de(){}de.prototype.g=function(p,E){return new ye(p,E)};function ye(p,E){wt.call(this),this.g=new Zs(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(p?p["X-WebChannel-Client-Profile"]=E.va:p={"X-WebChannel-Client-Profile":E.va}),this.g.S=p,(p=E&&E.Sb)&&!T(p)&&(this.g.m=p),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!T(E)&&(this.g.D=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new lt(this)}L(ye,wt),ye.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ye.prototype.close=function(){Is(this.g)},ye.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.u&&(C={},C.__data__=Ut(p),p=C);E.i.push(new Ol(E.Ya++,p)),E.G==3&&ao(E)},ye.prototype.N=function(){this.g.l=null,delete this.j,Is(this.g),delete this.g,ye.aa.N.call(this)};function Be(p){Xr.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){e:{for(const C in E){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}L(Be,Xr);function Qe(){Bn.call(this),this.status=1}L(Qe,Bn);function lt(p){this.g=p}L(lt,re),lt.prototype.ua=function(){xt(this.g,"a")},lt.prototype.ta=function(p){xt(this.g,new Be(p))},lt.prototype.sa=function(p){xt(this.g,new Qe)},lt.prototype.ra=function(){xt(this.g,"b")},de.prototype.createWebChannel=de.prototype.g,ye.prototype.send=ye.prototype.o,ye.prototype.open=ye.prototype.m,ye.prototype.close=ye.prototype.close,K5=function(){return new de},G5=function(){return ja()},W5=Tt,Dg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ur.NO_ERROR=0,Ur.TIMEOUT=8,Ur.HTTP_ERROR=6,Fm=Ur,Tr.COMPLETE="complete",H5=Tr,kn.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Fh=kn,rn.prototype.listenOnce=rn.prototype.L,rn.prototype.getLastError=rn.prototype.Ka,rn.prototype.getLastErrorCode=rn.prototype.Ba,rn.prototype.getStatus=rn.prototype.Z,rn.prototype.getResponseJson=rn.prototype.Oa,rn.prototype.getResponseText=rn.prototype.oa,rn.prototype.send=rn.prototype.ea,rn.prototype.setWithCredentials=rn.prototype.Ha,q5=rn}).apply(typeof Nm<"u"?Nm:typeof self<"u"?self:typeof window<"u"?window:{});const o2="@firebase/firestore",l2="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ga.UNAUTHENTICATED=new Ga(null),Ga.GOOGLE_CREDENTIALS=new Ga("google-credentials-uid"),Ga.FIRST_PARTY=new Ga("first-party-uid"),Ga.MOCK_USER=new Ga("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new Nx("@firebase/firestore");function ud(){return _u.logLevel}function pt(n,...e){if(_u.logLevel<=dn.DEBUG){const t=e.map(Px);_u.debug(`Firestore (${Bd}): ${n}`,...t)}}function Rl(n,...e){if(_u.logLevel<=dn.ERROR){const t=e.map(Px);_u.error(`Firestore (${Bd}): ${n}`,...t)}}function Lc(n,...e){if(_u.logLevel<=dn.WARN){const t=e.map(Px);_u.warn(`Firestore (${Bd}): ${n}`,...t)}}function Px(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Y5(n,r,t)}function Y5(n,e,t){let r=`FIRESTORE (${Bd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Rl(r),new Error(r)}function Pn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Y5(e,i,r)}function Yt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends Pl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ga.UNAUTHENTICATED))}shutdown(){}}class jE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kE{constructor(e){this.t=e,this.currentUser=Ga.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pn(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let l=new Rc;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Rc,e.enqueueRetryable(()=>i(this.currentUser))};const u=()=>{const f=l;e.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},h=f=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Rc)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pn(typeof r.accessToken=="string",31837,{l:r}),new $5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pn(e===null||typeof e=="string",2055,{h:e}),new Ga(e)}}class CE{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ga.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class RE{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new CE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ga.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IE{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pn(this.o===void 0,3512);const r=l=>{l.error!=null&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,pt("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const i=l=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?i(l):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new c2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new c2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=LE(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<t&&(r+=e.charAt(i[l]%62))}return r}}function nn(n,e){return n<e?-1:n>e?1:0}function Og(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return nn(r,i);{const l=X5(),u=PE(l.encode(u2(n,t)),l.encode(u2(e,t)));return u!==0?u:nn(r,i)}}t+=r>65535?2:1}return nn(n.length,e.length)}function u2(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function PE(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return nn(n[t],e[t]);return nn(n.length,e.length)}function Cd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="__name__";class Io{constructor(e,t,r){t===void 0?t=0:t>e.length&&Vt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Vt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Io.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Io?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const l=Io.compareSegments(e.get(i),t.get(i));if(l!==0)return l}return nn(e.length,t.length)}static compareSegments(e,t){const r=Io.isNumericId(e),i=Io.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Io.extractNumericId(e).compare(Io.extractNumericId(t)):Og(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cc.fromString(e.substring(4,e.length-2))}}class Zn extends Io{construct(e,t,r){return new Zn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ft(Ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Zn(t)}static emptyPath(){return new Zn([])}}const DE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ea extends Io{construct(e,t,r){return new Ea(e,t,r)}static isValidIdentifier(e){return DE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ea.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===d2}static keyField(){return new Ea([d2])}static fromServerFormat(e){const t=[];let r="",i=0;const l=()=>{if(r.length===0)throw new ft(Ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new ft(Ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ft(Ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(u=!u,i++):h!=="."||u?(r+=h,i++):(l(),i++)}if(l(),u)throw new ft(Ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ea(t)}static emptyPath(){return new Ea([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.path=e}static fromPath(e){return new jt(Zn.fromString(e))}static fromName(e){return new jt(Zn.fromString(e).popFirst(5))}static empty(){return new jt(Zn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Zn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Zn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new jt(new Zn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(n,e,t){if(!t)throw new ft(Ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function OE(n,e,t,r){if(e===!0&&r===!0)throw new ft(Ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function h2(n){if(!jt.isDocumentKey(n))throw new ft(Ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function f2(n){if(jt.isDocumentKey(n))throw new ft(Ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function J5(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Vt(12329,{type:typeof n})}function Au(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ft(Ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_0(n);throw new ft(Ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(n,e){const t={typeString:n};return e&&(t.value=e),t}function gf(n,e){if(!J5(n))throw new ft(Ye.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(i&&typeof u!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new ft(Ye.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=-62135596800,p2=1e6;class nr{static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*p2);return new nr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ft(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ft(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<m2)throw new ft(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ft(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p2}_compareTo(e){return this.seconds===e.seconds?nn(this.nanoseconds,e.nanoseconds):nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gf(e,nr._jsonSchema))return new nr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-m2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nr._jsonSchemaVersion="firestore/timestamp/1.0",nr._jsonSchema={type:$r("string",nr._jsonSchemaVersion),seconds:$r("number"),nanoseconds:$r("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{static fromTimestamp(e){return new Gt(e)}static min(){return new Gt(new nr(0,0))}static max(){return new Gt(new nr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=-1;function ME(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Gt.fromTimestamp(r===1e9?new nr(t+1,0):new nr(t,r));return new Pc(i,jt.empty(),e)}function FE(n){return new Pc(n.readTime,n.key,Jh)}class Pc{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Pc(Gt.min(),jt.empty(),Jh)}static max(){return new Pc(Gt.max(),jt.empty(),Jh)}}function VE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=jt.comparator(n.documentKey,e.documentKey),t!==0?t:nn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(n){if(n.code!==Ye.FAILED_PRECONDITION||n.message!==BE)throw n;pt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xe((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Xe?t:Xe.resolve(t)}catch(t){return Xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Xe.reject(t)}static resolve(e){return new Xe((t,r)=>{t(e)})}static reject(e){return new Xe((t,r)=>{r(e)})}static waitFor(e){return new Xe((t,r)=>{let i=0,l=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++l,u&&l===i&&t()},f=>r(f))}),u=!0,l===i&&t()})}static or(e){let t=Xe.resolve(!1);for(const r of e)t=t.next(i=>i?Xe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,l)=>{r.push(t.call(this,i,l))}),this.waitFor(r)}static mapArray(e,t){return new Xe((r,i)=>{const l=e.length,u=new Array(l);let h=0;for(let f=0;f<l;f++){const g=f;t(e[g]).next(v=>{u[g]=v,++h,h===l&&r(u)},v=>i(v))}})}static doWhile(e,t){return new Xe((r,i)=>{const l=()=>{e()===!0?t().next(()=>{l()},i):r()};l()})}}function zE(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zd(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}A0.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=-1;function S0(n){return n==null}function r0(n){return n===0&&1/n==-1/0}function qE(n){return typeof n=="number"&&Number.isInteger(n)&&!r0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5="";function HE(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=g2(e)),e=WE(n.get(t),e);return g2(e)}function WE(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":t+="";break;case Z5:t+="";break;default:t+=l}}return t}function g2(n){return n+Z5+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ew(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t){this.comparator=e,this.root=t||Sa.EMPTY}insert(e,t){return new xr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sa.BLACK,null,null))}remove(e){return new xr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _m(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _m(this.root,e,this.comparator,!1)}getReverseIterator(){return new _m(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _m(this.root,e,this.comparator,!0)}}class _m{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sa{constructor(e,t,r,i,l){this.key=e,this.value=t,this.color=r??Sa.RED,this.left=i??Sa.EMPTY,this.right=l??Sa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,l){return new Sa(e??this.key,t??this.value,r??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,r),null):l===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Sa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Sa.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Vt(27949);return e+(this.isRed()?0:1)}}Sa.EMPTY=null,Sa.RED=!0,Sa.BLACK=!1;Sa.EMPTY=new class{constructor(){this.size=0}get key(){throw Vt(57766)}get value(){throw Vt(16141)}get color(){throw Vt(16727)}get left(){throw Vt(29726)}get right(){throw Vt(36894)}copy(e,t,r,i,l){return this}insert(e,t,r){return new Sa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.comparator=e,this.data=new xr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b2(this.data.getIterator())}getIteratorFrom(e){return new b2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof aa)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new aa(this.comparator);return t.data=e,t}}class b2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.fields=e,e.sort(Ea.comparator)}static empty(){return new Hs([])}unionWith(e){let t=new aa(Ea.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Hs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new tw("Invalid base64 string: "+l):l}}(e);return new Ta(t)}static fromUint8Array(e){const t=function(i){let l="";for(let u=0;u<i.length;++u)l+=String.fromCharCode(i[u]);return l}(e);return new Ta(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ta.EMPTY_BYTE_STRING=new Ta("");const GE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dc(n){if(Pn(!!n,39018),typeof n=="string"){let e=0;const t=GE.exec(n);if(Pn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Or(n.seconds),nanos:Or(n.nanos)}}function Or(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Oc(n){return typeof n=="string"?Ta.fromBase64String(n):Ta.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="server_timestamp",rw="__type__",aw="__previous_value__",sw="__local_write_time__";function Mx(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[rw])===null||t===void 0?void 0:t.stringValue)===nw}function E0(n){const e=n.mapValue.fields[aw];return Mx(e)?E0(e):e}function Zh(n){const e=Dc(n.mapValue.fields[sw].timestampValue);return new nr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,t,r,i,l,u,h,f,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=g,this.isUsingEmulator=v}}const a0="(default)";class ef{constructor(e,t){this.projectId=e,this.database=t||a0}static empty(){return new ef("","")}get isDefaultDatabase(){return this.database===a0}isEqual(e){return e instanceof ef&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="__type__",YE="__max__",Am={mapValue:{}},ow="__vector__",s0="value";function Mc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mx(n)?4:XE(n)?9007199254740991:$E(n)?10:11:Vt(28295,{value:n})}function zo(n,e){if(n===e)return!0;const t=Mc(n);if(t!==Mc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zh(n).isEqual(Zh(e));case 3:return function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const u=Dc(i.timestampValue),h=Dc(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,l){return Oc(i.bytesValue).isEqual(Oc(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,l){return Or(i.geoPointValue.latitude)===Or(l.geoPointValue.latitude)&&Or(i.geoPointValue.longitude)===Or(l.geoPointValue.longitude)}(n,e);case 2:return function(i,l){if("integerValue"in i&&"integerValue"in l)return Or(i.integerValue)===Or(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const u=Or(i.doubleValue),h=Or(l.doubleValue);return u===h?r0(u)===r0(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Cd(n.arrayValue.values||[],e.arrayValue.values||[],zo);case 10:case 11:return function(i,l){const u=i.mapValue.fields||{},h=l.mapValue.fields||{};if(x2(u)!==x2(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!zo(u[f],h[f])))return!1;return!0}(n,e);default:return Vt(52216,{left:n})}}function tf(n,e){return(n.values||[]).find(t=>zo(t,e))!==void 0}function Rd(n,e){if(n===e)return 0;const t=Mc(n),r=Mc(e);if(t!==r)return nn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return nn(n.booleanValue,e.booleanValue);case 2:return function(l,u){const h=Or(l.integerValue||l.doubleValue),f=Or(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return v2(n.timestampValue,e.timestampValue);case 4:return v2(Zh(n),Zh(e));case 5:return Og(n.stringValue,e.stringValue);case 6:return function(l,u){const h=Oc(l),f=Oc(u);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(l,u){const h=l.split("/"),f=u.split("/");for(let g=0;g<h.length&&g<f.length;g++){const v=nn(h[g],f[g]);if(v!==0)return v}return nn(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,u){const h=nn(Or(l.latitude),Or(u.latitude));return h!==0?h:nn(Or(l.longitude),Or(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return y2(n.arrayValue,e.arrayValue);case 10:return function(l,u){var h,f,g,v;const N=l.fields||{},S=u.fields||{},_=(h=N[s0])===null||h===void 0?void 0:h.arrayValue,L=(f=S[s0])===null||f===void 0?void 0:f.arrayValue,O=nn(((g=_==null?void 0:_.values)===null||g===void 0?void 0:g.length)||0,((v=L==null?void 0:L.values)===null||v===void 0?void 0:v.length)||0);return O!==0?O:y2(_,L)}(n.mapValue,e.mapValue);case 11:return function(l,u){if(l===Am.mapValue&&u===Am.mapValue)return 0;if(l===Am.mapValue)return 1;if(u===Am.mapValue)return-1;const h=l.fields||{},f=Object.keys(h),g=u.fields||{},v=Object.keys(g);f.sort(),v.sort();for(let N=0;N<f.length&&N<v.length;++N){const S=Og(f[N],v[N]);if(S!==0)return S;const _=Rd(h[f[N]],g[v[N]]);if(_!==0)return _}return nn(f.length,v.length)}(n.mapValue,e.mapValue);default:throw Vt(23264,{le:t})}}function v2(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return nn(n,e);const t=Dc(n),r=Dc(e),i=nn(t.seconds,r.seconds);return i!==0?i:nn(t.nanos,r.nanos)}function y2(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const l=Rd(t[i],r[i]);if(l)return l}return nn(t.length,r.length)}function Id(n){return Mg(n)}function Mg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Dc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Oc(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return jt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const l of t.values||[])i?i=!1:r+=",",r+=Mg(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",l=!0;for(const u of r)l?l=!1:i+=",",i+=`${u}:${Mg(t.fields[u])}`;return i+"}"}(n.mapValue):Vt(61005,{value:n})}function Vm(n){switch(Mc(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=E0(n);return e?16+Vm(e):16;case 5:return 2*n.stringValue.length;case 6:return Oc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,l)=>i+Vm(l),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Hc(r.fields,(l,u)=>{i+=l.length+Vm(u)}),i}(n.mapValue);default:throw Vt(13486,{value:n})}}function w2(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Fg(n){return!!n&&"integerValue"in n}function Fx(n){return!!n&&"arrayValue"in n}function N2(n){return!!n&&"nullValue"in n}function _2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bm(n){return!!n&&"mapValue"in n}function $E(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[iw])===null||t===void 0?void 0:t.stringValue)===ow}function qh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function XE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===YE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.value=e}static empty(){return new ws({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qh(t)}setAll(e){let t=Ea.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=qh(u):i.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,i)}delete(e){const t=this.field(e.popLast());Bm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Bm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Hc(t,(i,l)=>e[i]=l);for(const i of r)delete e[i]}clone(){return new ws(qh(this.value))}}function lw(n){const e=[];return Hc(n.fields,(t,r)=>{const i=new Ea([t]);if(Bm(r)){const l=lw(r.mapValue).fields;if(l.length===0)e.push(i);else for(const u of l)e.push(i.child(u))}else e.push(i)}),new Hs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,r,i,l,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Ka(e,0,Gt.min(),Gt.min(),Gt.min(),ws.empty(),0)}static newFoundDocument(e,t,r,i){return new Ka(e,1,t,Gt.min(),r,i,0)}static newNoDocument(e,t){return new Ka(e,2,t,Gt.min(),Gt.min(),ws.empty(),0)}static newUnknownDocument(e,t){return new Ka(e,3,t,Gt.min(),Gt.min(),ws.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ws.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ws.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ka&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ka(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,t){this.position=e,this.inclusive=t}}function A2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const l=e[i],u=n.position[i];if(l.field.isKeyField()?r=jt.comparator(jt.fromName(u.referenceValue),t.key):r=Rd(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function S2(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zo(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t="asc"){this.field=e,this.dir=t}}function QE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{}class Yr extends cw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ZE(e,t,r):t==="array-contains"?new nT(e,r):t==="in"?new rT(e,r):t==="not-in"?new aT(e,r):t==="array-contains-any"?new sT(e,r):new Yr(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new eT(e,r):new tT(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Rd(t,this.value)):t!==null&&Mc(this.value)===Mc(t)&&this.matchesComparison(Rd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xi extends cw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Xi(e,t)}matches(e){return uw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function uw(n){return n.op==="and"}function dw(n){return JE(n)&&uw(n)}function JE(n){for(const e of n.filters)if(e instanceof Xi)return!1;return!0}function Vg(n){if(n instanceof Yr)return n.field.canonicalString()+n.op.toString()+Id(n.value);if(dw(n))return n.filters.map(e=>Vg(e)).join(",");{const e=n.filters.map(t=>Vg(t)).join(",");return`${n.op}(${e})`}}function hw(n,e){return n instanceof Yr?function(r,i){return i instanceof Yr&&r.op===i.op&&r.field.isEqual(i.field)&&zo(r.value,i.value)}(n,e):n instanceof Xi?function(r,i){return i instanceof Xi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((l,u,h)=>l&&hw(u,i.filters[h]),!0):!1}(n,e):void Vt(19439)}function fw(n){return n instanceof Yr?function(t){return`${t.field.canonicalString()} ${t.op} ${Id(t.value)}`}(n):n instanceof Xi?function(t){return t.op.toString()+" {"+t.getFilters().map(fw).join(" ,")+"}"}(n):"Filter"}class ZE extends Yr{constructor(e,t,r){super(e,t,r),this.key=jt.fromName(r.referenceValue)}matches(e){const t=jt.comparator(e.key,this.key);return this.matchesComparison(t)}}class eT extends Yr{constructor(e,t){super(e,"in",t),this.keys=mw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class tT extends Yr{constructor(e,t){super(e,"not-in",t),this.keys=mw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>jt.fromName(r.referenceValue))}class nT extends Yr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fx(t)&&tf(t.arrayValue,this.value)}}class rT extends Yr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tf(this.value.arrayValue,t)}}class aT extends Yr{constructor(e,t){super(e,"not-in",t)}matches(e){if(tf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tf(this.value.arrayValue,t)}}class sT extends Yr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fx(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,t=null,r=[],i=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=u,this.endAt=h,this.Pe=null}}function E2(n,e=null,t=[],r=[],i=null,l=null,u=null){return new iT(n,e,t,r,i,l,u)}function Vx(n){const e=Yt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Vg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),S0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Id(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Id(r)).join(",")),e.Pe=t}return e.Pe}function Bx(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!QE(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!S2(n.startAt,e.startAt)&&S2(n.endAt,e.endAt)}function Bg(n){return jt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t=null,r=[],i=[],l=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function oT(n,e,t,r,i,l,u,h){return new qd(n,e,t,r,i,l,u,h)}function pw(n){return new qd(n)}function T2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gw(n){return n.collectionGroup!==null}function Hh(n){const e=Yt(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new aa(Ea.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new nf(l,r))}),t.has(Ea.keyField().canonicalString())||e.Te.push(new nf(Ea.keyField(),r))}return e.Te}function Oo(n){const e=Yt(n);return e.Ie||(e.Ie=lT(e,Hh(n))),e.Ie}function lT(n,e){if(n.limitType==="F")return E2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const l=i.dir==="desc"?"asc":"desc";return new nf(i.field,l)});const t=n.endAt?new i0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new i0(n.startAt.position,n.startAt.inclusive):null;return E2(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ug(n,e){const t=n.filters.concat([e]);return new qd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zg(n,e,t){return new qd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function T0(n,e){return Bx(Oo(n),Oo(e))&&n.limitType===e.limitType}function xw(n){return`${Vx(Oo(n))}|lt:${n.limitType}`}function dd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>fw(i)).join(", ")}]`),S0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Id(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Id(i)).join(",")),`Target(${r})`}(Oo(n))}; limitType=${n.limitType})`}function j0(n,e){return e.isFoundDocument()&&function(r,i){const l=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):jt.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(n,e)&&function(r,i){for(const l of Hh(r))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const l of r.filters)if(!l.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(u,h,f){const g=A2(u,h,f);return u.inclusive?g<=0:g<0}(r.startAt,Hh(r),i)||r.endAt&&!function(u,h,f){const g=A2(u,h,f);return u.inclusive?g>=0:g>0}(r.endAt,Hh(r),i))}(n,e)}function cT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bw(n){return(e,t)=>{let r=!1;for(const i of Hh(n)){const l=uT(i,e,t);if(l!==0)return l;r=r||i.field.isKeyField()}return 0}}function uT(n,e,t){const r=n.field.isKeyField()?jt.comparator(e.key,t.key):function(l,u,h){const f=u.data.field(l),g=h.data.field(l);return f!==null&&g!==null?Rd(f,g):Vt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Vt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,l]of r)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hc(this.inner,(t,r)=>{for(const[i,l]of r)e(i,l)})}isEmpty(){return ew(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=new xr(jt.comparator);function Il(){return dT}const vw=new xr(jt.comparator);function Vh(...n){let e=vw;for(const t of n)e=e.insert(t.key,t);return e}function yw(n){let e=vw;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xu(){return Wh()}function ww(){return Wh()}function Wh(){return new ju(n=>n.toString(),(n,e)=>n.isEqual(e))}const hT=new xr(jt.comparator),fT=new aa(jt.comparator);function hn(...n){let e=fT;for(const t of n)e=e.add(t);return e}const mT=new aa(nn);function pT(){return mT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:r0(e)?"-0":e}}function Nw(n){return{integerValue:""+n}}function gT(n,e){return qE(e)?Nw(e):Ux(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this._=void 0}}function xT(n,e,t){return n instanceof o0?function(i,l){const u={fields:{[rw]:{stringValue:nw},[sw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&Mx(l)&&(l=E0(l)),l&&(u.fields[aw]=l),{mapValue:u}}(t,e):n instanceof rf?Aw(n,e):n instanceof af?Sw(n,e):function(i,l){const u=_w(i,l),h=j2(u)+j2(i.Ee);return Fg(u)&&Fg(i.Ee)?Nw(h):Ux(i.serializer,h)}(n,e)}function bT(n,e,t){return n instanceof rf?Aw(n,e):n instanceof af?Sw(n,e):t}function _w(n,e){return n instanceof l0?function(r){return Fg(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class o0 extends k0{}class rf extends k0{constructor(e){super(),this.elements=e}}function Aw(n,e){const t=Ew(e);for(const r of n.elements)t.some(i=>zo(i,r))||t.push(r);return{arrayValue:{values:t}}}class af extends k0{constructor(e){super(),this.elements=e}}function Sw(n,e){let t=Ew(e);for(const r of n.elements)t=t.filter(i=>!zo(i,r));return{arrayValue:{values:t}}}class l0 extends k0{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function j2(n){return Or(n.integerValue||n.doubleValue)}function Ew(n){return Fx(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function vT(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof rf&&i instanceof rf||r instanceof af&&i instanceof af?Cd(r.elements,i.elements,zo):r instanceof l0&&i instanceof l0?zo(r.Ee,i.Ee):r instanceof o0&&i instanceof o0}(n.transform,e.transform)}class yT{constructor(e,t){this.version=e,this.transformResults=t}}class Yi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yi}static exists(e){return new Yi(void 0,e)}static updateTime(e){return new Yi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Um(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class C0{}function Tw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zx(n.key,Yi.none()):new xf(n.key,n.data,Yi.none());{const t=n.data,r=ws.empty();let i=new aa(Ea.comparator);for(let l of e.fields)if(!i.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),i=i.add(l)}return new Wc(n.key,r,new Hs(i.toArray()),Yi.none())}}function wT(n,e,t){n instanceof xf?function(i,l,u){const h=i.value.clone(),f=C2(i.fieldTransforms,l,u.transformResults);h.setAll(f),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Wc?function(i,l,u){if(!Um(i.precondition,l))return void l.convertToUnknownDocument(u.version);const h=C2(i.fieldTransforms,l,u.transformResults),f=l.data;f.setAll(jw(i)),f.setAll(h),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(i,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Gh(n,e,t,r){return n instanceof xf?function(l,u,h,f){if(!Um(l.precondition,u))return h;const g=l.value.clone(),v=R2(l.fieldTransforms,f,u);return g.setAll(v),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Wc?function(l,u,h,f){if(!Um(l.precondition,u))return h;const g=R2(l.fieldTransforms,f,u),v=u.data;return v.setAll(jw(l)),v.setAll(g),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(N=>N.field))}(n,e,t,r):function(l,u,h){return Um(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function NT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),l=_w(r.transform,i||null);l!=null&&(t===null&&(t=ws.empty()),t.set(r.field,l))}return t||null}function k2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Cd(r,i,(l,u)=>vT(l,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class xf extends C0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wc extends C0{constructor(e,t,r,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function jw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function C2(n,e,t){const r=new Map;Pn(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){const l=n[i],u=l.transform,h=e.data.field(l.field);r.set(l.field,bT(u,h,t[i]))}return r}function R2(n,e,t){const r=new Map;for(const i of n){const l=i.transform,u=t.data.field(i.field);r.set(i.field,xT(l,u,e))}return r}class zx extends C0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _T extends C0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&wT(l,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Gh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Gh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ww();return this.mutations.forEach(i=>{const l=e.get(i.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(i.key)?null:h;const f=Tw(u,h);f!==null&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(Gt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),hn())}isEqual(e){return this.batchId===e.batchId&&Cd(this.mutations,e.mutations,(t,r)=>k2(t,r))&&Cd(this.baseMutations,e.baseMutations,(t,r)=>k2(t,r))}}class qx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pn(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return hT}();const l=e.mutations;for(let u=0;u<l.length;u++)i=i.insert(l[u].key,r[u].version);return new qx(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kr,bn;function TT(n){switch(n){case Ye.OK:return Vt(64938);case Ye.CANCELLED:case Ye.UNKNOWN:case Ye.DEADLINE_EXCEEDED:case Ye.RESOURCE_EXHAUSTED:case Ye.INTERNAL:case Ye.UNAVAILABLE:case Ye.UNAUTHENTICATED:return!1;case Ye.INVALID_ARGUMENT:case Ye.NOT_FOUND:case Ye.ALREADY_EXISTS:case Ye.PERMISSION_DENIED:case Ye.FAILED_PRECONDITION:case Ye.ABORTED:case Ye.OUT_OF_RANGE:case Ye.UNIMPLEMENTED:case Ye.DATA_LOSS:return!0;default:return Vt(15467,{code:n})}}function kw(n){if(n===void 0)return Rl("GRPC error has no .code"),Ye.UNKNOWN;switch(n){case Kr.OK:return Ye.OK;case Kr.CANCELLED:return Ye.CANCELLED;case Kr.UNKNOWN:return Ye.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return Ye.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return Ye.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return Ye.INTERNAL;case Kr.UNAVAILABLE:return Ye.UNAVAILABLE;case Kr.UNAUTHENTICATED:return Ye.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return Ye.INVALID_ARGUMENT;case Kr.NOT_FOUND:return Ye.NOT_FOUND;case Kr.ALREADY_EXISTS:return Ye.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return Ye.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return Ye.FAILED_PRECONDITION;case Kr.ABORTED:return Ye.ABORTED;case Kr.OUT_OF_RANGE:return Ye.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return Ye.UNIMPLEMENTED;case Kr.DATA_LOSS:return Ye.DATA_LOSS;default:return Vt(39323,{code:n})}}(bn=Kr||(Kr={}))[bn.OK=0]="OK",bn[bn.CANCELLED=1]="CANCELLED",bn[bn.UNKNOWN=2]="UNKNOWN",bn[bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bn[bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bn[bn.NOT_FOUND=5]="NOT_FOUND",bn[bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",bn[bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",bn[bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",bn[bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bn[bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bn[bn.ABORTED=10]="ABORTED",bn[bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",bn[bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",bn[bn.INTERNAL=13]="INTERNAL",bn[bn.UNAVAILABLE=14]="UNAVAILABLE",bn[bn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=new Cc([4294967295,4294967295],0);function I2(n){const e=X5().encode(n),t=new z5;return t.update(e),new Uint8Array(t.digest())}function L2(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Cc([t,r],0),new Cc([i,l],0)]}class Hx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bh(`Invalid padding: ${t}`);if(r<0)throw new Bh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bh(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Cc.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Cc.fromNumber(r)));return i.compare(jT)===1&&(i=new Cc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=I2(e),[r,i]=L2(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(r,i,l);if(!this.ye(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Hx(l,i,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.fe===0)return;const t=I2(e),[r,i]=L2(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(r,i,l);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Bh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t,r,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,bf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new R0(Gt.min(),i,new xr(nn),Il(),hn())}}class bf{constructor(e,t,r,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new bf(r,t,hn(),hn(),hn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}}class Cw{constructor(e,t){this.targetId=e,this.De=t}}class Rw{constructor(e,t,r=Ta.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class P2{constructor(){this.ve=0,this.Ce=D2(),this.Fe=Ta.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=hn(),t=hn(),r=hn();return this.Ce.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Vt(38017,{changeType:l})}}),new bf(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=D2()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Pn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class kT{constructor(e){this.We=e,this.Ge=new Map,this.ze=Il(),this.je=Sm(),this.Je=Sm(),this.He=new xr(nn)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Vt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){const t=e.targetId,r=e.De.count,i=this.st(t);if(i){const l=i.target;if(Bg(l))if(r===0){const u=new jt(l.path);this.Xe(t,u,Ka.newNoDocument(u,Gt.min()))}else Pn(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const h=this._t(e),f=h?this.ut(h,e,u):1;if(f!==0){this.rt(t);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:l=0}=t;let u,h;try{u=Oc(r).toUint8Array()}catch(f){if(f instanceof tw)return Lc("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Hx(u,i,l)}catch(f){return Lc(f instanceof Bh?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.fe===0?null:h}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let i=0;return r.forEach(l=>{const u=this.We.lt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.Xe(t,l,null),i++)}),i}Pt(e){const t=new Map;this.Ge.forEach((l,u)=>{const h=this.st(u);if(h){if(l.current&&Bg(h.target)){const f=new jt(h.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,Ka.newNoDocument(f,e))}l.Ne&&(t.set(u,l.Le()),l.ke())}});let r=hn();this.Je.forEach((l,u)=>{let h=!0;u.forEachWhile(f=>{const g=this.st(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(l))}),this.ze.forEach((l,u)=>u.setReadTime(e));const i=new R0(e,t,this.He,this.ze,r);return this.ze=Il(),this.je=Sm(),this.Je=Sm(),this.He=new xr(nn),i}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new P2,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new aa(nn),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new aa(nn),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||pt("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new P2),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Sm(){return new xr(jt.comparator)}function D2(){return new xr(jt.comparator)}const CT={asc:"ASCENDING",desc:"DESCENDING"},RT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IT={and:"AND",or:"OR"};class LT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qg(n,e){return n.useProto3Json||S0(e)?e:{value:e}}function c0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Iw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function PT(n,e){return c0(n,e.toTimestamp())}function Mo(n){return Pn(!!n,49232),Gt.fromTimestamp(function(t){const r=Dc(t);return new nr(r.seconds,r.nanos)}(n))}function Wx(n,e){return Hg(n,e).canonicalString()}function Hg(n,e){const t=function(i){return new Zn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Lw(n){const e=Zn.fromString(n);return Pn(Fw(e),10190,{key:e.toString()}),e}function Wg(n,e){return Wx(n.databaseId,e.path)}function dg(n,e){const t=Lw(e);if(t.get(1)!==n.databaseId.projectId)throw new ft(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ft(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new jt(Dw(t))}function Pw(n,e){return Wx(n.databaseId,e)}function DT(n){const e=Lw(n);return e.length===4?Zn.emptyPath():Dw(e)}function Gg(n){return new Zn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Dw(n){return Pn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function O2(n,e,t){return{name:Wg(n,e),fields:t.value.mapValue.fields}}function OT(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Vt(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=function(g,v){return g.useProto3Json?(Pn(v===void 0||typeof v=="string",58123),Ta.fromBase64String(v||"")):(Pn(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Ta.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(g){const v=g.code===void 0?Ye.UNKNOWN:kw(g.code);return new ft(v,g.message||"")}(u);t=new Rw(r,i,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=dg(n,r.document.name),l=Mo(r.document.updateTime),u=r.document.createTime?Mo(r.document.createTime):Gt.min(),h=new ws({mapValue:{fields:r.document.fields}}),f=Ka.newFoundDocument(i,l,u,h),g=r.targetIds||[],v=r.removedTargetIds||[];t=new zm(g,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=dg(n,r.document),l=r.readTime?Mo(r.readTime):Gt.min(),u=Ka.newNoDocument(i,l),h=r.removedTargetIds||[];t=new zm([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=dg(n,r.document),l=r.removedTargetIds||[];t=new zm([],l,i,null)}else{if(!("filter"in e))return Vt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:l}=r,u=new ET(i,l),h=r.targetId;t=new Cw(h,u)}}return t}function MT(n,e){let t;if(e instanceof xf)t={update:O2(n,e.key,e.value)};else if(e instanceof zx)t={delete:Wg(n,e.key)};else if(e instanceof Wc)t={update:O2(n,e.key,e.data),updateMask:GT(e.fieldMask)};else{if(!(e instanceof _T))return Vt(16599,{Rt:e.type});t={verify:Wg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,u){const h=u.transform;if(h instanceof o0)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof rf)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof af)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof l0)return{fieldPath:u.field.canonicalString(),increment:h.Ee};throw Vt(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,l){return l.updateTime!==void 0?{updateTime:PT(i,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Vt(27497)}(n,e.precondition)),t}function FT(n,e){return n&&n.length>0?(Pn(e!==void 0,14353),n.map(t=>function(i,l){let u=i.updateTime?Mo(i.updateTime):Mo(l);return u.isEqual(Gt.min())&&(u=Mo(l)),new yT(u,i.transformResults||[])}(t,e))):[]}function VT(n,e){return{documents:[Pw(n,e.path)]}}function BT(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Pw(n,i);const l=function(g){if(g.length!==0)return Mw(Xi.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(g){if(g.length!==0)return g.map(v=>function(S){return{field:hd(S.field),direction:qT(S.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=qg(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{Vt:t,parent:i}}function UT(n){let e=DT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pn(r===1,65062);const v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(N){const S=Ow(N);return S instanceof Xi&&dw(S)?S.getFilters():[S]}(t.where));let u=[];t.orderBy&&(u=function(N){return N.map(S=>function(L){return new nf(fd(L.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(S))}(t.orderBy));let h=null;t.limit&&(h=function(N){let S;return S=typeof N=="object"?N.value:N,S0(S)?null:S}(t.limit));let f=null;t.startAt&&(f=function(N){const S=!!N.before,_=N.values||[];return new i0(_,S)}(t.startAt));let g=null;return t.endAt&&(g=function(N){const S=!N.before,_=N.values||[];return new i0(_,S)}(t.endAt)),oT(e,i,u,l,h,"F",f,g)}function zT(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ow(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=fd(t.unaryFilter.field);return Yr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fd(t.unaryFilter.field);return Yr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fd(t.unaryFilter.field);return Yr.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fd(t.unaryFilter.field);return Yr.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Vt(61313);default:return Vt(60726)}}(n):n.fieldFilter!==void 0?function(t){return Yr.create(fd(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Vt(58110);default:return Vt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Xi.create(t.compositeFilter.filters.map(r=>Ow(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Vt(1026)}}(t.compositeFilter.op))}(n):Vt(30097,{filter:n})}function qT(n){return CT[n]}function HT(n){return RT[n]}function WT(n){return IT[n]}function hd(n){return{fieldPath:n.canonicalString()}}function fd(n){return Ea.fromServerFormat(n.fieldPath)}function Mw(n){return n instanceof Yr?function(t){if(t.op==="=="){if(_2(t.value))return{unaryFilter:{field:hd(t.field),op:"IS_NAN"}};if(N2(t.value))return{unaryFilter:{field:hd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_2(t.value))return{unaryFilter:{field:hd(t.field),op:"IS_NOT_NAN"}};if(N2(t.value))return{unaryFilter:{field:hd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hd(t.field),op:HT(t.op),value:t.value}}}(n):n instanceof Xi?function(t){const r=t.getFilters().map(i=>Mw(i));return r.length===1?r[0]:{compositeFilter:{op:WT(t.op),filters:r}}}(n):Vt(54877,{filter:n})}function GT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Fw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t,r,i,l=Gt.min(),u=Gt.min(),h=Ta.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Sc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e){this.gt=e}}function YT(n){const e=UT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(){this.Dn=new XT}addToCollectionParentIndex(e,t){return this.Dn.add(t),Xe.resolve()}getCollectionParents(e,t){return Xe.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Xe.resolve()}deleteFieldIndex(e,t){return Xe.resolve()}deleteAllFieldIndexes(e){return Xe.resolve()}createTargetIndexes(e,t){return Xe.resolve()}getDocumentsMatchingTarget(e,t){return Xe.resolve(null)}getIndexType(e,t){return Xe.resolve(0)}getFieldIndexes(e,t){return Xe.resolve([])}getNextCollectionGroupToUpdate(e){return Xe.resolve(null)}getMinOffset(e,t){return Xe.resolve(Pc.min())}getMinOffsetFromCollectionGroup(e,t){return Xe.resolve(Pc.min())}updateCollectionGroup(e,t,r){return Xe.resolve()}updateIndexEntries(e,t){return Xe.resolve()}}class XT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new aa(Zn.comparator),l=!i.has(r);return this.index[t]=i.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new aa(Zn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vw=41943040;class ys{static withCacheSize(e){return new ys(e,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys.DEFAULT_COLLECTION_PERCENTILE=10,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ys.DEFAULT=new ys(Vw,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ys.DISABLED=new ys(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ld(0)}static ur(){return new Ld(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="LruGarbageCollector",QT=1048576;function V2([n,e],[t,r]){const i=nn(n,t);return i===0?nn(e,r):i}class JT{constructor(e){this.Tr=e,this.buffer=new aa(V2),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();V2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){pt(F2,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zd(t)?pt(F2,"Ignoring IndexedDB error during garbage collection: ",t):await Ud(t)}await this.Rr(3e5)})}}class ej{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Xe.resolve(A0.ue);const r=new JT(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),Xe.resolve(M2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),M2):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,l,u,h,f,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),i=this.params.maximumSequenceNumbersToCollect):i=N,u=Date.now(),this.nthSequenceNumber(e,i))).next(N=>(r=N,h=Date.now(),this.removeTargets(e,r,t))).next(N=>(l=N,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(g=Date.now(),ud()<=dn.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${i} in `+(h-u)+`ms
	Removed ${l} targets in `+(f-h)+`ms
	Removed ${N} documents in `+(g-f)+`ms
Total Duration: ${g-v}ms`),Xe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:N})))}}function tj(n,e){return new ej(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this.changes=new ju(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ka.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Xe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Gh(r.mutation,i,Hs.empty(),nr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,hn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=hn()){const i=xu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(l=>{let u=Vh();return l.forEach((h,f)=>{u=u.insert(h,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=xu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,hn()))}populateOverlays(e,t,r){const i=[];return r.forEach(l=>{t.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(e,i).next(l=>{l.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,i){let l=Il();const u=Wh(),h=function(){return Wh()}();return t.forEach((f,g)=>{const v=r.get(g.key);i.has(g.key)&&(v===void 0||v.mutation instanceof Wc)?l=l.insert(g.key,g):v!==void 0?(u.set(g.key,v.mutation.getFieldMask()),Gh(v.mutation,g,v.mutation.getFieldMask(),nr.now())):u.set(g.key,Hs.empty())}),this.recalculateAndSaveOverlays(e,l).next(f=>(f.forEach((g,v)=>u.set(g,v)),t.forEach((g,v)=>{var N;return h.set(g,new rj(v,(N=u.get(g))!==null&&N!==void 0?N:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Wh();let i=new xr((u,h)=>u-h),l=hn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(f=>{const g=t.get(f);if(g===null)return;let v=r.get(f)||Hs.empty();v=h.applyToLocalView(g,v),r.set(f,v);const N=(i.get(h.batchId)||hn()).add(f);i=i.insert(h.batchId,N)})}).next(()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),g=f.key,v=f.value,N=ww();v.forEach(S=>{if(!l.has(S)){const _=Tw(t.get(S),r.get(S));_!==null&&N.set(S,_),l=l.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,g,N))}return Xe.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(u){return jt.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(l=>{const u=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-l.size):Xe.resolve(xu());let h=Jh,f=l;return u.next(g=>Xe.forEach(g,(v,N)=>(h<N.largestBatchId&&(h=N.largestBatchId),l.get(v)?Xe.resolve():this.remoteDocumentCache.getEntry(e,v).next(S=>{f=f.insert(v,S)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,f,g,hn())).next(v=>({batchId:h,changes:yw(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new jt(t)).next(r=>{let i=Vh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const l=t.collectionGroup;let u=Vh();return this.indexManager.getCollectionParents(e,l).next(h=>Xe.forEach(h,f=>{const g=function(N,S){return new qd(S,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)}(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,i).next(v=>{v.forEach((N,S)=>{u=u.insert(N,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,i){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,i))).next(u=>{l.forEach((f,g)=>{const v=g.getKey();u.get(v)===null&&(u=u.insert(v,Ka.newInvalidDocument(v)))});let h=Vh();return u.forEach((f,g)=>{const v=l.get(f);v!==void 0&&Gh(v.mutation,g,Hs.empty(),nr.now()),j0(t,g)&&(h=h.insert(f,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Xe.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Mo(i.createTime)}}(t)),Xe.resolve()}getNamedQuery(e,t){return Xe.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:YT(i.bundledQuery),readTime:Mo(i.readTime)}}(t)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.overlays=new xr(jt.comparator),this.kr=new Map}getOverlay(e,t){return Xe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=xu();return Xe.forEach(t,i=>this.getOverlay(e,i).next(l=>{l!==null&&r.set(i,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,l)=>{this.wt(e,t,l)}),Xe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(r)),Xe.resolve()}getOverlaysForCollection(e,t,r){const i=xu(),l=t.length+1,u=new jt(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,g=f.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&f.largestBatchId>r&&i.set(f.getKey(),f)}return Xe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let l=new xr((g,v)=>g-v);const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let v=l.get(g.largestBatchId);v===null&&(v=xu(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const h=xu(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,v)=>h.set(g,v)),!(h.size()>=i)););return Xe.resolve(h)}wt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new ST(t,r));let l=this.kr.get(t);l===void 0&&(l=hn(),this.kr.set(t,l)),this.kr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this.sessionToken=Ta.EMPTY_BYTE_STRING}getSessionToken(e){return Xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.qr=new aa(ma.Qr),this.$r=new aa(ma.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new ma(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new ma(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new jt(new Zn([])),r=new ma(t,e),i=new ma(t,e+1),l=[];return this.$r.forEachInRange([r,i],u=>{this.Wr(u),l.push(u.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new jt(new Zn([])),r=new ma(t,e),i=new ma(t,e+1);let l=hn();return this.$r.forEachInRange([r,i],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new ma(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ma{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return jt.comparator(e.key,t.key)||nn(e.Hr,t.Hr)}static Ur(e,t){return nn(e.Hr,t.Hr)||jt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new aa(ma.Qr)}checkEmpty(e){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new AT(l,t,r,i);this.mutationQueue.push(u);for(const h of i)this.Yr=this.Yr.add(new ma(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Xe.resolve(u)}lookupMutationBatch(e,t){return Xe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),l=i<0?0:i;return Xe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?Ox:this.er-1)}getAllMutationBatches(e){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ma(t,0),i=new ma(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,i],u=>{const h=this.Zr(u.Hr);l.push(h)}),Xe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new aa(nn);return t.forEach(i=>{const l=new ma(i,0),u=new ma(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,u],h=>{r=r.add(h.Hr)})}),Xe.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let l=r;jt.isDocumentKey(l)||(l=l.child(""));const u=new ma(new jt(l),0);let h=new aa(nn);return this.Yr.forEachWhile(f=>{const g=f.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(h=h.add(f.Hr)),!0)},u),Xe.resolve(this.ei(h))}ei(e){const t=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Pn(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Xe.forEach(t.mutations,i=>{const l=new ma(i.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new ma(t,0),i=this.Yr.firstAfterOrEqual(r);return Xe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xe.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.ni=e,this.docs=function(){return new xr(jt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),l=i?i.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Xe.resolve(r?r.document.mutableCopy():Ka.newInvalidDocument(t))}getEntries(e,t){let r=Il();return t.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():Ka.newInvalidDocument(i))}),Xe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let l=Il();const u=t.path,h=new jt(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:g,value:{document:v}}=f.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||VE(FE(v),r)<=0||(i.has(v.key)||j0(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return Xe.resolve(l)}getAllFromCollectionGroup(e,t,r,i){Vt(9500)}ri(e,t){return Xe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uj(this)}getSize(e){return Xe.resolve(this.size)}}class uj extends nj{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Xe.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.persistence=e,this.ii=new ju(t=>Vx(t),Bx),this.lastRemoteSnapshotVersion=Gt.min(),this.highestTargetId=0,this.si=0,this.oi=new Gx,this.targetCount=0,this._i=Ld.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),Xe.resolve()}getLastRemoteSnapshotVersion(e){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),Xe.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ld(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Xe.resolve()}updateTargetData(e,t){return this.hr(t),Xe.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(e,t,r){let i=0;const l=[];return this.ii.forEach((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.ii.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),Xe.waitFor(l).next(()=>i)}getTargetCount(e){return Xe.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return Xe.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),Xe.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach(u=>{l.push(i.markPotentiallyOrphaned(e,u))}),Xe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Xe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return Xe.resolve(r)}containsKey(e,t){return Xe.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,t){this.ai={},this.overlays={},this.ui=new A0(0),this.ci=!1,this.ci=!0,this.li=new oj,this.referenceDelegate=e(this),this.hi=new dj(this),this.indexManager=new $T,this.remoteDocumentCache=function(i){return new cj(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new KT(t),this.Ti=new sj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ij,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new lj(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){pt("MemoryPersistence","Starting transaction:",e);const i=new hj(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(l=>this.referenceDelegate.di(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Ei(e,t){return Xe.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class hj extends UE{constructor(e){super(),this.currentSequenceNumber=e}}class Kx{constructor(e){this.persistence=e,this.Ai=new Gx,this.Ri=null}static Vi(e){return new Kx(e)}get mi(){if(this.Ri)return this.Ri;throw Vt(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),Xe.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),Xe.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Xe.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(l=>this.mi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.mi,r=>{const i=jt.fromPath(r);return this.fi(e,i).next(l=>{l||t.removeEntry(i,Gt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Xe.or([()=>Xe.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class u0{constructor(e,t){this.persistence=e,this.gi=new ju(r=>HE(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=tj(this,t)}static Vi(e,t){return new u0(e,t)}Ii(){}di(e){return Xe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return Xe.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(l=>l?Xe.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),l=i.newChangeBuffer();return i.ri(e,u=>this.Sr(e,u,t).next(h=>{h||(r++,l.removeEntry(u,Gt.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Xe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Xe.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Xe.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Xe.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vm(e.data.value)),t}Sr(e,t,r){return Xe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.gi.get(t);return Xe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=hn(),i=hn();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new Yx(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return G_()?8:zE($a())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){const l={result:null};return this.ps(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ys(e,t,i,r).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new fj;return this.ws(e,t,u).next(h=>{if(l.result=h,this.Rs)return this.Ss(e,t,u,h.size)})}).next(()=>l.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(ud()<=dn.DEBUG&&pt("QueryEngine","SDK will not create cache indexes for query:",dd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Xe.resolve()):(ud()<=dn.DEBUG&&pt("QueryEngine","Query:",dd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ud()<=dn.DEBUG&&pt("QueryEngine","The SDK decides to create cache indexes for query:",dd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oo(t))):Xe.resolve())}ps(e,t){if(T2(t))return Xe.resolve(null);let r=Oo(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=zg(t,null,"F"),r=Oo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const u=hn(...l);return this.gs.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const g=this.bs(t,h);return this.Ds(t,g,u,f.readTime)?this.ps(e,zg(t,null,"F")):this.vs(e,g,t,f)}))})))}ys(e,t,r,i){return T2(t)||i.isEqual(Gt.min())?Xe.resolve(null):this.gs.getDocuments(e,r).next(l=>{const u=this.bs(t,l);return this.Ds(t,u,r,i)?Xe.resolve(null):(ud()<=dn.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dd(t)),this.vs(e,u,t,ME(i,Jh)).next(h=>h))})}bs(e,t){let r=new aa(bw(e));return t.forEach((i,l)=>{j0(e,l)&&(r=r.add(l))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}ws(e,t,r){return ud()<=dn.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",dd(t)),this.gs.getDocumentsMatchingQuery(e,t,Pc.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="LocalStore",pj=3e8;class gj{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new xr(nn),this.Ms=new ju(l=>Vx(l),Bx),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aj(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function xj(n,e,t,r){return new gj(n,e,t,r)}async function Uw(n,e){const t=Yt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(l=>(i=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const u=[],h=[];let f=hn();for(const g of i){u.push(g.batchId);for(const v of g.mutations)f=f.add(v.key)}for(const g of l){h.push(g.batchId);for(const v of g.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next(g=>({Bs:g,removedBatchIds:u,addedBatchIds:h}))})})}function bj(n,e){const t=Yt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(h,f,g,v){const N=g.batch,S=N.keys();let _=Xe.resolve();return S.forEach(L=>{_=_.next(()=>v.getEntry(f,L)).next(O=>{const q=g.docVersions.get(L);Pn(q!==null,48541),O.version.compareTo(q)<0&&(N.applyToRemoteDocument(O,g),O.isValidDocument()&&(O.setReadTime(g.commitVersion),v.addEntry(O)))})}),_.next(()=>h.mutationQueue.removeMutationBatch(f,N))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=hn();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(f=f.add(h.batch.mutations[g].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function zw(n){const e=Yt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function vj(n,e){const t=Yt(n),r=e.snapshotVersion;let i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;const h=[];e.targetChanges.forEach((v,N)=>{const S=i.get(N);if(!S)return;h.push(t.hi.removeMatchingKeys(l,v.removedDocuments,N).next(()=>t.hi.addMatchingKeys(l,v.addedDocuments,N)));let _=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(N)!==null?_=_.withResumeToken(Ta.EMPTY_BYTE_STRING,Gt.min()).withLastLimboFreeSnapshotVersion(Gt.min()):v.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(v.resumeToken,r)),i=i.insert(N,_),function(O,q,M){return O.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=pj?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(S,_,v)&&h.push(t.hi.updateTargetData(l,_))});let f=Il(),g=hn();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),h.push(yj(l,u,e.documentUpdates).next(v=>{f=v.Ls,g=v.ks})),!r.isEqual(Gt.min())){const v=t.hi.getLastRemoteSnapshotVersion(l).next(N=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,r));h.push(v)}return Xe.waitFor(h).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,f,g)).next(()=>f)}).then(l=>(t.Fs=i,l))}function yj(n,e,t){let r=hn(),i=hn();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let u=Il();return t.forEach((h,f)=>{const g=l.get(h);f.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(Gt.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):pt($x,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",f.version)}),{Ls:u,ks:i}})}function wj(n,e){const t=Yt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ox),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Nj(n,e){const t=Yt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(l=>l?(i=l,Xe.resolve(i)):t.hi.allocateTargetId(r).next(u=>(i=new Sc(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Kg(n,e,t){const r=Yt(n),i=r.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,i))}catch(u){if(!zd(u))throw u;pt($x,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function B2(n,e,t){const r=Yt(n);let i=Gt.min(),l=hn();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,g,v){const N=Yt(f),S=N.Ms.get(v);return S!==void 0?Xe.resolve(N.Fs.get(S)):N.hi.getTargetData(g,v)}(r,u,Oo(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,h.targetId).next(f=>{l=f})}).next(()=>r.Cs.getDocumentsMatchingQuery(u,e,t?i:Gt.min(),t?l:hn())).next(h=>(_j(r,cT(e),h),{documents:h,qs:l})))}function _j(n,e,t){let r=n.xs.get(e)||Gt.min();t.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.xs.set(e,r)}class U2{constructor(){this.activeTargetIds=pT()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Aj{constructor(){this.Fo=new U2,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new U2,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="ConnectivityMonitor";class q2{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){pt(z2,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){pt(z2,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Em=null;function Yg(){return Em===null?Em=function(){return 268435456+Math.round(2147483648*Math.random())}():Em++,"0x"+Em.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="RestConnection",Ej={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Tj{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===a0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,l){const u=Yg(),h=this.Go(e,t.toUriEncodedString());pt(hg,`Sending RPC '${e}' ${u}:`,h,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,i,l);const{host:g}=new URL(h),v=Md(g);return this.jo(e,h,f,r,v).then(N=>(pt(hg,`Received RPC '${e}' ${u}: `,N),N),N=>{throw Lc(hg,`RPC '${e}' ${u} failed with error: `,N,"url: ",h,"request:",r),N})}Jo(e,t,r,i,l,u){return this.Wo(e,t,r,i,l)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,l)=>e[l]=i),r&&r.headers.forEach((i,l)=>e[l]=i)}Go(e,t){const r=Ej[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="WebChannelConnection";class kj extends Tj{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,l){const u=Yg();return new Promise((h,f)=>{const g=new q5;g.setWithCredentials(!0),g.listenOnce(H5.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Fm.NO_ERROR:const N=g.getResponseJson();pt(Ua,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(N)),h(N);break;case Fm.TIMEOUT:pt(Ua,`RPC '${e}' ${u} timed out`),f(new ft(Ye.DEADLINE_EXCEEDED,"Request time out"));break;case Fm.HTTP_ERROR:const S=g.getStatus();if(pt(Ua,`RPC '${e}' ${u} failed with status:`,S,"response text:",g.getResponseText()),S>0){let _=g.getResponseJson();Array.isArray(_)&&(_=_[0]);const L=_==null?void 0:_.error;if(L&&L.status&&L.message){const O=function(M){const T=M.toLowerCase().replace(/_/g,"-");return Object.values(Ye).indexOf(T)>=0?T:Ye.UNKNOWN}(L.status);f(new ft(O,L.message))}else f(new ft(Ye.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ft(Ye.UNAVAILABLE,"Connection failed."));break;default:Vt(9055,{c_:e,streamId:u,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{pt(Ua,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(i);pt(Ua,`RPC '${e}' ${u} sending request:`,i),g.send(t,"POST",v,r,15)})}P_(e,t,r){const i=Yg(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=K5(),h=G5(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=l.join("");pt(Ua,`Creating RPC '${e}' stream ${i}: ${v}`,f);const N=u.createWebChannel(v,f);this.T_(N);let S=!1,_=!1;const L=new jj({Ho:q=>{_?pt(Ua,`Not sending because RPC '${e}' stream ${i} is closed:`,q):(S||(pt(Ua,`Opening RPC '${e}' stream ${i} transport.`),N.open(),S=!0),pt(Ua,`RPC '${e}' stream ${i} sending:`,q),N.send(q))},Yo:()=>N.close()}),O=(q,M,T)=>{q.listen(M,I=>{try{T(I)}catch(ee){setTimeout(()=>{throw ee},0)}})};return O(N,Fh.EventType.OPEN,()=>{_||(pt(Ua,`RPC '${e}' stream ${i} transport opened.`),L.s_())}),O(N,Fh.EventType.CLOSE,()=>{_||(_=!0,pt(Ua,`RPC '${e}' stream ${i} transport closed`),L.__(),this.I_(N))}),O(N,Fh.EventType.ERROR,q=>{_||(_=!0,Lc(Ua,`RPC '${e}' stream ${i} transport errored. Name:`,q.name,"Message:",q.message),L.__(new ft(Ye.UNAVAILABLE,"The operation could not be completed")))}),O(N,Fh.EventType.MESSAGE,q=>{var M;if(!_){const T=q.data[0];Pn(!!T,16349);const I=T,ee=(I==null?void 0:I.error)||((M=I[0])===null||M===void 0?void 0:M.error);if(ee){pt(Ua,`RPC '${e}' stream ${i} received error:`,ee);const se=ee.status;let ge=function(V){const Q=Kr[V];if(Q!==void 0)return kw(Q)}(se),W=ee.message;ge===void 0&&(ge=Ye.INTERNAL,W="Unknown error status: "+se+" with message "+ee.message),_=!0,L.__(new ft(ge,W)),N.close()}else pt(Ua,`RPC '${e}' stream ${i} received:`,T),L.a_(T)}}),O(h,W5.STAT_EVENT,q=>{q.stat===Dg.PROXY?pt(Ua,`RPC '${e}' stream ${i} detected buffering proxy`):q.stat===Dg.NOPROXY&&pt(Ua,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{L.o_()},0),L}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function fg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(n){return new LT(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t,r=1e3,i=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&pt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="PersistentStream";class Hw{constructor(e,t,r,i,l,u,h,f){this.Fi=e,this.w_=r,this.S_=i,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new qw(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Ye.RESOURCE_EXHAUSTED?(Rl(t.toString()),Rl("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{const i=new ft(Ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return pt(H2,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(pt(H2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Cj extends Hw{constructor(e,t,r,i,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=OT(this.serializer,e),r=function(l){if(!("targetChange"in l))return Gt.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Gt.min():u.readTime?Mo(u.readTime):Gt.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Gg(this.serializer),t.addTarget=function(l,u){let h;const f=u.target;if(h=Bg(f)?{documents:VT(l,f)}:{query:BT(l,f).Vt},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=Iw(l,u.resumeToken);const g=qg(l,u.expectedCount);g!==null&&(h.expectedCount=g)}else if(u.snapshotVersion.compareTo(Gt.min())>0){h.readTime=c0(l,u.snapshotVersion.toTimestamp());const g=qg(l,u.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,e);const r=zT(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Gg(this.serializer),t.removeTarget=e,this.k_(t)}}class Rj extends Hw{constructor(e,t,r,i,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Pn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Pn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=FT(e.writeResults,e.commitTime),r=Mo(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Gg(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>MT(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{}class Lj extends Ij{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ft(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Wo(e,Hg(t,r),i,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ft(Ye.UNKNOWN,l.toString())})}Jo(e,t,r,i,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Jo(e,Hg(t,r),i,u,h,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ft(Ye.UNKNOWN,u.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Pj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Rl(t),this._a=!1):pt("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su="RemoteStore";class Dj{constructor(e,t,r,i,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(u=>{r.enqueueAndForget(async()=>{ku(this)&&(pt(Su,"Restarting streams for network reachability change."),await async function(f){const g=Yt(f);g.Ia.add(4),await vf(g),g.Aa.set("Unknown"),g.Ia.delete(4),await L0(g)}(this))})}),this.Aa=new Pj(r,i)}}async function L0(n){if(ku(n))for(const e of n.da)await e(!0)}async function vf(n){for(const e of n.da)await e(!1)}function Ww(n,e){const t=Yt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Zx(t)?Jx(t):Hd(t).x_()&&Qx(t,e))}function Xx(n,e){const t=Yt(n),r=Hd(t);t.Ta.delete(e),r.x_()&&Gw(t,e),t.Ta.size===0&&(r.x_()?r.B_():ku(t)&&t.Aa.set("Unknown"))}function Qx(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Hd(n).H_(e)}function Gw(n,e){n.Ra.$e(e),Hd(n).Y_(e)}function Jx(n){n.Ra=new kT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Hd(n).start(),n.Aa.aa()}function Zx(n){return ku(n)&&!Hd(n).M_()&&n.Ta.size>0}function ku(n){return Yt(n).Ia.size===0}function Kw(n){n.Ra=void 0}async function Oj(n){n.Aa.set("Online")}async function Mj(n){n.Ta.forEach((e,t)=>{Qx(n,e)})}async function Fj(n,e){Kw(n),Zx(n)?(n.Aa.la(e),Jx(n)):n.Aa.set("Unknown")}async function Vj(n,e,t){if(n.Aa.set("Online"),e instanceof Rw&&e.state===2&&e.cause)try{await async function(i,l){const u=l.cause;for(const h of l.targetIds)i.Ta.has(h)&&(await i.remoteSyncer.rejectListen(h,u),i.Ta.delete(h),i.Ra.removeTarget(h))}(n,e)}catch(r){pt(Su,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await d0(n,r)}else if(e instanceof zm?n.Ra.Ye(e):e instanceof Cw?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Gt.min()))try{const r=await zw(n.localStore);t.compareTo(r)>=0&&await function(l,u){const h=l.Ra.Pt(u);return h.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const v=l.Ta.get(g);v&&l.Ta.set(g,v.withResumeToken(f.resumeToken,u))}}),h.targetMismatches.forEach((f,g)=>{const v=l.Ta.get(f);if(!v)return;l.Ta.set(f,v.withResumeToken(Ta.EMPTY_BYTE_STRING,v.snapshotVersion)),Gw(l,f);const N=new Sc(v.target,f,g,v.sequenceNumber);Qx(l,N)}),l.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){pt(Su,"Failed to raise snapshot:",r),await d0(n,r)}}async function d0(n,e,t){if(!zd(e))throw e;n.Ia.add(1),await vf(n),n.Aa.set("Offline"),t||(t=()=>zw(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{pt(Su,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await L0(n)})}function Yw(n,e){return e().catch(t=>d0(n,t,e))}async function P0(n){const e=Yt(n),t=Fc(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ox;for(;Bj(e);)try{const i=await wj(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Uj(e,i)}catch(i){await d0(e,i)}$w(e)&&Xw(e)}function Bj(n){return ku(n)&&n.Pa.length<10}function Uj(n,e){n.Pa.push(e);const t=Fc(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function $w(n){return ku(n)&&!Fc(n).M_()&&n.Pa.length>0}function Xw(n){Fc(n).start()}async function zj(n){Fc(n).na()}async function qj(n){const e=Fc(n);for(const t of n.Pa)e.X_(t.mutations)}async function Hj(n,e,t){const r=n.Pa.shift(),i=qx.from(r,e,t);await Yw(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await P0(n)}async function Wj(n,e){e&&Fc(n).Z_&&await async function(r,i){if(function(u){return TT(u)&&u!==Ye.ABORTED}(i.code)){const l=r.Pa.shift();Fc(r).N_(),await Yw(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),await P0(r)}}(n,e),$w(n)&&Xw(n)}async function W2(n,e){const t=Yt(n);t.asyncQueue.verifyOperationInProgress(),pt(Su,"RemoteStore received new credentials");const r=ku(t);t.Ia.add(3),await vf(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await L0(t)}async function Gj(n,e){const t=Yt(n);e?(t.Ia.delete(2),await L0(t)):e||(t.Ia.add(2),await vf(t),t.Aa.set("Unknown"))}function Hd(n){return n.Va||(n.Va=function(t,r,i){const l=Yt(t);return l.ia(),new Cj(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(n.datastore,n.asyncQueue,{Zo:Oj.bind(null,n),e_:Mj.bind(null,n),n_:Fj.bind(null,n),J_:Vj.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Zx(n)?Jx(n):n.Aa.set("Unknown")):(await n.Va.stop(),Kw(n))})),n.Va}function Fc(n){return n.ma||(n.ma=function(t,r,i){const l=Yt(t);return l.ia(),new Rj(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:zj.bind(null,n),n_:Wj.bind(null,n),ea:qj.bind(null,n),ta:Hj.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await P0(n)):(await n.ma.stop(),n.Pa.length>0&&(pt(Su,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t,r,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new Rc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,l){const u=Date.now()+r,h=new eb(e,t,u,i,l);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(Ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tb(n,e){if(Rl("AsyncQueue",`${e}: ${n}`),zd(n))return new ft(Ye.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{static emptySet(e){return new Nd(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||jt.comparator(t.key,r.key):(t,r)=>jt.comparator(t.key,r.key),this.keyedMap=Vh(),this.sortedSet=new xr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Nd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.fa=new xr(jt.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Vt(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Pd{constructor(e,t,r,i,l,u,h,f,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,i,l){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Pd(e,t,Nd.emptySet(t),u,r,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&T0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Yj{constructor(){this.queries=K2(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const i=Yt(t),l=i.queries;i.queries=K2(),l.forEach((u,h)=>{for(const f of h.wa)f.onError(r)})})(this,new ft(Ye.ABORTED,"Firestore shutting down"))}}function K2(){return new ju(n=>xw(n),T0)}async function $j(n,e){const t=Yt(n);let r=3;const i=e.query;let l=t.queries.get(i);l?!l.Sa()&&e.ba()&&(r=2):(l=new Kj,r=e.ba()?0:1);try{switch(r){case 0:l.ya=await t.onListen(i,!0);break;case 1:l.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const h=tb(u,`Initialization of query '${dd(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&nb(t)}async function Xj(n,e){const t=Yt(n),r=e.query;let i=3;const l=t.queries.get(r);if(l){const u=l.wa.indexOf(e);u>=0&&(l.wa.splice(u,1),l.wa.length===0?i=e.ba()?0:1:!l.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Qj(n,e){const t=Yt(n);let r=!1;for(const i of e){const l=i.query,u=t.queries.get(l);if(u){for(const h of u.wa)h.Ca(i)&&(r=!0);u.ya=i}}r&&nb(t)}function Jj(n,e,t){const r=Yt(n),i=r.queries.get(e);if(i)for(const l of i.wa)l.onError(t);r.queries.delete(e)}function nb(n){n.Da.forEach(e=>{e.next()})}var $g,Y2;(Y2=$g||($g={})).Fa="default",Y2.Cache="cache";class Zj{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Pd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Pd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==$g.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.key=e}}class Jw{constructor(e){this.key=e}}class ek{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=hn(),this.mutatedKeys=hn(),this.Xa=bw(e),this.eu=new Nd(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new G2,i=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,g=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((v,N)=>{const S=i.get(v),_=j0(this.query,N)?N:null,L=!!S&&this.mutatedKeys.has(S.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let q=!1;S&&_?S.data.isEqual(_.data)?L!==O&&(r.track({type:3,doc:_}),q=!0):this.iu(S,_)||(r.track({type:2,doc:_}),q=!0,(f&&this.Xa(_,f)>0||g&&this.Xa(_,g)<0)&&(h=!0)):!S&&_?(r.track({type:0,doc:_}),q=!0):S&&!_&&(r.track({type:1,doc:S}),q=!0,(f||g)&&(h=!0)),q&&(_?(u=u.add(_),l=O?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{eu:u,ru:r,Ds:h,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort((v,N)=>function(_,L){const O=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vt(20277,{At:q})}};return O(_)-O(L)}(v.type,N.type)||this.Xa(v.doc,N.doc)),this.su(r),i=i!=null&&i;const h=t&&!i?this.ou():[],f=this.Za.size===0&&this.current&&!i?1:0,g=f!==this.Ya;return this.Ya=f,u.length!==0||g?{snapshot:new Pd(this.query,e.eu,l,u,e.mutatedKeys,f===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new G2,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=hn(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Jw(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Qw(r))}),t}uu(e){this.Ha=e.qs,this.Za=hn();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Pd.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const rb="SyncEngine";class tk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nk{constructor(e){this.key=e,this.lu=!1}}class rk{constructor(e,t,r,i,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new ju(h=>xw(h),T0),this.Tu=new Map,this.Iu=new Set,this.du=new xr(jt.comparator),this.Eu=new Map,this.Au=new Gx,this.Ru={},this.Vu=new Map,this.mu=Ld.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function ak(n,e,t=!0){const r=a3(n);let i;const l=r.Pu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.cu()):i=await Zw(r,e,t,!0),i}async function sk(n,e){const t=a3(n);await Zw(t,e,!0,!1)}async function Zw(n,e,t,r){const i=await Nj(n.localStore,Oo(e)),l=i.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await ik(n,e,l,u==="current",i.resumeToken)),n.isPrimaryClient&&t&&Ww(n.remoteStore,i),h}async function ik(n,e,t,r,i){n.gu=(N,S,_)=>async function(O,q,M,T){let I=q.view.nu(M);I.Ds&&(I=await B2(O.localStore,q.query,!1).then(({documents:W})=>q.view.nu(W,I)));const ee=T&&T.targetChanges.get(q.targetId),se=T&&T.targetMismatches.get(q.targetId)!=null,ge=q.view.applyChanges(I,O.isPrimaryClient,ee,se);return X2(O,q.targetId,ge._u),ge.snapshot}(n,N,S,_);const l=await B2(n.localStore,e,!0),u=new ek(e,l.qs),h=u.nu(l.documents),f=bf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),g=u.applyChanges(h,n.isPrimaryClient,f);X2(n,t,g._u);const v=new tk(e,t,u);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),g.snapshot}async function ok(n,e,t){const r=Yt(n),i=r.Pu.get(e),l=r.Tu.get(i.targetId);if(l.length>1)return r.Tu.set(i.targetId,l.filter(u=>!T0(u,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Kg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Xx(r.remoteStore,i.targetId),Xg(r,i.targetId)}).catch(Ud)):(Xg(r,i.targetId),await Kg(r.localStore,i.targetId,!0))}async function lk(n,e){const t=Yt(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Xx(t.remoteStore,r.targetId))}async function ck(n,e,t){const r=gk(n);try{const i=await function(u,h){const f=Yt(u),g=nr.now(),v=h.reduce((_,L)=>_.add(L.key),hn());let N,S;return f.persistence.runTransaction("Locally write mutations","readwrite",_=>{let L=Il(),O=hn();return f.Os.getEntries(_,v).next(q=>{L=q,L.forEach((M,T)=>{T.isValidDocument()||(O=O.add(M))})}).next(()=>f.localDocuments.getOverlayedDocuments(_,L)).next(q=>{N=q;const M=[];for(const T of h){const I=NT(T,N.get(T.key).overlayedDocument);I!=null&&M.push(new Wc(T.key,I,lw(I.value.mapValue),Yi.exists(!0)))}return f.mutationQueue.addMutationBatch(_,g,M,h)}).next(q=>{S=q;const M=q.applyToLocalDocumentSet(N,O);return f.documentOverlayCache.saveOverlays(_,q.batchId,M)})}).then(()=>({batchId:S.batchId,changes:yw(N)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,h,f){let g=u.Ru[u.currentUser.toKey()];g||(g=new xr(nn)),g=g.insert(h,f),u.Ru[u.currentUser.toKey()]=g}(r,i.batchId,t),await yf(r,i.changes),await P0(r.remoteStore)}catch(i){const l=tb(i,"Failed to persist write");t.reject(l)}}async function e3(n,e){const t=Yt(n);try{const r=await vj(t.localStore,e);e.targetChanges.forEach((i,l)=>{const u=t.Eu.get(l);u&&(Pn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.lu=!0:i.modifiedDocuments.size>0?Pn(u.lu,14607):i.removedDocuments.size>0&&(Pn(u.lu,42227),u.lu=!1))}),await yf(t,r,e)}catch(r){await Ud(r)}}function $2(n,e,t){const r=Yt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Pu.forEach((l,u)=>{const h=u.view.va(e);h.snapshot&&i.push(h.snapshot)}),function(u,h){const f=Yt(u);f.onlineState=h;let g=!1;f.queries.forEach((v,N)=>{for(const S of N.wa)S.va(h)&&(g=!0)}),g&&nb(f)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uk(n,e,t){const r=Yt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),l=i&&i.key;if(l){let u=new xr(jt.comparator);u=u.insert(l,Ka.newNoDocument(l,Gt.min()));const h=hn().add(l),f=new R0(Gt.min(),new Map,new xr(nn),u,h);await e3(r,f),r.du=r.du.remove(l),r.Eu.delete(e),ab(r)}else await Kg(r.localStore,e,!1).then(()=>Xg(r,e,t)).catch(Ud)}async function dk(n,e){const t=Yt(n),r=e.batch.batchId;try{const i=await bj(t.localStore,e);n3(t,r,null),t3(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await yf(t,i)}catch(i){await Ud(i)}}async function hk(n,e,t){const r=Yt(n);try{const i=await function(u,h){const f=Yt(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return f.mutationQueue.lookupMutationBatch(g,h).next(N=>(Pn(N!==null,37113),v=N.keys(),f.mutationQueue.removeMutationBatch(g,N))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,v,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>f.localDocuments.getDocuments(g,v))})}(r.localStore,e);n3(r,e,t),t3(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await yf(r,i)}catch(i){await Ud(i)}}function t3(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function n3(n,e,t){const r=Yt(n);let i=r.Ru[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Xg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||r3(n,r)})}function r3(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Xx(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),ab(n))}function X2(n,e,t){for(const r of t)r instanceof Qw?(n.Au.addReference(r.key,e),fk(n,r)):r instanceof Jw?(pt(rb,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||r3(n,r.key)):Vt(19791,{yu:r})}function fk(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(pt(rb,"New document in limbo: "+t),n.Iu.add(r),ab(n))}function ab(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new jt(Zn.fromString(e)),r=n.mu.next();n.Eu.set(r,new nk(t)),n.du=n.du.insert(t,r),Ww(n.remoteStore,new Sc(Oo(pw(t.path)),r,"TargetPurposeLimboResolution",A0.ue))}}async function yf(n,e,t){const r=Yt(n),i=[],l=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach((h,f)=>{u.push(r.gu(f,e,t).then(g=>{var v;if((g||t)&&r.isPrimaryClient){const N=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,N?"current":"not-current")}if(g){i.push(g);const N=Yx.Es(f.targetId,g);l.push(N)}}))}),await Promise.all(u),r.hu.J_(i),await async function(f,g){const v=Yt(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>Xe.forEach(g,S=>Xe.forEach(S.Is,_=>v.persistence.referenceDelegate.addReference(N,S.targetId,_)).next(()=>Xe.forEach(S.ds,_=>v.persistence.referenceDelegate.removeReference(N,S.targetId,_)))))}catch(N){if(!zd(N))throw N;pt($x,"Failed to update sequence numbers: "+N)}for(const N of g){const S=N.targetId;if(!N.fromCache){const _=v.Fs.get(S),L=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(L);v.Fs=v.Fs.insert(S,O)}}}(r.localStore,l))}async function mk(n,e){const t=Yt(n);if(!t.currentUser.isEqual(e)){pt(rb,"User change. New user:",e.toKey());const r=await Uw(t.localStore,e);t.currentUser=e,function(l,u){l.Vu.forEach(h=>{h.forEach(f=>{f.reject(new ft(Ye.CANCELLED,u))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yf(t,r.Bs)}}function pk(n,e){const t=Yt(n),r=t.Eu.get(e);if(r&&r.lu)return hn().add(r.key);{let i=hn();const l=t.Tu.get(e);if(!l)return i;for(const u of l){const h=t.Pu.get(u);i=i.unionWith(h.view.tu)}return i}}function a3(n){const e=Yt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=e3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uk.bind(null,e),e.hu.J_=Qj.bind(null,e.eventManager),e.hu.pu=Jj.bind(null,e.eventManager),e}function gk(n){const e=Yt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hk.bind(null,e),e}class h0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=I0(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return xj(this.persistence,new mj,e.initialUser,this.serializer)}Du(e){return new Bw(Kx.Vi,this.serializer)}bu(e){return new Aj}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}h0.provider={build:()=>new h0};class xk extends h0{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Pn(this.persistence.referenceDelegate instanceof u0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZT(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?ys.withCacheSize(this.cacheSizeBytes):ys.DEFAULT;return new Bw(r=>u0.Vi(r,t),this.serializer)}}class Qg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mk.bind(null,this.syncEngine),await Gj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Yj}()}createDatastore(e){const t=I0(e.databaseInfo.databaseId),r=function(l){return new kj(l)}(e.databaseInfo);return function(l,u,h,f){return new Lj(l,u,h,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,l,u,h){return new Dj(r,i,l,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>$2(this.syncEngine,t,0),function(){return q2.C()?new q2:new Sj}())}createSyncEngine(e,t){return function(i,l,u,h,f,g,v){const N=new rk(i,l,u,h,f,g);return v&&(N.fu=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const l=Yt(i);pt(Su,"RemoteStore shutting down."),l.Ia.add(5),await vf(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Qg.provider={build:()=>new Qg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Rl("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc="FirestoreClient";class vk{constructor(e,t,r,i,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ga.UNAUTHENTICATED,this.clientId=Dx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async u=>{pt(Vc,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(pt(Vc,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=tb(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function mg(n,e){n.asyncQueue.verifyOperationInProgress(),pt(Vc,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Uw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Lc("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{pt("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Lc("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function Q2(n,e){n.asyncQueue.verifyOperationInProgress();const t=await yk(n);pt(Vc,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>W2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>W2(e.remoteStore,i)),n._onlineComponents=e}async function yk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pt(Vc,"Using user provided OfflineComponentProvider");try{await mg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ye.FAILED_PRECONDITION||i.code===Ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Lc("Error using user provided cache. Falling back to memory cache: "+t),await mg(n,new h0)}}else pt(Vc,"Using default OfflineComponentProvider"),await mg(n,new xk(void 0));return n._offlineComponents}async function s3(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pt(Vc,"Using user provided OnlineComponentProvider"),await Q2(n,n._uninitializedComponentsProvider._online)):(pt(Vc,"Using default OnlineComponentProvider"),await Q2(n,new Qg))),n._onlineComponents}function wk(n){return s3(n).then(e=>e.syncEngine)}async function Nk(n){const e=await s3(n),t=e.eventManager;return t.onListen=ak.bind(null,e.syncEngine),t.onUnlisten=ok.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lk.bind(null,e.syncEngine),t}function _k(n,e,t={}){const r=new Rc;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,h,f,g){const v=new bk({next:S=>{v.Ou(),u.enqueueAndForget(()=>Xj(l,N)),S.fromCache&&f.source==="server"?g.reject(new ft(Ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),N=new Zj(h,v,{includeMetadataChanges:!0,ka:!0});return $j(l,N)}(await Nk(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="firestore.googleapis.com",Z2=!0;class ey{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ft(Ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o3,this.ssl=Z2}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Z2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Vw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QT)throw new ft(Ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i3((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ft(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ft(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ft(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class D0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ey({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(Ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ft(Ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ey(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TE;switch(r.type){case"firstParty":return new RE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ft(Ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=J2.get(t);r&&(pt("ComponentProvider","Removing Datastore"),J2.delete(t),r.terminate())}(this),Promise.resolve()}}function Ak(n,e,t,r={}){var i;n=Au(n,D0);const l=Md(e),u=n._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;l&&(e5(`https://${f}`),t5("Firestore",!0)),u.host!==o3&&u.host!==f&&Lc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},u),{host:f,ssl:l,emulatorOptions:r});if(!vu(g,h)&&(n._setSettings(g),r.mockUserToken)){let v,N;if(typeof r.mockUserToken=="string")v=r.mockUserToken,N=Ga.MOCK_USER;else{v=M_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new ft(Ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new Ga(S)}n._authCredentials=new jE(new $5(v,N))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cu(this.firestore,e,this._query)}}class ra{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ic(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ra(this.firestore,e,this._key)}toJSON(){return{type:ra._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(gf(t,ra._jsonSchema))return new ra(e,r||null,new jt(Zn.fromString(t.referencePath)))}}ra._jsonSchemaVersion="firestore/documentReference/1.0",ra._jsonSchema={type:$r("string",ra._jsonSchemaVersion),referencePath:$r("string")};class Ic extends Cu{constructor(e,t,r){super(e,t,pw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ra(this.firestore,null,new jt(e))}withConverter(e){return new Ic(this.firestore,e,this._path)}}function l3(n,e,...t){if(n=ga(n),Q5("collection","path",e),n instanceof D0){const r=Zn.fromString(e,...t);return f2(r),new Ic(n,null,r)}{if(!(n instanceof ra||n instanceof Ic))throw new ft(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zn.fromString(e,...t));return f2(r),new Ic(n.firestore,null,r)}}function sb(n,e,...t){if(n=ga(n),arguments.length===1&&(e=Dx.newId()),Q5("doc","path",e),n instanceof D0){const r=Zn.fromString(e,...t);return h2(r),new ra(n,null,new jt(r))}{if(!(n instanceof ra||n instanceof Ic))throw new ft(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zn.fromString(e,...t));return h2(r),new ra(n.firestore,n instanceof Ic?n.converter:null,new jt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="AsyncQueue";class ny{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new qw(this,"async_queue_retry"),this.oc=()=>{const r=fg();r&&pt(ty,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=fg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=fg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Rc;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!zd(e))throw e;pt(ty,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Rl("INTERNAL UNHANDLED ERROR: ",ry(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=eb.createAndSchedule(this,e,t,r,l=>this.lc(l));return this.ec.push(i),i}ac(){this.tc&&Vt(47125,{hc:ry(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function ry(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class wf extends D0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ny,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ny(e),this._firestoreClient=void 0,await e}}}function Sk(n,e){const t=typeof n=="object"?n:s5(),r=typeof n=="string"?n:a0,i=Ax(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const l=D_("firestore");l&&Ak(i,...l)}return i}function c3(n){if(n._terminated)throw new ft(Ye.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ek(n),n._firestoreClient}function Ek(n){var e,t,r;const i=n._freezeSettings(),l=function(h,f,g,v){return new KE(h,f,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,i3(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new vk(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gi(Ta.fromBase64String(e))}catch(t){throw new ft(Ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gi(Ta.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gf(e,gi._jsonSchema))return gi.fromBase64String(e.bytes)}}gi._jsonSchemaVersion="firestore/bytes/1.0",gi._jsonSchema={type:$r("string",gi._jsonSchemaVersion),bytes:$r("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ft(Ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ea(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ft(Ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ft(Ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nn(this._lat,e._lat)||nn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fo._jsonSchemaVersion}}static fromJSON(e){if(gf(e,Fo._jsonSchema))return new Fo(e.latitude,e.longitude)}}Fo._jsonSchemaVersion="firestore/geoPoint/1.0",Fo._jsonSchema={type:$r("string",Fo._jsonSchemaVersion),latitude:$r("number"),longitude:$r("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==i[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gf(e,Vo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Vo(e.vectorValues);throw new ft(Ye.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vo._jsonSchemaVersion="firestore/vectorValue/1.0",Vo._jsonSchema={type:$r("string",Vo._jsonSchemaVersion),vectorValues:$r("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=/^__.*__$/;class jk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Wc(e,this.data,this.fieldMask,t,this.fieldTransforms):new xf(e,this.data,t,this.fieldTransforms)}}class u3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function d3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vt(40011,{Ec:n})}}class ob{constructor(e,t,r,i,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ob(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return f0(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(d3(this.Ec)&&Tk.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class kk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||I0(e)}Dc(e,t,r,i=!1){return new ob({Ec:e,methodName:t,bc:r,path:Ea.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lb(n){const e=n._freezeSettings(),t=I0(n._databaseId);return new kk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ck(n,e,t,r,i,l={}){const u=n.Dc(l.merge||l.mergeFields?2:0,e,t,i);cb("Data must be an object, but it was:",u,r);const h=h3(r,u);let f,g;if(l.merge)f=new Hs(u.fieldMask),g=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const N of l.mergeFields){const S=Jg(e,N,t);if(!u.contains(S))throw new ft(Ye.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);m3(v,S)||v.push(S)}f=new Hs(v),g=u.fieldTransforms.filter(N=>f.covers(N.field))}else f=null,g=u.fieldTransforms;return new jk(new ws(h),f,g)}class M0 extends ib{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof M0}}function Rk(n,e,t,r){const i=n.Dc(1,e,t);cb("Data must be an object, but it was:",i,r);const l=[],u=ws.empty();Hc(r,(f,g)=>{const v=ub(e,f,t);g=ga(g);const N=i.gc(v);if(g instanceof M0)l.push(v);else{const S=Nf(g,N);S!=null&&(l.push(v),u.set(v,S))}});const h=new Hs(l);return new u3(u,h,i.fieldTransforms)}function Ik(n,e,t,r,i,l){const u=n.Dc(1,e,t),h=[Jg(e,r,t)],f=[i];if(l.length%2!=0)throw new ft(Ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)h.push(Jg(e,l[S])),f.push(l[S+1]);const g=[],v=ws.empty();for(let S=h.length-1;S>=0;--S)if(!m3(g,h[S])){const _=h[S];let L=f[S];L=ga(L);const O=u.gc(_);if(L instanceof M0)g.push(_);else{const q=Nf(L,O);q!=null&&(g.push(_),v.set(_,q))}}const N=new Hs(g);return new u3(v,N,u.fieldTransforms)}function Lk(n,e,t,r=!1){return Nf(t,n.Dc(r?4:3,e))}function Nf(n,e){if(f3(n=ga(n)))return cb("Unsupported field value:",e,n),h3(n,e);if(n instanceof ib)return function(r,i){if(!d3(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(i);l&&i.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const l=[];let u=0;for(const h of r){let f=Nf(h,i.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),u++}return{arrayValue:{values:l}}}(n,e)}return function(r,i){if((r=ga(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gT(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=nr.fromDate(r);return{timestampValue:c0(i.serializer,l)}}if(r instanceof nr){const l=new nr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:c0(i.serializer,l)}}if(r instanceof Fo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gi)return{bytesValue:Iw(i.serializer,r._byteString)};if(r instanceof ra){const l=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw i.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Wx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vo)return function(u,h){return{mapValue:{fields:{[iw]:{stringValue:ow},[s0]:{arrayValue:{values:u.toArray().map(g=>{if(typeof g!="number")throw h.wc("VectorValues must only contain numeric values.");return Ux(h.serializer,g)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${_0(r)}`)}(n,e)}function h3(n,e){const t={};return ew(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hc(n,(r,i)=>{const l=Nf(i,e.Vc(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function f3(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nr||n instanceof Fo||n instanceof gi||n instanceof ra||n instanceof ib||n instanceof Vo)}function cb(n,e,t){if(!f3(t)||!J5(t)){const r=_0(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Jg(n,e,t){if((e=ga(e))instanceof O0)return e._internalPath;if(typeof e=="string")return ub(n,e);throw f0("Field path arguments must be of type string or ",n,!1,void 0,t)}const Pk=new RegExp("[~\\*/\\[\\]]");function ub(n,e,t){if(e.search(Pk)>=0)throw f0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new O0(...e.split("."))._internalPath}catch{throw f0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function f0(n,e,t,r,i){const l=r&&!r.isEmpty(),u=i!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(l||u)&&(f+=" (found",l&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new ft(Ye.INVALID_ARGUMENT,h+n+f)}function m3(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,t,r,i,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ra(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Dk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(F0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Dk extends p3{data(){return super.data()}}function F0(n,e){return typeof e=="string"?ub(n,e):e instanceof O0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ft(Ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class db{}class g3 extends db{}function Mk(n,e,...t){let r=[];e instanceof db&&r.push(e),r=r.concat(t),function(l){const u=l.filter(f=>f instanceof hb).length,h=l.filter(f=>f instanceof V0).length;if(u>1||u>0&&h>0)throw new ft(Ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class V0 extends g3{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new V0(e,t,r)}_apply(e){const t=this._parse(e);return x3(e._query,t),new Cu(e.firestore,e.converter,Ug(e._query,t))}_parse(e){const t=lb(e.firestore);return function(l,u,h,f,g,v,N){let S;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ft(Ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){sy(N,v);const L=[];for(const O of N)L.push(ay(f,l,O));S={arrayValue:{values:L}}}else S=ay(f,l,N)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||sy(N,v),S=Lk(h,u,N,v==="in"||v==="not-in");return Yr.create(g,v,S)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Fk(n,e,t){const r=e,i=F0("where",n);return V0._create(i,r,t)}class hb extends db{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hb(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Xi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,l){let u=i;const h=l.getFlattenedFilters();for(const f of h)x3(u,f),u=Ug(u,f)}(e._query,t),new Cu(e.firestore,e.converter,Ug(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fb extends g3{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fb(e,t)}_apply(e){const t=function(i,l,u){if(i.startAt!==null)throw new ft(Ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ft(Ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nf(l,u)}(e._query,this._field,this._direction);return new Cu(e.firestore,e.converter,function(i,l){const u=i.explicitOrderBy.concat([l]);return new qd(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function Vk(n,e="asc"){const t=e,r=F0("orderBy",n);return fb._create(r,t)}function ay(n,e,t){if(typeof(t=ga(t))=="string"){if(t==="")throw new ft(Ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gw(e)&&t.indexOf("/")!==-1)throw new ft(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zn.fromString(t));if(!jt.isDocumentKey(r))throw new ft(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return w2(n,new jt(r))}if(t instanceof ra)return w2(n,t._key);throw new ft(Ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_0(t)}.`)}function sy(n,e){if(!Array.isArray(n)||n.length===0)throw new ft(Ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function x3(n,e){const t=function(i,l){for(const u of i)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ft(Ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ft(Ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Bk{convertValue(e,t="none"){switch(Mc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Or(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Vt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Hc(e,(i,l)=>{r[i]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,i;const l=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[s0].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(u=>Or(u.doubleValue));return new Vo(l)}convertGeoPoint(e){return new Fo(Or(e.latitude),Or(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=E0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zh(e));default:return null}}convertTimestamp(e){const t=Dc(e);return new nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zn.fromString(e);Pn(Fw(r),9688,{name:e});const i=new ef(r.get(1),r.get(3)),l=new jt(r.popFirst(5));return i.isEqual(t)||Rl(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Tm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _d extends p3{constructor(e,t,r,i,l,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(F0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(Ye.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_d._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_d._jsonSchemaVersion="firestore/documentSnapshot/1.0",_d._jsonSchema={type:$r("string",_d._jsonSchemaVersion),bundleSource:$r("string","DocumentSnapshot"),bundleName:$r("string"),bundle:$r("string")};class qm extends _d{data(e={}){return super.data(e)}}class Ad{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Tm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qm(this._firestore,this._userDataWriter,r.key,r,new Tm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ft(Ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,l){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map(h=>{const f=new qm(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Tm(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const f=new qm(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Tm(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,v=-1;return h.type!==0&&(g=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:zk(h.type),doc:f,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(Ye.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ad._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),i.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vt(61501,{type:n})}}Ad._jsonSchemaVersion="firestore/querySnapshot/1.0",Ad._jsonSchema={type:$r("string",Ad._jsonSchemaVersion),bundleSource:$r("string","QuerySnapshot"),bundleName:$r("string"),bundle:$r("string")};class qk extends Bk{constructor(e){super(),this.firestore=e}convertBytes(e){return new gi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ra(this.firestore,null,t)}}function Hk(n){n=Au(n,Cu);const e=Au(n.firestore,wf),t=c3(e),r=new qk(e);return Ok(n._query),_k(t,n._query).then(i=>new Ad(e,r,n,i))}function Wk(n,e,t,...r){n=Au(n,ra);const i=Au(n.firestore,wf),l=lb(i);let u;return u=typeof(e=ga(e))=="string"||e instanceof O0?Ik(l,"updateDoc",n._key,e,t,r):Rk(l,"updateDoc",n._key,e),mb(i,[u.toMutation(n._key,Yi.exists(!0))])}function Gk(n){return mb(Au(n.firestore,wf),[new zx(n._key,Yi.none())])}function Kk(n,e){const t=Au(n.firestore,wf),r=sb(n),i=Uk(n.converter,e);return mb(t,[Ck(lb(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Yi.exists(!1))]).then(()=>r)}function mb(n,e){return function(r,i){const l=new Rc;return r.asyncQueue.enqueueAndForget(async()=>ck(await wk(r),i,l)),l.promise}(c3(n),e)}(function(e,t=!0){(function(i){Bd=i})(Fd),kd(new yu("firestore",(r,{instanceIdentifier:i,options:l})=>{const u=r.getProvider("app").getImmediate(),h=new wf(new kE(r.getProvider("auth-internal")),new IE(u,r.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ft(Ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ef(g.options.projectId,v)}(u,i),u);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),kc(o2,l2,e),kc(o2,l2,"esm2017")})();const Yk={apiKey:"AIzaSyC6Ossp0ITfAUiqoJAXksnhLnDymhoT0yI",authDomain:"ashes-of-varnhal-builder.firebaseapp.com",projectId:"ashes-of-varnhal-builder",storageBucket:"ashes-of-varnhal-builder.firebasestorage.app",messagingSenderId:"876719927421",appId:"1:876719927421:web:328647a730d7f12118c114"},b3=a5(Yk),B0=_E(b3),U0=Sk(b3),$k=async(n,e)=>{try{return(await lS(B0,n,e)).user}catch(t){throw console.error("Sign in error:",t),t}},Xk=async(n,e)=>{try{return(await oS(B0,n,e)).user}catch(t){throw console.error("Sign up error:",t),t}},Qk=async()=>{try{await hS(B0)}catch(n){throw console.error("Sign out error:",n),n}},Jk=n=>dS(B0,n),v3=Ne.createContext(void 0),y3=()=>{const n=Ne.useContext(v3);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},Zk=({children:n})=>{const[e,t]=Ne.useState(null),[r,i]=Ne.useState(!0);Ne.useEffect(()=>{const u=Jk(h=>{t(h),i(!1)});return()=>u()},[]);const l={user:e,loading:r};return o.jsx(v3.Provider,{value:l,children:n})},eC=({isOpen:n,onClose:e,onSwitchToSignUp:t})=>{const[r,i]=Ne.useState(""),[l,u]=Ne.useState(""),[h,f]=Ne.useState(!1),[g,v]=Ne.useState(""),N=async S=>{S.preventDefault(),f(!0),v("");try{await $k(r,l),e()}catch(_){v(_.message||"Failed to sign in")}finally{f(!1)}};return n?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Sign In"}),g&&o.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:g}),o.jsxs("form",{onSubmit:N,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),o.jsx("input",{type:"email",value:r,onChange:S=>i(S.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),o.jsx("input",{type:"password",value:l,onChange:S=>u(S.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("button",{type:"submit",disabled:h,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50",children:h?"Signing In...":"Sign In"}),o.jsx("button",{type:"button",onClick:e,className:"text-gray-500 hover:text-gray-700",children:"Cancel"})]})]}),o.jsx("div",{className:"mt-4 text-center",children:o.jsx("button",{onClick:t,className:"text-blue-500 hover:text-blue-700",children:"Don't have an account? Sign up"})})]})}):null},tC=({isOpen:n,onClose:e,onSwitchToLogin:t})=>{const[r,i]=Ne.useState(""),[l,u]=Ne.useState(""),[h,f]=Ne.useState(""),[g,v]=Ne.useState(!1),[N,S]=Ne.useState(""),_=async L=>{if(L.preventDefault(),v(!0),S(""),l!==h){S("Passwords do not match"),v(!1);return}try{await Xk(r,l),e()}catch(O){S(O.message||"Failed to create account")}finally{v(!1)}};return n?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Sign Up"}),N&&o.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:N}),o.jsxs("form",{onSubmit:_,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),o.jsx("input",{type:"email",value:r,onChange:L=>i(L.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),o.jsx("input",{type:"password",value:l,onChange:L=>u(L.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Confirm Password"}),o.jsx("input",{type:"password",value:h,onChange:L=>f(L.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("button",{type:"submit",disabled:g,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50",children:g?"Creating Account...":"Sign Up"}),o.jsx("button",{type:"button",onClick:e,className:"text-gray-500 hover:text-gray-700",children:"Cancel"})]})]}),o.jsx("div",{className:"mt-4 text-center",children:o.jsx("button",{onClick:t,className:"text-blue-500 hover:text-blue-700",children:"Already have an account? Sign in"})})]})}):null},nC=()=>{const[n,e]=Ne.useState(""),[t,r]=Ne.useState([]),[i,l]=Ne.useState(!1),[u,h]=Ne.useState(!1),[f,g]=Ne.useState(!1),[v,N]=Ne.useState(!1),S=Ne.useRef(null),_=rs(),{user:L}=y3(),O=ee=>{if(!ee.trim())return[];const se=[],ge=b0,W=ee.toLowerCase();return Object.keys(ge).forEach(k=>{k.toLowerCase().includes(W)&&se.push({type:"faction",title:k,url:`/lore/factions/${encodeURIComponent(k)}`,faction:k})}),Object.entries(xx).forEach(([k,V])=>{typeof V.title=="string"&&V.title.toLowerCase().includes(W)&&se.push({type:"location",title:V.title,url:`/lore/locations/${encodeURIComponent(k)}`})}),Object.entries(bx).forEach(([k,V])=>{typeof V.title=="string"&&V.title.toLowerCase().includes(W)&&se.push({type:"person",title:V.title,url:`/lore/people/${encodeURIComponent(k)}`})}),Object.entries(vx).forEach(([k,V])=>{typeof V.title=="string"&&V.title.toLowerCase().includes(W)&&se.push({type:"event",title:V.title,url:`/lore/events/${encodeURIComponent(k)}`})}),Object.entries(yx).forEach(([k,V])=>{typeof V.title=="string"&&V.title.toLowerCase().includes(W)&&se.push({type:"artifact",title:V.title,url:`/lore/artifacts/${encodeURIComponent(k)}`})}),Object.entries(wx).forEach(([k,V])=>{typeof V.title=="string"&&V.title.toLowerCase().includes(W)&&se.push({type:"term",title:V.title,url:`/lore/terms/${encodeURIComponent(k)}`})}),se.slice(0,12)};Ne.useEffect(()=>{const ee=O(n);r(ee)},[n]),Ne.useEffect(()=>{const ee=se=>{se.key==="Escape"&&(l(!1),e(""))};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[]);const q=()=>{l(!0),setTimeout(()=>{var ee;(ee=S.current)==null||ee.focus()},100)},M=ee=>{_(ee.url),e(""),l(!1)},T=()=>{l(!1),e("")},I=async()=>{try{await Qk(),N(!1)}catch(ee){console.error("Sign out error:",ee)}};return o.jsxs(o.Fragment,{children:[o.jsxs("header",{className:"bg-gradient-to-r from-slate-900 via-gray-900 to-black text-amber-200 px-4 md:px-8 py-3 md:py-5 shadow-2xl border-b-2 border-amber-700/40 flex items-center justify-between z-10 relative",children:[o.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[o.jsx("span",{className:"text-2xl md:text-3xl drop-shadow-lg",children:"⚔️"}),o.jsxs("h1",{className:"text-lg md:text-2xl lg:text-3xl font-black uppercase tracking-widest drop-shadow-lg",children:["Ashes of Varnhal ",o.jsx("span",{className:"text-amber-400",children:"Campaign Tracker"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-3 md:px-4 py-2 bg-slate-800/80 border border-slate-600 rounded-lg text-slate-200 hover:bg-slate-700/80 transition-colors",children:[o.jsx("span",{className:"text-slate-400",children:"🔍"}),o.jsx("span",{className:"hidden md:inline text-sm",children:"Search"})]}),L?o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>N(!v),className:"flex items-center gap-2 px-3 md:px-4 py-2 bg-amber-600/80 border border-amber-500 rounded-lg text-white hover:bg-amber-700/80 transition-colors",children:[o.jsx("span",{children:"👤"}),o.jsx("span",{className:"hidden md:inline text-sm",children:L.email}),o.jsx("span",{children:"▼"})]}),v&&o.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-20",children:o.jsx("button",{onClick:I,className:"w-full px-4 py-2 text-left text-slate-200 hover:bg-slate-700 transition-colors",children:"Sign Out"})})]}):o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>h(!0),className:"px-3 md:px-4 py-2 bg-slate-700/80 border border-slate-600 rounded-lg text-slate-200 hover:bg-slate-600/80 transition-colors text-sm",children:"Sign In"}),o.jsx("button",{onClick:()=>g(!0),className:"px-3 md:px-4 py-2 bg-amber-600/80 border border-amber-500 rounded-lg text-white hover:bg-amber-700/80 transition-colors text-sm",children:"Sign Up"})]})]})]}),i&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-start justify-center p-4",children:o.jsxs("div",{className:"bg-slate-900 border border-slate-600 rounded-2xl shadow-2xl w-full max-w-2xl mt-20 md:mt-32 max-h-[80vh] flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-slate-700",children:[o.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-200",children:"Search Articles"}),o.jsx("button",{onClick:T,className:"text-slate-400 hover:text-slate-200 text-2xl font-bold",children:"×"})]}),o.jsx("div",{className:"p-4 md:p-6 border-b border-slate-700",children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{ref:S,type:"text",placeholder:"Type to search factions and articles...",value:n,onChange:ee=>e(ee.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-slate-200 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent text-base md:text-lg"}),o.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400",children:"🔍"})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:n.trim()===""?o.jsxs("div",{className:"p-4 md:p-6 text-center text-slate-400",children:[o.jsx("div",{className:"text-4xl mb-4",children:"🔍"}),o.jsx("p",{className:"text-lg",children:"Start typing to search factions and articles"})]}):t.length===0?o.jsxs("div",{className:"p-4 md:p-6 text-center text-slate-400",children:[o.jsx("div",{className:"text-4xl mb-4",children:"❌"}),o.jsxs("p",{className:"text-lg",children:['No results found for "',n,'"']})]}):o.jsx("div",{className:"divide-y divide-slate-700",children:t.map((ee,se)=>o.jsx("button",{onClick:()=>M(ee),className:"w-full p-4 md:p-6 text-left hover:bg-slate-800 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-slate-200 font-medium text-base md:text-lg mb-1",children:ee.title}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ee.type==="faction"?"bg-amber-900/50 text-amber-300 border border-amber-700/50":ee.type==="location"?"bg-green-900/50 text-green-300 border border-green-700/50":ee.type==="person"?"bg-pink-900/50 text-pink-300 border border-pink-700/50":ee.type==="event"?"bg-yellow-900/50 text-yellow-300 border border-yellow-700/50":ee.type==="artifact"?"bg-purple-900/50 text-purple-300 border border-purple-700/50":"bg-gray-900/50 text-gray-300 border border-gray-700/50"}`,children:ee.type==="faction"?"Faction":ee.type==="location"?"Location":ee.type==="person"?"Person":ee.type==="event"?"Event":ee.type==="artifact"?"Artifact":"Term"}),ee.faction&&ee.type==="wiki"&&o.jsxs("span",{className:"text-slate-400 text-sm",children:["from ",ee.faction]})]})]}),o.jsx("span",{className:"text-slate-400 text-2xl",children:"→"})]})},se))})}),o.jsx("div",{className:"p-4 md:p-6 border-t border-slate-700 text-center text-slate-400 text-sm",children:"Press ESC to close"})]})}),o.jsx(eC,{isOpen:u,onClose:()=>h(!1),onSwitchToSignUp:()=>{h(!1),g(!0)}}),o.jsx(tC,{isOpen:f,onClose:()=>g(!1),onSwitchToLogin:()=>{g(!1),h(!0)}})]})},rC=({children:n})=>o.jsxs("div",{className:"flex flex-col h-screen min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none select-none z-0",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.08'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsx(nC,{}),o.jsxs("div",{className:"flex flex-1 overflow-hidden relative z-10",children:[o.jsx(E_,{}),o.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 max-w-full w-full min-w-0",children:n})]})]}),aC=()=>{const{pathname:n}=Ll();return Ne.useEffect(()=>{setTimeout(()=>{const t=document.querySelector("main");t?t.scrollTo({top:0,left:0,behavior:"smooth"}):window.scrollTo({top:0,left:0,behavior:"smooth"})},100)},[n]),null};function vn(n){const e=i=>{const l=/\[([^\]]+)\]\(([^)]+)\)/g,u=[];let h=0,f,g=0;for(;(f=l.exec(i))!==null;)f.index>h&&u.push(i.slice(h,f.index)),u.push(o.jsx(un,{to:f[2],className:"text-amber-400 underline hover:text-amber-300",children:f[1]},g++)),h=l.lastIndex;return h<i.length&&u.push(i.slice(h)),o.jsx(o.Fragment,{children:u})};if(typeof n=="string")return n.trim().startsWith("- ")?o.jsx("ul",{className:"list-disc pl-6",children:o.jsx("li",{children:e(n.trim().slice(2))})}):e(n);const t=[];let r=0;for(;r<n.length;)if(n[r].trim().startsWith("- ")){const i=[];for(;r<n.length&&n[r].trim().startsWith("- ");)i.push(o.jsx("li",{children:e(n[r].trim().slice(2))},r)),r++;t.push(o.jsx("ul",{className:"list-disc pl-6 mb-2",children:i},r))}else t.push(o.jsx("p",{children:e(n[r])},r)),r++;return t}const sC=()=>{var u,h,f,g,v,N,S,_,L,O,q,M;const{factionName:n}=Eu(),[e,t]=Ne.useState("lore"),r=rs();if(!n)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsx("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:o.jsx("div",{className:"text-center text-slate-300 text-2xl",children:"No faction specified."})})});const i=b0[n];if(!i)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>r(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-orange-500 to-red-600 mb-8 md:mb-10 tracking-wider text-center",children:n}),o.jsx("div",{className:"text-center text-slate-300 text-lg md:text-2xl",children:"Faction not found."})]})});if(i.wiki&&i.wiki.length>0)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-5xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>r(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("div",{className:"mb-8 md:mb-12 text-center",children:o.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-orange-500 to-red-600 mb-2 tracking-wider",children:["⚔️ ",n.toUpperCase()," ⚔️"]})}),o.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 md:gap-8 items-start mb-8 md:mb-12",children:[o.jsxs("div",{className:"flex-1 bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsx("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide",children:"Overview"}),o.jsx("div",{className:"space-y-3 md:space-y-4 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:i.wiki&&((u=i.wiki.find(T=>T.title==="Overview"))==null?void 0:u.content.map((T,I)=>o.jsx("p",{children:vn(T)},I)))})]}),o.jsxs("div",{className:"w-full lg:w-80 bg-gradient-to-br from-slate-700/80 to-slate-900/80 rounded-2xl shadow-xl p-4 md:p-6 border border-slate-600/60 text-right flex-shrink-0",children:[o.jsx("h3",{className:"text-base md:text-lg font-bold text-amber-300 mb-3 md:mb-4 tracking-wide",children:"House Profile"}),o.jsxs("div",{className:"mb-3 md:mb-4",children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Seat of Power"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:vn(((h=i.wiki.find(T=>T.title==="Seat of Power"))==null?void 0:h.content[0])||"")})]}),o.jsxs("div",{className:"mb-3 md:mb-4",children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Date Established"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:vn(((f=i.wiki.find(T=>T.title==="Date Established"))==null?void 0:f.content[0])||"")})]}),o.jsxs("div",{className:"mb-3 md:mb-4",children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Emblem & Colors"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:vn(((g=i.wiki.find(T=>T.title==="Emblem & Colors"))==null?void 0:g.content[0])||"")})]})]})]}),i.wiki.some(T=>/leadership/i.test(T.title)||/succession/i.test(T.title))&&o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsx("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide",children:"Leadership"}),o.jsxs("div",{className:"space-y-4 md:space-y-6 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:[i.wiki.some(T=>T.title==="Influential People")&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold text-amber-300 mb-2",children:"Influential People"}),(v=i.wiki.find(T=>T.title==="Influential People"))==null?void 0:v.content.map((T,I)=>o.jsx("p",{children:vn(T)},I))]}),i.wiki.find(T=>T.title==="Succession")&&o.jsxs("div",{className:"mt-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("span",{className:"text-2xl md:text-3xl text-rose-400",children:"🩸"}),o.jsx("h3",{className:"text-lg md:text-xl font-black text-rose-300 tracking-wide",children:"Succession: The Crimson Accord"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-slate-900/70 rounded-xl border border-rose-700/40 shadow p-4 md:p-6 flex flex-col gap-3",children:[o.jsxs("h4",{className:"text-base md:text-lg font-bold text-rose-200 mb-2 flex items-center gap-2",children:[o.jsx("span",{children:"🗡️"})," The Ritual"]}),(()=>{var ee;const T=((ee=i.wiki.find(se=>se.title==="Succession"))==null?void 0:ee.content)||[],I=[];for(let se of T){if(se.startsWith("If the bonding succeeds"))break;I.push(se)}return I.map((se,ge)=>o.jsx("p",{className:"text-slate-300 text-sm md:text-base",children:vn(se)},ge))})(),o.jsxs("div",{className:"bg-gradient-to-r from-rose-900/70 to-slate-900/70 border-l-4 border-rose-500 rounded-lg p-3 mt-2 flex items-center gap-2",children:[o.jsx("span",{className:"text-rose-400 text-xl",children:"⚠️"}),o.jsx("span",{className:"text-rose-200 font-semibold",children:"Most fail. Their minds burn out. Their blood rejects the link. Their names are never spoken again."})]})]}),o.jsxs("div",{className:"bg-slate-900/70 rounded-xl border border-amber-700/40 shadow p-4 md:p-6 flex flex-col gap-3",children:[o.jsxs("h4",{className:"text-base md:text-lg font-bold text-amber-200 mb-2 flex items-center gap-2",children:[o.jsx("span",{children:"👑"})," The Ruler Inherits"]}),(()=>{var W;const T=((W=i.wiki.find(k=>k.title==="Succession"))==null?void 0:W.content)||[],I=T.findIndex(k=>k.startsWith("If the bonding succeeds"));if(I===-1)return null;let ee=I+1;for(;ee<T.length&&T[ee].trim().startsWith("- ");)ee++;const se=T.slice(I+1,ee),ge=T.slice(ee);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-2",children:[o.jsx("p",{className:"text-slate-300 text-sm md:text-base mb-2",children:vn(T[I])}),o.jsx("ul",{className:"list-disc pl-6 space-y-2",children:se.map((k,V)=>o.jsx("li",{className:"text-amber-200 text-sm md:text-base",children:vn(k.slice(2))},V))})]}),ge.map((k,V)=>o.jsx("p",{className:"text-slate-400 italic text-xs md:text-sm mt-2",children:vn(k)},V))]})})()]})]})]})]})]}),["Geography","Economy","Industry","Trade"].some(T=>{var I;return(I=i.wiki)==null?void 0:I.some(ee=>ee.title===T)})&&o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsx("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide",children:"Territory and Resources"}),o.jsxs("div",{className:"space-y-4 md:space-y-6 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg md:text-xl font-bold text-emerald-300 mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:"🗺️"}),"Geography"]}),(()=>{const T=i.wiki.find(I=>I.title==="Geography");return T!=null&&T.regions?o.jsx("div",{className:"space-y-6",children:T.regions.map((I,ee)=>o.jsxs("div",{className:"bg-gradient-to-r from-slate-900/70 to-slate-800/70 rounded-xl border border-emerald-700/40 p-4 md:p-6 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-500/10 rounded-full -translate-y-10 translate-x-10"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-emerald-400/10 rounded-full translate-y-8 -translate-x-8"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("h4",{className:"text-lg md:text-xl font-black text-emerald-300 mb-3 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:I.icon}),I.title]}),o.jsx("p",{className:"text-slate-300 text-sm md:text-base leading-relaxed",children:vn(I.text)})]})]},ee))}):T!=null&&T.content?T.content.map((I,ee)=>o.jsx("p",{children:vn(I)},ee)):o.jsx("p",{className:"text-slate-400 italic",children:"Geographic information to be added..."})})()]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg md:text-xl font-bold text-emerald-300 mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:"💰"}),"Economy"]}),function(){const T=i.wiki.find(I=>/economy/i.test(I.title));return T?T!=null&&T.regions?o.jsx("div",{className:"space-y-6",children:T.regions.map((I,ee)=>o.jsxs("div",{className:"bg-gradient-to-r from-slate-900/70 to-slate-800/70 rounded-xl border border-emerald-700/40 p-4 md:p-6 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-500/10 rounded-full -translate-y-10 translate-x-10"}),o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[I.icon&&o.jsx("span",{className:"text-2xl",children:I.icon}),o.jsx("span",{className:"font-black text-emerald-300 text-lg",children:I.title})]}),o.jsx("div",{className:"text-slate-300 text-base",children:vn(I.text)}),I.list&&Array.isArray(I.list)&&o.jsx("ul",{className:"list-disc ml-6 mt-2 text-slate-400 text-sm",children:I.list.map((se,ge)=>o.jsx("li",{children:se},ge))})]},ee))}):T!=null&&T.content?T.content.map((I,ee)=>o.jsx("p",{children:vn(I)},ee)):o.jsx("p",{className:"text-slate-400 italic",children:"Economic information to be added..."}):null}()]}),i.wiki.find(T=>T.title==="Industry")&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg md:text-xl font-bold text-emerald-300 mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:"🏭"}),"Industry"]}),(()=>{const T=i.wiki.find(I=>I.title==="Industry");return T!=null&&T.regions?o.jsx("div",{className:"space-y-6",children:T.regions.map((I,ee)=>o.jsxs("div",{className:"bg-gradient-to-r from-slate-900/70 to-slate-800/70 rounded-xl border border-emerald-700/40 p-4 md:p-6 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-500/10 rounded-full -translate-y-10 translate-x-10"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-emerald-400/10 rounded-full translate-y-8 -translate-x-8"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("h4",{className:"text-lg md:text-xl font-black text-emerald-300 mb-3 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:I.icon}),I.title]}),o.jsx("p",{className:"text-slate-300 text-sm md:text-base leading-relaxed",children:vn(I.text)})]})]},ee))}):T!=null&&T.content?T.content.map((I,ee)=>o.jsx("p",{children:vn(I)},ee)):o.jsx("p",{className:"text-slate-400 italic",children:"Industrial information to be added..."})})()]}),i.wiki.find(T=>T.title==="Trade")&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg md:text-xl font-bold text-emerald-300 mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:"🤝"}),"Trade"]}),(()=>{const T=i.wiki.find(I=>I.title==="Trade");return T!=null&&T.regions?o.jsx("div",{className:"space-y-6",children:T.regions.map((I,ee)=>o.jsxs("div",{className:"bg-gradient-to-r from-slate-900/70 to-slate-800/70 rounded-xl border border-emerald-700/40 p-4 md:p-6 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-500/10 rounded-full -translate-y-10 translate-x-10"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-emerald-400/10 rounded-full translate-y-8 -translate-x-8"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("h4",{className:"text-lg md:text-xl font-black text-emerald-300 mb-3 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:I.icon}),I.title]}),o.jsx("p",{className:"text-slate-300 text-sm md:text-base leading-relaxed mb-3",children:vn(I.text)}),I.list&&o.jsx("ul",{className:"list-disc pl-6 space-y-2",children:I.list.map((se,ge)=>o.jsx("li",{className:"text-slate-300 text-sm md:text-base",children:vn(se)},ge))})]})]},ee))}):T!=null&&T.content?T.content.map((I,ee)=>o.jsx("p",{children:vn(I)},ee)):o.jsx("p",{className:"text-slate-400 italic",children:"Trade information to be added..."})})()]})]})]}),["Strategic Assets","Special Sites","Key Holdings"].some(T=>{var I;return(I=i.wiki)==null?void 0:I.some(ee=>ee.title===T)})&&o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsx("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide",children:"Strategic Assets"}),o.jsx("div",{className:"space-y-4 md:space-y-6 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsx("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide",children:"Culture"}),o.jsxs("div",{className:"space-y-4 md:space-y-6 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg md:text-xl font-bold text-purple-300 mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:"🎭"}),"Ideology"]}),(()=>{const T=i.wiki.find(I=>I.title==="Ideology");return T!=null&&T.regions?o.jsx("div",{className:"space-y-6",children:T.regions.map((I,ee)=>o.jsxs("div",{className:`bg-gradient-to-r from-slate-900/70 to-slate-800/70 rounded-xl border p-4 md:p-6 relative overflow-hidden ${I.highlight?"border-amber-700/40 bg-gradient-to-r from-amber-900/20 to-orange-900/20":"border-purple-700/40"}`,children:[o.jsx("div",{className:`absolute top-0 right-0 w-20 h-20 rounded-full -translate-y-10 translate-x-10 ${I.highlight?"bg-amber-500/20":"bg-purple-500/10"}`}),o.jsx("div",{className:`absolute bottom-0 left-0 w-16 h-16 rounded-full translate-y-8 -translate-x-8 ${I.highlight?"bg-amber-400/20":"bg-purple-400/10"}`}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("h4",{className:`text-lg md:text-xl font-black mb-3 flex items-center gap-2 ${I.highlight?"text-amber-300":"text-purple-300"}`,children:[o.jsx("span",{className:"text-xl",children:I.icon}),I.title]}),o.jsx("div",{className:`text-sm md:text-base leading-relaxed ${I.highlight?"text-amber-200 text-center italic text-lg md:text-xl font-semibold":"text-slate-300"}`,children:vn(I.text)})]})]},ee))}):T!=null&&T.content?T.content.map((I,ee)=>o.jsx("p",{children:vn(I)},ee)):o.jsx("p",{className:"text-slate-400 italic",children:"Ideological information to be added..."})})()]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold text-purple-300 mb-2",children:"Rites"}),((N=i.wiki.find(T=>T.title==="Rites"))==null?void 0:N.content.map((T,I)=>o.jsx("p",{children:vn(T)},I)))||o.jsx("p",{className:"text-slate-400 italic",children:"Information about rites and rituals to be added..."})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsx("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide",children:"Military"}),o.jsx("div",{className:"space-y-4 md:space-y-6 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg md:text-xl font-bold text-red-300 mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:"⚔️"}),"Military"]}),(()=>{const T=i.wiki.find(I=>I.title==="Military");return T!=null&&T.regions?o.jsx("div",{className:"space-y-8",children:T.regions.map((I,ee)=>o.jsxs("div",{className:"bg-gradient-to-r from-slate-900/70 to-slate-800/70 rounded-2xl border border-red-700/40 p-4 md:p-6 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-red-500/10 rounded-full -translate-y-10 translate-x-10"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-red-400/10 rounded-full translate-y-8 -translate-x-8"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("h4",{className:"text-lg md:text-xl font-black text-red-300 mb-3 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:I.icon}),I.title]}),o.jsx("p",{className:"text-slate-300 text-sm md:text-base leading-relaxed mb-4",children:vn(I.text)}),I.subsections&&o.jsx("div",{className:"space-y-4",children:I.subsections.map((se,ge)=>o.jsxs("div",{className:"bg-slate-800/50 rounded-lg border border-red-600/30 p-3 md:p-4",children:[o.jsxs("h5",{className:"text-base md:text-lg font-bold text-red-200 mb-2 flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:se.icon}),se.title]}),o.jsx("p",{className:"text-slate-300 text-sm md:text-base leading-relaxed",children:vn(se.text)})]},ge))})]})]},ee))}):T!=null&&T.content?T.content.map((I,ee)=>o.jsx("p",{children:vn(I)},ee)):o.jsx("p",{className:"text-slate-400 italic",children:"Military information to be added..."})})()]})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsx("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide",children:"Political Situation"}),o.jsx("div",{className:"space-y-6",children:(()=>{const T=i.wiki.find(I=>I.title==="Political Situation");return T!=null&&T.regions?o.jsx("div",{className:"space-y-8",children:T.regions.map((I,ee)=>{const se=()=>I.title==="Allies"?"border-emerald-700/40":I.title==="Enemies"?"border-red-700/40":"border-slate-600/40",ge=()=>I.title==="Allies"?"bg-emerald-500/10":I.title==="Enemies"?"bg-red-500/10":"bg-slate-500/10",W=()=>I.title==="Allies"?"text-emerald-300":I.title==="Enemies"?"text-red-300":"text-slate-300";return o.jsxs("div",{className:`bg-gradient-to-r from-slate-900/70 to-slate-800/70 rounded-xl border ${se()} p-4 md:p-6 relative overflow-hidden`,children:[o.jsx("div",{className:`absolute top-0 right-0 w-20 h-20 ${ge()} rounded-full -translate-y-10 translate-x-10`}),o.jsx("div",{className:`absolute bottom-0 left-0 w-16 h-16 ${ge()} rounded-full translate-y-8 -translate-x-8`}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("h3",{className:`text-lg md:text-xl font-black mb-3 flex items-center gap-2 ${W()}`,children:[o.jsx("span",{className:"text-xl",children:I.icon}),I.title]}),o.jsx("p",{className:"text-slate-300 text-sm md:text-base leading-relaxed mb-4",children:vn(I.text)}),I.relationships&&o.jsx("div",{className:"space-y-4",children:I.relationships.map((k,V)=>o.jsxs("div",{className:"bg-slate-800/50 rounded-lg border border-slate-600/30 p-3 md:p-4",children:[o.jsx("h4",{className:"text-base md:text-lg font-bold text-slate-200 mb-2",children:o.jsx(un,{to:`/lore/factions/${encodeURIComponent(k.faction)}`,className:"text-amber-400 hover:text-amber-300 transition-colors",children:k.faction})}),o.jsxs("div",{className:"space-y-2 text-sm md:text-base",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-slate-400 font-semibold min-w-20",children:"Nature:"}),o.jsx("span",{className:"text-slate-300",children:vn(k.nature)})]}),(k.pact||k.clash||k.description)&&o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-slate-400 font-semibold min-w-20",children:k.pact?"Pact:":k.clash?"Clash:":"Details:"}),o.jsx("span",{className:"text-slate-300",children:vn(k.pact||k.clash||k.description)})]})]})]},V))})]})]},ee)})}):o.jsx("p",{className:"text-slate-400 italic",children:"Political information to be added..."})})()})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsx("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide",children:"Current Status"}),o.jsxs("div",{className:"space-y-4 md:space-y-6 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold text-amber-300 mb-2",children:"Territorial Control"}),((S=i.wiki.find(T=>T.title==="Territorial Control"))==null?void 0:S.content.map((T,I)=>o.jsx("p",{children:vn(T)},I)))||null]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold text-amber-300 mb-2",children:"Political Influence"}),((_=i.wiki.find(T=>T.title==="Political Influence"))==null?void 0:_.content.map((T,I)=>o.jsx("p",{children:vn(T)},I)))||null]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsx("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide",children:"Challenges & Pressures"}),o.jsxs("div",{className:"space-y-4 md:space-y-6 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold text-rose-300 mb-2",children:"Resource Scarcity"}),((L=i.wiki.find(T=>T.title==="Challenges & Pressures"))==null?void 0:L.content.filter(T=>T.startsWith("Resource Scarcity")).map((T,I)=>o.jsx("p",{children:vn(T)},I)))||null]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold text-rose-300 mb-2",children:"Internal Friction"}),((O=i.wiki.find(T=>T.title==="Challenges & Pressures"))==null?void 0:O.content.filter(T=>T.startsWith("Internal Friction")).map((T,I)=>o.jsx("p",{children:vn(T)},I)))||null]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold text-rose-300 mb-2",children:"External Threats"}),((q=i.wiki.find(T=>T.title==="Challenges & Pressures"))==null?void 0:q.content.filter(T=>T.startsWith("External Threats")).map((T,I)=>o.jsx("p",{children:vn(T)},I)))||null]}),o.jsx("div",{children:((M=i.wiki.find(T=>T.title==="Resilience"))==null?void 0:M.content.map((T,I)=>o.jsx("p",{children:vn(T)},I)))||null})]})]})]})});const l=[{key:"lore",label:"Lore",icon:"📖"},{key:"themes",label:"Themes & Playstyle",icon:"⚔️"},{key:"traits",label:"Trait Table",icon:"🎲"},{key:"summary",label:"Summary",icon:"⭐"}];return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsxs("div",{className:"mb-8 md:mb-12 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-orange-500 to-red-600 mb-3 md:mb-4 tracking-wider",children:["⚔️ ",n.toUpperCase()," ⚔️"]}),o.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-amber-400/20 via-orange-500/20 to-red-600/20 blur-xl rounded-full"})]}),o.jsx("div",{className:"w-24 md:w-32 h-1 bg-gradient-to-r from-amber-500 via-orange-500 to-red-600 mx-auto rounded-full shadow-lg shadow-orange-500/50"})]}),o.jsx("div",{className:"flex justify-center mb-6 md:mb-10",children:o.jsx("div",{className:"inline-flex flex-wrap md:flex-nowrap rounded-2xl bg-slate-800/80 border border-slate-700/60 shadow-lg overflow-x-auto w-full md:w-auto",children:l.map(T=>o.jsxs("button",{onClick:()=>t(T.key),className:`px-3 md:px-4 lg:px-8 py-2 md:py-3 font-black text-sm md:text-base lg:text-lg tracking-wide flex items-center gap-1 md:gap-2 transition-all duration-200 border-r border-slate-700/40 last:border-r-0
                                    ${e===T.key?"bg-gradient-to-r from-amber-600 to-orange-700 text-white shadow-xl shadow-amber-900/30":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-amber-300"}
                                `,children:[o.jsx("span",{children:T.icon}),T.label]},T.key))})}),o.jsxs("div",{children:[e==="lore"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-8 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-amber-400 mr-2 md:mr-3",children:"📖"}),"LORE"]}),o.jsx("div",{className:"space-y-3 md:space-y-4 text-slate-300 leading-relaxed",children:i.lore.map((T,I)=>o.jsx("p",{className:"text-sm md:text-base lg:text-lg",children:T},I))})]}),e==="themes"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-8 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-6 md:mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-orange-400 mr-2 md:mr-3",children:"⚔️"}),"THEMES AND PLAYSTYLE"]}),o.jsxs("div",{className:"mb-6 md:mb-8 p-3 md:p-4 lg:p-6 bg-gradient-to-r from-blue-900/50 to-indigo-900/50 rounded-xl border-l-4 border-blue-500",children:[o.jsx("h3",{className:"text-lg md:text-xl lg:text-2xl font-black text-blue-300 mb-3 md:mb-4 tracking-wide",children:i.themesAndPlaystyle.passiveTrait.title}),o.jsx("div",{className:"space-y-2 md:space-y-3",children:i.themesAndPlaystyle.passiveTrait.description.map((T,I)=>o.jsx("p",{className:"text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:T},I))})]}),o.jsxs("div",{className:"mb-6 md:mb-8 p-3 md:p-4 lg:p-6 bg-gradient-to-r from-purple-900/50 to-pink-900/50 rounded-xl border-l-4 border-purple-500",children:[o.jsx("h3",{className:"text-lg md:text-xl lg:text-2xl font-black text-purple-300 mb-3 md:mb-4 tracking-wide",children:i.themesAndPlaystyle.leaderTrait.title}),o.jsx("p",{className:"text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:i.themesAndPlaystyle.leaderTrait.description})]}),o.jsxs("div",{className:"p-3 md:p-4 lg:p-6 bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl border-l-4 border-amber-500",children:[o.jsxs("h3",{className:"text-lg md:text-xl lg:text-2xl font-black text-amber-300 mb-3 md:mb-4 flex items-center tracking-wide",children:[o.jsx("span",{className:"mr-2",children:"🎯"}),"TACTICAL DIRECTIVES"]}),o.jsx("ul",{className:"space-y-2 md:space-y-3",children:i.themesAndPlaystyle.tacticalDirectives.map((T,I)=>o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-amber-400 font-black mr-2 md:mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:T})]},I))})]})]}),e==="traits"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-8 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-6 md:mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-red-400 mr-2 md:mr-3",children:"🎲"}),n.toUpperCase(),": FACTION TRAIT TABLE (1D6)"]}),o.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-600",children:o.jsxs("table",{className:"w-full min-w-[300px] md:min-w-[400px] text-xs md:text-sm lg:text-base",children:[o.jsx("thead",{className:"bg-gradient-to-r from-slate-700 to-slate-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-2 md:px-4 lg:px-6 py-2 md:py-3 lg:py-4 text-left text-white font-black text-sm md:text-base lg:text-lg tracking-wide",children:"ROLL"}),o.jsx("th",{className:"px-2 md:px-4 lg:px-6 py-2 md:py-3 lg:py-4 text-left text-white font-black text-sm md:text-base lg:text-lg tracking-wide",children:"TRAIT (NAME AND EFFECT)"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-600",children:i.traitTable.map(T=>o.jsxs("tr",{className:"hover:bg-slate-700/50 transition-colors",children:[o.jsx("td",{className:"px-2 md:px-4 lg:px-6 py-2 md:py-3 lg:py-4 text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 md:w-8 md:h-8 lg:w-12 lg:h-12 bg-gradient-to-r from-red-500 to-red-600 text-white font-black text-xs md:text-sm lg:text-base lg:text-lg rounded-full shadow-lg shadow-red-500/25",children:T.roll})}),o.jsx("td",{className:"px-2 md:px-4 lg:px-6 py-2 md:py-3 lg:py-4",children:o.jsxs("div",{className:"space-y-1 md:space-y-2",children:[o.jsx("h4",{className:"font-black text-slate-200 text-sm md:text-base lg:text-lg tracking-wide",children:T.name}),o.jsx("p",{className:"text-slate-300 leading-relaxed text-xs md:text-sm lg:text-base lg:text-lg",children:T.description})]})})]},T.roll))})]})})]}),e==="summary"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-8 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsx("div",{className:"space-y-4 md:space-y-6 text-slate-300 leading-relaxed",children:i.summary.map((T,I)=>o.jsx("p",{className:"text-sm md:text-base lg:text-lg",children:T},I))}),o.jsxs("div",{className:"mt-6 md:mt-8 p-3 md:p-4 lg:p-6 bg-gradient-to-r from-emerald-900/50 to-teal-900/50 rounded-xl border-l-4 border-emerald-500",children:[o.jsxs("h3",{className:"text-lg md:text-xl lg:text-2xl font-black text-emerald-300 mb-3 md:mb-4 flex items-center tracking-wide",children:[o.jsx("span",{className:"mr-2",children:"⭐"}),"IDEAL FOR"]}),o.jsx("ul",{className:"space-y-2 md:space-y-3",children:i.playstyleBullets.map((T,I)=>o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-2 md:mr-3 mt-1",children:"✓"}),o.jsx("span",{className:"text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:T})]},I))})]}),o.jsx("div",{className:"mt-6 md:mt-8 p-3 md:p-4 lg:p-6 bg-gradient-to-r from-slate-700/50 to-gray-700/50 rounded-xl border-l-4 border-slate-500",children:o.jsx("p",{className:"text-slate-300 leading-relaxed italic text-sm md:text-base lg:text-lg",children:i.closingNote})})]}),e==="wiki"&&i.wiki&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-8 border border-slate-700/50 backdrop-blur-sm mb-8 md:mb-10",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-6 md:mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-pink-400 mr-2 md:mr-3",children:"📝"}),n.toUpperCase(),": WIKIPEDIA ARTICLES"]}),o.jsx("div",{className:"divide-y divide-slate-700",children:i.wiki.map((T,I)=>o.jsxs("article",{className:"py-6 md:py-8 first:pt-0 last:pb-0",children:[o.jsx("h3",{className:"text-lg md:text-xl lg:text-2xl font-bold text-amber-300 mb-2 md:mb-3 tracking-wide",children:T.title}),o.jsx("div",{className:"space-y-2 md:space-y-3 text-slate-200 text-sm md:text-base lg:text-lg leading-relaxed",children:T.content.map((ee,se)=>o.jsx("p",{children:vn(ee)},se))})]},I))})]})]})]})]})},iC=[{key:"core",label:"Core Scenarios",icon:"🎲"},{key:"heroic",label:"Heroic Scenarios",icon:"👑"}],oC=[{key:"relic-cache-raid",title:"1. Relic Cache Raid",overview:"Hidden caches of forgotten technology lie buried beneath the ash. Both warbands seek to uncover and secure as many as possible.",objective:"Search and control scattered relic markers to score points.",deployment:"Standard opposing table edge deployment, 6'' from each edge. Place 5 Relic Markers across the centerline, at least 6'' apart.",special:['Searching (1 Action): A unit in base contact with a Relic Marker may spend 1 Action to roll 1d6. On a 4+, the cache is found—replace the marker with a "Recovered Cache" token.',"Controlling: A Recovered Cache is controlled if a friendly unit is within 2'' and no enemy is closer."],victory:"1 VP per Recovered Cache controlled at the end of the game. Most VP wins."},{key:"hunt-the-weak",title:"2. Hunt the Weak",overview:"One side must protect a critical asset or injured soldier, while the other moves in for the kill.",objective:"Kill or protect a specific unit designated as the Prey.",deployment:"Defender sets up anywhere within an 8''x8'' center zone. Attacker deploys anywhere 6'' from table edges.",special:["Defender designates one unit as the Prey. That unit gains +1 Morale for the duration of the game.","If the Prey unit is killed, attacker gains 3 VP. If it survives, defender gains 3 VP."],victory:"Most VP wins."},{key:"burn-the-beacon",title:"3. Burn the Beacon",overview:"A vital communication relay must be secured before reinforcements can be summoned—or intercepted.",objective:"Light or destroy the signal beacon in the center of the battlefield.",deployment:"Opposing corners, 6'' in from table edges.",special:["Place a Signal Beacon marker in the center of the table.","A unit in base contact may spend 2 Actions to either Light (Defender) or Destroy (Attacker) the beacon."],victory:["3 VP to the side that successfully activates the Beacon for their purpose.","1 VP per enemy unit removed.","If neither succeeds, the game is a draw."]},{key:"shattered-column",title:"4. Shattered Column",overview:"After a surprise assault, each warband finds itself scattered and disoriented.",objective:"Regroup and eliminate the enemy under difficult circumstances.",deployment:"Players alternate placing units within randomly assigned 6''x6'' scatter zones (roll 1d6 per unit, place in that numbered zone on a 3×3 grid).",special:["Units may not activate within 3'' of another friendly unit during the first round.","Units suffer –1 Morale until they end a turn within 4'' of another friendly unit."],victory:"Standard kill points. 1 VP per enemy unit removed. Bonus 1 VP if you regroup at least 3 units in a single 8'' radius."},{key:"fog-and-flame",title:"5. Fog and Flame",overview:"Swirling ash and flickering embers limit vision. Movement is perilous.",objective:"Eliminate the enemy while navigating a treacherous environment.",deployment:"Standard opposing table edge deployment.",special:["Heavy Fog: Line of sight is limited to 8'' unless firing from Elevated Terrain.","Random Embers: At the start of each round, roll 1D6. On a 4+, choose one terrain feature—it becomes Blazing: any unit ending its activation within it suffers 1 Wound."],victory:["1 VP per enemy unit removed.","2 VP if your Leader survives to the end."]},{key:"ashes-call-to-ashes",title:"6. Ashes Call to Ashes",overview:"A pulsing relic at the battlefield's heart promises power—or doom.",objective:"Control the central Ash Core or use it for a desperate, explosive gambit.",deployment:"Opposing table edges. Place the Ash Core in the exact center.",special:["Activate the Core (1 Action): A unit in base contact may attempt to interact. Roll 1d6:","1–2: Unit suffers 1 Wound.","3–5: Gain 1 VP.","6: You may detonate the core—deal 2 Wounds to all units within 4''.","You may only attempt to activate once per unit per game."],victory:["1 VP per enemy unit removed.","1 VP per successful Core activation.","+2 VP if you trigger the detonation."]}],lC=[{key:"heros-ascent",title:"6. Hero's Ascent",overview:"A forsaken ruin holds remnants of a lost prototype or sacred rite. Both warbands seek it—one to preserve, the other to seize. Only through triumph here may a Hero rise.",objective:"Secure the central structure and hold it at the end of the game. The victor earns the right to unlock a Hero slot.",deployment:"Opposing corners (9'' triangle deployment zones). Place a central Objective Marker (the 'Ascension Node') at the center of the board.",special:["Ascension Node: At the end of the game, if a unit is within 2'' of the node and no enemies are within 2'', that warband claims it.","Reactive Core: Starting Round 2, the Ascension Node pulses with unstable energy. At the start of each round, roll 1D6:","1–3: Nothing happens.","4–5: All units within 3'' of the node suffer 1 Wound.","6: The unit closest to the node gains +1 Power Point this round.","Focused Violence: No VP for kills. The goal is control, not slaughter."],victory:["The warband that controls the Ascension Node at game's end gains 1 Victory Point and unlocks the ability to recruit a Hero by spending CP (following standard rules).","If tied, no Hero slot is gained.","Winner does not roll for Salvage, as they are too busy with preparations for the arriving Hero.","The other warband may roll Salvage as usual."]}],cC=[{roll:1,scenario:"Relic Cache Raid"},{roll:2,scenario:"Hunt the Weak"},{roll:3,scenario:"Burn the Beacon"},{roll:4,scenario:"Shattered Column"},{roll:5,scenario:"Fog and Flame"},{roll:6,scenario:"Hero's Ascent (special scenario, winner unlocks Hero slot)"}];function uC(){const[n,e]=Ne.useState("core");return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-4xl mx-auto p-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-teal-400 to-cyan-400 mb-4 tracking-wider",children:"📜 Scenarios & Missions"}),o.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-emerald-400/20 via-teal-400/20 to-cyan-400/20 blur-xl rounded-full"})]}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500 mx-auto rounded-full shadow-lg shadow-emerald-500/50"}),o.jsx("p",{className:"mt-6 text-slate-400 text-lg max-w-2xl mx-auto",children:"Browse the available scenarios for Ashes of Varnhal. Each scenario includes objectives, deployment, special rules, and victory conditions. Use these lists to select or randomize your next mission."})]}),o.jsx("div",{className:"flex justify-center mb-10",children:o.jsx("div",{className:"inline-flex rounded-2xl bg-slate-800/80 border border-slate-700/60 shadow-lg overflow-hidden",children:iC.map(t=>o.jsxs("button",{onClick:()=>e(t.key),className:`px-8 py-3 font-black text-lg tracking-wide flex items-center gap-2 transition-all duration-200 border-r border-slate-700/40 last:border-r-0
                  ${n===t.key?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white shadow-xl shadow-emerald-900/30":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-emerald-300"}
                `,children:[o.jsx("span",{children:t.icon}),t.label]},t.key))})}),o.jsxs("div",{children:[n==="core"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-cyan-400 mr-3",children:"🎲"}),"Core Scenarios"]}),o.jsx("div",{className:"space-y-10",children:oC.map(t=>o.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-6 border border-cyan-700/30 shadow-lg",children:[o.jsx("h3",{className:"text-2xl font-black text-cyan-300 mb-2 tracking-wide",children:t.title}),o.jsxs("div",{className:"mb-2 text-slate-300",children:[o.jsx("span",{className:"font-black text-cyan-400",children:"Overview:"})," ",t.overview]}),o.jsxs("div",{className:"mb-2 text-slate-300",children:[o.jsx("span",{className:"font-black text-cyan-400",children:"Objective:"})," ",t.objective]}),o.jsxs("div",{className:"mb-2 text-slate-300",children:[o.jsx("span",{className:"font-black text-cyan-400",children:"Deployment:"})," ",t.deployment]}),t.special&&o.jsxs("div",{className:"mb-2 text-slate-300",children:[o.jsx("span",{className:"font-black text-cyan-400",children:"Special Rules:"}),o.jsx("ul",{className:"list-disc list-inside ml-6 mt-2",children:t.special.map((r,i)=>o.jsx("li",{children:r},i))})]}),t.victory&&o.jsxs("div",{className:"mb-2 text-slate-300",children:[o.jsx("span",{className:"font-black text-cyan-400",children:"Victory:"}),Array.isArray(t.victory)?o.jsx("ul",{className:"list-disc list-inside ml-6 mt-2",children:t.victory.map((r,i)=>o.jsx("li",{children:r},i))}):o.jsx("span",{className:"ml-2",children:t.victory})]})]},t.key))})]}),n==="heroic"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-purple-400 mr-3",children:"👑"}),"Heroic Scenarios"]}),o.jsxs("div",{className:"mb-10 bg-gradient-to-r from-purple-900/50 to-pink-900/50 rounded-xl p-6 border-l-4 border-purple-500",children:[o.jsx("h3",{className:"text-2xl font-black text-purple-300 mb-4 tracking-wide",children:"Unlocking Hero Slots via Win Conditions"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"Heroic Scenarios represent pivotal battles or quests where warbands can earn the right to add powerful Hero units to their roster. Unlike standard matches, these scenarios have special objectives and increased stakes."}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Trigger:"})," A Heroic Scenario is played either by player choice or drawn randomly from an Optional Scenario Table."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Win Condition:"})," The winning warband unlocks a Hero slot, allowing them to recruit a Hero unit by spending Creation Points (CP) at the start of their next roster building phase."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Balance:"})," To maintain fairness, Heroes unlocked via these scenarios count against the warband's total CP limit and are not guaranteed to be game-breaking due to their cost."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Accessibility:"})," Both sides have the opportunity to play Heroic Scenarios, ensuring no faction is excluded from Hero access."]})]})]})]}),o.jsxs("div",{className:"mb-10 bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl p-6 border-l-4 border-amber-500",children:[o.jsx("h3",{className:"text-2xl font-black text-amber-300 mb-4 tracking-wide",children:"Optional Scenario Table"}),o.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed",children:"To add unpredictability and variety to campaigns, an Optional Scenario Table can be rolled on after each battle or at campaign milestones:"}),o.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-600",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gradient-to-r from-slate-700 to-slate-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-white font-black text-lg tracking-wide",children:"ROLL (1D6)"}),o.jsx("th",{className:"px-6 py-4 text-left text-white font-black text-lg tracking-wide",children:"SCENARIO"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-600",children:cC.map(t=>o.jsxs("tr",{className:"hover:bg-slate-700/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-12 h-12 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-black text-lg rounded-full shadow-lg shadow-amber-500/25",children:t.roll})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"text-slate-300 leading-relaxed",children:t.scenario})})]},t.roll))})]})})]}),o.jsx("div",{className:"space-y-10",children:lC.map(t=>o.jsxs("div",{className:"bg-gradient-to-r from-purple-800/60 to-pink-800/60 rounded-xl p-6 border border-purple-700/30 shadow-lg",children:[o.jsx("h3",{className:"text-2xl font-black text-purple-300 mb-2 tracking-wide",children:t.title}),o.jsxs("div",{className:"mb-2 text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Overview:"})," ",t.overview]}),o.jsxs("div",{className:"mb-2 text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Objective:"})," ",t.objective]}),o.jsxs("div",{className:"mb-2 text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Deployment:"})," ",t.deployment]}),t.special&&o.jsxs("div",{className:"mb-2 text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Special Rules:"}),o.jsx("ul",{className:"list-disc list-inside ml-6 mt-2",children:t.special.map((r,i)=>o.jsx("li",{children:r},i))})]}),t.victory&&o.jsxs("div",{className:"mb-2 text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Victory:"}),Array.isArray(t.victory)?o.jsx("ul",{className:"list-disc list-inside ml-6 mt-2",children:t.victory.map((r,i)=>o.jsx("li",{children:r},i))}):o.jsx("span",{className:"ml-2",children:t.victory})]})]},t.key))})]})]})]})]})}const dC={"House Kaevaryn":[{id:"",name:"Sable Trooper",type:"Troops",faction:"House Kaevaryn",cost:50,baseCost:50,selectedWeapons:[],stats:{move:'6"',defense:"3",vigor:4,actions:2,resolve:"2",morale:5,power:0,reactor:0},abilities:[]},{id:"",name:"Grenadier",type:"Troops",faction:"House Kaevaryn",cost:55,baseCost:55,selectedWeapons:[],stats:{move:'6"',defense:"4",vigor:4,actions:2,resolve:"2",morale:5,power:0,reactor:0},abilities:[{name:"Frontline Shock",description:"+1D on first melee attack after moving."},{name:"Blast Specialist",description:"Grenades have +1'' splash radius."}]},{id:"",name:"Knight-Courier",type:"Elite",faction:"House Kaevaryn",cost:60,baseCost:60,selectedWeapons:[],stats:{move:'7"',defense:"3",vigor:4,actions:2,resolve:"2",morale:6,power:0,reactor:0},abilities:[{name:"Swift Messenger",description:"Once per round, +2'' free Move before or after activation (Does not trigger opportunity attacks)."},{name:"Quick Reflexes",description:"+1D to Defense roll against Melee attacks."}]},{id:"",name:"Scrivener-Ritesman",type:"Elite",faction:"House Kaevaryn",cost:80,baseCost:80,selectedWeapons:[],stats:{move:'5"',defense:"3",vigor:3,actions:2,resolve:"3",morale:5,power:2,reactor:0},abilities:[{name:"Lorekeeper",description:"Aura of +1 Morale to allies within 6''."},{name:"Caster",description:"Has access to the following Powers."}],powers:[{name:"Sigil of Interdiction",flavor:"No passage but by oaths sealed. No action but by Name revoked.",baseEffect:"Target enemy within 12'' loses 1 Action on their next activation.",overdrive:["2+ Successes: Target enemy loses 1 Action more.","3+ Successes: Target's Defense is also lowered by 1 until end of turn.","4+ Successes: Target's Defense is also lowered by 1 until end of turn."],critFail:"Caster loses 1 Action next turn and suffers –1 Defense until end of turn per Critical Fail."},{name:"Archivist's Doomscript",flavor:"Their fate was written before the ink dried.",baseEffect:"Target enemy takes 1 Wound.",overdrive:["2+: Target enemy takes additional 1 Wound","3+: Target enemy takes another additional 1 Wound","4+: Target also becomes Staggered"],critFail:"Caster suffers 1 Wound per Critical Fail."},{name:"Sealed Ordinance",flavor:"I inscribe prohibition: let no machine fire nor lash obey.",baseEffect:"Target enemy within 12'' suffers –1 Dice on their weapon attacks during their next activation.",overdrive:["2+ Successes: Target enemy suffers another –1 Dice.","3+ Successes: Target's attacks lose all special traits (e.g., Brutal, Precise) this round.","4+ Successes: Weapon critical damage is also reduced by 1 (to a minimum of 1) until end of next activation."],critFail:"Caster suffers Wound (1) and cannot use any Rites until they successfully Rally per Critical Fail."}]},{id:"",name:"Iron Caste Mechanist",type:"Elite",faction:"House Kaevaryn",cost:110,baseCost:110,selectedWeapons:[],stats:{move:'6"',defense:"4",vigor:4,actions:2,resolve:"3",morale:7,power:2,reactor:0},abilities:[{name:"Repair Protocol",description:"Heal 1 Wound on a friendly unit within 4'' once per round."},{name:"Caster",description:"Has access to the following powers:"}],powers:[{name:"Rite of Binding Conduit",flavor:"Flesh is fault. Circuit is certainty.",baseEffect:"Select one friendly unit within 6''. That unit gains +1 Defense until the start of your next turn.",overdrive:["2+ successes: The unit also gains +1 Movement until the start of your next turn.","3+ successes: The unit gains +1 Action on its next activation.","4+ successes: The Mechanist may choose a second friendly unit within '' to also gain the base effect."],critFail:"For each Crit Fail, the Mechanist suffers –1 Action on their next activation."},{name:"Subsystem Reforge",flavor:"Systems corrupted—rerouting integrity.",baseEffect:"Remove 1 Condition (e.g., Blinded, Bleeding, Suppressed) from a friendly unit within 3''. That unit also heals 1 Resilience if it was affected by a Condition.",overdrive:["2+ successes: Remove up to 2 Conditions from the target.","3+ successes: The target gains +1 Action this activation (if they have not yet activated this round).","4+ successes: Target becomes immune to Conditions until the end of the round."],critFail:"For each Crit Fail, the Mechanist becomes Suppressed and cannot use Powers next round."},{name:"Electrostatic Field",flavor:"The unseen current binds and disrupts.",baseEffect:"Choose one enemy unit within 6''. That unit suffers –1 Action on its next activation and cannot use Reactions during that activation.",overdrive:["2+ successes: The target also suffers –1 Defense until the start of your next turn.","3+ successes: The Mechanist may select a second enemy unit within 4'' of the first target to suffer the same effects.","4+ successes: Enemies affected cannot benefit from cover until the start of your next turn."],critFail:"For each Crit Fail, the Mechanist becomes Staggered and loses 1 Action next turn."}]},{id:"",name:"Bonded Framelet Knight",type:"Elite",faction:"House Kaevaryn",cost:130,baseCost:130,selectedWeapons:[],stats:{move:'7"',defense:"4",vigor:6,actions:2,resolve:"3",morale:6,power:0,reactor:2},abilities:[{name:"Knight's Resolve (Aura)",description:"Allies in 2'' gain +1 Morale & +1 Defense."},{name:"Heavy Strike",description:"+1 Damage on charging melee attacks."},{name:"Bonded Valor",description:"Once per round, when you roll a Critical Fail on Defense, a friendly unit within 2'' takes that Wound instead."},{name:"Weapon Overdrive",description:"May add up to (Reactor) Dice to Attack roll, but takes that many wounds when the first Critical Fail is rolled."}]}],"Fangs of the Pale Hunger":[{id:"",name:"Alpha",type:"Elite",faction:"Fangs of the Pale Hunger",cost:105,baseCost:105,selectedWeapons:[],stats:{move:"6",defense:"5",vigor:6,actions:3,resolve:"2",morale:6,power:0,reactor:0}},{id:"",name:"Beastman Raider",type:"Troops",faction:"Fangs of the Pale Hunger",cost:60,baseCost:60,selectedWeapons:[],stats:{move:"6",defense:"4",vigor:5,actions:2,resolve:"2",morale:4,power:0,reactor:0}},{id:"",name:"Beastman Harrier",type:"Troops",faction:"Fangs of the Pale Hunger",cost:50,baseCost:50,selectedWeapons:[],stats:{move:"8",defense:"3",vigor:4,actions:2,resolve:"2",morale:3,power:0,reactor:0}},{id:"",name:"Beastman Ravager",type:"Elites",faction:"Fangs of the Pale Hunger",cost:75,baseCost:75,selectedWeapons:[],stats:{move:"5",defense:"5",vigor:6,actions:2,resolve:"2",morale:5,power:0,reactor:0}},{id:"",name:"Beastman Shaman",type:"Elites",faction:"Fangs of the Pale Hunger",cost:105,baseCost:105,selectedWeapons:[],stats:{move:"6",defense:"3",vigor:5,actions:2,resolve:"3",morale:5,power:2,reactor:0},abilities:[{name:"Bloodsong of Rage",description:`Effect: Friendly unit within 8" gains +1 Dice to melee attacks until end of turn.

Overdrive:

2+: +1 Die

3+: Add Brutal to attacks

4+: Unit gains +1 Action this turn

Backlash: Target unit takes 1 Wound.`},{name:"Fleshwarp Chant",description:`Effect: Target enemy within 8" takes -1 Defense until end of next turn.

Overdrive:

2+: -1 Defense

3+: Target cannot Evade or use Cover bonuses

4+: Target suffers 1 Mortal Wound

Backlash: Caster cannot Move next activation.`},{name:"Beastmind Dissonance",description:`Effect: Target enemy suffers -1 Resolve and -1 Morale until end of game round.

Overdrive:

2+: -1 Resolve/Morale

3+: Target must test Morale immediately

4+: Also becomes Staggered

Backlash: All Beastman units within 6" test Morale immediately.

`}]},{id:"",name:"Reclaimer",type:"Troops",faction:"Fangs of the Pale Hunger",cost:60,baseCost:60,selectedWeapons:[],stats:{move:'6"',defense:"4",vigor:5,actions:2,morale:4,resolve:2,power:0,reactor:0},abilities:[{name:"Flicker Protocol (1/game)",description:"Once per battle, this unit may activate dormant reflex enhancers at the start of its activation. Until the end of the turn, it may reroll all failed Defense dice."}]},{id:"",name:"Berserk-Kernel",type:"Troops",faction:"Fangs of the Pale Hunger",cost:75,baseCost:75,selectedWeapons:[],stats:{move:'5"',defense:"5",vigor:6,actions:2,morale:5,resolve:2,power:0,reactor:0},abilities:[{name:"Overstim Gland",description:"At the start of each of this unit's activations, roll 1D6. On a result of 6, it gains +1 Action for this turn but suffers 1 Wound at the end of its activation."}]},{id:"",name:"Harrier",type:"Troops",faction:"Fangs of the Pale Hunger",cost:50,baseCost:50,selectedWeapons:[],stats:{move:'8"',defense:"3",vigor:4,actions:2,morale:3,resolve:2,power:0,reactor:0},abilities:[{name:"Loping Dash",description:"When performing a Move action, may move through friendly units and ignore Difficult Ground for that Move."}]},{id:"",name:"Neural Shardbearer",type:"Elite",faction:"Fangs of the Pale Hunger",cost:105,baseCost:105,selectedWeapons:[],stats:{move:'6"',defense:"3",vigor:5,actions:2,morale:5,resolve:3,power:2,reactor:0},abilities:[{name:"Shard-Sync Protocol",description:"At the start of its activation, may target one friendly unit within 6''. Until end of turn, it may choose to either: Transfer up to 2 Wounds taken by the target to itself (immediately), or grant the target rerolls on all 1s when making Attack rolls this round."}],powers:[{name:"Protocol: Memory Bleed",flavor:"They were not built to forget.",baseEffect:"Choose an enemy unit within 8''. That unit becomes Confused until the end of its next activation. Confused units must target the nearest model (friend or foe) with their first Action, if eligible.",overdrive:["2+ successes: The target also suffers –1 Defense until the end of the turn.","3+ successes: Target cannot receive buffs or reroll dice during its next activation.","4+ successes: You may choose a second enemy unit within 4'' of the original target to also become Confused."],critFail:"For each [Crit Fail], the Neural Shardbearer suffers –1 Action next turn."},{name:"Protocol: Ghost Signal",flavor:"Echoes carry more than words.",baseEffect:"Choose one friendly unit within 6''. That unit may immediately reroll any number of failed dice in its next Attack or Defense roll.",overdrive:["2+ successes: The target also gains +1 Defense until the start of your next turn.","3+ successes: The target also recovers 1 Wound.","4+ successes: You may select a second friendly unit within 6'' to receive the same effect."],critFail:"For each [Crit Fail], the Shardbearer suffers 1 Wound."},{name:"Protocol: Fate-Shard Detonation",flavor:"All threads tangle in the end.",baseEffect:"All friendly units within 6'' of the Shardbearer are immediately affected by the top Fate Card drawn. This includes the Shardbearer. The effect resolves as written—whether beneficial or harmful.",overdrive:["2+ successes: You may reroll the Fate Card once and keep either result.","3+ successes: Friendly units affected gain +1 Morale this round.","4+ successes: If the card deals Wounds, ignore the first Wound suffered by each friendly unit."],critFail:"For each [Crit Fail], the Shardbearer immediately draws and applies an additional Fate Card effect to itself."}]},{id:"",name:"Directive-Lost",type:"Elite",faction:"Fangs of the Pale Hunger",cost:105,baseCost:105,selectedWeapons:[],stats:{move:'6"',defense:"5",vigor:6,actions:3,morale:6,resolve:3,power:0,reactor:0},abilities:[{name:"Last Directive (1/game)",description:"Once per battle, if within 6'' of two or more friendly units, Directive-Lost may issue a burst command: choose two nearby friendly units to each make a free 1-Action Move or Melee Attack."}]}],"House Duresse":[{id:"",name:"Silent Votary",type:"Troops",faction:"House Duresse",cost:50,baseCost:50,selectedWeapons:[],stats:{move:'6"',defense:"3",vigor:4,actions:2,resolve:"2",morale:5,power:0,reactor:0},abilities:[],powers:[]},{id:"",name:"Aegis Suppressor",type:"Troops",faction:"House Duresse",cost:60,baseCost:60,selectedWeapons:[],stats:{move:'5"',defense:"4",vigor:4,actions:2,resolve:"3",morale:6,power:0,reactor:0},abilities:[{name:"Bastion Field",description:'While this unit remains stationary, all friendly units within 3" gain +1 Defense.'},{name:"Shield Anchor",description:"Cannot be involuntarily moved by enemy effects or powers."}],powers:[]},{id:"",name:"Pallid Stalker",type:"Elite",faction:"House Duresse",cost:65,baseCost:65,selectedWeapons:[],stats:{move:'7"',defense:"3",vigor:4,actions:2,resolve:"1",morale:5,power:1,reactor:0},abilities:[{name:"Bleed Forward",description:'If this unit causes a Wound in melee, it may move 2" immediately after.'}],powers:[{name:"Veilskin",flavor:"The world sees nothing but fog and shadow.",baseEffect:"This unit cannot be targeted by ranged attacks from over 12'' away unless the attacker is on Elevated terrain.",overdrive:["2+ successes: This unit gains +1 Defense until the start of your next turn.","3+ successes: This unit gains +2'' to move this turn.","4+ successes: This unit cannot be targeted by ranged attacks until the start of your next turn."],critFail:"The unit becomes visible to all enemy units, and can be targeted by attacks through Blocking terrain made by units within 12''."}]},{id:"",name:"Hexbound Harmonist",type:"Elite",faction:"House Duresse",cost:85,baseCost:85,selectedWeapons:[],stats:{move:'5"',defense:"3",vigor:3,actions:2,resolve:"3",morale:5,power:2,reactor:0},abilities:[{name:"Resonance Field",description:'Once per round, an allied unit within 6" may re-roll 1 failed die.'}],powers:[{name:"Chime of the Fractured Will",flavor:"A discordant toll unravels command.",baseEffect:"Choose one enemy unit within 8''. That unit suffers --1 Morale until the end of the round.",overdrive:["2+ successes: The target also suffers --1 Action on its next activation.","3+ successes: The target cannot contest Objectives this round.","4+ successes: The target must take a Morale Test immediately."],critFail:"Caster suffers --1 Morale until the start of your next turn."},{name:"Echoes of Harmony",flavor:"Let all things move in concert.",baseEffect:"Select one friendly unit within 6''. That unit gains +1 to all dice rolls for the duration of its next activation.",overdrive:["2+ successes: The target may reroll 1 failed die during its next activation.","3+ successes: The target gains +1 Defense until the end of the round.","4+ successes: The target also restores 1 Wound."],critFail:"The caster may not use further powers this round."},{name:"Binding Pulse",flavor:"Flesh and thought still in rhythm.",baseEffect:"Select an enemy unit within 6''. That unit is Slowed until the end of the round.",overdrive:["2+ successes: The target also suffers --1 Defense until its next activation.","3+ successes: The target cannot declare Charges this round.","4+ successes: The target immediately ends any current effects that grant extra Actions or Movement."],critFail:"The Harmonist suffers 1 Wound per Critical fail."}]},{id:"",name:"Obsidian Chamberlain",type:"Elite",faction:"House Duresse",cost:115,baseCost:115,selectedWeapons:[],stats:{move:'6"',defense:"4",vigor:5,actions:2,resolve:"2",morale:6,power:1,reactor:1},abilities:[{name:"Battlefield Mandate",description:"Once per game, you may interrupt initiative and activate (Reactor) friendly units out of sequence and take (Reactor) Wounds."}],powers:[{name:"Order: Strike True",flavor:"Precision guides the hand of all.",baseEffect:"Aura 6'': All friendly units within range gain +1 to hit on the Attack Rolls.",overdrive:["2+ successes: Allies also gain +1 Defense until the start of your next turn.","3+ successes: Allies may re-roll one failed attack die during that attack.","4+ successes: Aura radius increases to 8'' for this activation."],critFail:"Aura 6'': All friendly unit within range gain -[Critical Fails] dice to Attack Rolls"}]},{id:"",name:"Judicator of the Vow",type:"Elite",faction:"House Duresse",cost:135,baseCost:135,selectedWeapons:[],stats:{move:'6"',defense:"5",vigor:6,actions:2,resolve:"3",morale:6,power:0,reactor:2},abilities:[{name:"Unbreaking Frame",description:"Gains +1 Defense when within 3'' of any ally."},{name:"Seal of Dominion",description:"Cannot be suppressed or slowed by effects or terrain."},{name:"Order: Cast it Down",description:"Choose [Reactor] units within 6''. These units and Judicator then attack the same enemy unit simultaneously, regardless of their activation status. Take [Reactor] wounds on every unit if Critical fail is rolled on Attack Roll."}],powers:[]}],"Ash-Brethren":[{id:"",name:"Scrapprince",type:"Boss",faction:"Ash-Brethren",cost:35,baseCost:35,selectedWeapons:[],stats:{move:"",defense:"",vigor:0,actions:0,resolve:"",morale:0,power:0,reactor:0}},{id:"",name:"Junker",type:"Scavenger",faction:"Ash-Brethren",cost:15,baseCost:15,selectedWeapons:[],stats:{move:"",defense:"",vigor:0,actions:0,resolve:"",morale:0,power:0,reactor:0}},{id:"",name:"Ember Scout",type:"Troops",faction:"Ash-Brethren",cost:50,baseCost:50,selectedWeapons:[],stats:{move:'6"',defense:"3",vigor:4,actions:2,morale:5,resolve:2,power:0,reactor:0},abilities:[{name:"Fleetfooted",description:"Gains +1 Movement and ignores Difficult Terrain."},{name:"Sharpshooter",description:"May reroll one failed attack die per activation if target is within 12''."}]},{id:"",name:"Ash Embers",type:"Troops",faction:"Ash-Brethren",cost:45,baseCost:45,selectedWeapons:[],stats:{move:'8"',defense:"2",vigor:3,actions:2,morale:5,resolve:1,power:0,reactor:0},abilities:[{name:"Deathflare",description:"Upon destruction, this unit places a Burning 1 token on up to two enemy units within 4''."},{name:"Expendable",description:"This unit may not buy any equipment."},{name:"No Experience",description:"Cannot gain Experience or upgrades."}]},{id:"",name:"Cinder Veteran",type:"Elite",faction:"Ash-Brethren",cost:65,baseCost:65,selectedWeapons:[],stats:{move:'6"',defense:"3",vigor:4,actions:2,morale:6,resolve:2,power:1,reactor:0},abilities:[{name:"Kindled Anger",description:"Gains +1 Attack while adjacent to at least one Burning enemy."}],powers:[{name:"Ashborne Fury",flavor:"The ashes of our fallen ignite my resolve.",baseEffect:"At the start of your activation, count allied Troop units destroyed this turn within 6''. For each, gain +1 Attack and +1 Defense until the end of this activation (max +3).",overdrive:["2+ successes: Additionally, you may move up to 3'' ignoring terrain penalties.","3+ successes: You may make a free melee attack after moving.","4+ successes: Heal 1 Wound."],critFail:"Suffer [Critical Fail] Wounds per allied Troop units destroyed this turn within 6''."}]},{id:"",name:"Pyre Warden",type:"Elite",faction:"Ash-Brethren",cost:90,baseCost:90,selectedWeapons:[],stats:{move:'4"',defense:"4",vigor:5,actions:2,morale:6,resolve:2,power:0,reactor:1},abilities:[{name:"Flameguard Aura (Aura 4'')",description:"Allies gain +[Reactor] Defense while they have any Wounds lost."},{name:"Sacred Ashes",description:"When an allied Troop unit is destroyed within 6'', this unit heals 1 Wound or gains 1 Reactor."}]},{id:"",name:"Blight Herald",type:"Elite",faction:"Ash-Brethren",cost:100,baseCost:100,selectedWeapons:[],stats:{move:'5"',defense:"3",vigor:3,actions:2,morale:5,resolve:3,power:2,reactor:0},abilities:[{name:"Mourning Chorus",description:"When an allied unit dies within 6'', you may cause an enemy unit within 6'' to suffer a Morale test."},{name:"Pyre's Whisper",description:"Once per round, a friendly unit within 6'' may reroll one failed Defense die."}],powers:[{name:"Whispering Embers",flavor:"Hope flickers even in the darkest flames.",baseEffect:"Grant a friendly unit within 6'' the ability to reroll one failed Defense die during their next activation.",overdrive:["2+ successes: The reroll can be attempted on two dice.","3+ successes: The unit gains +1 Morale until the start of your next turn.","4+ successes: The unit gains +1 Action on its next activation."],critFail:"Caster must reroll [Critical Hits] successful Defence Dice until next activation."},{name:"Eulogy of Shadows",flavor:"Silence falls, but our voices echo.",baseEffect:"Select one enemy unit within 6''. That unit must pass a Morale test or suffer –1 Action on its next activation.",overdrive:["2+ successes: The enemy unit also suffers –1 Defense until the start of your next turn.","3+ successes: The enemy unit may not move during its next activation.","4+ successes: The enemy unit cannot use Ranged attacks during its next activation."],critFail:"Caster immediately breaks and falls back [Critical Fail] Dice inches towards the nearest table border."},{name:"Gravebound Command",flavor:"Rise, and fight for the fallen.",baseEffect:"Choose one friendly Troop unit within 6''. That unit gains +1 Attack and may ignore negative status effects for this activation.",overdrive:["2+ successes: The chosen unit may reroll one failed attack die this activation.","3+ successes: The chosen unit may perform a free Charge action immediately after its activation.","4+ successes: After this unit's activation, immediately activate one other friendly Troop unit within 6''."],critFail:"Caster loses [Critical Fail] Wounds."}]},{id:"",name:"Inferno Castellan",type:"Elite",faction:"Ash-Brethren",cost:130,baseCost:130,selectedWeapons:[],stats:{move:'5"',defense:"5",vigor:6,actions:2,morale:6,resolve:3,power:0,reactor:2},abilities:[{name:"Death's Beacon",description:"When an allied Troop unit is destroyed within 6'', gain +1 Reactor."},{name:"Final Ignition",description:"When this unit destroys an enemy, it may gain +1 Reactor."},{name:"Molten Retribution",description:"Spend Action to deal Burning [Reactor] to all enemies within 3''."}]},{id:"",name:"Ashen Cardinal",type:"Elite",faction:"Ash-Brethren",cost:140,baseCost:140,selectedWeapons:[],stats:{move:'6"',defense:"5",vigor:4,actions:2,morale:6,resolve:3,power:2,reactor:0},abilities:[{name:"Sanctified Ember (Aura 6'')",description:"While an allied Troop unit is destroyed within range, all friendly Elites gain +1 Action and +1 Defense until the start of your next turn."},{name:"Flameborne Retribution",description:"Each time this unit suffers a Wound, it may immediately unleash a free melee attack against an adjacent enemy."},{name:"Final Benediction",description:"Upon death, all enemy units within 6'' suffer Burning 1 and must take a Morale test."}],powers:[{name:"Ashen Veil",flavor:"Let the smoke shield us.",baseEffect:"All friendly Elites within 6'' gain +1 Defense until the start of your next turn.",overdrive:["2+ successes: The Elites also gain +1 Move this activation.","3+ successes: Friendly Elites may ignore negative status effects until the start of your next turn.","4+ successes: You may immediately activate one friendly Elite unit within 6''."],critFail:"The caster becomes Suppressed until the start of their next activation."},{name:"Seething Strike",flavor:"The flame of vengeance burns within!",baseEffect:"Make one melee attack with +1 to hit and +1 Damage.",overdrive:["2+ successes: The attack causes Burning 1 on the target.","3+ successes: The target is pushed 2'' directly away.","4+ successes: After the attack, the caster heals 1 Wound."],critFail:"The caster suffers [Critical Fails] Wounds this activation."},{name:"Emberlord's Rally",flavor:"Rise and fight, as one flame!",baseEffect:"Select one friendly Elite unit within 6''. That unit gains +1 Action and +1 Defense until the start of your next turn.",overdrive:["2+ successes: The chosen unit may immediately make a free Move action.","3+ successes: If the chosen unit is adjacent to an enemy after moving, it may make a free melee attack.","4+ successes: Immediately activate one additional friendly Elite unit within 6''."],critFail:"The caster suffers [Critical Fails] Wounds this activation."}]}]},hC={"House Kaevaryn":[{name:"Melee Weapon",range:'0"',dice:3,critEffect:"",critDmg:1,abilities:[],type:"Melee",cost:0,allowedFor:"all"},{name:"Short Sword",range:'0"',dice:3,critEffect:"",critDmg:1,abilities:["Flank Advantage"],type:"Melee",cost:5,allowedFor:"all"},{name:"Shotgun",range:'9"',dice:3,critEffect:"Scatter",critDmg:2,abilities:[],type:"Ranged",cost:10,allowedFor:"all"},{name:"Grenades",range:'9"',dice:3,critEffect:"Area Splash 2",critDmg:2,abilities:["One Use"],type:"Ranged",cost:10,allowedFor:"all"},{name:"Rad Pistol",range:'6"',dice:2,critEffect:"",critDmg:4,abilities:["Irradiated"],type:"Ranged",cost:20,allowedFor:"all"},{name:"Laser Carbine",range:'12"',dice:3,critEffect:"",critDmg:1,abilities:["Reliable"],type:"Ranged",cost:10,allowedFor:"all"},{name:"Crossbow",range:'10"',dice:3,critEffect:"Pinning 1+[Critical Hit]",critDmg:2,abilities:["Pinning 1"],type:"Ranged",cost:15,allowedFor:"all"},{name:"Rad Pistol Pair",range:'6"',dice:4,critEffect:"",critDmg:4,abilities:["Irradiated"],type:"Ranged",cost:30,allowedFor:"elite"},{name:"Powered Sword",range:'0"',dice:4,critEffect:"",critDmg:2,abilities:["Brutal"],type:"Melee",cost:15,allowedFor:"elite"},{name:"Heavy Rifle",range:'15"',dice:4,critEffect:"",critDmg:3,abilities:["Scoped"],type:"Ranged",cost:25,allowedFor:"elite"},{name:"Plasma Lance",range:'1"',dice:5,critEffect:"Plasma Burst",critDmg:3,abilities:[],type:"Melee",cost:35,allowedFor:"elite"},{name:"Electro-whip",range:'2"',dice:3,critEffect:"Chain Hit",critDmg:2,abilities:[],type:"Melee",cost:20,allowedFor:"elite"},{name:"Sniper Rifle",range:'20"',dice:4,critEffect:"",critDmg:4,abilities:["Scoped"],type:"Ranged",cost:40,allowedFor:"elite"},{name:"Flamethrower",range:'6"',dice:4,critEffect:"Burning 1+[Critical Hit]",critDmg:2,abilities:["Burning 1"],type:"Ranged",cost:35,allowedFor:"elite"},{name:"Mechanist Toolkit",range:'0"',dice:6,critEffect:"Repair 1 Wound (self/ally)",critDmg:0,abilities:["Support: May be used once per turn instead of an attack.","Cannot be used in melee."],type:"Tool",cost:30,allowedFor:"elite"}],"Fangs of the Pale Hunger":[{name:"Melee Weapon",range:'0"',dice:3,critEffect:"",critDmg:1,cost:0},{name:"Cleaver",range:'0"',dice:4,critEffect:"Brutal",critDmg:2,cost:15},{name:"Bow",range:'6"',dice:3,critEffect:"",critDmg:1,cost:5},{name:"Hammer",range:'0"',dice:5,critEffect:"Brutal",critDmg:1,cost:20},{name:"Scrap Blade",range:'0"',dice:3,critEffect:"",critDmg:1,type:"Melee",cost:0,allowedFor:"all"},{name:"Spine Gutter",range:'0"',dice:4,critEffect:"",critDmg:1,type:"Melee",cost:10,allowedFor:"all"},{name:"Hooked Flail",range:'0"',dice:3,critEffect:"",critDmg:1,type:"Melee",cost:15,allowedFor:"all"},{name:"Junk Rifle",range:'10"',dice:3,critEffect:"",critDmg:1,type:"Ranged",cost:10,allowedFor:"all"},{name:"Scrapbow",range:'10"',dice:3,critEffect:"",critDmg:1,type:"Ranged",cost:15,allowedFor:"all"},{name:"Implant Harpoon",range:'6"',dice:3,critEffect:"",critDmg:1,type:"Ranged",cost:20,allowedFor:"all"},{name:"Mutagen Spitter",range:'8"',dice:4,critEffect:"",critDmg:1,type:"Ranged",cost:25,allowedFor:"elite"},{name:"Fleshrender Talons",range:'0"',dice:4,critEffect:"",critDmg:2,type:"Melee",cost:10,allowedFor:"elite"},{name:"Plasma Torch Claws",range:'0"',dice:5,critEffect:"",critDmg:3,type:"Melee",cost:30,allowedFor:"elite"},{name:"Barbed Chain",range:'2"',dice:3,critEffect:"",critDmg:2,type:"Melee",cost:20,allowedFor:"elite"}],"Ash-Brethren":[{name:"Claws",range:"Melee",dice:4,critEffect:"Bleed",critDmg:4,cost:12},{name:"Melee Weapon",range:'0"',dice:3,critEffect:"",critDmg:1,type:"Melee",cost:0,allowedFor:"all"},{name:"Short Sword",range:'0"',dice:3,critEffect:"",critDmg:1,type:"Melee",cost:5,allowedFor:"all"},{name:"Laser Carbine",range:'12"',dice:3,critEffect:"",critDmg:1,type:"Ranged",cost:10,allowedFor:"all"},{name:"Ashbrand Blade",range:'0"',dice:4,critEffect:"",critDmg:2,type:"Melee",cost:15,allowedFor:"all"},{name:"Incendiary Machine Gun",range:'10"',dice:4,critEffect:"Burning 1",critDmg:2,type:"Ranged",cost:20,allowedFor:"all"},{name:"Flare Grenades",range:'8"',dice:3,critEffect:"Burning 1",critDmg:1,type:"Ranged",cost:15,allowedFor:"all"},{name:"Pyrestave",range:'2"',dice:4,critEffect:"Burning 2",critDmg:2,type:"Melee",cost:25,allowedFor:"elite"},{name:"Molten Mace",range:'0"',dice:5,critEffect:"Burning 2",critDmg:3,type:"Melee",cost:20,allowedFor:"elite"},{name:"Plasma Glaive",range:'1"',dice:5,critEffect:"Burning 2",critDmg:3,type:"Melee",cost:30,allowedFor:"elite"},{name:"Ashflame Projector",range:'8"',dice:4,critEffect:"Burning 2",critDmg:2,type:"Ranged",cost:35,allowedFor:"elite"}],"House Duresse":[{name:"Melee Weapon",range:'0"',dice:3,critEffect:"",critDmg:1,abilities:[],type:"Melee",cost:0,allowedFor:"all"},{name:"Short Sword",range:'0"',dice:3,critEffect:"",critDmg:1,abilities:["Flank Advantage"],type:"Melee",cost:5,allowedFor:"all"},{name:"Crossbow",range:'10"',dice:3,critEffect:"Pinning 1+[Critical Hit]",critDmg:2,abilities:["Pinning 1"],type:"Ranged",cost:15,allowedFor:"all"},{name:"Laser Carbine",range:'12"',dice:3,critEffect:"",critDmg:1,abilities:["Reliable"],type:"Ranged",cost:10,allowedFor:"all"},{name:"Suppressor Machine Gun",range:'10"',dice:3,critEffect:"Suppressive [Critical Hit]",critDmg:2,abilities:[],type:"Ranged",cost:15,allowedFor:"all"},{name:"Hexlash Rod",range:'6"',dice:3,critEffect:"Disruptive Strike",critDmg:1,abilities:[],type:"Hybrid",cost:10,allowedFor:"all"},{name:"Sniper Rifle",range:'20"',dice:4,critEffect:"",critDmg:4,abilities:["Scoped"],type:"Ranged",cost:40,allowedFor:"elite"},{name:"Silencer Pike",range:'2"',dice:4,critEffect:"Silence Protocol",critDmg:2,abilities:[],type:"Melee",cost:25,allowedFor:"elite"},{name:"Null Halo Projector",range:'8"',dice:3,critEffect:"",critDmg:1,abilities:["Disruption Field"],type:"Ranged",cost:30,allowedFor:"elite"},{name:"Chimeblade",range:'0"',dice:5,critEffect:"",critDmg:1,abilities:["Lone Strike X"],type:"Melee",cost:20,allowedFor:"elite"},{name:"Judicator Flail",range:'1"',dice:4,critEffect:"",critDmg:3,abilities:["Momentum Blow"],type:"Melee",cost:35,allowedFor:"elite"}]},fC=[{roll:"4–6",result:"Dead",effect:"The unit is permanently removed from the roster."},{roll:"7–10",result:"Crippled",effect:"The unit survives but suffers a permanent stat penalty (–1 to Move, Defense, or Vigor, your choice)."},{roll:"11–13",result:"Trauma",effect:"The unit survives but begins the next game with –1 Morale and –1 Wound."},{roll:"14–17",result:"Lingering Wound",effect:"Misses next battle. No permanent penalty."},{roll:"18–20",result:"Wounded",effect:"Begins next game with –1 Wound."},{roll:"21–22",result:"Shaken",effect:"No physical harm, but loses 1 XP."},{roll:"23–24",result:"Close Call",effect:"No effect."},{roll:"25+",result:"Steeled by Fire",effect:"Gains +1 XP and may reroll one stat advancement in future."}],mC=[{roll:"4–6",sp:3,result:"Mostly scrap and damaged gear."},{roll:"7–10",sp:4,result:"Minimal returns."},{roll:"11–13",sp:5,result:"Usable salvage."},{roll:"14–17",sp:6,result:"Functional tech fragments."},{roll:"18–20",sp:7,result:"Intact cores and frames."},{roll:"21–22",sp:8,result:"Rare salvage. Gain +1 XP on one unit of your choice."},{roll:"23–24",sp:10,result:"Exceptional find. Gain +1 XP and unlock a reroll during next postgame."},{roll:"25+",sp:12,result:"Major breakthrough. You may also choose 1 basic weapon upgrade for free."}],iy=[{roll:4,result:"Unexpected Instinct",effect:"+1 Move (max 8'')"},{roll:5,result:"Veteran of Dust",effect:"+1 Morale (max 7)"},{roll:6,result:"Tireless Engine",effect:"+1 Vigour (max 6)"},{roll:7,result:"Sharpened Edge",effect:"+1 to Melee Attack Dice (once per activation)"},{roll:8,result:"Honed Reflexes",effect:"+1 Defense (max 5)"},{roll:9,result:"Tracker's Intuition",effect:"Gains Ignore Cover when Shooting"},{roll:10,result:"Hardened Resolve",effect:"+1 Resolve (max 4)"},{roll:11,result:"Quickdraw",effect:"May draw Line of Sight through 1 terrain piece per round"},{roll:12,result:"Deadeye",effect:"Ranged Critical hits deal +1 extra damage"},{roll:13,result:"Grizzled Veteran",effect:"Ignore the Wounds inflicted by first attack suffered each game"},{roll:14,result:"Adaptive Reflexes",effect:"Gains 'Dodge' as a free action once per game"},{roll:15,result:"Heavy Step",effect:"Melee Attacks made after moving deal +1 damage"},{roll:16,result:"Iron Will",effect:"Gains reroll on failed Morale tests"},{roll:17,result:"Weapon Mastery",effect:"May equip one additional weapon (up to 3 max)"},{roll:18,result:"Battle Scars",effect:"Gains a permanent +1 Action on Round 1 only"},{roll:19,result:"Overcharger",effect:"If unit has Power stat > 0, gain +1 Power, else reroll"},{roll:20,result:"Resilient Core",effect:"The first time reduced to 0 Wounds, survive with 1 instead"},{roll:21,result:"Augmented Targeting",effect:"Ranged attacks ignore penalties from Obscured targets"},{roll:22,result:"Aggression Protocol",effect:"Gains +1 Attack die when charging"},{roll:23,result:"Staggering Impact",effect:"Melee Crits now inflict Stun"},{roll:24,result:"Legend in Ash",effect:"Gain a faction-specific Trait (or reroll if not yet implemented)"}],pC=["House Kaevaryn","Fangs of the Pale Hunger","House Duresse","Ash-Brethren"],gC=({units:n,selectedWarbandIndex:e,calculateLevel:t,canLevelUp:r,isUnitDisabled:i,setSelectedUnitForDetails:l,setShowUnitDetailsModal:u,setSelectedUnitForXP:h,setShowXPModal:f,setUnitAsLeader:g,setSelectedUnitForWeapons:v,setShowWeaponModal:N,setLevelUpUnitIndex:S,setShowLevelUpModal:_,removeUnitFromWarband:L,injuryTable:O,levelUpTable:q,campaignWarbands:M})=>o.jsxs("div",{className:"rounded-xl border border-slate-600",children:[o.jsx("div",{className:"hidden sm:block",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gradient-to-r from-slate-700 to-slate-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-white font-black whitespace-nowrap",children:"Unit"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black whitespace-nowrap",children:"Cost"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black whitespace-nowrap",children:"XP"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black whitespace-nowrap",children:"Level"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black whitespace-nowrap",children:"Injury"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black whitespace-nowrap",children:"Abilities"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black whitespace-nowrap",children:"Leader"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black whitespace-nowrap",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-600",children:n.map((T,I)=>{var ee,se;return o.jsxs("tr",{className:"hover:bg-slate-700/50 transition-colors",children:[o.jsx("td",{className:"px-4 py-3 max-w-[120px] truncate",children:o.jsxs("div",{children:[o.jsx("button",{onClick:()=>{l({warbandIndex:e,unitIndex:I}),u(!0)},className:"font-black text-slate-200 hover:text-violet-300 transition-colors duration-200 text-left truncate",children:T.name}),o.jsx("div",{className:"text-sm text-slate-400 truncate",children:T.type})]})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsx("span",{className:"font-black text-emerald-400",children:T.cost||T.baseCost||0})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-black text-violet-400",children:T.xp||0}),o.jsx("button",{onClick:()=>{h({warbandIndex:e,unitIndex:I}),f(!0)},disabled:i(T),className:`px-2 py-1 font-black text-xs rounded transition-all duration-200 ${i(T)?"bg-slate-700 text-slate-400 cursor-not-allowed":"bg-gradient-to-r from-violet-600 to-purple-700 text-white hover:from-violet-700 hover:to-purple-800"}`,children:"Add XP"})]})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsx("span",{className:"font-black text-violet-400",children:t(T.xp||0)})}),o.jsx("td",{className:"px-4 py-3 max-w-[120px] truncate",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex gap-2",children:o.jsx("div",{className:"relative group",children:o.jsxs("select",{onChange:ge=>{if(ge.target.value){const k=[...M][e].units[I];k.injuries||(k.injuries=[]),k.injuries.push(ge.target.value),ge.target.value==="Dead"&&k.isLeader&&(k.isLeader=!1)}},className:"px-3 py-1 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm cursor-pointer",children:[o.jsx("option",{value:"",children:"Add Injury"}),O.map((ge,W)=>o.jsx("option",{value:ge.result,children:ge.result},W))]})})}),T.injuries&&T.injuries.length>0&&o.jsx("div",{className:"space-y-1",children:T.injuries.map((ge,W)=>{var V;const k=((V=O.find(Q=>Q.result===ge))==null?void 0:V.effect)||"Effect not found";return o.jsxs("div",{className:"flex items-center gap-2 text-sm group relative",children:[o.jsx("span",{className:"text-red-400 font-black cursor-help",title:k,children:ge}),o.jsx("button",{onClick:()=>{},className:"text-red-500 hover:text-red-300 text-xs",children:"×"})]},W)})})]})}),o.jsx("td",{className:"px-4 py-3 max-w-[120px] truncate",children:o.jsx("div",{className:"text-sm text-slate-300",children:T.levelUpAbilities&&T.levelUpAbilities.length>0?o.jsx("div",{className:"space-y-1",children:T.levelUpAbilities.map((ge,W)=>{var V;const k=((V=q.find(Q=>Q.result===ge))==null?void 0:V.effect)||"Effect not found";return o.jsxs("div",{className:"text-violet-400 font-black cursor-help group relative",title:k,children:[ge,o.jsxs("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-slate-900 text-slate-200 text-xs rounded-lg shadow-lg border border-slate-600 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10 max-w-xs",children:[o.jsx("div",{className:"font-black text-violet-400 mb-1",children:ge}),o.jsx("div",{className:"text-slate-300",children:k}),o.jsx("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]})]},W)})}):o.jsx("span",{className:"text-slate-500",children:"None"})})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsx("button",{onClick:()=>g(e,I),disabled:T.type!=="Elite"||i(T),className:`px-3 py-1 font-black text-sm rounded transition-all duration-200 ${T.isLeader?"bg-gradient-to-r from-amber-600 to-orange-700 text-white":T.type==="Elite"&&!i(T)?"bg-slate-700 text-slate-300 hover:bg-slate-600":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:T.isLeader?"👑 Leader":T.type==="Elite"&&!i(T)?"Set Leader":i(T)?"Dead":"Elite Only"})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{onClick:()=>{v({warbandIndex:e,unitIndex:I}),N(!0)},disabled:i(T),className:`px-3 py-1 font-black text-sm rounded transition-all duration-200 ${i(T)?"bg-slate-700 text-slate-400 cursor-not-allowed":"bg-gradient-to-r from-emerald-600 to-teal-700 text-white hover:from-emerald-700 hover:to-teal-800"}`,children:"Weapons"}),o.jsx("button",{onClick:()=>{S(I),_(!0)},disabled:!r(T.xp||0,((ee=T.levelUpAbilities)==null?void 0:ee.length)||0)||i(T),className:`px-3 py-1 font-black text-sm rounded transition-all duration-200 ${r(T.xp||0,((se=T.levelUpAbilities)==null?void 0:se.length)||0)&&!i(T)?"bg-gradient-to-r from-violet-600 to-purple-700 text-white hover:from-violet-700 hover:to-purple-800":"bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:"Level Up"}),o.jsx("button",{onClick:()=>L(e,I),className:"px-3 py-1 bg-gradient-to-r from-red-600 to-pink-700 text-white font-black text-sm rounded hover:from-red-700 hover:to-pink-800 transition-all duration-200 ml-2",children:"Remove"})]})})]},I)})})]})}),o.jsx("div",{className:"block sm:hidden space-y-4",children:n.map((T,I)=>{var ee,se;return o.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 border border-slate-700 shadow flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("button",{onClick:()=>{l({warbandIndex:e,unitIndex:I}),u(!0)},className:"font-black text-slate-200 hover:text-violet-300 transition-colors duration-200 text-left text-lg",children:T.name}),o.jsx("div",{className:"text-xs text-slate-400",children:T.type})]}),o.jsx("span",{className:"font-black text-emerald-400 text-lg",children:T.cost||T.baseCost||0})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"font-black text-violet-400",children:["XP: ",T.xp||0]}),o.jsx("button",{onClick:()=>{h({warbandIndex:e,unitIndex:I}),f(!0)},disabled:i(T),className:`px-2 py-1 font-black text-xs rounded transition-all duration-200 ${i(T)?"bg-slate-700 text-slate-400 cursor-not-allowed":"bg-gradient-to-r from-violet-600 to-purple-700 text-white hover:from-violet-700 hover:to-purple-800"}`,children:"Add XP"}),o.jsxs("span",{className:"font-black text-violet-400 ml-auto",children:["Lvl: ",t(T.xp||0)]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-black text-slate-200",children:"Injuries:"}),o.jsxs("select",{onChange:ge=>{if(ge.target.value){const k=[...M][e].units[I];k.injuries||(k.injuries=[]),k.injuries.push(ge.target.value),ge.target.value==="Dead"&&k.isLeader&&(k.isLeader=!1)}},className:"px-2 py-1 bg-slate-700 border border-slate-600 rounded text-slate-200 text-xs cursor-pointer",children:[o.jsx("option",{value:"",children:"Add Injury"}),O.map((ge,W)=>o.jsx("option",{value:ge.result,children:ge.result},W))]})]}),T.injuries&&T.injuries.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:T.injuries.map((ge,W)=>{var V;const k=((V=O.find(Q=>Q.result===ge))==null?void 0:V.effect)||"Effect not found";return o.jsx("span",{className:"text-red-400 font-black cursor-help text-xs",title:k,children:ge},W)})})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-black text-slate-200",children:"Abilities:"}),T.levelUpAbilities&&T.levelUpAbilities.length>0?o.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:T.levelUpAbilities.map((ge,W)=>{var V;const k=((V=q.find(Q=>Q.result===ge))==null?void 0:V.effect)||"Effect not found";return o.jsx("span",{className:"text-violet-400 font-black cursor-help text-xs",title:k,children:ge},W)})}):o.jsx("span",{className:"text-slate-500 ml-2",children:"None"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-1",children:[o.jsx("button",{onClick:()=>g(e,I),disabled:T.type!=="Elite"||i(T),className:`px-2 py-1 font-black text-xs rounded transition-all duration-200 ${T.isLeader?"bg-gradient-to-r from-amber-600 to-orange-700 text-white":T.type==="Elite"&&!i(T)?"bg-slate-700 text-slate-300 hover:bg-slate-600":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:T.isLeader?"👑 Leader":T.type==="Elite"&&!i(T)?"Set Leader":i(T)?"Dead":"Elite Only"}),o.jsx("button",{onClick:()=>{v({warbandIndex:e,unitIndex:I}),N(!0)},disabled:i(T),className:`px-2 py-1 font-black text-xs rounded transition-all duration-200 ${i(T)?"bg-slate-700 text-slate-400 cursor-not-allowed":"bg-gradient-to-r from-emerald-600 to-teal-700 text-white hover:from-emerald-700 hover:to-teal-800"}`,children:"Weapons"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[o.jsx("button",{onClick:()=>{S(I),_(!0)},disabled:!r(T.xp||0,((ee=T.levelUpAbilities)==null?void 0:ee.length)||0)||i(T),className:`px-2 py-1 font-black text-xs rounded transition-all duration-200 ${r(T.xp||0,((se=T.levelUpAbilities)==null?void 0:se.length)||0)&&!i(T)?"bg-gradient-to-r from-violet-600 to-purple-700 text-white hover:from-violet-700 hover:to-purple-800":"bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:"Level Up"}),o.jsx("button",{onClick:()=>L(e,I),className:"px-2 py-1 bg-gradient-to-r from-red-600 to-pink-700 text-white font-black text-xs rounded hover:from-red-700 hover:to-pink-800 transition-all duration-200 ml-2",children:"Remove"})]})]},I)})})]}),xC=({gameHistory:n})=>!n||n.length===0?null:o.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-600",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gradient-to-r from-slate-700 to-slate-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Game"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Date"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Status"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Opponent"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Enemy CP"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Enemy Faction"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Roll"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"SP"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Result"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Notes"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-600",children:n.map((e,t)=>o.jsxs("tr",{className:"hover:bg-slate-700/50 transition-colors",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("span",{className:"font-black text-violet-400",children:["#",e.gameNumber]})}),o.jsx("td",{className:"px-4 py-3 text-slate-300",children:e.date}),o.jsx("td",{className:"px-4 py-3 text-slate-300",children:e.status||"-"}),o.jsx("td",{className:"px-4 py-3 text-slate-300",children:e.opponentName||"-"}),o.jsx("td",{className:"px-4 py-3 text-slate-300",children:e.enemyCP||"-"}),o.jsx("td",{className:"px-4 py-3 text-slate-300",children:e.enemyFaction||"-"}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-black text-sm rounded-full",children:e.salvageRoll})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("span",{className:"font-black text-emerald-400",children:["+",e.salvagePoints," SP"]})}),o.jsx("td",{className:"px-4 py-3 text-slate-300 text-sm",children:e.salvageResult}),o.jsx("td",{className:"px-4 py-3 text-slate-400 text-sm",children:e.notes})]},t))})]})});function bC({factions:n,selectedFaction:e,setSelectedFaction:t,onAddUnit:r,isLocked:i=!1,lockedFaction:l}){return o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 w-full",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"block font-black text-amber-400 mb-2 text-sm uppercase tracking-widest",children:i?"🔒 LOCKED FACTION":"🏰 SELECT FACTION"}),o.jsxs("select",{className:`border-2 p-3 rounded-xl shadow-lg transition-all duration-200 min-w-[220px] font-medium ${i?"border-slate-500 bg-slate-700 text-slate-400 cursor-not-allowed":"border-slate-600 bg-slate-800 text-slate-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/20"}`,value:e||"",onChange:u=>!i&&t(u.target.value),disabled:i,children:[o.jsx("option",{value:"",children:i?`-- ${l} (LOCKED) --`:"-- CHOOSE YOUR FACTION --"}),n.map(u=>o.jsx("option",{value:u,children:u},u))]}),i&&o.jsx("p",{className:"text-xs text-slate-400 mt-1 italic",children:"Faction locked. Clear warband to change faction."})]}),o.jsxs("button",{disabled:!e,onClick:r,className:`w-full md:w-auto mt-4 md:mt-0 px-6 py-3 rounded-xl font-black transition-all duration-200 flex items-center gap-2 tracking-wide ${e?"bg-gradient-to-r from-amber-600 to-orange-600 text-white hover:from-amber-700 hover:to-orange-700 shadow-lg hover:shadow-xl shadow-amber-500/25 hover:shadow-amber-500/40 transform hover:-translate-y-0.5 border border-amber-500/50":"bg-slate-700 text-slate-400 cursor-not-allowed border border-slate-600"}`,children:[o.jsx("span",{className:"text-lg",children:"⚔️"}),i?"ADD UNIT TO WARBAND":"ADD UNIT"]})]})}const vC=({show:n,factions:e,newWarbandFaction:t,setNewWarbandFaction:r,setShowAddWarbandModal:i,createNewWarband:l})=>n?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>i(!1),children:o.jsxs("div",{className:"bg-slate-800 rounded-2xl p-8 max-w-md w-full mx-4 border border-slate-600",onClick:u=>u.stopPropagation(),children:[o.jsx("h3",{className:"text-2xl font-black text-slate-200 mb-6",children:"Add Warband to Campaign"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-2",children:"Warband Name"}),o.jsx("input",{type:"text",placeholder:"Enter warband name",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-200",id:"warband-name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-2",children:"Starting CP"}),o.jsx("input",{type:"number",defaultValue:500,min:"0",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-200",id:"warband-cp"})]}),o.jsx("div",{children:o.jsx(bC,{factions:e,selectedFaction:t,setSelectedFaction:r,onAddUnit:()=>{},isLocked:!1})}),o.jsxs("div",{className:"flex gap-4 pt-4",children:[o.jsx("button",{onClick:async()=>{const u=document.getElementById("warband-name").value,h=parseInt(document.getElementById("warband-cp").value)||500;if(u.trim()&&t)try{const f={name:u.trim(),faction:t,units:[],cp:h};await l(f),i(!1),r(null)}catch(f){console.error("Failed to create warband:",f),alert("Failed to create warband. Please try again.")}},disabled:!t,className:"flex-1 px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-700 text-white font-black rounded-lg hover:from-violet-700 hover:to-purple-800 transition-all duration-200 disabled:bg-slate-700 disabled:text-slate-400",children:"Add Warband"}),o.jsx("button",{onClick:()=>{i(!1),r(null)},className:"flex-1 px-6 py-3 bg-slate-700 text-slate-300 font-black rounded-lg hover:bg-slate-600 transition-all duration-200",children:"Cancel"})]})]})]})}):null,yC=({show:n,selectedWarbandIndex:e,campaignWarbands:t,unitDefs:r,addUnitToWarband:i,setShowAddUnitModal:l})=>{var h;if(!n||e<0)return null;const u=t[e];return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>l(!1),children:o.jsxs("div",{className:"bg-slate-800 rounded-2xl p-8 max-w-2xl w-full mx-4 border border-slate-600 max-h-[80vh] overflow-y-auto",onClick:f=>f.stopPropagation(),children:[o.jsx("h3",{className:"text-2xl font-black text-slate-200 mb-6",children:"Add Unit to Warband"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-2",children:"Warband Faction"}),o.jsx("div",{className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-200",children:u.faction||"No faction selected"})]}),u.faction&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-4",children:"Select Unit"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:(h=r[u.faction])==null?void 0:h.map((f,g)=>o.jsxs("div",{onClick:async()=>{const v={...f,id:Date.now().toString()+g,selectedWeapons:[],cost:f.baseCost,xp:0,level:0,injuries:[],levelUpAbilities:[]};await i(e,v)?l(!1):alert("Not enough CP to add this unit!")},className:"p-4 bg-slate-700 border border-slate-600 rounded-lg cursor-pointer hover:bg-slate-600 transition-all duration-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"font-black text-slate-200",children:f.name}),o.jsxs("span",{className:"text-emerald-400 font-black",children:[f.baseCost," CP"]})]}),o.jsx("p",{className:"text-slate-400 text-sm mb-2",children:f.type}),o.jsxs("div",{className:"text-xs text-slate-500",children:[o.jsxs("div",{children:["Move: ",f.stats.move," | Defense: ",f.stats.defense," | Vigor: ",f.stats.vigor]}),o.jsxs("div",{children:["Actions: ",f.stats.actions," | Resolve: ",f.stats.resolve," | Morale: ",f.stats.morale]})]})]},g))})]}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx("button",{onClick:()=>l(!1),className:"px-6 py-3 bg-slate-700 text-slate-300 font-black rounded-lg hover:bg-slate-600 transition-all duration-200",children:"Cancel"})})]})]})})},wC=({show:n,fileInputRef:e,importWarband:t,setShowImportModal:r})=>n?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>r(!1),children:o.jsxs("div",{className:"bg-slate-800 rounded-2xl p-8 max-w-md w-full mx-4 border border-slate-600",onClick:i=>i.stopPropagation(),children:[o.jsx("h3",{className:"text-2xl font-black text-slate-200 mb-6",children:"Import Warband"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-2",children:"Warband Name"}),o.jsx("input",{type:"text",placeholder:"Enter warband name",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-200",id:"import-warband-name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-2",children:"Warband JSON File"}),o.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Supports both unit array and campaign exports (full warband with injuries, XP, etc.)"}),o.jsx("input",{ref:e,type:"file",accept:".json",onChange:i=>{var u;const l=(u=i.target.files)==null?void 0:u[0];if(l){const h=new FileReader;h.onload=()=>{var f;try{const g=h.result,v=JSON.parse(g),N=((f=document.getElementById("import-warband-name"))==null?void 0:f.value)||"Imported Warband";t(v,N),r(!1),e.current&&(e.current.value="")}catch{alert("Could not parse file. Make sure it's valid JSON.")}},h.readAsText(l)}},className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-200"})]}),o.jsx("div",{className:"flex gap-4 pt-4",children:o.jsx("button",{onClick:()=>r(!1),className:"flex-1 px-6 py-3 bg-slate-700 text-slate-300 font-black rounded-lg hover:bg-slate-600 transition-all duration-200",children:"Cancel"})})]})]})}):null,NC=({show:n,campaignWarbands:e,selectedWarbandForGame:t,setSelectedWarbandForGame:r,gameResult:i,setGameResult:l,opponentName:u,setOpponentName:h,enemyCP:f,setEnemyCP:g,enemyFaction:v,setEnemyFaction:N,factions:S,salvageTable:_,getWarbandTotalCP:L,setCampaignWarbands:O,addGameResult:q,setShowGameModal:M})=>n?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>M(!1),children:o.jsxs("div",{className:"bg-slate-800 rounded-2xl p-3 sm:p-8 max-w-md w-full mx-2 sm:mx-4 border border-slate-600",onClick:T=>T.stopPropagation(),children:[o.jsx("h3",{className:"text-lg sm:text-2xl font-black text-slate-200 mb-4 sm:mb-6",children:"Add Game Result"}),o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-1 sm:mb-2 text-xs sm:text-base",children:"Select Warband"}),o.jsxs("select",{onChange:T=>r(parseInt(T.target.value)),className:"w-full px-3 py-2 sm:px-4 sm:py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-200 text-sm sm:text-base",value:t>=0?t:"",children:[o.jsx("option",{value:"",children:"Choose a warband..."}),e.map((T,I)=>o.jsx("option",{value:I,children:T.name},I))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-1 sm:mb-2 text-xs sm:text-base",children:"Game Result"}),o.jsxs("select",{className:"w-full px-3 py-2 sm:px-4 sm:py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-200 text-sm sm:text-base",value:i,onChange:T=>l(T.target.value),children:[o.jsx("option",{value:"",children:"Select result..."}),o.jsx("option",{value:"win",children:"Win (+3 XP to all units)"}),o.jsx("option",{value:"draw",children:"Draw (+2 XP to all units)"}),o.jsx("option",{value:"loss",children:"Loss (+1 XP to all units)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-1 sm:mb-2 text-xs sm:text-base",children:"Opponent Player Name"}),o.jsx("input",{type:"text",className:"w-full px-3 py-2 sm:px-4 sm:py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-200 text-sm sm:text-base",value:u,onChange:T=>h(T.target.value),placeholder:"Enter opponent's name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-1 sm:mb-2 text-xs sm:text-base",children:"Enemy Warband CP"}),o.jsx("input",{type:"number",className:"w-full px-3 py-2 sm:px-4 sm:py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-200 text-sm sm:text-base",value:f,onChange:T=>g(T.target.value),placeholder:"Enter enemy warband CP",min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-1 sm:mb-2 text-xs sm:text-base",children:"Enemy Warband Faction"}),o.jsxs("select",{className:"w-full px-3 py-2 sm:px-4 sm:py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-200 text-sm sm:text-base",value:v,onChange:T=>N(T.target.value),children:[o.jsx("option",{value:"",children:"-- Select enemy faction --"}),S.map(T=>o.jsx("option",{value:T,children:T},T))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-1 sm:mb-2 text-xs sm:text-base",children:"Salvage Roll Result"}),o.jsxs("select",{className:"w-full px-3 py-2 sm:px-4 sm:py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-200 text-sm sm:text-base",id:"game-salvage-roll",children:[o.jsx("option",{value:"",children:"Select salvage roll result..."}),_.map((T,I)=>o.jsxs("option",{value:T.roll,children:[T.roll," - ",T.sp," SP: ",T.result]},I))]}),o.jsx("p",{className:"text-xs sm:text-sm text-slate-400 mt-1",children:"1 SP = 10 CP"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-300 font-black mb-1 sm:mb-2 text-xs sm:text-base",children:"Game Notes"}),o.jsx("textarea",{placeholder:"Brief description of the game...",className:"w-full px-3 py-2 sm:px-4 sm:py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-200 h-16 sm:h-20 text-sm sm:text-base",id:"game-notes"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 pt-2 sm:pt-4",children:[o.jsx("button",{onClick:()=>{if(t>=0&&i){const I=document.getElementById("game-salvage-roll").value;let ee=0,se="";if(I){const P=_.find(B=>B.roll===I);P&&(ee=P.sp,se=P.result)}const ge=L(e[t]),W=parseInt(f)||0;let k=0;W>ge&&(k=Math.floor((W-ge)/100),ee+=k);const V=document.getElementById("game-notes").value||"Game completed",Q=i==="win"?3:i==="draw"?2:1,R=[...e];R[t].units=R[t].units.map(P=>({...P,xp:(P.xp||0)+Q})),O(R),q(t,ee,se??"","Manual Entry",V,i||void 0,u,f,v),M(!1),r(-1),l(""),h(""),g(""),N("")}},disabled:t<0||!i,className:"w-full sm:w-auto flex-1 px-4 sm:px-6 py-2 sm:py-3 bg-gradient-to-r from-amber-600 to-orange-700 text-white font-black rounded-lg hover:from-amber-700 hover:to-orange-800 transition-all duration-200 disabled:bg-slate-700 disabled:text-slate-400 text-sm sm:text-base",children:"Add Game Result"}),o.jsx("button",{onClick:()=>{M(!1),r(-1),l(""),h(""),g(""),N("")},className:"w-full sm:w-auto flex-1 px-4 sm:px-6 py-2 sm:py-3 bg-slate-700 text-slate-300 font-black rounded-lg hover:bg-slate-600 transition-all duration-200 text-sm sm:text-base",children:"Cancel"})]})]})]})}):null,_C=({show:n,selectedUnitForXP:e,campaignWarbands:t,setCampaignWarbands:r,setShowXPModal:i,setSelectedUnitForXP:l})=>{if(!n||!e)return null;const u=t[e.warbandIndex].units[e.unitIndex];return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>i(!1),children:o.jsxs("div",{className:"bg-slate-800 rounded-2xl p-8 max-w-md w-full mx-4 border border-slate-600",onClick:h=>h.stopPropagation(),children:[o.jsxs("h3",{className:"text-2xl font-black text-slate-200 mb-6",children:["Add XP: ",u.name]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center gap-2 text-slate-300 font-black",children:[o.jsx("input",{type:"checkbox",id:"downed-leader",className:"w-4 h-4 text-violet-600 bg-slate-700 border-slate-600 rounded focus:ring-violet-500"}),"Downed enemy leader"]}),o.jsx("span",{className:"text-violet-400 font-black",children:"+1 XP"})]}),o.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-center justify-between my-2 gap-2 xs:gap-4",children:[o.jsxs("label",{className:"flex items-center gap-2 text-slate-300 font-black",children:[o.jsx("span",{children:"Downed enemy units:"}),o.jsx("input",{type:"number",min:"0",defaultValue:"0",id:"downed-units",className:"w-16 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-slate-200 text-center"})]}),o.jsx("span",{className:"text-violet-400 font-black block xs:inline mt-2 xs:mt-0",children:"×1 XP each"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center gap-2 text-slate-300 font-black",children:[o.jsx("input",{type:"checkbox",id:"survived",className:"w-4 h-4 text-violet-600 bg-slate-700 border-slate-600 rounded focus:ring-violet-500"}),"Survived the battle"]}),o.jsx("span",{className:"text-violet-400 font-black",children:"+1 XP"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center gap-2 text-slate-300 font-black",children:[o.jsx("input",{type:"checkbox",id:"objective",className:"w-4 h-4 text-violet-600 bg-slate-700 border-slate-600 rounded focus:ring-violet-500"}),"Finished objective"]}),o.jsx("span",{className:"text-violet-400 font-black",children:"+2 XP"})]}),o.jsxs("div",{className:"flex flex-col xs:flex-row gap-2 pt-4",children:[o.jsx("button",{onClick:()=>{var L,O,q,M;const h=((L=document.getElementById("downed-leader"))==null?void 0:L.checked)||!1,f=parseInt(((O=document.getElementById("downed-units"))==null?void 0:O.value)||"0")||0,g=((q=document.getElementById("survived"))==null?void 0:q.checked)||!1,v=((M=document.getElementById("objective"))==null?void 0:M.checked)||!1;let N=0;h&&(N+=1),N+=f,g&&(N+=1),v&&(N+=2);const S=[...t],_=S[e.warbandIndex].units[e.unitIndex];_.xp=(_.xp||0)+N,r(S),i(!1),l(null)},className:"w-full xs:w-auto px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-700 text-white font-black rounded-lg hover:from-violet-700 hover:to-purple-800 transition-all duration-200",children:"Add XP"}),o.jsx("button",{onClick:()=>{i(!1),l(null)},className:"w-full xs:w-auto px-6 py-3 bg-slate-700 text-slate-300 font-black rounded-lg hover:bg-slate-600 transition-all duration-200",children:"Cancel"})]})]})]})})},AC=({show:n,selectedUnitForWeapons:e,campaignWarbands:t,weaponsData:r,removeWeaponFromUnit:i,addWeaponToUnit:l,setShowWeaponModal:u,setSelectedUnitForWeapons:h})=>{if(!n||!e)return null;const g=t[e.warbandIndex].units[e.unitIndex],v=r[g.faction]||[];return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>u(!1),children:o.jsxs("div",{className:"bg-slate-800 rounded-2xl p-8 max-w-4xl w-full mx-4 border border-slate-600 max-h-[80vh] overflow-y-auto",onClick:N=>N.stopPropagation(),children:[o.jsxs("h3",{className:"text-2xl font-black text-slate-200 mb-6",children:["Weapon Management: ",g.name]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-xl font-black text-slate-200 mb-4",children:"Current Weapons"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.selectedWeapons.map((N,S)=>{var _;return o.jsxs("div",{className:"bg-slate-700 border border-slate-600 rounded-lg p-4",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h5",{className:"font-black text-slate-200",children:N.name}),o.jsxs("span",{className:"text-emerald-400 font-black",children:[N.cost," CP"]})]}),o.jsx("div",{className:"text-xs text-slate-500 mb-3",children:o.jsxs("dl",{className:"grid grid-cols-2 gap-x-2 gap-y-1",children:[o.jsx("dt",{className:"font-bold text-slate-400 flex items-center gap-1",children:"🔫 Range"}),o.jsx("dd",{className:"text-slate-200 font-mono",children:N.range}),o.jsx("dt",{className:"font-bold text-slate-400 flex items-center gap-1",children:"🎲 Dice"}),o.jsx("dd",{className:"text-slate-200 font-mono",children:N.dice}),o.jsx("dt",{className:"font-bold text-slate-400 flex items-center gap-1",children:"💥 Crit Effect"}),o.jsx("dd",{className:"text-slate-200 font-mono",children:N.critEffect||"—"}),o.jsx("dt",{className:"font-bold text-slate-400 flex items-center gap-1",children:"🔥 Crit Dmg"}),o.jsx("dd",{className:"text-slate-200 font-mono",children:N.critDmg}),o.jsx("dt",{className:"font-bold text-slate-400 flex items-center gap-1",children:"✨ Abilities"}),o.jsx("dd",{className:"text-slate-200 font-mono",children:(_=N.abilities)!=null&&_.length?N.abilities.join(", "):"None"})]})}),o.jsx("button",{onClick:()=>{i(e.warbandIndex,e.unitIndex,S)||alert("Cannot remove default melee weapon!")},className:"px-3 py-1 bg-gradient-to-r from-red-600 to-pink-700 text-white font-black text-sm rounded hover:from-red-700 hover:to-pink-800 transition-all duration-200",children:"Remove"})]},S)})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-xl font-black text-slate-200 mb-4",children:"Add Weapons"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto",children:v.map((N,S)=>{var _;return o.jsxs("div",{onClick:()=>{l(e.warbandIndex,e.unitIndex,N)||alert("Not enough CP to add this weapon!")},className:"bg-slate-700 border border-slate-600 rounded-lg p-4 cursor-pointer hover:bg-slate-600 transition-all duration-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h5",{className:"font-black text-slate-200",children:N.name}),o.jsxs("span",{className:"text-emerald-400 font-black",children:[N.cost," CP"]})]}),o.jsx("div",{className:"text-xs text-slate-500",children:o.jsxs("dl",{className:"grid grid-cols-2 gap-x-2 gap-y-1",children:[o.jsx("dt",{className:"font-bold text-slate-400 flex items-center gap-1",children:"🔫 Range"}),o.jsx("dd",{className:"text-slate-200 font-mono",children:N.range}),o.jsx("dt",{className:"font-bold text-slate-400 flex items-center gap-1",children:"🎲 Dice"}),o.jsx("dd",{className:"text-slate-200 font-mono",children:N.dice}),o.jsx("dt",{className:"font-bold text-slate-400 flex items-center gap-1",children:"💥 Crit Effect"}),o.jsx("dd",{className:"text-slate-200 font-mono",children:N.critEffect||"—"}),o.jsx("dt",{className:"font-bold text-slate-400 flex items-center gap-1",children:"🔥 Crit Dmg"}),o.jsx("dd",{className:"text-slate-200 font-mono",children:N.critDmg}),o.jsx("dt",{className:"font-bold text-slate-400 flex items-center gap-1",children:"✨ Abilities"}),o.jsx("dd",{className:"text-slate-200 font-mono",children:(_=N.abilities)!=null&&_.length?N.abilities.join(", "):"None"})]})})]},S)})})]}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx("button",{onClick:()=>{u(!1),h(null)},className:"px-6 py-3 bg-slate-700 text-slate-300 font-black rounded-lg hover:bg-slate-600 transition-all duration-200",children:"Close"})})]})]})})},SC=({show:n,selectedWarbandIndex:e,levelUpUnitIndex:t,campaignWarbands:r,levelUpTable:i,setCampaignWarbands:l,setShowLevelUpModal:u,setLevelUpUnitIndex:h})=>{if(!n||e<0||t<0)return null;const f=r[e].units[t];return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>u(!1),children:o.jsxs("div",{className:"bg-slate-800 rounded-2xl p-8 max-w-2xl w-full mx-4 border border-slate-600 max-h-[80vh] overflow-y-auto",onClick:g=>g.stopPropagation(),children:[o.jsxs("h3",{className:"text-2xl font-black text-slate-200 mb-6",children:["Level Up: ",f.name]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-slate-300 mb-4",children:"Roll 4d6 and select the corresponding ability from the table below:"}),o.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-600",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gradient-to-r from-slate-700 to-slate-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Roll"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Ability"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Effect"}),o.jsx("th",{className:"px-4 py-3 text-left text-white font-black",children:"Action"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-600",children:i.map(g=>o.jsxs("tr",{className:"hover:bg-slate-700/50 transition-colors",children:[o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-12 h-12 bg-gradient-to-r from-violet-500 to-purple-600 text-white font-black text-lg rounded-full shadow-lg shadow-violet-500/25",children:g.roll})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"font-black text-violet-300",children:g.result})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"text-slate-300 leading-relaxed",children:g.effect})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("button",{onClick:()=>{const v=[...r],N=v[e].units[t];N.levelUpAbilities||(N.levelUpAbilities=[]),N.levelUpAbilities.push(g.result),l(v),u(!1),h(-1)},className:"px-3 py-1 bg-gradient-to-r from-violet-600 to-purple-700 text-white font-black text-sm rounded hover:from-violet-700 hover:to-purple-800 transition-all duration-200",children:"Select"})})]},g.roll))})]})}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx("button",{onClick:()=>{u(!1),h(-1)},className:"px-6 py-3 bg-slate-700 text-slate-300 font-black rounded-lg hover:bg-slate-600 transition-all duration-200",children:"Cancel"})})]})]})})},EC="You may reroll one failed attack die for this weapon per attack.",TC="Target suffers X Wound at the end of each of its activations unless it forfeits 1 Action to extinguish the flames.",jC="Target suffers –1 Defense until the start of its next activation.",kC="On hit, the target must pass a Morale Test or suffer –1 Defense until the start of their next activation.",CC="Ignores all penalties to hit from Light Cover.",RC="+2 to hit if the attacker has not moved this round. This weapon cannot be fired if the attacker moved during their activation.",IC="If the target is within 3'', roll one additional attack die.",LC="On a Critical Hit, the target loses 1 Action Point during its next activation.",PC="If any attack die rolls a 1, the weapon cannot be used again until after your next activation.",w3={"Area Splash":"Affects all units within a 3'' radius of the target. Each unit is rolled against separately.","Bleed X":"The target suffers X additional Wound at the end of its next activation unless healed.",Brutal:EC,Burning:TC,"Chain Hit":"If first attack has any Critical Hits, make one additional attack against a unit within 2'' of the first.",Corrosive:jC,"Crackling Heat X":"On a roll of any Critical Hit, the target loses X Defense until the start of its next turn.","Disruption Field":"On hit, the target loses all benefits from Auras and cannot project any Aura effects until the end of its next activation.","Disruptive Strike":"On hit, if the target is a unit with a Power stat, that stat is reduced by 1 until the start of its next turn.","Flank Advantage":"When attacking a target that is engaged with another friendly unit, gain +1 to hit.","Flash Ignition X":"On hit, deal X Burning to all enemy units within 2'' of the target.","Flicker Shot":"This weapon may be used while engaged in melee and does not suffer penalties from being Engaged.","Heavy Hook X":"If the target has 3 or more base Wounds, increase the attack's damage by +1.",Irradiated:kC,"Lone Strike X":"If the target has no other units within 3'', each Critical Hit from this attack deals +X additional Damage.","Momentum Blow":"On a Critical Hit, the target loses 1 Action during its next activation.","One Use":"This weapon may only be fired once per battle.","Pinning X":"On hit, the target suffers –X Move during its next activation.","Plasma Burst":"On hit, the target suffers –1 Action on their next activation.","Raging Blow":"On a Critical Hit, this weapon causes +1 Damage and pushes the target 1'' away.","Reel X":"On a successful hit, the target is pulled 2'' × X directly toward the attacker.",Reliable:CC,Scoped:RC,Scatter:IC,"Scorch Cascade":"This weapon may split its dice among up to 3 targets. Each additional target costs 1 Reactor point.","Silence Protocol":"On a Critical Hit, the target may not use Powers during their next activation.","Smoldering Trail":"On hit, the target suffers –1 Defense until the end of its next activation and gains Burning 1.",Stun:LC,"Suppressive X":"On hit, the target receives –X Dice on Attack Rolls until the end of its next activation.",Unstable:PC},bc=w3;function oy(n){const e=n.replace(/\d+/g,"").replace(/\+/g,"").replace(/\[.*?\]/g,"").replace(/\s+/g," ").trim();if(bc[e])return bc[e];const t=e+" X";if(bc[t])return bc[t];const r=e.replace(/\s+X$/,"");if(bc[r])return bc[r];const i=Object.keys(bc).find(l=>l.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(l.toLowerCase()));return i?bc[i]:"No description available."}function DC({unit:n,weapons:e,onUpdateUnit:t}){var T;Ne.useEffect(()=>{if(!n.selectedWeapons.some(ee=>ee.name==="Melee Weapon")){const ee=e.find(se=>se.name==="Melee Weapon");ee&&t({...n,selectedWeapons:[...n.selectedWeapons,ee],cost:n.baseCost+n.selectedWeapons.reduce((se,ge)=>se+ge.cost,0)+ee.cost})}},[n,e,t]);const[r,i]=Ne.useState(!1),[l,u]=Ne.useState(!1),[h,f]=Ne.useState(!1),[g,v]=Ne.useState(!1),[N,S]=Ne.useState(!1),[_,L]=Ne.useState(!1),[O,q]=Ne.useState(!1),M=I=>{if(I.name==="Melee Weapon")return;const ee=n.selectedWeapons.some(W=>W.name===I.name);let se;ee?se=n.selectedWeapons.filter(W=>W.name!==I.name):se=[...n.selectedWeapons,I];const ge=n.baseCost+se.reduce((W,k)=>W+k.cost,0);t({...n,selectedWeapons:se,cost:ge})};return o.jsxs("div",{className:"bg-gradient-to-b from-slate-800/90 to-slate-900/90 rounded-2xl shadow-2xl border border-slate-700/50 overflow-hidden backdrop-blur-sm",children:[o.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 p-6 text-white border-b border-slate-600",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black mb-2 tracking-wide",children:n.name.toUpperCase()}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"px-3 py-1 bg-slate-600 text-white rounded-full font-black text-sm tracking-wide",children:n.type.toUpperCase()}),o.jsxs("span",{className:"px-3 py-1 bg-amber-900/50 text-amber-300 rounded-full font-black text-sm tracking-wide border border-amber-500/50",children:[n.cost," PTS"]})]})]}),o.jsx("div",{className:"text-4xl",children:"⚔️"})]})}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-indigo-900/50 rounded-xl border border-blue-500/50 mb-2",children:[o.jsxs("button",{className:"w-full flex items-center justify-between p-6 font-black text-xl text-slate-200 tracking-wide focus:outline-none",onClick:()=>i(I=>!I),"aria-expanded":r,children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-blue-400",children:"📊"}),"UNIT STATISTICS"]}),o.jsx("span",{className:`transition-transform duration-200 ${r?"rotate-180":""}`,children:"▼"})]}),r&&o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-6 pt-0",children:Object.entries(n.stats).map(([I,ee])=>o.jsxs("div",{className:"text-center p-3 bg-slate-800/50 rounded-lg shadow-lg border border-blue-500/30",children:[o.jsx("div",{className:"text-sm text-slate-400 font-black mb-1 tracking-wide",children:I.charAt(0).toUpperCase()+I.slice(1).toUpperCase()}),o.jsx("div",{className:"text-2xl font-black text-blue-400 tracking-wider",children:ee})]},I))})]}),n.abilities&&n.abilities.length>0&&o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 rounded-xl border border-purple-500/50 mb-2",children:[o.jsxs("button",{className:"w-full flex items-center justify-between p-6 font-black text-xl text-slate-200 tracking-wide focus:outline-none",onClick:()=>u(I=>!I),"aria-expanded":l,children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-purple-400",children:"✨"}),"ABILITIES"]}),o.jsx("span",{className:`transition-transform duration-200 ${l?"rotate-180":""}`,children:"▼"})]}),l&&o.jsx("div",{className:"space-y-3 p-6 pt-0",children:n.abilities.map(I=>o.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg border border-purple-500/30",children:[o.jsx("h4",{className:"font-black text-purple-300 mb-2 tracking-wide",children:I.name.toUpperCase()}),o.jsx("p",{className:"text-slate-300 leading-relaxed",children:I.description})]},I.name))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl border border-amber-500/50 mb-2",children:[o.jsxs("button",{className:"w-full flex items-center justify-between p-6 font-black text-xl text-slate-200 tracking-wide focus:outline-none",onClick:()=>f(I=>!I),"aria-expanded":h,children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-amber-400",children:"⚔️"}),"SELECT WEAPONS"]}),o.jsx("span",{className:`transition-transform duration-200 ${h?"rotate-180":""}`,children:"▼"})]}),h&&o.jsx("div",{className:"grid gap-3 p-6 pt-0",children:e.filter(I=>I.allowedFor==="all"||I.allowedFor==="elite"&&n.type==="Elite").map(I=>{const ee=I.name==="Melee Weapon",se=n.selectedWeapons.some(ge=>ge.name===I.name);return o.jsxs("label",{className:`flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ${se?"border-amber-500 bg-amber-900/50 shadow-lg shadow-amber-500/25":"border-slate-600 hover:border-slate-500 bg-slate-800/50 hover:bg-slate-700/50"}`,children:[o.jsx("input",{type:"checkbox",checked:se,onChange:()=>M(I),disabled:ee,className:"mr-3 w-4 h-4 text-amber-500 border-amber-500 rounded focus:ring-amber-500/50 bg-slate-700"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-black text-slate-200 tracking-wide",children:I.name.toUpperCase()}),o.jsxs("div",{className:"text-sm text-slate-400 font-medium",children:["RANGE: ",I.range," | DICE: ",I.dice," | COST: ",I.cost," PTS"]})]}),ee&&o.jsx("span",{className:"text-xs text-amber-400 bg-amber-900/50 px-2 py-1 rounded-full font-black tracking-wide border border-amber-500/50",children:"DEFAULT"})]},I.name)})})]}),n.selectedWeapons.length>0&&o.jsxs("div",{className:"bg-gradient-to-r from-emerald-900/50 to-teal-900/50 rounded-xl border border-emerald-500/50 mb-2",children:[o.jsxs("button",{className:"w-full flex items-center justify-between p-6 font-black text-xl text-slate-200 tracking-wide focus:outline-none",onClick:()=>v(I=>!I),"aria-expanded":g,children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-emerald-400",children:"🛡️"}),"SELECTED WEAPONS"]}),o.jsx("span",{className:`transition-transform duration-200 ${g?"rotate-180":""}`,children:"▼"})]}),g&&o.jsx("div",{className:"p-4 md:p-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:n.selectedWeapons.map(I=>o.jsxs("div",{className:"bg-gradient-to-r from-emerald-800/60 to-teal-800/60 rounded-lg shadow-lg border border-emerald-500/30 p-4 flex flex-col items-center text-center",children:[o.jsx("div",{className:"font-black text-slate-200 text-base md:text-lg tracking-wide mb-2",children:I.name.toUpperCase()}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full text-xs md:text-sm",children:[o.jsx("div",{className:"font-bold text-emerald-300 col-span-1",children:"Range"}),o.jsx("div",{className:"text-slate-200 col-span-1",children:I.range}),o.jsx("div",{className:"font-bold text-emerald-300 col-span-1",children:"Dice"}),o.jsx("div",{className:"text-slate-200 col-span-1",children:I.dice}),o.jsx("div",{className:"font-bold text-emerald-300 col-span-1",children:"Crit Dmg"}),o.jsx("div",{className:"text-slate-200 col-span-1",children:I.critDmg}),o.jsx("div",{className:"font-bold text-emerald-300 col-span-1",children:"Cost"}),o.jsxs("div",{className:"text-emerald-400 font-black col-span-1",children:[I.cost," PTS"]})]})]},I.name))})]}),n.selectedWeapons.length>0&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-cyan-900/50 rounded-xl border border-blue-500/50 mb-2",children:[o.jsxs("button",{className:"w-full flex items-center justify-between p-6 font-black text-xl text-slate-200 tracking-wide focus:outline-none",onClick:()=>S(I=>!I),"aria-expanded":N,children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-blue-400",children:"⚡"}),"WEAPON ABILITIES"]}),o.jsx("span",{className:`transition-transform duration-200 ${N?"rotate-180":""}`,children:"▼"})]}),N&&o.jsx("div",{className:"space-y-4 p-6 pt-0",children:n.selectedWeapons.map(I=>{const ee=I.abilities||[],se=[...new Set(ee.filter(ge=>ge&&ge.trim()!==""))];return se.length===0?null:o.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg border border-blue-500/30",children:[o.jsxs("h4",{className:"font-black text-blue-300 mb-3 flex items-center gap-2 tracking-wide",children:[o.jsx("span",{className:"text-blue-400",children:"⚔️"}),I.name.toUpperCase()]}),o.jsx("div",{className:"space-y-2",children:se.map(ge=>o.jsxs("div",{className:"pl-4 border-l-2 border-blue-500/50",children:[o.jsx("h5",{className:"font-black text-slate-200 mb-1 tracking-wide",children:ge.toUpperCase()}),o.jsx("p",{className:"text-slate-300 text-sm",children:oy(ge)})]},ge))})]},I.name)})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-pink-900/50 rounded-xl border border-red-500/50 mb-2",children:[o.jsxs("button",{className:"w-full flex items-center justify-between p-6 font-black text-xl text-slate-200 tracking-wide focus:outline-none",onClick:()=>L(I=>!I),"aria-expanded":_,children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-red-400",children:"💥"}),"CRITICAL EFFECTS"]}),o.jsx("span",{className:`transition-transform duration-200 ${_?"rotate-180":""}`,children:"▼"})]}),_&&o.jsx("div",{className:"space-y-4 p-6 pt-0",children:n.selectedWeapons.map(I=>!I.critEffect||I.critEffect.trim()===""?null:o.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg border border-red-500/30",children:[o.jsxs("h4",{className:"font-black text-red-300 mb-3 flex items-center gap-2 tracking-wide",children:[o.jsx("span",{className:"text-red-400",children:"⚔️"}),I.name.toUpperCase()]}),o.jsxs("div",{className:"pl-4 border-l-2 border-red-500/50",children:[o.jsx("h5",{className:"font-black text-slate-200 mb-1 tracking-wide",children:I.critEffect.toUpperCase()}),o.jsx("p",{className:"text-slate-300 text-sm",children:oy(I.critEffect)})]})]},I.name))})]})]}),n.powers&&((T=n.powers)==null?void 0:T.length)>0&&o.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-purple-900/50 rounded-xl border border-indigo-500/50 mb-2",children:[o.jsxs("button",{className:"w-full flex items-center justify-between p-6 font-black text-xl text-slate-200 tracking-wide focus:outline-none",onClick:()=>q(I=>!I),"aria-expanded":O,children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-indigo-400",children:"🔮"}),"POWERS"]}),o.jsx("span",{className:`transition-transform duration-200 ${O?"rotate-180":""}`,children:"▼"})]}),O&&o.jsx("div",{className:"space-y-4 p-6 pt-0",children:n.powers.map((I,ee)=>o.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-lg shadow-lg border border-indigo-500/30",children:[o.jsx("h4",{className:"text-xl font-black text-indigo-300 mb-3 tracking-wide",children:I.name.toUpperCase()}),o.jsx("p",{className:"italic text-indigo-400 mb-4 text-sm",children:I.flavor}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-black text-slate-200 mb-2 tracking-wide",children:"BASE EFFECT"}),o.jsx("p",{className:"text-slate-300 bg-slate-700/50 p-3 rounded-lg",children:I.baseEffect})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-black text-slate-200 mb-2 tracking-wide",children:"OVERDRIVE"}),o.jsx("ul",{className:"space-y-2",children:I.overdrive.map((se,ge)=>o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-indigo-400 font-black mr-2 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:se})]},ge))})]}),o.jsxs("div",{className:"bg-red-900/50 p-4 rounded-lg border border-red-500/50",children:[o.jsx("h5",{className:"font-black text-red-300 mb-2 tracking-wide",children:"CRITICAL FAIL"}),o.jsx("p",{className:"text-red-200",children:I.critFail})]})]})]},ee))})]})]})]})}const OC=({show:n,selectedUnitForDetails:e,campaignWarbands:t,weaponsData:r,setCampaignWarbands:i,setShowUnitDetailsModal:l})=>{if(!n||!e)return null;const u=t[e.warbandIndex].units[e.unitIndex],h=t[e.warbandIndex].faction;return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>l(!1),children:o.jsxs("div",{className:"bg-slate-800 rounded-2xl p-8 max-w-2xl w-full mx-4 border border-slate-600 max-h-[80vh] overflow-y-auto relative",onClick:f=>f.stopPropagation(),children:[o.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-white text-2xl font-black","aria-label":"Close",children:"×"}),o.jsx(DC,{unit:u,weapons:r[h]||[],onUpdateUnit:f=>{const g=[...t];g[e.warbandIndex].units[e.unitIndex]=f,i(g)}})]})})},MC="modulepreload",FC=function(n){return"/ashes-of-varnhal-builder/"+n},ly={},Zg=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let u=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));i=u(t.map(g=>{if(g=FC(g),g in ly)return;ly[g]=!0;const v=g.endsWith(".css"),N=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${N}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":MC,v||(S.as="script"),S.crossOrigin="",S.href=g,f&&S.setAttribute("nonce",f),document.head.appendChild(S),v)return new Promise((_,L)=>{S.addEventListener("load",_),S.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return i.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};function Vn(n){"@babel/helpers - typeof";return Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(n)}var Ya=Uint8Array,Ws=Uint16Array,pb=Int32Array,z0=new Ya([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),q0=new Ya([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ex=new Ya([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),N3=function(n,e){for(var t=new Ws(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new pb(t[30]),r=1;r<30;++r)for(var l=t[r];l<t[r+1];++l)i[l]=l-t[r]<<5|r;return{b:t,r:i}},_3=N3(z0,2),A3=_3.b,tx=_3.r;A3[28]=258,tx[258]=28;var S3=N3(q0,0),VC=S3.b,cy=S3.r,nx=new Ws(32768);for(var rr=0;rr<32768;++rr){var vc=(rr&43690)>>1|(rr&21845)<<1;vc=(vc&52428)>>2|(vc&13107)<<2,vc=(vc&61680)>>4|(vc&3855)<<4,nx[rr]=((vc&65280)>>8|(vc&255)<<8)>>1}var Bo=function(n,e,t){for(var r=n.length,i=0,l=new Ws(e);i<r;++i)n[i]&&++l[n[i]-1];var u=new Ws(e);for(i=1;i<e;++i)u[i]=u[i-1]+l[i-1]<<1;var h;if(t){h=new Ws(1<<e);var f=15-e;for(i=0;i<r;++i)if(n[i])for(var g=i<<4|n[i],v=e-n[i],N=u[n[i]-1]++<<v,S=N|(1<<v)-1;N<=S;++N)h[nx[N]>>f]=g}else for(h=new Ws(r),i=0;i<r;++i)n[i]&&(h[i]=nx[u[n[i]-1]++]>>15-n[i]);return h},Bc=new Ya(288);for(var rr=0;rr<144;++rr)Bc[rr]=8;for(var rr=144;rr<256;++rr)Bc[rr]=9;for(var rr=256;rr<280;++rr)Bc[rr]=7;for(var rr=280;rr<288;++rr)Bc[rr]=8;var sf=new Ya(32);for(var rr=0;rr<32;++rr)sf[rr]=5;var BC=Bo(Bc,9,0),UC=Bo(Bc,9,1),zC=Bo(sf,5,0),qC=Bo(sf,5,1),pg=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},qi=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},gg=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},gb=function(n){return(n+7)/8|0},E3=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Ya(n.subarray(e,t))},HC=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Gi=function(n,e,t){var r=new Error(e||HC[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Gi),!t)throw r;return r},WC=function(n,e,t,r){var i=n.length,l=0;if(!i||e.f&&!e.l)return t||new Ya(0);var u=!t,h=u||e.i!=2,f=e.i;u&&(t=new Ya(i*3));var g=function(Je){var st=t.length;if(Je>st){var at=new Ya(Math.max(st*2,Je));at.set(t),t=at}},v=e.f||0,N=e.p||0,S=e.b||0,_=e.l,L=e.d,O=e.m,q=e.n,M=i*8;do{if(!_){v=qi(n,N,1);var T=qi(n,N+1,3);if(N+=3,T)if(T==1)_=UC,L=qC,O=9,q=5;else if(T==2){var ge=qi(n,N,31)+257,W=qi(n,N+10,15)+4,k=ge+qi(n,N+5,31)+1;N+=14;for(var V=new Ya(k),Q=new Ya(19),R=0;R<W;++R)Q[ex[R]]=qi(n,N+R*3,7);N+=W*3;for(var P=pg(Q),B=(1<<P)-1,ce=Bo(Q,P,1),R=0;R<k;){var Le=ce[qi(n,N,B)];N+=Le&15;var I=Le>>4;if(I<16)V[R++]=I;else{var ae=0,me=0;for(I==16?(me=3+qi(n,N,3),N+=2,ae=V[R-1]):I==17?(me=3+qi(n,N,7),N+=3):I==18&&(me=11+qi(n,N,127),N+=7);me--;)V[R++]=ae}}var he=V.subarray(0,ge),Ce=V.subarray(ge);O=pg(he),q=pg(Ce),_=Bo(he,O,1),L=Bo(Ce,q,1)}else Gi(1);else{var I=gb(N)+4,ee=n[I-4]|n[I-3]<<8,se=I+ee;if(se>i){f&&Gi(0);break}h&&g(S+ee),t.set(n.subarray(I,se),S),e.b=S+=ee,e.p=N=se*8,e.f=v;continue}if(N>M){f&&Gi(0);break}}h&&g(S+131072);for(var J=(1<<O)-1,Ae=(1<<q)-1,F=N;;F=N){var ae=_[gg(n,N)&J],K=ae>>4;if(N+=ae&15,N>M){f&&Gi(0);break}if(ae||Gi(2),K<256)t[S++]=K;else if(K==256){F=N,_=null;break}else{var te=K-254;if(K>264){var R=K-257,ie=z0[R];te=qi(n,N,(1<<ie)-1)+A3[R],N+=ie}var ue=L[gg(n,N)&Ae],Ee=ue>>4;ue||Gi(3),N+=ue&15;var Ce=VC[Ee];if(Ee>3){var ie=q0[Ee];Ce+=gg(n,N)&(1<<ie)-1,N+=ie}if(N>M){f&&Gi(0);break}h&&g(S+131072);var _e=S+te;if(S<Ce){var Pe=l-Ce,tt=Math.min(Ce,_e);for(Pe+S<0&&Gi(3);S<tt;++S)t[S]=r[Pe+S]}for(;S<_e;++S)t[S]=t[S-Ce]}}e.l=_,e.p=F,e.b=S,e.f=v,_&&(v=1,e.m=O,e.d=L,e.n=q)}while(!v);return S!=t.length&&u?E3(t,0,S):t.subarray(0,S)},_l=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Lh=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},xg=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,l=t.slice();if(!i)return{t:j3,l:0};if(i==1){var u=new Ya(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(se,ge){return se.f-ge.f}),t.push({s:-1,f:25001});var h=t[0],f=t[1],g=0,v=1,N=2;for(t[0]={s:-1,f:h.f+f.f,l:h,r:f};v!=i-1;)h=t[t[g].f<t[N].f?g++:N++],f=t[g!=v&&t[g].f<t[N].f?g++:N++],t[v++]={s:-1,f:h.f+f.f,l:h,r:f};for(var S=l[0].s,r=1;r<i;++r)l[r].s>S&&(S=l[r].s);var _=new Ws(S+1),L=rx(t[v-1],_,0);if(L>e){var r=0,O=0,q=L-e,M=1<<q;for(l.sort(function(ge,W){return _[W.s]-_[ge.s]||ge.f-W.f});r<i;++r){var T=l[r].s;if(_[T]>e)O+=M-(1<<L-_[T]),_[T]=e;else break}for(O>>=q;O>0;){var I=l[r].s;_[I]<e?O-=1<<e-_[I]++-1:++r}for(;r>=0&&O;--r){var ee=l[r].s;_[ee]==e&&(--_[ee],++O)}L=e}return{t:new Ya(_),l:L}},rx=function(n,e,t){return n.s==-1?Math.max(rx(n.l,e,t+1),rx(n.r,e,t+1)):e[n.s]=t},uy=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Ws(++e),r=0,i=n[0],l=1,u=function(f){t[r++]=f},h=1;h<=e;++h)if(n[h]==i&&h!=e)++l;else{if(!i&&l>2){for(;l>138;l-=138)u(32754);l>2&&(u(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(u(i),--l;l>6;l-=6)u(8304);l>2&&(u(l-3<<5|8208),l=0)}for(;l--;)u(i);l=1,i=n[h]}return{c:t.subarray(0,r),n:e}},Ph=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},T3=function(n,e,t){var r=t.length,i=gb(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var l=0;l<r;++l)n[i+l+4]=t[l];return(i+4+r)*8},dy=function(n,e,t,r,i,l,u,h,f,g,v){_l(e,v++,t),++i[256];for(var N=xg(i,15),S=N.t,_=N.l,L=xg(l,15),O=L.t,q=L.l,M=uy(S),T=M.c,I=M.n,ee=uy(O),se=ee.c,ge=ee.n,W=new Ws(19),k=0;k<T.length;++k)++W[T[k]&31];for(var k=0;k<se.length;++k)++W[se[k]&31];for(var V=xg(W,7),Q=V.t,R=V.l,P=19;P>4&&!Q[ex[P-1]];--P);var B=g+5<<3,ce=Ph(i,Bc)+Ph(l,sf)+u,Le=Ph(i,S)+Ph(l,O)+u+14+3*P+Ph(W,Q)+2*W[16]+3*W[17]+7*W[18];if(f>=0&&B<=ce&&B<=Le)return T3(e,v,n.subarray(f,f+g));var ae,me,he,Ce;if(_l(e,v,1+(Le<ce)),v+=2,Le<ce){ae=Bo(S,_,0),me=S,he=Bo(O,q,0),Ce=O;var J=Bo(Q,R,0);_l(e,v,I-257),_l(e,v+5,ge-1),_l(e,v+10,P-4),v+=14;for(var k=0;k<P;++k)_l(e,v+3*k,Q[ex[k]]);v+=3*P;for(var Ae=[T,se],F=0;F<2;++F)for(var K=Ae[F],k=0;k<K.length;++k){var te=K[k]&31;_l(e,v,J[te]),v+=Q[te],te>15&&(_l(e,v,K[k]>>5&127),v+=K[k]>>12)}}else ae=BC,me=Bc,he=zC,Ce=sf;for(var k=0;k<h;++k){var ie=r[k];if(ie>255){var te=ie>>18&31;Lh(e,v,ae[te+257]),v+=me[te+257],te>7&&(_l(e,v,ie>>23&31),v+=z0[te]);var ue=ie&31;Lh(e,v,he[ue]),v+=Ce[ue],ue>3&&(Lh(e,v,ie>>5&8191),v+=q0[ue])}else Lh(e,v,ae[ie]),v+=me[ie]}return Lh(e,v,ae[256]),v+me[256]},GC=new pb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),j3=new Ya(0),KC=function(n,e,t,r,i,l){var u=l.z||n.length,h=new Ya(r+u+5*(1+Math.ceil(u/7e3))+i),f=h.subarray(r,h.length-i),g=l.l,v=(l.r||0)&7;if(e){v&&(f[0]=l.r>>3);for(var N=GC[e-1],S=N>>13,_=N&8191,L=(1<<t)-1,O=l.p||new Ws(32768),q=l.h||new Ws(L+1),M=Math.ceil(t/3),T=2*M,I=function(_t){return(n[_t]^n[_t+1]<<M^n[_t+2]<<T)&L},ee=new pb(25e3),se=new Ws(288),ge=new Ws(32),W=0,k=0,V=l.i||0,Q=0,R=l.w||0,P=0;V+2<u;++V){var B=I(V),ce=V&32767,Le=q[B];if(O[ce]=Le,q[B]=ce,R<=V){var ae=u-V;if((W>7e3||Q>24576)&&(ae>423||!g)){v=dy(n,f,0,ee,se,ge,k,Q,P,V-P,v),Q=W=k=0,P=V;for(var me=0;me<286;++me)se[me]=0;for(var me=0;me<30;++me)ge[me]=0}var he=2,Ce=0,J=_,Ae=ce-Le&32767;if(ae>2&&B==I(V-Ae))for(var F=Math.min(S,ae)-1,K=Math.min(32767,V),te=Math.min(258,ae);Ae<=K&&--J&&ce!=Le;){if(n[V+he]==n[V+he-Ae]){for(var ie=0;ie<te&&n[V+ie]==n[V+ie-Ae];++ie);if(ie>he){if(he=ie,Ce=Ae,ie>F)break;for(var ue=Math.min(Ae,ie-2),Ee=0,me=0;me<ue;++me){var _e=V-Ae+me&32767,Pe=O[_e],tt=_e-Pe&32767;tt>Ee&&(Ee=tt,Le=_e)}}}ce=Le,Le=O[ce],Ae+=ce-Le&32767}if(Ce){ee[Q++]=268435456|tx[he]<<18|cy[Ce];var Je=tx[he]&31,st=cy[Ce]&31;k+=z0[Je]+q0[st],++se[257+Je],++ge[st],R=V+he,++W}else ee[Q++]=n[V],++se[n[V]]}}for(V=Math.max(V,R);V<u;++V)ee[Q++]=n[V],++se[n[V]];v=dy(n,f,g,ee,se,ge,k,Q,P,V-P,v),g||(l.r=v&7|f[v/8|0]<<3,v-=7,l.h=q,l.p=O,l.i=V,l.w=R)}else{for(var V=l.w||0;V<u+g;V+=65535){var at=V+65535;at>=u&&(f[v/8|0]=g,at=u),v=T3(f,v+1,n.subarray(V,at))}l.i=u}return E3(h,0,r+gb(v)+i)},k3=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,l=t.length|0,u=0;u!=l;){for(var h=Math.min(u+2655,l);u<h;++u)i+=r+=t[u];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},YC=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),u=new Ya(l.length+n.length);u.set(l),u.set(n,l.length),n=u,i.w=l.length}return KC(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},C3=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},$C=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=k3();i.p(e.dictionary),C3(n,2,i.d())}},XC=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Gi(6,"invalid zlib data"),(n[1]>>5&1)==1&&Gi(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function ax(n,e){e||(e={});var t=k3();t.p(n);var r=YC(n,e,e.dictionary?6:2,4);return $C(r,e),C3(r,r.length-4,t.d()),r}function QC(n,e){return WC(n.subarray(XC(n),-4),{i:2},e,e)}var JC=typeof TextDecoder<"u"&&new TextDecoder,ZC=0;try{JC.decode(j3,{stream:!0}),ZC=1}catch{}var Mt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function bg(){Mt.console&&typeof Mt.console.log=="function"&&Mt.console.log.apply(Mt.console,arguments)}var $n={log:bg,warn:function(n){Mt.console&&(typeof Mt.console.warn=="function"?Mt.console.warn.apply(Mt.console,arguments):bg.call(null,arguments))},error:function(n){Mt.console&&(typeof Mt.console.error=="function"?Mt.console.error.apply(Mt.console,arguments):bg(n))}};function vg(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){pu(r.response,e,t)},r.onerror=function(){$n.error("could not download file")},r.send()}function hy(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function jm(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Kh,sx,pu=Mt.saveAs||((typeof window>"u"?"undefined":Vn(window))!=="object"||window!==Mt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Mt.URL||Mt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?hy(i.href)?vg(n,e,t):jm(i,i.target="_blank"):jm(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){jm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(hy(n))vg(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){jm(r)})}else navigator.msSaveOrOpenBlob(function(i,l){return l===void 0?l={autoBom:!1}:Vn(l)!=="object"&&($n.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return vg(n,e,t);var i=n.type==="application/octet-stream",l=/constructor/i.test(Mt.HTMLElement)||Mt.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||i&&l)&&(typeof FileReader>"u"?"undefined":Vn(FileReader))==="object"){var h=new FileReader;h.onloadend=function(){var v=h.result;v=u?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=v:location=v,r=null},h.readAsDataURL(n)}else{var f=Mt.URL||Mt.webkitURL,g=f.createObjectURL(n);r?r.location=g:location.href=g,r=null,setTimeout(function(){f.revokeObjectURL(g)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function R3(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,l=t[r].process,u=i.exec(n);u&&(e=l(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var h=this.r.toString(16),f=this.g.toString(16),g=this.b.toString(16);return h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),g.length==1&&(g="0"+g),"#"+h+f+g}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function yg(n,e){var t=n[0],r=n[1],i=n[2],l=n[3];t=za(t,r,i,l,e[0],7,-680876936),l=za(l,t,r,i,e[1],12,-389564586),i=za(i,l,t,r,e[2],17,606105819),r=za(r,i,l,t,e[3],22,-1044525330),t=za(t,r,i,l,e[4],7,-176418897),l=za(l,t,r,i,e[5],12,1200080426),i=za(i,l,t,r,e[6],17,-1473231341),r=za(r,i,l,t,e[7],22,-45705983),t=za(t,r,i,l,e[8],7,1770035416),l=za(l,t,r,i,e[9],12,-1958414417),i=za(i,l,t,r,e[10],17,-42063),r=za(r,i,l,t,e[11],22,-1990404162),t=za(t,r,i,l,e[12],7,1804603682),l=za(l,t,r,i,e[13],12,-40341101),i=za(i,l,t,r,e[14],17,-1502002290),t=qa(t,r=za(r,i,l,t,e[15],22,1236535329),i,l,e[1],5,-165796510),l=qa(l,t,r,i,e[6],9,-1069501632),i=qa(i,l,t,r,e[11],14,643717713),r=qa(r,i,l,t,e[0],20,-373897302),t=qa(t,r,i,l,e[5],5,-701558691),l=qa(l,t,r,i,e[10],9,38016083),i=qa(i,l,t,r,e[15],14,-660478335),r=qa(r,i,l,t,e[4],20,-405537848),t=qa(t,r,i,l,e[9],5,568446438),l=qa(l,t,r,i,e[14],9,-1019803690),i=qa(i,l,t,r,e[3],14,-187363961),r=qa(r,i,l,t,e[8],20,1163531501),t=qa(t,r,i,l,e[13],5,-1444681467),l=qa(l,t,r,i,e[2],9,-51403784),i=qa(i,l,t,r,e[7],14,1735328473),t=Ha(t,r=qa(r,i,l,t,e[12],20,-1926607734),i,l,e[5],4,-378558),l=Ha(l,t,r,i,e[8],11,-2022574463),i=Ha(i,l,t,r,e[11],16,1839030562),r=Ha(r,i,l,t,e[14],23,-35309556),t=Ha(t,r,i,l,e[1],4,-1530992060),l=Ha(l,t,r,i,e[4],11,1272893353),i=Ha(i,l,t,r,e[7],16,-155497632),r=Ha(r,i,l,t,e[10],23,-1094730640),t=Ha(t,r,i,l,e[13],4,681279174),l=Ha(l,t,r,i,e[0],11,-358537222),i=Ha(i,l,t,r,e[3],16,-722521979),r=Ha(r,i,l,t,e[6],23,76029189),t=Ha(t,r,i,l,e[9],4,-640364487),l=Ha(l,t,r,i,e[12],11,-421815835),i=Ha(i,l,t,r,e[15],16,530742520),t=Wa(t,r=Ha(r,i,l,t,e[2],23,-995338651),i,l,e[0],6,-198630844),l=Wa(l,t,r,i,e[7],10,1126891415),i=Wa(i,l,t,r,e[14],15,-1416354905),r=Wa(r,i,l,t,e[5],21,-57434055),t=Wa(t,r,i,l,e[12],6,1700485571),l=Wa(l,t,r,i,e[3],10,-1894986606),i=Wa(i,l,t,r,e[10],15,-1051523),r=Wa(r,i,l,t,e[1],21,-2054922799),t=Wa(t,r,i,l,e[8],6,1873313359),l=Wa(l,t,r,i,e[15],10,-30611744),i=Wa(i,l,t,r,e[6],15,-1560198380),r=Wa(r,i,l,t,e[13],21,1309151649),t=Wa(t,r,i,l,e[4],6,-145523070),l=Wa(l,t,r,i,e[11],10,-1120210379),i=Wa(i,l,t,r,e[2],15,718787259),r=Wa(r,i,l,t,e[9],21,-343485551),n[0]=Ec(t,n[0]),n[1]=Ec(r,n[1]),n[2]=Ec(i,n[2]),n[3]=Ec(l,n[3])}function H0(n,e,t,r,i,l){return e=Ec(Ec(e,n),Ec(r,l)),Ec(e<<i|e>>>32-i,t)}function za(n,e,t,r,i,l,u){return H0(e&t|~e&r,n,e,i,l,u)}function qa(n,e,t,r,i,l,u){return H0(e&r|t&~r,n,e,i,l,u)}function Ha(n,e,t,r,i,l,u){return H0(e^t^r,n,e,i,l,u)}function Wa(n,e,t,r,i,l,u){return H0(t^(e|~r),n,e,i,l,u)}function I3(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)yg(r,e8(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(yg(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,yg(r,i),r}function e8(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Kh=Mt.atob.bind(Mt),sx=Mt.btoa.bind(Mt);var fy="0123456789abcdef".split("");function t8(n){for(var e="",t=0;t<4;t++)e+=fy[n>>8*t+4&15]+fy[n>>8*t&15];return e}function n8(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function ix(n){return I3(n).map(n8).join("")}var r8=function(n){for(var e=0;e<n.length;e++)n[e]=t8(n[e]);return n.join("")}(I3("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ec(n,e){if(r8){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ox(n,e){var t,r,i,l;if(n!==t){for(var u=(i=n,l=1+(256/n.length>>0),new Array(l+1).join(i)),h=[],f=0;f<256;f++)h[f]=f;var g=0;for(f=0;f<256;f++){var v=h[f];g=(g+v+u.charCodeAt(f))%256,h[f]=h[g],h[g]=v}t=n,r=h}else h=r;var N=e.length,S=0,_=0,L="";for(f=0;f<N;f++)_=(_+(v=h[S=(S+1)%256]))%256,h[S]=h[_],h[_]=v,u=h[(h[S]+h[_])%256],L+=String.fromCharCode(e.charCodeAt(f)^u);return L}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var my={print:4,modify:8,copy:16,"annot-forms":32};function md(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(h){if(my.perm!==void 0)throw new Error("Invalid permission: "+h);i+=my[h]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,u),this.P=-(1+(255^i)),this.encryptionKey=ix(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=ox(this.encryptionKey,this.padding)}function pd(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function py(n){if(Vn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var l=Math.random().toString(35);return e[t][l]=[r,!!i],l},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var l in e[t]){var u=e[t][l];try{u[0].apply(n,r)}catch(h){Mt.console&&$n.error("jsPDF PubSub Error",h.message,h)}u[1]&&i.push(l)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function m0(n){if(!(this instanceof m0))return new m0(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function L3(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function gu(n,e,t,r,i){if(!(this instanceof gu))return new gu(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,L3.call(this,r,i)}function xd(n,e,t,r,i){if(!(this instanceof xd))return new xd(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,L3.call(this,r,i)}function Rt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],l=arguments[3],u=[],h=1,f=16,g="S",v=null;Vn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,l=n.compress||n.compressPdf||l,(v=n.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),h=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(f=n.floatPrecision),g=n.defaultPathOperation||"S"),u=n.filters||(l===!0?["FlateEncode"]:u),r=r||"mm",t=(""+(t||"P")).toLowerCase();var N=n.putOnlyUsedFonts||!1,S={},_={internal:{},__private__:{}};_.__private__.PubSub=py;var L="1.3",O=_.__private__.getPdfVersion=function(){return L};_.__private__.setPdfVersion=function(w){L=w};var q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};_.__private__.getPageFormats=function(){return q};var M=_.__private__.getPageFormat=function(w){return q[w]};i=i||"a4";var T={COMPAT:"compat",ADVANCED:"advanced"},I=T.COMPAT;function ee(){this.saveGraphicsState(),oe(new dt(He,0,0,-He,0,ca()*He).toString()+" cm"),this.setFontSize(this.getFontSize()/He),g="n",I=T.ADVANCED}function se(){this.restoreGraphicsState(),g="S",I=T.COMPAT}var ge=_.__private__.combineFontStyleAndFontWeight=function(w,z){if(w=="bold"&&z=="normal"||w=="bold"&&z==400||w=="normal"&&z=="italic"||w=="bold"&&z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return z&&(w=z==400||z==="normal"?w==="italic"?"italic":"normal":z!=700&&z!=="bold"||w!=="normal"?(z==700?"bold":z)+""+w:"bold"),w};_.advancedAPI=function(w){var z=I===T.COMPAT;return z&&ee.call(this),typeof w!="function"||(w(this),z&&se.call(this)),this},_.compatAPI=function(w){var z=I===T.ADVANCED;return z&&se.call(this),typeof w!="function"||(w(this),z&&ee.call(this)),this},_.isAdvancedAPI=function(){return I===T.ADVANCED};var W,k=function(w){if(I!==T.ADVANCED)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=_.roundToPrecision=_.__private__.roundToPrecision=function(w,z){var re=e||z;if(isNaN(w)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(re).replace(/0+$/,"")};W=_.hpf=_.__private__.hpf=typeof f=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return V(w,f)}:f==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return V(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return V(w,16)};var Q=_.f2=_.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return V(w,2)},R=_.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return V(w,3)},P=_.scale=_.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return I===T.COMPAT?w*He:I===T.ADVANCED?w:void 0},B=function(w){return I===T.COMPAT?ca()-w:I===T.ADVANCED?w:void 0},ce=function(w){return P(B(w))};_.__private__.setPrecision=_.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(e=parseInt(w,10))};var Le,ae="00000000000000000000000000000000",me=_.__private__.getFileId=function(){return ae},he=_.__private__.setFileId=function(w){return ae=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(Dn=new md(v.userPermissions,v.userPassword,v.ownerPassword,ae)),ae};_.setFileId=function(w){return he(w),this},_.getFileId=function(){return me()};var Ce=_.__private__.convertDateToPDFDate=function(w){var z=w.getTimezoneOffset(),re=z<0?"+":"-",de=Math.floor(Math.abs(z/60)),ye=Math.abs(z%60),Be=[re,te(de),"'",te(ye),"'"].join("");return["D:",w.getFullYear(),te(w.getMonth()+1),te(w.getDate()),te(w.getHours()),te(w.getMinutes()),te(w.getSeconds()),Be].join("")},J=_.__private__.convertPDFDateToDate=function(w){var z=parseInt(w.substr(2,4),10),re=parseInt(w.substr(6,2),10)-1,de=parseInt(w.substr(8,2),10),ye=parseInt(w.substr(10,2),10),Be=parseInt(w.substr(12,2),10),Qe=parseInt(w.substr(14,2),10);return new Date(z,re,de,ye,Be,Qe,0)},Ae=_.__private__.setCreationDate=function(w){var z;if(w===void 0&&(w=new Date),w instanceof Date)z=Ce(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");z=w}return Le=z},F=_.__private__.getCreationDate=function(w){var z=Le;return w==="jsDate"&&(z=J(Le)),z};_.setCreationDate=function(w){return Ae(w),this},_.getCreationDate=function(w){return F(w)};var K,te=_.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},ie=_.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},ue=0,Ee=[],_e=[],Pe=0,tt=[],Je=[],st=!1,at=_e,_t=function(){ue=0,Pe=0,_e=[],Ee=[],tt=[],xa=sr(),Ur=sr()};_.__private__.setCustomOutputDestination=function(w){st=!0,at=w};var Ve=function(w){st||(at=w)};_.__private__.resetCustomOutputDestination=function(){st=!1,at=_e};var oe=_.__private__.out=function(w){return w=w.toString(),Pe+=w.length+1,at.push(w),at},At=_.__private__.write=function(w){return oe(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},gt=_.__private__.getArrayBuffer=function(w){for(var z=w.length,re=new ArrayBuffer(z),de=new Uint8Array(re);z--;)de[z]=w.charCodeAt(z);return re},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];_.__private__.getStandardFonts=function(){return et};var rt=n.fontSize||16;_.__private__.setFontSize=_.setFontSize=function(w){return rt=I===T.ADVANCED?w/He:w,this};var ot,ut=_.__private__.getFontSize=_.getFontSize=function(){return I===T.COMPAT?rt:rt*He},bt=n.R2L||!1;_.__private__.setR2L=_.setR2L=function(w){return bt=w,this},_.__private__.getR2L=_.getR2L=function(){return bt};var Ct,Bt=_.__private__.setZoomMode=function(w){var z=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))ot=w;else if(isNaN(w)){if(z.indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');ot=w}else ot=parseInt(w,10)};_.__private__.getZoomMode=function(){return ot};var wt,xt=_.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');Ct=w};_.__private__.getPageMode=function(){return Ct};var Wt=_.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');wt=w};_.__private__.getLayoutMode=function(){return wt},_.__private__.setDisplayMode=_.setDisplayMode=function(w,z,re){return Bt(w),Wt(z),xt(re),this};var Fe={title:"",subject:"",author:"",keywords:"",creator:""};_.__private__.getDocumentProperty=function(w){if(Object.keys(Fe).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Fe[w]},_.__private__.getDocumentProperties=function(){return Fe},_.__private__.setDocumentProperties=_.setProperties=_.setDocumentProperties=function(w){for(var z in Fe)Fe.hasOwnProperty(z)&&w[z]&&(Fe[z]=w[z]);return this},_.__private__.setDocumentProperty=function(w,z){if(Object.keys(Fe).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Fe[w]=z};var nt,He,Nt,mt,$t,Ut={},yn={},Br=[],Zt={},Xn={},kn={},ur={},Xr=null,Bn=0,Tt=[],cn=new py(_),ja=n.hotfixes||[],ar={},Qr={},Xa=[],dt=function w(z,re,de,ye,Be,Qe){if(!(this instanceof w))return new w(z,re,de,ye,Be,Qe);isNaN(z)&&(z=1),isNaN(re)&&(re=0),isNaN(de)&&(de=0),isNaN(ye)&&(ye=1),isNaN(Be)&&(Be=0),isNaN(Qe)&&(Qe=0),this._matrix=[z,re,de,ye,Be,Qe]};Object.defineProperty(dt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(dt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(dt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(dt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(dt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(dt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(dt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(dt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(dt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(dt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(dt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(dt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(dt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(dt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(dt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(dt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),dt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(W).join(w)},dt.prototype.multiply=function(w){var z=w.sx*this.sx+w.shy*this.shx,re=w.sx*this.shy+w.shy*this.sy,de=w.shx*this.sx+w.sy*this.shx,ye=w.shx*this.shy+w.sy*this.sy,Be=w.tx*this.sx+w.ty*this.shx+this.tx,Qe=w.tx*this.shy+w.ty*this.sy+this.ty;return new dt(z,re,de,ye,Be,Qe)},dt.prototype.decompose=function(){var w=this.sx,z=this.shy,re=this.shx,de=this.sy,ye=this.tx,Be=this.ty,Qe=Math.sqrt(w*w+z*z),lt=(w/=Qe)*re+(z/=Qe)*de;re-=w*lt,de-=z*lt;var p=Math.sqrt(re*re+de*de);return lt/=p,w*(de/=p)<z*(re/=p)&&(w=-w,z=-z,lt=-lt,Qe=-Qe),{scale:new dt(Qe,0,0,p,0,0),translate:new dt(1,0,0,1,ye,Be),rotate:new dt(w,z,-z,w,0,0),skew:new dt(1,0,lt,1,0,0)}},dt.prototype.toString=function(w){return this.join(" ")},dt.prototype.inversed=function(){var w=this.sx,z=this.shy,re=this.shx,de=this.sy,ye=this.tx,Be=this.ty,Qe=1/(w*de-z*re),lt=de*Qe,p=-z*Qe,E=-re*Qe,C=w*Qe;return new dt(lt,p,E,C,-lt*ye-E*Be,-p*ye-C*Be)},dt.prototype.applyToPoint=function(w){var z=w.x*this.sx+w.y*this.shx+this.tx,re=w.x*this.shy+w.y*this.sy+this.ty;return new Ai(z,re)},dt.prototype.applyToRectangle=function(w){var z=this.applyToPoint(w),re=this.applyToPoint(new Ai(w.x+w.w,w.y+w.h));return new so(z.x,z.y,re.x-z.x,re.y-z.y)},dt.prototype.clone=function(){var w=this.sx,z=this.shy,re=this.shx,de=this.sy,ye=this.tx,Be=this.ty;return new dt(w,z,re,de,ye,Be)},_.Matrix=dt;var Cn=_.matrixMult=function(w,z){return z.multiply(w)},Rn=new dt(1,0,0,1,0,0);_.unitMatrix=_.identityMatrix=Rn;var Gn=function(w,z){if(!Xn[w]){var re=(z instanceof gu?"Sh":"P")+(Object.keys(Zt).length+1).toString(10);z.id=re,Xn[w]=re,Zt[re]=z,cn.publish("addPattern",z)}};_.ShadingPattern=gu,_.TilingPattern=xd,_.addShadingPattern=function(w,z){return k("addShadingPattern()"),Gn(w,z),this},_.beginTilingPattern=function(w){k("beginTilingPattern()"),ti(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},_.endTilingPattern=function(w,z){k("endTilingPattern()"),z.stream=Je[K].join(`
`),Gn(w,z),cn.publish("endTilingPattern",z),Xa.pop().restore()};var er=_.__private__.newObject=function(){var w=sr();return br(w,!0),w},sr=_.__private__.newObjectDeferred=function(){return ue++,Ee[ue]=function(){return Pe},ue},br=function(w,z){return z=typeof z=="boolean"&&z,Ee[w]=Pe,z&&oe(w+" 0 obj"),w},xi=_.__private__.newAdditionalObject=function(){var w={objId:sr(),content:""};return tt.push(w),w},xa=sr(),Ur=sr(),Tr=_.__private__.decodeColorString=function(w){var z=w.split(" ");if(z.length!==2||z[1]!=="g"&&z[1]!=="G")z.length===5&&(z[4]==="k"||z[4]==="K")&&(z=[(1-z[0])*(1-z[3]),(1-z[1])*(1-z[3]),(1-z[2])*(1-z[3]),"r"]);else{var re=parseFloat(z[0]);z=[re,re,re,"r"]}for(var de="#",ye=0;ye<3;ye++)de+=("0"+Math.floor(255*parseFloat(z[ye])).toString(16)).slice(-2);return de},vr=_.__private__.encodeColorString=function(w){var z;typeof w=="string"&&(w={ch1:w});var re=w.ch1,de=w.ch2,ye=w.ch3,Be=w.ch4,Qe=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var lt=new R3(re);if(lt.ok)re=lt.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var p=parseInt(re.substr(1),16);re=p>>16&255,de=p>>8&255,ye=255&p}if(de===void 0||Be===void 0&&re===de&&de===ye)if(typeof re=="string")z=re+" "+Qe[0];else switch(w.precision){case 2:z=Q(re/255)+" "+Qe[0];break;case 3:default:z=R(re/255)+" "+Qe[0]}else if(Be===void 0||Vn(Be)==="object"){if(Be&&!isNaN(Be.a)&&Be.a===0)return z=["1.","1.","1.",Qe[1]].join(" ");if(typeof re=="string")z=[re,de,ye,Qe[1]].join(" ");else switch(w.precision){case 2:z=[Q(re/255),Q(de/255),Q(ye/255),Qe[1]].join(" ");break;default:case 3:z=[R(re/255),R(de/255),R(ye/255),Qe[1]].join(" ")}}else if(typeof re=="string")z=[re,de,ye,Be,Qe[2]].join(" ");else switch(w.precision){case 2:z=[Q(re),Q(de),Q(ye),Q(Be),Qe[2]].join(" ");break;case 3:default:z=[R(re),R(de),R(ye),R(Be),Qe[2]].join(" ")}return z},jr=_.__private__.getFilters=function(){return u},Un=_.__private__.putStream=function(w){var z=(w=w||{}).data||"",re=w.filters||jr(),de=w.alreadyAppliedFilters||[],ye=w.addLength1||!1,Be=z.length,Qe=w.objectId,lt=function(Lt){return Lt};if(v!==null&&Qe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(lt=Dn.encryptor(Qe,0));var p={};re===!0&&(re=["FlateEncode"]);var E=w.additionalKeyValues||[],C=(p=Rt.API.processDataByFilters!==void 0?Rt.API.processDataByFilters(z,re):{data:z,reverseChain:[]}).reverseChain+(Array.isArray(de)?de.join(" "):de.toString());if(p.data.length!==0&&(E.push({key:"Length",value:p.data.length}),ye===!0&&E.push({key:"Length1",value:Be})),C.length!=0)if(C.split("/").length-1==1)E.push({key:"Filter",value:C});else{E.push({key:"Filter",value:"["+C+"]"});for(var $=0;$<E.length;$+=1)if(E[$].key==="DecodeParms"){for(var ve=[],Re=0;Re<p.reverseChain.split("/").length-1;Re+=1)ve.push("null");ve.push(E[$].value),E[$].value="["+ve.join(" ")+"]"}}oe("<<");for(var Ze=0;Ze<E.length;Ze++)oe("/"+E[Ze].key+" "+E[Ze].value);oe(">>"),p.data.length!==0&&(oe("stream"),oe(lt(p.data)),oe("endstream"))},Nn=_.__private__.putPage=function(w){var z=w.number,re=w.data,de=w.objId,ye=w.contentsObjId;br(de,!0),oe("<</Type /Page"),oe("/Parent "+w.rootDictionaryObjId+" 0 R"),oe("/Resources "+w.resourceDictionaryObjId+" 0 R"),oe("/MediaBox ["+parseFloat(W(w.mediaBox.bottomLeftX))+" "+parseFloat(W(w.mediaBox.bottomLeftY))+" "+W(w.mediaBox.topRightX)+" "+W(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&oe("/CropBox ["+W(w.cropBox.bottomLeftX)+" "+W(w.cropBox.bottomLeftY)+" "+W(w.cropBox.topRightX)+" "+W(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&oe("/BleedBox ["+W(w.bleedBox.bottomLeftX)+" "+W(w.bleedBox.bottomLeftY)+" "+W(w.bleedBox.topRightX)+" "+W(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&oe("/TrimBox ["+W(w.trimBox.bottomLeftX)+" "+W(w.trimBox.bottomLeftY)+" "+W(w.trimBox.topRightX)+" "+W(w.trimBox.topRightY)+"]"),w.artBox!==null&&oe("/ArtBox ["+W(w.artBox.bottomLeftX)+" "+W(w.artBox.bottomLeftY)+" "+W(w.artBox.topRightX)+" "+W(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&oe("/UserUnit "+w.userUnit),cn.publish("putPage",{objId:de,pageContext:Tt[z],pageNumber:z,page:re}),oe("/Contents "+ye+" 0 R"),oe(">>"),oe("endobj");var Be=re.join(`
`);return I===T.ADVANCED&&(Be+=`
Q`),br(ye,!0),Un({data:Be,filters:jr(),objectId:ye}),oe("endobj"),de},_s=_.__private__.putPages=function(){var w,z,re=[];for(w=1;w<=Bn;w++)Tt[w].objId=sr(),Tt[w].contentsObjId=sr();for(w=1;w<=Bn;w++)re.push(Nn({number:w,data:Je[w],objId:Tt[w].objId,contentsObjId:Tt[w].contentsObjId,mediaBox:Tt[w].mediaBox,cropBox:Tt[w].cropBox,bleedBox:Tt[w].bleedBox,trimBox:Tt[w].trimBox,artBox:Tt[w].artBox,userUnit:Tt[w].userUnit,rootDictionaryObjId:xa,resourceDictionaryObjId:Ur}));br(xa,!0),oe("<</Type /Pages");var de="/Kids [";for(z=0;z<Bn;z++)de+=re[z]+" 0 R ";oe(de+"]"),oe("/Count "+Bn),oe(">>"),oe("endobj"),cn.publish("postPutPages")},As=function(w){cn.publish("putFont",{font:w,out:oe,newObject:er,putStream:Un}),w.isAlreadyPutted!==!0&&(w.objectNumber=er(),oe("<<"),oe("/Type /Font"),oe("/BaseFont /"+pd(w.postScriptName)),oe("/Subtype /Type1"),typeof w.encoding=="string"&&oe("/Encoding /"+w.encoding),oe("/FirstChar 32"),oe("/LastChar 255"),oe(">>"),oe("endobj"))},sa=function(){for(var w in Ut)Ut.hasOwnProperty(w)&&(N===!1||N===!0&&S.hasOwnProperty(w))&&As(Ut[w])},ka=function(w){w.objectNumber=er();var z=[];z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Form"}),z.push({key:"BBox",value:"["+[W(w.x),W(w.y),W(w.x+w.width),W(w.y+w.height)].join(" ")+"]"}),z.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var re=w.pages[1].join(`
`);Un({data:re,additionalKeyValues:z,objectId:w.objectNumber}),oe("endobj")},bi=function(){for(var w in ar)ar.hasOwnProperty(w)&&ka(ar[w])},Go=function(w,z){var re,de=[],ye=1/(z-1);for(re=0;re<1;re+=ye)de.push(re);if(de.push(1),w[0].offset!=0){var Be={offset:0,color:w[0].color};w.unshift(Be)}if(w[w.length-1].offset!=1){var Qe={offset:1,color:w[w.length-1].color};w.push(Qe)}for(var lt="",p=0,E=0;E<de.length;E++){for(re=de[E];re>w[p+1].offset;)p++;var C=w[p].offset,$=(re-C)/(w[p+1].offset-C),ve=w[p].color,Re=w[p+1].color;lt+=ie(Math.round((1-$)*ve[0]+$*Re[0]).toString(16))+ie(Math.round((1-$)*ve[1]+$*Re[1]).toString(16))+ie(Math.round((1-$)*ve[2]+$*Re[2]).toString(16))}return lt.trim()},vi=function(w,z){z||(z=21);var re=er(),de=Go(w.colors,z),ye=[];ye.push({key:"FunctionType",value:"0"}),ye.push({key:"Domain",value:"[0.0 1.0]"}),ye.push({key:"Size",value:"["+z+"]"}),ye.push({key:"BitsPerSample",value:"8"}),ye.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ye.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Un({data:de,additionalKeyValues:ye,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),oe("endobj"),w.objectNumber=er(),oe("<< /ShadingType "+w.type),oe("/ColorSpace /DeviceRGB");var Be="/Coords ["+W(parseFloat(w.coords[0]))+" "+W(parseFloat(w.coords[1]))+" ";w.type===2?Be+=W(parseFloat(w.coords[2]))+" "+W(parseFloat(w.coords[3])):Be+=W(parseFloat(w.coords[2]))+" "+W(parseFloat(w.coords[3]))+" "+W(parseFloat(w.coords[4]))+" "+W(parseFloat(w.coords[5])),oe(Be+="]"),w.matrix&&oe("/Matrix ["+w.matrix.toString()+"]"),oe("/Function "+re+" 0 R"),oe("/Extend [true true]"),oe(">>"),oe("endobj")},Dl=function(w,z){var re=sr(),de=er();z.push({resourcesOid:re,objectOid:de}),w.objectNumber=de;var ye=[];ye.push({key:"Type",value:"/Pattern"}),ye.push({key:"PatternType",value:"1"}),ye.push({key:"PaintType",value:"1"}),ye.push({key:"TilingType",value:"1"}),ye.push({key:"BBox",value:"["+w.boundingBox.map(W).join(" ")+"]"}),ye.push({key:"XStep",value:W(w.xStep)}),ye.push({key:"YStep",value:W(w.yStep)}),ye.push({key:"Resources",value:re+" 0 R"}),w.matrix&&ye.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),Un({data:w.stream,additionalKeyValues:ye,objectId:w.objectNumber}),oe("endobj")},Qa=function(w){var z;for(z in Zt)Zt.hasOwnProperty(z)&&(Zt[z]instanceof gu?vi(Zt[z]):Zt[z]instanceof xd&&Dl(Zt[z],w))},Ja=function(w){for(var z in w.objectNumber=er(),oe("<<"),w)switch(z){case"opacity":oe("/ca "+Q(w[z]));break;case"stroke-opacity":oe("/CA "+Q(w[z]))}oe(">>"),oe("endobj")},kr=function(){var w;for(w in kn)kn.hasOwnProperty(w)&&Ja(kn[w])},Ss=function(){for(var w in oe("/XObject <<"),ar)ar.hasOwnProperty(w)&&ar[w].objectNumber>=0&&oe("/"+w+" "+ar[w].objectNumber+" 0 R");cn.publish("putXobjectDict"),oe(">>")},Ol=function(){Dn.oid=er(),oe("<<"),oe("/Filter /Standard"),oe("/V "+Dn.v),oe("/R "+Dn.r),oe("/U <"+Dn.toHexString(Dn.U)+">"),oe("/O <"+Dn.toHexString(Dn.O)+">"),oe("/P "+Dn.P),oe(">>"),oe("endobj")},as=function(){for(var w in oe("/Font <<"),Ut)Ut.hasOwnProperty(w)&&(N===!1||N===!0&&S.hasOwnProperty(w))&&oe("/"+w+" "+Ut[w].objectNumber+" 0 R");oe(">>")},Zi=function(){if(Object.keys(Zt).length>0){for(var w in oe("/Shading <<"),Zt)Zt.hasOwnProperty(w)&&Zt[w]instanceof gu&&Zt[w].objectNumber>=0&&oe("/"+w+" "+Zt[w].objectNumber+" 0 R");cn.publish("putShadingPatternDict"),oe(">>")}},Es=function(w){if(Object.keys(Zt).length>0){for(var z in oe("/Pattern <<"),Zt)Zt.hasOwnProperty(z)&&Zt[z]instanceof _.TilingPattern&&Zt[z].objectNumber>=0&&Zt[z].objectNumber<w&&oe("/"+z+" "+Zt[z].objectNumber+" 0 R");cn.publish("putTilingPatternDict"),oe(">>")}},Ko=function(){if(Object.keys(kn).length>0){var w;for(w in oe("/ExtGState <<"),kn)kn.hasOwnProperty(w)&&kn[w].objectNumber>=0&&oe("/"+w+" "+kn[w].objectNumber+" 0 R");cn.publish("putGStateDict"),oe(">>")}},zn=function(w){br(w.resourcesOid,!0),oe("<<"),oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),as(),Zi(),Es(w.objectOid),Ko(),Ss(),oe(">>"),oe("endobj")},zr=function(){var w=[];sa(),kr(),bi(),Qa(w),cn.publish("putResources"),w.forEach(zn),zn({resourcesOid:Ur,objectOid:Number.MAX_SAFE_INTEGER}),cn.publish("postPutResources")},eo=function(){cn.publish("putAdditionalObjects");for(var w=0;w<tt.length;w++){var z=tt[w];br(z.objId,!0),oe(z.content),oe("endobj")}cn.publish("postPutAdditionalObjects")},Ml=function(w){yn[w.fontName]=yn[w.fontName]||{},yn[w.fontName][w.fontStyle]=w.id},Gs=function(w,z,re,de,ye){var Be={id:"F"+(Object.keys(Ut).length+1).toString(10),postScriptName:w,fontName:z,fontStyle:re,encoding:de,isStandardFont:ye||!1,metadata:{}};return cn.publish("addFont",{font:Be,instance:this}),Ut[Be.id]=Be,Ml(Be),Be.id},Yo=function(w){for(var z=0,re=et.length;z<re;z++){var de=Gs.call(this,w[z][0],w[z][1],w[z][2],et[z][3],!0);N===!1&&(S[de]=!0);var ye=w[z][0].split("-");Ml({id:de,fontName:ye[0],fontStyle:ye[1]||""})}cn.publish("addFonts",{fonts:Ut,dictionary:yn})},Jr=function(w){return w.foo=function(){try{return w.apply(this,arguments)}catch(de){var z=de.stack||"";~z.indexOf(" at ")&&(z=z.split(" at ")[1]);var re="Error in function "+z.split(`
`)[0].split("<")[0]+": "+de.message;if(!Mt.console)throw new Error(re);Mt.console.error(re,de),Mt.alert&&alert(re)}},w.foo.bar=w,w.foo},to=function(w,z){var re,de,ye,Be,Qe,lt,p,E,C;if(ye=(z=z||{}).sourceEncoding||"Unicode",Qe=z.outputEncoding,(z.autoencode||Qe)&&Ut[nt].metadata&&Ut[nt].metadata[ye]&&Ut[nt].metadata[ye].encoding&&(Be=Ut[nt].metadata[ye].encoding,!Qe&&Ut[nt].encoding&&(Qe=Ut[nt].encoding),!Qe&&Be.codePages&&(Qe=Be.codePages[0]),typeof Qe=="string"&&(Qe=Be[Qe]),Qe)){for(p=!1,lt=[],re=0,de=w.length;re<de;re++)(E=Qe[w.charCodeAt(re)])?lt.push(String.fromCharCode(E)):lt.push(w[re]),lt[re].charCodeAt(0)>>8&&(p=!0);w=lt.join("")}for(re=w.length;p===void 0&&re!==0;)w.charCodeAt(re-1)>>8&&(p=!0),re--;if(!p)return w;for(lt=z.noBOM?[]:[254,255],re=0,de=w.length;re<de;re++){if((C=(E=w.charCodeAt(re))>>8)>>8)throw new Error("Character at position "+re+" of string '"+w+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");lt.push(C),lt.push(E-(C<<8))}return String.fromCharCode.apply(void 0,lt)},fn=_.__private__.pdfEscape=_.pdfEscape=function(w,z){return to(w,z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zr=_.__private__.beginPage=function(w){Je[++Bn]=[],Tt[Bn]={objId:0,contentsObjId:0,userUnit:Number(h),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},ss(Bn),Ve(Je[K])},Ks=function(w,z){var re,de,ye;switch(t=z||t,typeof w=="string"&&(re=M(w.toLowerCase()),Array.isArray(re)&&(de=re[0],ye=re[1])),Array.isArray(w)&&(de=w[0]*He,ye=w[1]*He),isNaN(de)&&(de=i[0],ye=i[1]),(de>14400||ye>14400)&&($n.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),de=Math.min(14400,de),ye=Math.min(14400,ye)),i=[de,ye],t.substr(0,1)){case"l":ye>de&&(i=[ye,de]);break;case"p":de>ye&&(i=[ye,de])}Zr(i),Jo(Qs),oe(ea),Zo!==0&&oe(Zo+" J"),_i!==0&&oe(_i+" j"),cn.publish("addPage",{pageNumber:Bn})},Ys=function(w){w>0&&w<=Bn&&(Je.splice(w,1),Tt.splice(w,1),Bn--,K>Bn&&(K=Bn),this.setPage(K))},ss=function(w){w>0&&w<=Bn&&(K=w)},_n=_.__private__.getNumberOfPages=_.getNumberOfPages=function(){return Je.length-1},$s=function(w,z,re){var de,ye=void 0;return re=re||{},w=w!==void 0?w:Ut[nt].fontName,z=z!==void 0?z:Ut[nt].fontStyle,de=w.toLowerCase(),yn[de]!==void 0&&yn[de][z]!==void 0?ye=yn[de][z]:yn[w]!==void 0&&yn[w][z]!==void 0?ye=yn[w][z]:re.disableWarning===!1&&$n.warn("Unable to look up font label for font '"+w+"', '"+z+"'. Refer to getFontList() for available fonts."),ye||re.noFallback||(ye=yn.times[z])==null&&(ye=yn.times.normal),ye},Ca=_.__private__.putInfo=function(){var w=er(),z=function(de){return de};for(var re in v!==null&&(z=Dn.encryptor(w,0)),oe("<<"),oe("/Producer ("+fn(z("jsPDF "+Rt.version))+")"),Fe)Fe.hasOwnProperty(re)&&Fe[re]&&oe("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+fn(z(Fe[re]))+")");oe("/CreationDate ("+fn(z(Le))+")"),oe(">>"),oe("endobj")},Ts=_.__private__.putCatalog=function(w){var z=(w=w||{}).rootDictionaryObjId||xa;switch(er(),oe("<<"),oe("/Type /Catalog"),oe("/Pages "+z+" 0 R"),ot||(ot="fullwidth"),ot){case"fullwidth":oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":oe("/OpenAction [3 0 R /Fit]");break;case"original":oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+ot;re.substr(re.length-1)==="%"&&(ot=parseInt(ot)/100),typeof ot=="number"&&oe("/OpenAction [3 0 R /XYZ null null "+Q(ot)+"]")}switch(wt||(wt="continuous"),wt){case"continuous":oe("/PageLayout /OneColumn");break;case"single":oe("/PageLayout /SinglePage");break;case"two":case"twoleft":oe("/PageLayout /TwoColumnLeft");break;case"tworight":oe("/PageLayout /TwoColumnRight")}Ct&&oe("/PageMode /"+Ct),cn.publish("putCatalog"),oe(">>"),oe("endobj")},Fl=_.__private__.putTrailer=function(){oe("trailer"),oe("<<"),oe("/Size "+(ue+1)),oe("/Root "+ue+" 0 R"),oe("/Info "+(ue-1)+" 0 R"),v!==null&&oe("/Encrypt "+Dn.oid+" 0 R"),oe("/ID [ <"+ae+"> <"+ae+"> ]"),oe(">>")},$o=_.__private__.putHeader=function(){oe("%PDF-"+L),oe("%ºß¬à")},Xo=_.__private__.putXRef=function(){var w="0000000000";oe("xref"),oe("0 "+(ue+1)),oe("0000000000 65535 f ");for(var z=1;z<=ue;z++)typeof Ee[z]=="function"?oe((w+Ee[z]()).slice(-10)+" 00000 n "):Ee[z]!==void 0?oe((w+Ee[z]).slice(-10)+" 00000 n "):oe("0000000000 00000 n ")},js=_.__private__.buildDocument=function(){_t(),Ve(_e),cn.publish("buildDocument"),$o(),_s(),eo(),zr(),v!==null&&Ol(),Ca(),Ts();var w=Pe;return Xo(),Fl(),oe("startxref"),oe(""+w),oe("%%EOF"),Ve(Je[K]),_e.join(`
`)},no=_.__private__.getBlob=function(w){return new Blob([gt(w)],{type:"application/pdf"})},ks=_.output=_.__private__.output=Jr(function(w,z){switch(typeof(z=z||{})=="string"?z={filename:z}:z.filename=z.filename||"generated.pdf",w){case void 0:return js();case"save":_.save(z.filename);break;case"arraybuffer":return gt(js());case"blob":return no(js());case"bloburi":case"bloburl":if(Mt.URL!==void 0&&typeof Mt.URL.createObjectURL=="function")return Mt.URL&&Mt.URL.createObjectURL(no(js()))||void 0;$n.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",de=js();try{re=sx(de)}catch{re=sx(unescape(encodeURIComponent(de)))}return"data:application/pdf;filename="+z.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mt)==="[object Window]"){var ye="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';z.pdfObjectUrl&&(ye=z.pdfObjectUrl,Be="");var Qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ye+'"'+Be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(z)+");<\/script></body></html>",lt=Mt.open();return lt!==null&&lt.document.write(Qe),lt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mt)==="[object Window]"){var p='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+z.filename+'" width="500px" height="400px" /></body></html>',E=Mt.open();if(E!==null){E.document.write(p);var C=this;E.document.documentElement.querySelector("#pdfViewer").onload=function(){E.document.title=z.filename,E.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(C.output("bloburl"))}}return E}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var $='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",z)+'"></iframe></body></html>',ve=Mt.open();if(ve!==null&&(ve.document.write($),ve.document.title=z.filename),ve||typeof safari>"u")return ve;break;case"datauri":case"dataurl":return Mt.document.location.href=this.output("datauristring",z);default:return null}}),is=function(w){return Array.isArray(ja)===!0&&ja.indexOf(w)>-1};switch(r){case"pt":He=1;break;case"mm":He=72/25.4;break;case"cm":He=72/2.54;break;case"in":He=72;break;case"px":He=is("px_scaling")==1?.75:96/72;break;case"pc":case"em":He=12;break;case"ex":He=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);He=r}var Dn=null;Ae(),he();var Cs=function(w){return v!==null?Dn.encryptor(w,0):function(z){return z}},os=_.__private__.getPageInfo=_.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Tt[w].objId,pageNumber:w,pageContext:Tt[w]}},It=_.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var z in Tt)if(Tt[z].objId===w)break;return os(z)},ls=_.__private__.getCurrentPageInfo=_.getCurrentPageInfo=function(){return{objId:Tt[K].objId,pageNumber:K,pageContext:Tt[K]}};_.addPage=function(){return Ks.apply(this,arguments),this},_.setPage=function(){return ss.apply(this,arguments),Ve.call(this,Je[K]),this},_.insertPage=function(w){return this.addPage(),this.movePage(K,w),this},_.movePage=function(w,z){var re,de;if(w>z){re=Je[w],de=Tt[w];for(var ye=w;ye>z;ye--)Je[ye]=Je[ye-1],Tt[ye]=Tt[ye-1];Je[z]=re,Tt[z]=de,this.setPage(z)}else if(w<z){re=Je[w],de=Tt[w];for(var Be=w;Be<z;Be++)Je[Be]=Je[Be+1],Tt[Be]=Tt[Be+1];Je[z]=re,Tt[z]=de,this.setPage(z)}return this},_.deletePage=function(){return Ys.apply(this,arguments),this},_.__private__.text=_.text=function(w,z,re,de,ye){var Be,Qe,lt,p,E,C,$,ve,Re,Ze=(de=de||{}).scope||this;if(typeof w=="number"&&typeof z=="number"&&(typeof re=="string"||Array.isArray(re))){var Lt=re;re=z,z=w,w=Lt}if(arguments[3]instanceof dt?(k("The transform parameter of text() with a Matrix value"),Re=ye):(lt=arguments[4],p=arguments[5],Vn($=arguments[3])==="object"&&$!==null||(typeof lt=="string"&&(p=lt,lt=null),typeof $=="string"&&(p=$,$=null),typeof $=="number"&&(lt=$,$=null),de={flags:$,angle:lt,align:p})),isNaN(z)||isNaN(re)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return Ze;var an="",qt=!1,An=typeof de.lineHeightFactor=="number"?de.lineHeightFactor:rn,In=Ze.internal.scaleFactor;function hs(en){return en=en.split("	").join(Array(de.TabLen||9).join(" ")),fn(en,$)}function dr(en){for(var tn,qn=en.concat(),hr=[],ms=qn.length;ms--;)typeof(tn=qn.shift())=="string"?hr.push(tn):Array.isArray(en)&&(tn.length===1||tn[1]===void 0&&tn[2]===void 0)?hr.push(tn[0]):hr.push([tn[0],tn[1],tn[2]]);return hr}function Pa(en,tn){var qn;if(typeof en=="string")qn=tn(en)[0];else if(Array.isArray(en)){for(var hr,ms,xo=en.concat(),bo=[],ki=xo.length;ki--;)typeof(hr=xo.shift())=="string"?bo.push(tn(hr)[0]):Array.isArray(hr)&&typeof hr[0]=="string"&&(ms=tn(hr[0],hr[1],hr[2]),bo.push([ms[0],ms[1],ms[2]]));qn=bo}return qn}var ri=!1,oo=!0;if(typeof w=="string")ri=!0;else if(Array.isArray(w)){var zl=w.concat();Qe=[];for(var el,Cr=zl.length;Cr--;)(typeof(el=zl.shift())!="string"||Array.isArray(el)&&typeof el[0]!="string")&&(oo=!1);ri=oo}if(ri===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var lo=rt/Ze.internal.scaleFactor,tl=lo*(An-1);switch(de.baseline){case"bottom":re-=tl;break;case"top":re+=lo-tl;break;case"hanging":re+=lo-2*tl;break;case"middle":re+=lo/2-tl}if((C=de.maxWidth||0)>0&&(typeof w=="string"?w=Ze.splitTextToSize(w,C):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(en,tn){return en.concat(Ze.splitTextToSize(tn,C))},[]))),Be={text:w,x:z,y:re,options:de,mutex:{pdfEscape:fn,activeFontKey:nt,fonts:Ut,activeFontSize:rt}},cn.publish("preProcessText",Be),w=Be.text,lt=(de=Be.options).angle,!(Re instanceof dt)&&lt&&typeof lt=="number"){lt*=Math.PI/180,de.rotationDirection===0&&(lt=-lt),I===T.ADVANCED&&(lt=-lt);var nl=Math.cos(lt),ql=Math.sin(lt);Re=new dt(nl,ql,-ql,nl,0,0)}else lt&&lt instanceof dt&&(Re=lt);I!==T.ADVANCED||Re||(Re=Rn),(E=de.charSpace||Ni)!==void 0&&(an+=W(P(E))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ve=de.horizontalScale)!==void 0&&(an+=W(100*ve)+` Tz
`),de.lang;var Da=-1,Wd=de.renderingMode!==void 0?de.renderingMode:de.stroke,Gc=Ze.internal.getCurrentPageInfo().pageContext;switch(Wd){case 0:case!1:case"fill":Da=0;break;case 1:case!0:case"stroke":Da=1;break;case 2:case"fillThenStroke":Da=2;break;case 3:case"invisible":Da=3;break;case 4:case"fillAndAddForClipping":Da=4;break;case 5:case"strokeAndAddPathForClipping":Da=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Da=6;break;case 7:case"addToPathForClipping":Da=7}var Iu=Gc.usedRenderingMode!==void 0?Gc.usedRenderingMode:-1;Da!==-1?an+=Da+` Tr
`:Iu!==-1&&(an+=`0 Tr
`),Da!==-1&&(Gc.usedRenderingMode=Da),p=de.align||"left";var fs,qr=rt*An,co=Ze.internal.pageSize.getWidth(),Kc=Ut[nt];E=de.charSpace||Ni,C=de.maxWidth||0,$=Object.assign({autoencode:!0,noBOM:!0},de.flags);var Ti=[],uo=function(en){return Ze.getStringUnitWidth(en,{font:Kc,charSpace:E,fontSize:rt,doKerning:!1})*rt/In};if(Object.prototype.toString.call(w)==="[object Array]"){var va;Qe=dr(w),p!=="left"&&(fs=Qe.map(uo));var ta,ho=0;if(p==="right"){z-=fs[0],w=[],Cr=Qe.length;for(var Oa=0;Oa<Cr;Oa++)Oa===0?(ta=la(z),va=wr(re)):(ta=P(ho-fs[Oa]),va=-qr),w.push([Qe[Oa],ta,va]),ho=fs[Oa]}else if(p==="center"){z-=fs[0]/2,w=[],Cr=Qe.length;for(var Ps=0;Ps<Cr;Ps++)Ps===0?(ta=la(z),va=wr(re)):(ta=P((ho-fs[Ps])/2),va=-qr),w.push([Qe[Ps],ta,va]),ho=fs[Ps]}else if(p==="left"){w=[],Cr=Qe.length;for(var ai=0;ai<Cr;ai++)w.push(Qe[ai])}else if(p==="justify"&&Kc.encoding==="Identity-H"){w=[],Cr=Qe.length,C=C!==0?C:co;for(var Ds=0,ir=0;ir<Cr;ir++)if(va=ir===0?wr(re):-qr,ta=ir===0?la(z):Ds,ir<Cr-1){var Os=P((C-fs[ir])/(Qe[ir].split(" ").length-1)),Nr=Qe[ir].split(" ");w.push([Nr[0]+" ",ta,va]),Ds=0;for(var Ma=1;Ma<Nr.length;Ma++){var rl=(uo(Nr[Ma-1]+" "+Nr[Ma])-uo(Nr[Ma]))*In+Os;Ma==Nr.length-1?w.push([Nr[Ma],rl,0]):w.push([Nr[Ma]+" ",rl,0]),Ds-=rl}}else w.push([Qe[ir],ta,va]);w.push(["",Ds,0])}else{if(p!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],Cr=Qe.length,C=C!==0?C:co,ir=0;ir<Cr;ir++)va=ir===0?wr(re):-qr,ta=ir===0?la(z):0,ir<Cr-1?Ti.push(W(P((C-fs[ir])/(Qe[ir].split(" ").length-1)))):Ti.push(0),w.push([Qe[ir],ta,va])}}var si=typeof de.R2L=="boolean"?de.R2L:bt;si===!0&&(w=Pa(w,function(en,tn,qn){return[en.split("").reverse().join(""),tn,qn]})),Be={text:w,x:z,y:re,options:de,mutex:{pdfEscape:fn,activeFontKey:nt,fonts:Ut,activeFontSize:rt}},cn.publish("postProcessText",Be),w=Be.text,qt=Be.mutex.isHex||!1;var Hl=Ut[nt].encoding;Hl!=="WinAnsiEncoding"&&Hl!=="StandardEncoding"||(w=Pa(w,function(en,tn,qn){return[hs(en),tn,qn]})),Qe=dr(w),w=[];for(var fo,mo,po,al=0,Wl=1,go=Array.isArray(Qe[0])?Wl:al,ji="",sl=function(en,tn,qn){var hr="";return qn instanceof dt?(qn=typeof de.angle=="number"?Cn(qn,new dt(1,0,0,1,en,tn)):Cn(new dt(1,0,0,1,en,tn),qn),I===T.ADVANCED&&(qn=Cn(new dt(1,0,0,-1,0,0),qn)),hr=qn.join(" ")+` Tm
`):hr=W(en)+" "+W(tn)+` Td
`,hr},or=0;or<Qe.length;or++){switch(ji="",go){case Wl:po=(qt?"<":"(")+Qe[or][0]+(qt?">":")"),fo=parseFloat(Qe[or][1]),mo=parseFloat(Qe[or][2]);break;case al:po=(qt?"<":"(")+Qe[or]+(qt?">":")"),fo=la(z),mo=wr(re)}Ti!==void 0&&Ti[or]!==void 0&&(ji=Ti[or]+` Tw
`),or===0?w.push(ji+sl(fo,mo,Re)+po):go===al?w.push(ji+po):go===Wl&&w.push(ji+sl(fo,mo,Re)+po)}w=go===al?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var es=`BT
/`;return es+=nt+" "+rt+` Tf
`,es+=W(rt*An)+` TL
`,es+=Is+`
`,es+=an,es+=w,oe(es+="ET"),S[nt]=!0,Ze};var Vl=_.__private__.clip=_.clip=function(w){return oe(w==="evenodd"?"W*":"W"),this};_.clipEvenOdd=function(){return Vl("evenodd")},_.__private__.discardPath=_.discardPath=function(){return oe("n"),this};var ia=_.__private__.isValidStyle=function(w){var z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(z=!0),z};_.__private__.setDefaultPathOperation=_.setDefaultPathOperation=function(w){return ia(w)&&(g=w),this};var Ra=_.__private__.getStyle=_.getStyle=function(w){var z=g;switch(w){case"D":case"S":z="S";break;case"F":z="f";break;case"FD":case"DF":z="B";break;case"f":case"f*":case"B":case"B*":z=w}return z},ba=_.close=function(){return oe("h"),this};_.stroke=function(){return oe("S"),this},_.fill=function(w){return cs("f",w),this},_.fillEvenOdd=function(w){return cs("f*",w),this},_.fillStroke=function(w){return cs("B",w),this},_.fillStrokeEvenOdd=function(w){return cs("B*",w),this};var cs=function(w,z){Vn(z)==="object"?Rs(z,w):oe(w)},Ia=function(w){w===null||I===T.ADVANCED&&w===void 0||(w=Ra(w),oe(w))};function Xs(w,z,re,de,ye){var Be=new xd(z||this.boundingBox,re||this.xStep,de||this.yStep,this.gState,ye||this.matrix);Be.stream=this.stream;var Qe=w+"$$"+this.cloneIndex+++"$$";return Gn(Qe,Be),Be}var Rs=function(w,z){var re=Xn[w.key],de=Zt[re];if(de instanceof gu)oe("q"),oe(Qo(z)),de.gState&&_.setGState(de.gState),oe(w.matrix.toString()+" cm"),oe("/"+re+" sh"),oe("Q");else if(de instanceof xd){var ye=new dt(1,0,0,-1,0,ca());w.matrix&&(ye=ye.multiply(w.matrix||Rn),re=Xs.call(de,w.key,w.boundingBox,w.xStep,w.yStep,ye).id),oe("q"),oe("/Pattern cs"),oe("/"+re+" scn"),de.gState&&_.setGState(de.gState),oe(z),oe("Q")}},Qo=function(w){switch(w){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},La=_.moveTo=function(w,z){return oe(W(P(w))+" "+W(ce(z))+" m"),this},oa=_.lineTo=function(w,z){return oe(W(P(w))+" "+W(ce(z))+" l"),this},us=_.curveTo=function(w,z,re,de,ye,Be){return oe([W(P(w)),W(ce(z)),W(P(re)),W(ce(de)),W(P(ye)),W(ce(Be)),"c"].join(" ")),this};_.__private__.line=_.line=function(w,z,re,de,ye){if(isNaN(w)||isNaN(z)||isNaN(re)||isNaN(de)||!ia(ye))throw new Error("Invalid arguments passed to jsPDF.line");return I===T.COMPAT?this.lines([[re-w,de-z]],w,z,[1,1],ye||"S"):this.lines([[re-w,de-z]],w,z,[1,1]).stroke()},_.__private__.lines=_.lines=function(w,z,re,de,ye,Be){var Qe,lt,p,E,C,$,ve,Re,Ze,Lt,an,qt;if(typeof w=="number"&&(qt=re,re=z,z=w,w=qt),de=de||[1,1],Be=Be||!1,isNaN(z)||isNaN(re)||!Array.isArray(w)||!Array.isArray(de)||!ia(ye)||typeof Be!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(La(z,re),Qe=de[0],lt=de[1],E=w.length,Lt=z,an=re,p=0;p<E;p++)(C=w[p]).length===2?(Lt=C[0]*Qe+Lt,an=C[1]*lt+an,oa(Lt,an)):($=C[0]*Qe+Lt,ve=C[1]*lt+an,Re=C[2]*Qe+Lt,Ze=C[3]*lt+an,Lt=C[4]*Qe+Lt,an=C[5]*lt+an,us($,ve,Re,Ze,Lt,an));return Be&&ba(),Ia(ye),this},_.path=function(w){for(var z=0;z<w.length;z++){var re=w[z],de=re.c;switch(re.op){case"m":La(de[0],de[1]);break;case"l":oa(de[0],de[1]);break;case"c":us.apply(this,de);break;case"h":ba()}}return this},_.__private__.rect=_.rect=function(w,z,re,de,ye){if(isNaN(w)||isNaN(z)||isNaN(re)||isNaN(de)||!ia(ye))throw new Error("Invalid arguments passed to jsPDF.rect");return I===T.COMPAT&&(de=-de),oe([W(P(w)),W(ce(z)),W(P(re)),W(P(de)),"re"].join(" ")),Ia(ye),this},_.__private__.triangle=_.triangle=function(w,z,re,de,ye,Be,Qe){if(isNaN(w)||isNaN(z)||isNaN(re)||isNaN(de)||isNaN(ye)||isNaN(Be)||!ia(Qe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-w,de-z],[ye-re,Be-de],[w-ye,z-Be]],w,z,[1,1],Qe,!0),this},_.__private__.roundedRect=_.roundedRect=function(w,z,re,de,ye,Be,Qe){if(isNaN(w)||isNaN(z)||isNaN(re)||isNaN(de)||isNaN(ye)||isNaN(Be)||!ia(Qe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lt=4/3*(Math.SQRT2-1);return ye=Math.min(ye,.5*re),Be=Math.min(Be,.5*de),this.lines([[re-2*ye,0],[ye*lt,0,ye,Be-Be*lt,ye,Be],[0,de-2*Be],[0,Be*lt,-ye*lt,Be,-ye,Be],[2*ye-re,0],[-ye*lt,0,-ye,-Be*lt,-ye,-Be],[0,2*Be-de],[0,-Be*lt,ye*lt,-Be,ye,-Be]],w+ye,z,[1,1],Qe,!0),this},_.__private__.ellipse=_.ellipse=function(w,z,re,de,ye){if(isNaN(w)||isNaN(z)||isNaN(re)||isNaN(de)||!ia(ye))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Be=4/3*(Math.SQRT2-1)*re,Qe=4/3*(Math.SQRT2-1)*de;return La(w+re,z),us(w+re,z-Qe,w+Be,z-de,w,z-de),us(w-Be,z-de,w-re,z-Qe,w-re,z),us(w-re,z+Qe,w-Be,z+de,w,z+de),us(w+Be,z+de,w+re,z+Qe,w+re,z),Ia(ye),this},_.__private__.circle=_.circle=function(w,z,re,de){if(isNaN(w)||isNaN(z)||isNaN(re)||!ia(de))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,z,re,re,de)},_.setFont=function(w,z,re){return re&&(z=ge(z,re)),nt=$s(w,z,{disableWarning:!1}),this};var yr=_.__private__.getFont=_.getFont=function(){return Ut[$s.apply(_,arguments)]};_.__private__.getFontList=_.getFontList=function(){var w,z,re={};for(w in yn)if(yn.hasOwnProperty(w))for(z in re[w]=[],yn[w])yn[w].hasOwnProperty(z)&&re[w].push(z);return re},_.addFont=function(w,z,re,de,ye){var Be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Be.indexOf(arguments[3])!==-1?ye=arguments[3]:arguments[3]&&Be.indexOf(arguments[3])==-1&&(re=ge(re,de)),ye=ye||"Identity-H",Gs.call(this,w,z,re,ye)};var rn,Qs=n.lineWidth||.200025,ds=_.__private__.getLineWidth=_.getLineWidth=function(){return Qs},Jo=_.__private__.setLineWidth=_.setLineWidth=function(w){return Qs=w,oe(W(P(w))+" w"),this};_.__private__.setLineDash=Rt.API.setLineDash=Rt.API.setLineDashPattern=function(w,z){if(w=w||[],z=z||0,isNaN(z)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(re){return W(P(re))}).join(" "),z=W(P(z)),oe("["+w+"] "+z+" d"),this};var yi=_.__private__.getLineHeight=_.getLineHeight=function(){return rt*rn};_.__private__.getLineHeight=_.getLineHeight=function(){return rt*rn};var wi=_.__private__.setLineHeightFactor=_.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(rn=w),this},Za=_.__private__.getLineHeightFactor=_.getLineHeightFactor=function(){return rn};wi(n.lineHeight);var la=_.__private__.getHorizontalCoordinate=function(w){return P(w)},wr=_.__private__.getVerticalCoordinate=function(w){return I===T.ADVANCED?w:Tt[K].mediaBox.topRightY-Tt[K].mediaBox.bottomLeftY-P(w)},Bl=_.__private__.getHorizontalCoordinateString=_.getHorizontalCoordinateString=function(w){return W(la(w))},Js=_.__private__.getVerticalCoordinateString=_.getVerticalCoordinateString=function(w){return W(wr(w))},ea=n.strokeColor||"0 G";_.__private__.getStrokeColor=_.getDrawColor=function(){return Tr(ea)},_.__private__.setStrokeColor=_.setDrawColor=function(w,z,re,de){return ea=vr({ch1:w,ch2:z,ch3:re,ch4:de,pdfColorType:"draw",precision:2}),oe(ea),this};var Zs=n.fillColor||"0 g";_.__private__.getFillColor=_.getFillColor=function(){return Tr(Zs)},_.__private__.setFillColor=_.setFillColor=function(w,z,re,de){return Zs=vr({ch1:w,ch2:z,ch3:re,ch4:de,pdfColorType:"fill",precision:2}),oe(Zs),this};var Is=n.textColor||"0 g",ro=_.__private__.getTextColor=_.getTextColor=function(){return Tr(Is)};_.__private__.setTextColor=_.setTextColor=function(w,z,re,de){return Is=vr({ch1:w,ch2:z,ch3:re,ch4:de,pdfColorType:"text",precision:3}),this};var Ni=n.charSpace,ao=_.__private__.getCharSpace=_.getCharSpace=function(){return parseFloat(Ni||0)};_.__private__.setCharSpace=_.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ni=w,this};var Zo=0;_.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_.__private__.setLineCap=_.setLineCap=function(w){var z=_.CapJoinStyles[w];if(z===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zo=z,oe(z+" J"),this};var _i=0;_.__private__.setLineJoin=_.setLineJoin=function(w){var z=_.CapJoinStyles[w];if(z===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _i=z,oe(z+" j"),this},_.__private__.setLineMiterLimit=_.__private__.setMiterLimit=_.setLineMiterLimit=_.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return oe(W(P(w))+" M"),this},_.GState=m0,_.setGState=function(w){(w=typeof w=="string"?kn[ur[w]]:ei(null,w)).equals(Xr)||(oe("/"+w.id+" gs"),Xr=w)};var ei=function(w,z){if(!w||!ur[w]){var re=!1;for(var de in kn)if(kn.hasOwnProperty(de)&&kn[de].equals(z)){re=!0;break}if(re)z=kn[de];else{var ye="GS"+(Object.keys(kn).length+1).toString(10);kn[ye]=z,z.id=ye}return w&&(ur[w]=z.id),cn.publish("addGState",z),z}};_.addGState=function(w,z){return ei(w,z),this},_.saveGraphicsState=function(){return oe("q"),Br.push({key:nt,size:rt,color:Is}),this},_.restoreGraphicsState=function(){oe("Q");var w=Br.pop();return nt=w.key,rt=w.size,Is=w.color,Xr=null,this},_.setCurrentTransformationMatrix=function(w){return oe(w.toString()+" cm"),this},_.comment=function(w){return oe("#"+w),this};var Ai=function(w,z){var re=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(Be){isNaN(Be)||(re=parseFloat(Be))}});var de=z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return de},set:function(Be){isNaN(Be)||(de=parseFloat(Be))}});var ye="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ye},set:function(Be){ye=Be.toString()}}),this},so=function(w,z,re,de){Ai.call(this,w,z),this.type="rect";var ye=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ye},set:function(Qe){isNaN(Qe)||(ye=parseFloat(Qe))}});var Be=de||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Be},set:function(Qe){isNaN(Qe)||(Be=parseFloat(Qe))}}),this},Si=function(){this.page=Bn,this.currentPage=K,this.pages=Je.slice(0),this.pagesContext=Tt.slice(0),this.x=Nt,this.y=mt,this.matrix=$t,this.width=ni(K),this.height=ca(K),this.outputDestination=at,this.id="",this.objectNumber=-1};Si.prototype.restore=function(){Bn=this.page,K=this.currentPage,Tt=this.pagesContext,Je=this.pages,Nt=this.x,mt=this.y,$t=this.matrix,Ei(K,this.width),io(K,this.height),at=this.outputDestination};var ti=function(w,z,re,de,ye){Xa.push(new Si),Bn=K=0,Je=[],Nt=w,mt=z,$t=ye,Zr([re,de])},Ul=function(w){if(Qr[w])Xa.pop().restore();else{var z=new Si,re="Xo"+(Object.keys(ar).length+1).toString(10);z.id=re,Qr[w]=re,ar[re]=z,cn.publish("addFormObject",z),Xa.pop().restore()}};for(var Ls in _.beginFormObject=function(w,z,re,de,ye){return ti(w,z,re,de,ye),this},_.endFormObject=function(w){return Ul(w),this},_.doFormObject=function(w,z){var re=ar[Qr[w]];return oe("q"),oe(z.toString()+" cm"),oe("/"+re.id+" Do"),oe("Q"),this},_.getFormObject=function(w){var z=ar[Qr[w]];return{x:z.x,y:z.y,width:z.width,height:z.height,matrix:z.matrix}},_.save=function(w,z){return w=w||"generated.pdf",(z=z||{}).returnPromise=z.returnPromise||!1,z.returnPromise===!1?(pu(no(js()),w),typeof pu.unload=="function"&&Mt.setTimeout&&setTimeout(pu.unload,911),this):new Promise(function(re,de){try{var ye=pu(no(js()),w);typeof pu.unload=="function"&&Mt.setTimeout&&setTimeout(pu.unload,911),re(ye)}catch(Be){de(Be.message)}})},Rt.API)Rt.API.hasOwnProperty(Ls)&&(Ls==="events"&&Rt.API.events.length?function(w,z){var re,de,ye;for(ye=z.length-1;ye!==-1;ye--)re=z[ye][0],de=z[ye][1],w.subscribe.apply(w,[re].concat(typeof de=="function"?[de]:de))}(cn,Rt.API.events):_[Ls]=Rt.API[Ls]);var ni=_.getPageWidth=function(w){return(Tt[w=w||K].mediaBox.topRightX-Tt[w].mediaBox.bottomLeftX)/He},Ei=_.setPageWidth=function(w,z){Tt[w].mediaBox.topRightX=z*He+Tt[w].mediaBox.bottomLeftX},ca=_.getPageHeight=function(w){return(Tt[w=w||K].mediaBox.topRightY-Tt[w].mediaBox.bottomLeftY)/He},io=_.setPageHeight=function(w,z){Tt[w].mediaBox.topRightY=z*He+Tt[w].mediaBox.bottomLeftY};return _.internal={pdfEscape:fn,getStyle:Ra,getFont:yr,getFontSize:ut,getCharSpace:ao,getTextColor:ro,getLineHeight:yi,getLineHeightFactor:Za,getLineWidth:ds,write:At,getHorizontalCoordinate:la,getVerticalCoordinate:wr,getCoordinateString:Bl,getVerticalCoordinateString:Js,collections:{},newObject:er,newAdditionalObject:xi,newObjectDeferred:sr,newObjectDeferredBegin:br,getFilters:jr,putStream:Un,events:cn,scaleFactor:He,pageSize:{getWidth:function(){return ni(K)},setWidth:function(w){Ei(K,w)},getHeight:function(){return ca(K)},setHeight:function(w){io(K,w)}},encryptionOptions:v,encryption:Dn,getEncryptor:Cs,output:ks,getNumberOfPages:_n,pages:Je,out:oe,f2:Q,f3:R,getPageInfo:os,getPageInfoByObjId:It,getCurrentPageInfo:ls,getPDFVersion:O,Point:Ai,Rectangle:so,Matrix:dt,hasHotfix:is},Object.defineProperty(_.internal.pageSize,"width",{get:function(){return ni(K)},set:function(w){Ei(K,w)},enumerable:!0,configurable:!0}),Object.defineProperty(_.internal.pageSize,"height",{get:function(){return ca(K)},set:function(w){io(K,w)},enumerable:!0,configurable:!0}),Yo.call(_,et),nt="F1",Ks(i,t),cn.publish("initialized"),_}md.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},md.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},md.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},md.prototype.processOwnerPassword=function(n,e){return ox(ix(e).substr(0,5),n)},md.prototype.encryptor=function(n,e){var t=ix(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return ox(t,r)}},m0.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Vn(n)!==Vn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Rt.API={events:[]},Rt.version="3.0.1";var Er=Rt.API,xb=1,Ru=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},od=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Kt=function(n){return n.toFixed(2)},yc=function(n){return n.toFixed(5)};Er.__acroform__={};var Ns=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},gy=function(n){return n*xb},Ro=function(n){var e=new D3,t=yt.internal.getHeight(n)||0,r=yt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Kt(r)),Number(Kt(t))],e},a8=Er.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},s8=Er.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},i8=Er.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},Mr=Er.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return i8(n,e-1)},Fr=Er.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return a8(n,e-1)},Vr=Er.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return s8(n,e-1)},o8=Er.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],l=n[1],u=n[2],h=n[3],f={};return f.lowerLeft_X=t(i)||0,f.lowerLeft_Y=r(l+h)||0,f.upperRight_X=t(i+u)||0,f.upperRight_Y=r(l)||0,[Number(Kt(f.lowerLeft_X)),Number(Kt(f.lowerLeft_Y)),Number(Kt(f.upperRight_X)),Number(Kt(f.upperRight_Y))]},l8=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=lx(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Kt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var l=Ro(n);return l.scope=n.scope,l.stream=e.join(`
`),l}},lx=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var l=t,u=yt.internal.getHeight(n)||0;u=u<0?-u:u;var h=yt.internal.getWidth(n)||0;h=h<0?-h:h;var f=function(R,P,B){if(R+1<i.length){var ce=P+" "+i[R+1][0];return km(ce,n,B).width<=h-4}return!1};l++;e:for(;l>0;){e="",l--;var g,v,N=km("3",n,l).height,S=n.multiline?u-l:(u-N)/2,_=S+=2,L=0,O=0,q=0;if(l<=0){e=`(...) Tj
`,e+="% Width of Text: "+km(e,n,l=12).width+", FieldWidth:"+h+`
`;break}for(var M="",T=0,I=0;I<i.length;I++)if(i.hasOwnProperty(I)){var ee=!1;if(i[I].length!==1&&q!==i[I].length-1){if((N+2)*(T+2)+2>u)continue e;M+=i[I][q],ee=!0,O=I,I--}else{M=(M+=i[I][q]+" ").substr(M.length-1)==" "?M.substr(0,M.length-1):M;var se=parseInt(I),ge=f(se,M,l),W=I>=i.length-1;if(ge&&!W){M+=" ",q=0;continue}if(ge||W){if(W)O=se;else if(n.multiline&&(N+2)*(T+2)+2>u)continue e}else{if(!n.multiline||(N+2)*(T+2)+2>u)continue e;O=se}}for(var k="",V=L;V<=O;V++){var Q=i[V];if(n.multiline){if(V===O){k+=Q[q]+" ",q=(q+1)%Q.length;continue}if(V===L){k+=Q[Q.length-1]+" ";continue}}k+=Q[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,v=km(k,n,l).width,n.textAlign){case"right":g=h-v-2;break;case"center":g=(h-v)/2;break;case"left":default:g=2}e+=Kt(g)+" "+Kt(_)+` Td
`,e+="("+Ru(k)+`) Tj
`,e+=-Kt(g)+` 0 Td
`,_=-(l+2),v=0,L=ee?O:O+1,T++,M=""}break}return r.text=e,r.fontSize=l,r},km=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},c8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},u8=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},d8=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Vn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},h8=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Qi.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(c8)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");xb=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new O3,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var l=r[i];l.objId=void 0,l.hasAnnotation&&u8(l,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var l=!r;for(var u in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var h=r[u],f=[],g=h.Rect;if(h.Rect&&(h.Rect=o8(h.Rect,i)),i.internal.newObjectDeferredBegin(h.objId,!0),h.DA=yt.createDefaultAppearanceStream(h),Vn(h)==="object"&&typeof h.getKeyValueListForStream=="function"&&(f=h.getKeyValueListForStream()),h.Rect=g,h.hasAppearanceStream&&!h.appearanceStreamContent){var v=l8(h);f.push({key:"AP",value:"<</N "+v+">>"}),i.internal.acroformPlugin.xForms.push(v)}if(h.appearanceStreamContent){var N="";for(var S in h.appearanceStreamContent)if(h.appearanceStreamContent.hasOwnProperty(S)){var _=h.appearanceStreamContent[S];if(N+="/"+S+" ",N+="<<",Object.keys(_).length>=1||Array.isArray(_)){for(var u in _)if(_.hasOwnProperty(u)){var L=_[u];typeof L=="function"&&(L=L.call(i,h)),N+="/"+u+" "+L+" ",i.internal.acroformPlugin.xForms.indexOf(L)>=0||i.internal.acroformPlugin.xForms.push(L)}}else typeof(L=_)=="function"&&(L=L.call(i,h)),N+="/"+u+" "+L,i.internal.acroformPlugin.xForms.indexOf(L)>=0||i.internal.acroformPlugin.xForms.push(L);N+=">>"}f.push({key:"AP",value:`<<
`+N+">>"})}i.internal.putStream({additionalKeyValues:f,objectId:h.objId}),i.internal.out("endobj")}l&&d8(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},P3=Er.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(u){return u};if(Array.isArray(n)){for(var i="[",l=0;l<n.length;l++)switch(l!==0&&(i+=" "),Vn(n[l])){case"boolean":case"number":case"object":i+=n[l].toString();break;case"string":n[l].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Ru(r(n[l].toString()))+")"):i+=n[l].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},wg=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Ru(r(n))+")"},Lo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Lo.prototype.toString=function(){return this.objId+" 0 R"},Lo.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Lo.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:P3(i,this.objId,this.scope)}):i instanceof Lo?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var D3=function(){Lo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Ns(D3,Lo);var O3=function(){Lo.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ru(t(n))+")"}},set:function(t){n=t}})};Ns(O3,Lo);var Qi=function n(){Lo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute F supplied.');e=M}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Mr(e,3)},set:function(M){M?this.F=Fr(e,3):this.F=Vr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute Ff supplied.');t=M}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(M){r=M!==void 0?M:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(M){r[0]=M}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(M){r[1]=M}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(M){r[2]=M}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(M){r[3]=M}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(M){switch(M){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=M;break;default:throw new Error('Invalid value "'+M+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof p0)return;l="FieldObject"+n.FieldNum++}var M=function(T){return T};return this.scope&&(M=this.scope.internal.getEncryptor(this.objId)),"("+Ru(M(l))+")"},set:function(M){l=M.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(M){l=M}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(M){u=M}});var h="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return h},set:function(M){h=M}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(M){f=M}});var g=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return g===void 0?50/xb:g},set:function(M){g=M}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(M){v=M}});var N="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!N||this instanceof p0||this instanceof bu))return wg(N,this.objId,this.scope)},set:function(M){M=M.toString(),N=M}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof pa?S:wg(S,this.objId,this.scope)},set:function(M){M=M.toString(),S=this instanceof pa?M:M.substr(0,1)==="("?od(M.substr(1,M.length-2)):od(M)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof pa?od(S.substr(1,S.length-1)):S},set:function(M){M=M.toString(),S=this instanceof pa?"/"+M:M}});var _=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_)return _},set:function(M){this.V=M}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof pa?_:wg(_,this.objId,this.scope)},set:function(M){M=M.toString(),_=this instanceof pa?M:M.substr(0,1)==="("?od(M.substr(1,M.length-2)):od(M)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof pa?od(_.substr(1,_.length-1)):_},set:function(M){M=M.toString(),_=this instanceof pa?"/"+M:M}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var L,O=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return O},set:function(M){M=!!M,O=M}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(L)return L},set:function(M){L=M}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,1)},set:function(M){M?this.Ff=Fr(this.Ff,1):this.Ff=Vr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,2)},set:function(M){M?this.Ff=Fr(this.Ff,2):this.Ff=Vr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,3)},set:function(M){M?this.Ff=Fr(this.Ff,3):this.Ff=Vr(this.Ff,3)}});var q=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(q!==null)return q},set:function(M){if([0,1,2].indexOf(M)===-1)throw new Error('Invalid value "'+M+'" for attribute Q supplied.');q=M}}),Object.defineProperty(this,"textAlign",{get:function(){var M;switch(q){case 0:default:M="left";break;case 1:M="center";break;case 2:M="right"}return M},configurable:!0,enumerable:!0,set:function(M){switch(M){case"right":case 2:q=2;break;case"center":case 1:q=1;break;case"left":case 0:default:q=0}}})};Ns(Qi,Lo);var Sd=function(){Qi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return P3(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(l,u,h){h||(h=1);for(var f,g=[];f=u.exec(l);)g.push(f[h]);return g}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,18)},set:function(t){t?this.Ff=Fr(this.Ff,18):this.Ff=Vr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Fr(this.Ff,19):this.Ff=Vr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,20)},set:function(t){t?(this.Ff=Fr(this.Ff,20),e.sort()):this.Ff=Vr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,22)},set:function(t){t?this.Ff=Fr(this.Ff,22):this.Ff=Vr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,23)},set:function(t){t?this.Ff=Fr(this.Ff,23):this.Ff=Vr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,27)},set:function(t){t?this.Ff=Fr(this.Ff,27):this.Ff=Vr(this.Ff,27)}}),this.hasAppearanceStream=!1};Ns(Sd,Qi);var Ed=function(){Sd.call(this),this.fontName="helvetica",this.combo=!1};Ns(Ed,Sd);var Td=function(){Ed.call(this),this.combo=!0};Ns(Td,Ed);var Hm=function(){Td.call(this),this.edit=!0};Ns(Hm,Td);var pa=function(){Qi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,15)},set:function(t){t?this.Ff=Fr(this.Ff,15):this.Ff=Vr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,16)},set:function(t){t?this.Ff=Fr(this.Ff,16):this.Ff=Vr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,17)},set:function(t){t?this.Ff=Fr(this.Ff,17):this.Ff=Vr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,26)},set:function(t){t?this.Ff=Fr(this.Ff,26):this.Ff=Vr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(l){return l};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ru(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Vn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Ns(pa,Qi);var Wm=function(){pa.call(this),this.pushButton=!0};Ns(Wm,pa);var jd=function(){pa.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Ns(jd,pa);var p0=function(){var n,e;Qi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(h){return h};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var l,u=[];for(l in u.push("<<"),r)u.push("/"+l+" ("+Ru(i(r[l]))+")");return u.push(">>"),u.join(`
`)},set:function(i){Vn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ns(p0,Qi),jd.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},jd.prototype.createOption=function(n){var e=new p0;return e.Parent=this,e.optionName=n,this.Kids.push(e),f8.call(this.scope,e),e};var Gm=function(){pa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};Ns(Gm,pa);var bu=function(){Qi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,13)},set:function(e){e?this.Ff=Fr(this.Ff,13):this.Ff=Vr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,21)},set:function(e){e?this.Ff=Fr(this.Ff,21):this.Ff=Vr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,23)},set:function(e){e?this.Ff=Fr(this.Ff,23):this.Ff=Vr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,24)},set:function(e){e?this.Ff=Fr(this.Ff,24):this.Ff=Vr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,25)},set:function(e){e?this.Ff=Fr(this.Ff,25):this.Ff=Vr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,26)},set:function(e){e?this.Ff=Fr(this.Ff,26):this.Ff=Vr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ns(bu,Qi);var Km=function(){bu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Mr(this.Ff,14)},set:function(n){n?this.Ff=Fr(this.Ff,14):this.Ff=Vr(this.Ff,14)}}),this.password=!0};Ns(Km,bu);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Ro(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),l=lx(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Kt(yt.internal.getWidth(n))+" "+Kt(yt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Kt(l.fontSize)+" Tf "+i),t.push("BT"),t.push(l.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Ro(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],l=yt.internal.getHeight(n),u=yt.internal.getWidth(n),h=lx(n,n.caption);return i.push("1 g"),i.push("0 0 "+Kt(u)+" "+Kt(l)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Kt(u-1)+" "+Kt(l-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Kt(h.fontSize)+" Tf "+r),i.push(h.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Ro(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Kt(yt.internal.getWidth(n))+" "+Kt(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Circle.YesNormal,e.D[n]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Ro(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=yt.internal.Bezier_C,l=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+yc(yt.internal.getWidth(n)/2)+" "+yc(yt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),t.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),t.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),t.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ro(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),l=Number((i*yt.internal.Bezier_C).toFixed(5)),u=Number((r*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+yc(yt.internal.getWidth(n)/2)+" "+yc(yt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),t.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),t.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),t.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+yc(yt.internal.getWidth(n)/2)+" "+yc(yt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),t.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),t.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),t.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Ro(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),l=Number((i*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+yc(yt.internal.getWidth(n)/2)+" "+yc(yt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),t.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),t.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),t.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Cross.YesNormal,e.D[n]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Ro(n);e.scope=n.scope;var t=[],r=yt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Kt(yt.internal.getWidth(n)-2)+" "+Kt(yt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Kt(r.x1.x)+" "+Kt(r.x1.y)+" m"),t.push(Kt(r.x2.x)+" "+Kt(r.x2.y)+" l"),t.push(Kt(r.x4.x)+" "+Kt(r.x4.y)+" m"),t.push(Kt(r.x3.x)+" "+Kt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ro(n);e.scope=n.scope;var t=yt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Kt(yt.internal.getWidth(n))+" "+Kt(yt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Kt(yt.internal.getWidth(n)-2)+" "+Kt(yt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Kt(t.x1.x)+" "+Kt(t.x1.y)+" m"),r.push(Kt(t.x2.x)+" "+Kt(t.x2.y)+" l"),r.push(Kt(t.x4.x)+" "+Kt(t.x4.y)+" m"),r.push(Kt(t.x3.x)+" "+Kt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Ro(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Kt(yt.internal.getWidth(n))+" "+Kt(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};yt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=yt.internal.getWidth(n),t=yt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},yt.internal.getWidth=function(n){var e=0;return Vn(n)==="object"&&(e=gy(n.Rect[2])),e},yt.internal.getHeight=function(n){var e=0;return Vn(n)==="object"&&(e=gy(n.Rect[3])),e};var f8=Er.addField=function(n){if(h8(this,n),!(n instanceof Qi))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Er.AcroFormChoiceField=Sd,Er.AcroFormListBox=Ed,Er.AcroFormComboBox=Td,Er.AcroFormEditBox=Hm,Er.AcroFormButton=pa,Er.AcroFormPushButton=Wm,Er.AcroFormRadioButton=jd,Er.AcroFormCheckBox=Gm,Er.AcroFormTextField=bu,Er.AcroFormPasswordField=Km,Er.AcroFormAppearance=yt,Er.AcroForm={ChoiceField:Sd,ListBox:Ed,ComboBox:Td,EditBox:Hm,Button:pa,PushButton:Wm,RadioButton:jd,CheckBox:Gm,TextField:bu,PasswordField:Km,Appearance:yt},Rt.AcroForm={ChoiceField:Sd,ListBox:Ed,ComboBox:Td,EditBox:Hm,Button:pa,PushButton:Wm,RadioButton:jd,CheckBox:Gm,TextField:bu,PasswordField:Km,Appearance:yt};Rt.AcroForm;function M3(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(R,P){var B,ce,Le,ae,me,he=e;if((P=P||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(ge(R))for(me in t)for(Le=t[me],B=0;B<Le.length;B+=1){for(ae=!0,ce=0;ce<Le[B].length;ce+=1)if(Le[B][ce]!==void 0&&Le[B][ce]!==R[ce]){ae=!1;break}if(ae===!0){he=me;break}}else for(me in t)for(Le=t[me],B=0;B<Le.length;B+=1){for(ae=!0,ce=0;ce<Le[B].length;ce+=1)if(Le[B][ce]!==void 0&&Le[B][ce]!==R.charCodeAt(ce)){ae=!1;break}if(ae===!0){he=me;break}}return he===e&&P!==e&&(he=P),he},i=function R(P){for(var B=this.internal.write,ce=this.internal.putStream,Le=(0,this.internal.getFilters)();Le.indexOf("FlateEncode")!==-1;)Le.splice(Le.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var ae=[];if(ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Image"}),ae.push({key:"Width",value:P.width}),ae.push({key:"Height",value:P.height}),P.colorSpace===q.INDEXED?ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(ae.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===q.DEVICE_CMYK&&ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ae.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&ae.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)){for(var me="",he=0,Ce=P.transparency.length;he<Ce;he++)me+=P.transparency[he]+" "+P.transparency[he]+" ";ae.push({key:"Mask",value:"["+me+"]"})}P.sMask!==void 0&&ae.push({key:"SMask",value:P.objectId+1+" 0 R"});var J=P.filter!==void 0?["/"+P.filter]:void 0;if(ce({data:P.data,additionalKeyValues:ae,alreadyAppliedFilters:J,objectId:P.objectId}),B("endobj"),"sMask"in P&&P.sMask!==void 0){var Ae="/Predictor "+P.predictor+" /Colors 1 /BitsPerComponent "+P.bitsPerComponent+" /Columns "+P.width,F={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:P.bitsPerComponent,decodeParameters:Ae,data:P.sMask};"filter"in P&&(F.filter=P.filter),R.call(this,F)}if(P.colorSpace===q.INDEXED){var K=this.internal.newObject();ce({data:k(new Uint8Array(P.palette)),objectId:K}),B("endobj")}},l=function(){var R=this.internal.collections.addImage_images;for(var P in R)i.call(this,R[P])},u=function(){var R,P=this.internal.collections.addImage_images,B=this.internal.write;for(var ce in P)B("/I"+(R=P[ce]).index,R.objectId,"0","R")},h=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",u))},f=function(){var R=this.internal.collections.addImage_images;return h.call(this),R},g=function(){return Object.keys(this.internal.collections.addImage_images).length},v=function(R){return typeof n["process"+R.toUpperCase()]=="function"},N=function(R){return Vn(R)==="object"&&R.nodeType===1},S=function(R,P){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var B=""+R.getAttribute("src");if(B.indexOf("data:image/")===0)return Kh(unescape(B).split("base64,").pop());var ce=n.loadFile(B,!0);if(ce!==void 0)return ce}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var Le;switch(P){case"PNG":Le="image/png";break;case"WEBP":Le="image/webp";break;case"JPEG":case"JPG":default:Le="image/jpeg"}return Kh(R.toDataURL(Le,1).split("base64,").pop())}},_=function(R){var P=this.internal.collections.addImage_images;if(P){for(var B in P)if(R===P[B].alias)return P[B]}},L=function(R,P,B){return R||P||(R=-96,P=-96),R<0&&(R=-1*B.width*72/R/this.internal.scaleFactor),P<0&&(P=-1*B.height*72/P/this.internal.scaleFactor),R===0&&(R=P*B.width/B.height),P===0&&(P=R*B.height/B.width),[R,P]},O=function(R,P,B,ce,Le,ae){var me=L.call(this,B,ce,Le),he=this.internal.getCoordinateString,Ce=this.internal.getVerticalCoordinateString,J=f.call(this);if(B=me[0],ce=me[1],J[Le.index]=Le,ae){ae*=Math.PI/180;var Ae=Math.cos(ae),F=Math.sin(ae),K=function(ie){return ie.toFixed(4)},te=[K(Ae),K(F),K(-1*F),K(Ae),0,0,"cm"]}this.internal.write("q"),ae?(this.internal.write([1,"0","0",1,he(R),Ce(P+ce),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([he(B),"0","0",he(ce),"0","0","cm"].join(" "))):this.internal.write([he(B),"0","0",he(ce),he(R),Ce(P+ce),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Le.index+" Do"),this.internal.write("Q")},q=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var M=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=n.__addimage__.sHashCode=function(R){var P,B,ce=0;if(typeof R=="string")for(B=R.length,P=0;P<B;P++)ce=(ce<<5)-ce+R.charCodeAt(P),ce|=0;else if(ge(R))for(B=R.byteLength/2,P=0;P<B;P++)ce=(ce<<5)-ce+R[P],ce|=0;return ce},I=n.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var P=!0;return R.length===0&&(P=!1),R.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(P=!1),P},ee=n.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var P=R.indexOf(",");return P<0?null:R.substring(0,P).trim().endsWith("base64")?R.substring(P+1):null},se=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(R){return se()&&R instanceof ArrayBuffer};var ge=n.__addimage__.isArrayBufferView=function(R){return se()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},W=n.__addimage__.binaryStringToUint8Array=function(R){for(var P=R.length,B=new Uint8Array(P),ce=0;ce<P;ce++)B[ce]=R.charCodeAt(ce);return B},k=n.__addimage__.arrayBufferToBinaryString=function(R){for(var P="",B=ge(R)?R:new Uint8Array(R),ce=0;ce<B.length;ce+=8192)P+=String.fromCharCode.apply(null,B.subarray(ce,ce+8192));return P};n.addImage=function(){var R,P,B,ce,Le,ae,me,he,Ce;if(typeof arguments[1]=="number"?(P=e,B=arguments[1],ce=arguments[2],Le=arguments[3],ae=arguments[4],me=arguments[5],he=arguments[6],Ce=arguments[7]):(P=arguments[1],B=arguments[2],ce=arguments[3],Le=arguments[4],ae=arguments[5],me=arguments[6],he=arguments[7],Ce=arguments[8]),Vn(R=arguments[0])==="object"&&!N(R)&&"imageData"in R){var J=R;R=J.imageData,P=J.format||P||e,B=J.x||B||0,ce=J.y||ce||0,Le=J.w||J.width||Le,ae=J.h||J.height||ae,me=J.alias||me,he=J.compression||he,Ce=J.rotation||J.angle||Ce}var Ae=this.internal.getFilters();if(he===void 0&&Ae.indexOf("FlateEncode")!==-1&&(he="SLOW"),isNaN(B)||isNaN(ce))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var F=V.call(this,R,P,me,he);return O.call(this,B,ce,Le,ae,F,Ce),this};var V=function(R,P,B,ce){var Le,ae,me;if(typeof R=="string"&&r(R)===e){R=unescape(R);var he=Q(R,!1);(he!==""||(he=n.loadFile(R,!0))!==void 0)&&(R=he)}if(N(R)&&(R=S(R,P)),P=r(R,P),!v(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((me=B)==null||me.length===0)&&(B=function(Ce){return typeof Ce=="string"||ge(Ce)?T(Ce):ge(Ce.data)?T(Ce.data):null}(R)),(Le=_.call(this,B))||(se()&&(R instanceof Uint8Array||P==="RGBA"||(ae=R,R=W(R))),Le=this["process"+P.toUpperCase()](R,g.call(this),B,function(Ce){return Ce&&typeof Ce=="string"&&(Ce=Ce.toUpperCase()),Ce in n.image_compression?Ce:M.NONE}(ce),ae)),!Le)throw new Error("An unknown error occurred whilst processing the image.");return Le},Q=n.__addimage__.convertBase64ToBinaryString=function(R,P){P=typeof P!="boolean"||P;var B,ce="";if(typeof R=="string"){var Le;B=(Le=ee(R))!==null&&Le!==void 0?Le:R;try{ce=Kh(B)}catch(ae){if(P)throw I(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ce};n.getImageProperties=function(R){var P,B,ce="";if(N(R)&&(R=S(R)),typeof R=="string"&&r(R)===e&&((ce=Q(R,!1))===""&&(ce=n.loadFile(R)||""),R=ce),B=r(R),!v(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(!se()||R instanceof Uint8Array||(R=W(R)),!(P=this["process"+B.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=B,P}})(Rt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Rt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,l,u=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),g=t.pageContext.annotations,v=!1,N=0;N<g.length&&!v;N++)switch((r=g[N]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var S=0;S<g.length;S++){r=g[S];var _=this.internal.pdfEscape,L=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var O=this.internal.newAdditionalObject(),q=this.internal.newAdditionalObject(),M=this.internal.getEncryptor(O.objId),T=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(i="/Rect ["+u(r.bounds.x)+" "+h(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+h(r.bounds.y)+"] ")+"/Contents ("+_(M(r.contents))+")",l+=" /Popup "+q.objId+" 0 R",l+=" /P "+f.objId+" 0 R",l+=" /T ("+_(M(T))+") >>",O.content=l;var I=O.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+u(r.bounds.x+30)+" "+h(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+h(r.bounds.y)+"] ")+" /Parent "+I,r.open&&(l+=" /Open true"),l+=" >>",q.content=l,this.internal.write(O.objId,"0 R",q.objId,"0 R");break;case"freetext":i="/Rect ["+u(r.bounds.x)+" "+h(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+h(r.bounds.y+r.bounds.h)+"] ";var ee=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+_(L(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ee+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var se=this.annotations._nameMap[r.options.name];r.options.pageNumber=se.page,r.options.top=se.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+_(L(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ge=h(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+ge+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,l,u){var h=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString;h.pageContext.annotations.push({finalBounds:{x:f(t),y:g(r),w:f(t+i),h:g(r+l)},options:u,type:"link"})},n.textWithLink=function(t,r,i,l){var u,h,f=this.getTextWidth(t),g=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){h=l.maxWidth;var v=this.splitTextToSize(t,h).length;u=Math.ceil(g*v)}else h=f,u=g;return this.text(t,r,i,l),i+=.2*g,l.align==="center"&&(r-=f/2),l.align==="right"&&(r-=f),this.link(r,i-g,h,u,l),f},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Rt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var l=n.__arabicParser__.isInArabicSubstitutionA=function(O){return e[O.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(O){return typeof O=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(O)},h=n.__arabicParser__.isArabicEndLetter=function(O){return u(O)&&l(O)&&e[O.charCodeAt(0)].length<=2},f=n.__arabicParser__.isArabicAlfLetter=function(O){return u(O)&&i.indexOf(O.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(O){return u(O)&&l(O)&&e[O.charCodeAt(0)].length>=1};var g=n.__arabicParser__.arabicLetterHasFinalForm=function(O){return u(O)&&l(O)&&e[O.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(O){return u(O)&&l(O)&&e[O.charCodeAt(0)].length>=3};var v=n.__arabicParser__.arabicLetterHasMedialForm=function(O){return u(O)&&l(O)&&e[O.charCodeAt(0)].length==4},N=n.__arabicParser__.resolveLigatures=function(O){var q=0,M=t,T="",I=0;for(q=0;q<O.length;q+=1)M[O.charCodeAt(q)]!==void 0?(I++,typeof(M=M[O.charCodeAt(q)])=="number"&&(T+=String.fromCharCode(M),M=t,I=0),q===O.length-1&&(M=t,T+=O.charAt(q-(I-1)),q-=I-1,I=0)):(M=t,T+=O.charAt(q-I),q-=I,I=0);return T};n.__arabicParser__.isArabicDiacritic=function(O){return O!==void 0&&r[O.charCodeAt(0)]!==void 0};var S=n.__arabicParser__.getCorrectForm=function(O,q,M){return u(O)?l(O)===!1?-1:!g(O)||!u(q)&&!u(M)||!u(M)&&h(q)||h(O)&&!u(q)||h(O)&&f(q)||h(O)&&h(q)?0:v(O)&&u(q)&&!h(q)&&u(M)&&g(M)?3:h(O)||!u(M)?1:2:-1},_=function(O){var q=0,M=0,T=0,I="",ee="",se="",ge=(O=O||"").split("\\s+"),W=[];for(q=0;q<ge.length;q+=1){for(W.push(""),M=0;M<ge[q].length;M+=1)I=ge[q][M],ee=ge[q][M-1],se=ge[q][M+1],u(I)?(T=S(I,ee,se),W[q]+=T!==-1?String.fromCharCode(e[I.charCodeAt(0)][T]):I):W[q]+=I;W[q]=N(W[q])}return W.join(" ")},L=n.__arabicParser__.processArabic=n.processArabic=function(){var O,q=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,M=[];if(Array.isArray(q)){var T=0;for(M=[],T=0;T<q.length;T+=1)Array.isArray(q[T])?M.push([_(q[T][0]),q[T][1],q[T][2]]):M.push([_(q[T])]);O=M}else O=_(q);return typeof arguments[0]=="string"?O:(arguments[0].text=O,arguments[0])};n.events.push(["preProcessText",L])}(Rt.API),Rt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(h){t=h}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(h){r=isNaN(h)||Number.isInteger(h)===!1||h<0?150:h,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(h){i=isNaN(h)||Number.isInteger(h)===!1||h<0?300:h,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(h){l=h}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(h){u=h}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Rt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(O){f=O}});var g=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return g},set:function(O){g=O}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(O){v=O}});var N=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return N},set:function(O){N=O}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(O){S=O}});var _=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _},set:function(O){_=O}});var L=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return L},set:function(O){L=O}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(f){return r.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},n.getTextDimensions=function(f,g){r.call(this);var v=(g=g||{}).fontSize||this.getFontSize(),N=g.font||this.getFont(),S=g.scaleFactor||this.internal.scaleFactor,_=0,L=0,O=0,q=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var M=g.maxWidth;M>0?typeof f=="string"?f=this.splitTextToSize(f,M):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(I,ee){return I.concat(q.splitTextToSize(ee,M))},[])):f=Array.isArray(f)?f:[f];for(var T=0;T<f.length;T++)_<(O=this.getStringUnitWidth(f[T],{font:N})*v)&&(_=O);return _!==0&&(L=f.length),{w:_/=S,h:Math.max((L*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/S,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new l(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var f;f=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var g=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,N=this.internal.__cell__.margins||e,S=this.internal.__cell__.tableHeaderRow,_=this.internal.__cell__.printHeaders;return g.lineNumber!==void 0&&(g.lineNumber===f.lineNumber?(f.x=(g.x||0)+(g.width||0),f.y=g.y||0):g.y+g.height+f.height+N.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=N.top,_&&S&&(this.printHeaderRow(f.lineNumber,!0),f.y+=S[0].height)):f.y=g.y+g.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-v,f.y+v,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+v,{align:"center",baseline:"top",maxWidth:f.width-v-v}):this.text(f.text,f.x+v,f.y+v,{align:"left",baseline:"top",maxWidth:f.width-v-v})),this.internal.__cell__.lastCell=f,this};n.table=function(f,g,v,N,S){if(r.call(this),!v)throw new Error("No data for PDF table.");var _,L,O,q,M=[],T=[],I=[],ee={},se={},ge=[],W=[],k=(S=S||{}).autoSize||!1,V=S.printHeaders!==!1,Q=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,R=S.margins||Object.assign({width:this.getPageWidth()},e),P=typeof S.padding=="number"?S.padding:3,B=S.headerBackgroundColor||"#c8c8c8",ce=S.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=V,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=Q,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=ce,this.setFontSize(Q),N==null)T=M=Object.keys(v[0]),I=M.map(function(){return"left"});else if(Array.isArray(N)&&Vn(N[0])==="object")for(M=N.map(function(J){return J.name}),T=N.map(function(J){return J.prompt||J.name||""}),I=N.map(function(J){return J.align||"left"}),_=0;_<N.length;_+=1)se[N[_].name]=N[_].width*(19.049976/25.4);else Array.isArray(N)&&typeof N[0]=="string"&&(T=M=N,I=M.map(function(){return"left"}));if(k||Array.isArray(N)&&typeof N[0]=="string")for(_=0;_<M.length;_+=1){for(ee[q=M[_]]=v.map(function(J){return J[q]}),this.setFont(void 0,"bold"),ge.push(this.getTextDimensions(T[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),L=ee[q],this.setFont(void 0,"normal"),O=0;O<L.length;O+=1)ge.push(this.getTextDimensions(L[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[q]=Math.max.apply(null,ge)+P+P,ge=[]}if(V){var Le={};for(_=0;_<M.length;_+=1)Le[M[_]]={},Le[M[_]].text=T[_],Le[M[_]].align=I[_];var ae=h.call(this,Le,se);W=M.map(function(J){return new l(f,g,se[J],ae,Le[J].text,void 0,Le[J].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var me=N.reduce(function(J,Ae){return J[Ae.name]=Ae.align,J},{});for(_=0;_<v.length;_+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:_,data:v[_]},this);var he=h.call(this,v[_],se);for(O=0;O<M.length;O+=1){var Ce=v[_][M[O]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:_,col:O,data:Ce},this),u.call(this,new l(f,g,se[M[O]],he,Ce,_+2,me[M[O]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=g,this};var h=function(f,g){var v=this.internal.__cell__.padding,N=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(f).map(function(_){var L=f[_];return this.splitTextToSize(L.hasOwnProperty("text")?L.text:L,g[_]-v-v)},this).map(function(_){return this.getLineHeightFactor()*_.length*N/S+v+v},this).reduce(function(_,L){return Math.max(_,L)},0)};n.setTableHeaderRow=function(f){r.call(this),this.internal.__cell__.tableHeaderRow=f},n.printHeaderRow=function(f,g){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var N=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(N[0],N[1],N[2],N[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],_=0;_<this.internal.__cell__.tableHeaderRow.length;_+=1){v=this.internal.__cell__.tableHeaderRow[_].clone(),g&&(v.y=this.internal.__cell__.margins.top||0,S.push(v)),v.lineNumber=f;var L=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,v),this.setTextColor(L)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),t=!1}}(Rt.API);var F3={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},V3=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],cx=M3(V3),B3=[100,200,300,400,500,600,700,800,900],m8=M3(B3);function ux(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(l){return F3[l=l||"normal"]?l:"normal"}(n.style),r=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(l){return typeof cx[l=l||"normal"]=="number"?l:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function xy(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var p8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},by={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function vy(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function g8(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},p8,t.genericFontFamilies||{}),l=null,u=null,h=0;h<e.length;++h)if(i[(l=ux(e[h])).family]&&(l.family=i[l.family]),n.hasOwnProperty(l.family)){u=n[l.family];break}if(!(u=u||n[r]))throw new Error("Could not find a font-family for the rule '"+vy(l)+"' and default family '"+r+"'.");if(u=function(f,g){if(g[f])return g[f];var v=cx[f],N=v<=cx.normal?-1:1,S=xy(g,V3,v,N);if(!S)throw new Error("Could not find a matching font-stretch value for "+f);return S}(l.stretch,u),u=function(f,g){if(g[f])return g[f];for(var v=F3[f],N=0;N<v.length;++N)if(g[v[N]])return g[v[N]];throw new Error("Could not find a matching font-style for "+f)}(l.style,u),!(u=function(f,g){if(g[f])return g[f];if(f===400&&g[500])return g[500];if(f===500&&g[400])return g[400];var v=m8[f],N=xy(g,B3,v,f<400?-1:1);if(!N)throw new Error("Could not find a matching font-weight for value "+f);return N}(l.weight,u)))throw new Error("Failed to resolve a font for the rule '"+vy(l)+"'.");return u}function yy(n){return n.trimLeft()}function x8(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function b8(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Cm,wy,Ny,Ng=["times"];(function(n){var e,t,r,i,l,u,h,f,g,v=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new f,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new u,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new u,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new N(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,u=this.internal.Point,h=this.internal.Rectangle,f=this.internal.Matrix,g=new v}]);var N=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=F;Object.defineProperty(this,"pdf",{get:function(){return K}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(Ve){te=!!Ve}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(Ve){ie=!!Ve}});var ue=0;Object.defineProperty(this,"posX",{get:function(){return ue},set:function(Ve){isNaN(Ve)||(ue=Ve)}});var Ee=0;Object.defineProperty(this,"posY",{get:function(){return Ee},set:function(Ve){isNaN(Ve)||(Ee=Ve)}}),Object.defineProperty(this,"margin",{get:function(){return g.margin},set:function(Ve){var oe;typeof Ve=="number"?oe=[Ve,Ve,Ve,Ve]:((oe=new Array(4))[0]=Ve[0],oe[1]=Ve.length>=2?Ve[1]:oe[0],oe[2]=Ve.length>=3?Ve[2]:oe[0],oe[3]=Ve.length>=4?Ve[3]:oe[1]),g.margin=oe}});var _e=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _e},set:function(Ve){_e=Ve}});var Pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return Pe},set:function(Ve){Pe=Ve}});var tt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return tt},set:function(Ve){tt=Ve}}),Object.defineProperty(this,"ctx",{get:function(){return g},set:function(Ve){Ve instanceof v&&(g=Ve)}}),Object.defineProperty(this,"path",{get:function(){return g.path},set:function(Ve){g.path=Ve}});var Je=[];Object.defineProperty(this,"ctxStack",{get:function(){return Je},set:function(Ve){Je=Ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ve){var oe;oe=S(Ve),this.ctx.fillStyle=oe.style,this.ctx.isFillTransparent=oe.a===0,this.ctx.fillOpacity=oe.a,this.pdf.setFillColor(oe.r,oe.g,oe.b,{a:oe.a}),this.pdf.setTextColor(oe.r,oe.g,oe.b,{a:oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ve){var oe=S(Ve);this.ctx.strokeStyle=oe.style,this.ctx.isStrokeTransparent=oe.a===0,this.ctx.strokeOpacity=oe.a,oe.a===0?this.pdf.setDrawColor(255,255,255):(oe.a,this.pdf.setDrawColor(oe.r,oe.g,oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ve){["butt","round","square"].indexOf(Ve)!==-1&&(this.ctx.lineCap=Ve,this.pdf.setLineCap(Ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ve){isNaN(Ve)||(this.ctx.lineWidth=Ve,this.pdf.setLineWidth(Ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ve){["bevel","round","miter"].indexOf(Ve)!==-1&&(this.ctx.lineJoin=Ve,this.pdf.setLineJoin(Ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ve){isNaN(Ve)||(this.ctx.miterLimit=Ve,this.pdf.setMiterLimit(Ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ve){this.ctx.textBaseline=Ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ve){["right","end","center","left","start"].indexOf(Ve)!==-1&&(this.ctx.textAlign=Ve)}});var st=null;function at(Ve,oe){if(st===null){var At=function(gt){var et=[];return Object.keys(gt).forEach(function(rt){gt[rt].forEach(function(ot){var ut=null;switch(ot){case"bold":ut={family:rt,weight:"bold"};break;case"italic":ut={family:rt,style:"italic"};break;case"bolditalic":ut={family:rt,weight:"bold",style:"italic"};break;case"":case"normal":ut={family:rt}}ut!==null&&(ut.ref={name:rt,style:ot},et.push(ut))})}),et}(Ve.getFontList());st=function(gt){for(var et={},rt=0;rt<gt.length;++rt){var ot=ux(gt[rt]),ut=ot.family,bt=ot.stretch,Ct=ot.style,Bt=ot.weight;et[ut]=et[ut]||{},et[ut][bt]=et[ut][bt]||{},et[ut][bt][Ct]=et[ut][bt][Ct]||{},et[ut][bt][Ct][Bt]=ot}return et}(At.concat(oe))}return st}var _t=null;Object.defineProperty(this,"fontFaces",{get:function(){return _t},set:function(Ve){st=null,_t=Ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ve){var oe;if(this.ctx.font=Ve,(oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ve))!==null){var At=oe[1];oe[2];var gt=oe[3],et=oe[4];oe[5];var rt=oe[6],ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(et)[2];et=Math.floor(ot==="px"?parseFloat(et)*this.pdf.internal.scaleFactor:ot==="em"?parseFloat(et)*this.pdf.getFontSize():parseFloat(et)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(et);var ut=function(Fe){var nt,He,Nt=[],mt=Fe.trim();if(mt==="")return Ng;if(mt in by)return[by[mt]];for(;mt!=="";){switch(He=null,nt=(mt=yy(mt)).charAt(0)){case'"':case"'":He=x8(mt.substring(1),nt);break;default:He=b8(mt)}if(He===null||(Nt.push(He[0]),(mt=yy(He[1]))!==""&&mt.charAt(0)!==","))return Ng;mt=mt.replace(/^,/,"")}return Nt}(rt);if(this.fontFaces){var bt=g8(at(this.pdf,this.fontFaces),ut.map(function(Fe){return{family:Fe,stretch:"normal",weight:gt,style:At}}));this.pdf.setFont(bt.ref.name,bt.ref.style)}else{var Ct="";(gt==="bold"||parseInt(gt,10)>=700||At==="bold")&&(Ct="bold"),At==="italic"&&(Ct+="italic"),Ct.length===0&&(Ct="normal");for(var Bt="",wt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},xt=0;xt<ut.length;xt++){if(this.pdf.internal.getFont(ut[xt],Ct,{noFallback:!0,disableWarning:!0})!==void 0){Bt=ut[xt];break}if(Ct==="bolditalic"&&this.pdf.internal.getFont(ut[xt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Bt=ut[xt],Ct="bold";else if(this.pdf.internal.getFont(ut[xt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Bt=ut[xt],Ct="normal";break}}if(Bt===""){for(var Wt=0;Wt<ut.length;Wt++)if(wt[ut[Wt]]){Bt=wt[ut[Wt]];break}}Bt=Bt===""?"Times":Bt,this.pdf.setFont(Bt,Ct)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ve){this.ctx.globalCompositeOperation=Ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ve){this.ctx.globalAlpha=Ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ve){this.ctx.lineDashOffset=Ve,Ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ve){this.ctx.lineDash=Ve,Ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ve){this.ctx.ignoreClearRect=!!Ve}})};N.prototype.setLineDash=function(F){this.lineDash=F},N.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},N.prototype.fill=function(){ee.call(this,"fill",!1)},N.prototype.stroke=function(){ee.call(this,"stroke",!1)},N.prototype.beginPath=function(){this.path=[{type:"begin"}]},N.prototype.moveTo=function(F,K){if(isNaN(F)||isNaN(K))throw $n.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new u(F,K));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new u(F,K)},N.prototype.closePath=function(){var F=new u(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&Vn(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){F=new u(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(F.x,F.y)},N.prototype.lineTo=function(F,K){if(isNaN(F)||isNaN(K))throw $n.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new u(F,K));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new u(te.x,te.y)},N.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ee.call(this,null,!0)},N.prototype.quadraticCurveTo=function(F,K,te,ie){if(isNaN(te)||isNaN(ie)||isNaN(F)||isNaN(K))throw $n.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ue=this.ctx.transform.applyToPoint(new u(te,ie)),Ee=this.ctx.transform.applyToPoint(new u(F,K));this.path.push({type:"qct",x1:Ee.x,y1:Ee.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new u(ue.x,ue.y)},N.prototype.bezierCurveTo=function(F,K,te,ie,ue,Ee){if(isNaN(ue)||isNaN(Ee)||isNaN(F)||isNaN(K)||isNaN(te)||isNaN(ie))throw $n.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _e=this.ctx.transform.applyToPoint(new u(ue,Ee)),Pe=this.ctx.transform.applyToPoint(new u(F,K)),tt=this.ctx.transform.applyToPoint(new u(te,ie));this.path.push({type:"bct",x1:Pe.x,y1:Pe.y,x2:tt.x,y2:tt.y,x:_e.x,y:_e.y}),this.ctx.lastPoint=new u(_e.x,_e.y)},N.prototype.arc=function(F,K,te,ie,ue,Ee){if(isNaN(F)||isNaN(K)||isNaN(te)||isNaN(ie)||isNaN(ue))throw $n.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ee=!!Ee,!this.ctx.transform.isIdentity){var _e=this.ctx.transform.applyToPoint(new u(F,K));F=_e.x,K=_e.y;var Pe=this.ctx.transform.applyToPoint(new u(0,te)),tt=this.ctx.transform.applyToPoint(new u(0,0));te=Math.sqrt(Math.pow(Pe.x-tt.x,2)+Math.pow(Pe.y-tt.y,2))}Math.abs(ue-ie)>=2*Math.PI&&(ie=0,ue=2*Math.PI),this.path.push({type:"arc",x:F,y:K,radius:te,startAngle:ie,endAngle:ue,counterclockwise:Ee})},N.prototype.arcTo=function(F,K,te,ie,ue){throw new Error("arcTo not implemented.")},N.prototype.rect=function(F,K,te,ie){if(isNaN(F)||isNaN(K)||isNaN(te)||isNaN(ie))throw $n.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,K),this.lineTo(F+te,K),this.lineTo(F+te,K+ie),this.lineTo(F,K+ie),this.lineTo(F,K),this.lineTo(F+te,K),this.lineTo(F,K)},N.prototype.fillRect=function(F,K,te,ie){if(isNaN(F)||isNaN(K)||isNaN(te)||isNaN(ie))throw $n.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!_.call(this)){var ue={};this.lineCap!=="butt"&&(ue.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ue.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,K,te,ie),this.fill(),ue.hasOwnProperty("lineCap")&&(this.lineCap=ue.lineCap),ue.hasOwnProperty("lineJoin")&&(this.lineJoin=ue.lineJoin)}},N.prototype.strokeRect=function(F,K,te,ie){if(isNaN(F)||isNaN(K)||isNaN(te)||isNaN(ie))throw $n.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");L.call(this)||(this.beginPath(),this.rect(F,K,te,ie),this.stroke())},N.prototype.clearRect=function(F,K,te,ie){if(isNaN(F)||isNaN(K)||isNaN(te)||isNaN(ie))throw $n.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,K,te,ie))},N.prototype.save=function(F){F=typeof F!="boolean"||F;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},N.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage(K),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},N.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(F){var K,te,ie,ue;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))K=0,te=0,ie=0,ue=0;else{var Ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(Ee!==null)K=parseInt(Ee[1]),te=parseInt(Ee[2]),ie=parseInt(Ee[3]),ue=1;else if((Ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)K=parseInt(Ee[1]),te=parseInt(Ee[2]),ie=parseInt(Ee[3]),ue=parseFloat(Ee[4]);else{if(ue=1,typeof F=="string"&&F.charAt(0)!=="#"){var _e=new R3(F);F=_e.ok?_e.toHex():"#000000"}F.length===4?(K=F.substring(1,2),K+=K,te=F.substring(2,3),te+=te,ie=F.substring(3,4),ie+=ie):(K=F.substring(1,3),te=F.substring(3,5),ie=F.substring(5,7)),K=parseInt(K,16),te=parseInt(te,16),ie=parseInt(ie,16)}}return{r:K,g:te,b:ie,a:ue,style:F}},_=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},L=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};N.prototype.fillText=function(F,K,te,ie){if(isNaN(K)||isNaN(te)||typeof F!="string")throw $n.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!_.call(this)){var ue=he(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;P.call(this,{text:F,x:K,y:te,scale:Ee,angle:ue,align:this.textAlign,maxWidth:ie})}},N.prototype.strokeText=function(F,K,te,ie){if(isNaN(K)||isNaN(te)||typeof F!="string")throw $n.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!L.call(this)){ie=isNaN(ie)?void 0:ie;var ue=he(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;P.call(this,{text:F,x:K,y:te,scale:Ee,renderingMode:"stroke",angle:ue,align:this.textAlign,maxWidth:ie})}},N.prototype.measureText=function(F){if(typeof F!="string")throw $n.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,te=this.pdf.internal.scaleFactor,ie=K.internal.getFontSize(),ue=K.getStringUnitWidth(F)*ie/K.internal.scaleFactor,Ee=function(_e){var Pe=(_e=_e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Pe}}),this};return new Ee({width:ue*=Math.round(96*te/72*1e4)/1e4})},N.prototype.scale=function(F,K){if(isNaN(F)||isNaN(K))throw $n.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new f(F,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},N.prototype.rotate=function(F){if(isNaN(F))throw $n.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new f(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},N.prototype.translate=function(F,K){if(isNaN(F)||isNaN(K))throw $n.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new f(1,0,0,1,F,K);this.ctx.transform=this.ctx.transform.multiply(te)},N.prototype.transform=function(F,K,te,ie,ue,Ee){if(isNaN(F)||isNaN(K)||isNaN(te)||isNaN(ie)||isNaN(ue)||isNaN(Ee))throw $n.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _e=new f(F,K,te,ie,ue,Ee);this.ctx.transform=this.ctx.transform.multiply(_e)},N.prototype.setTransform=function(F,K,te,ie,ue,Ee){F=isNaN(F)?1:F,K=isNaN(K)?0:K,te=isNaN(te)?0:te,ie=isNaN(ie)?1:ie,ue=isNaN(ue)?0:ue,Ee=isNaN(Ee)?0:Ee,this.ctx.transform=new f(F,K,te,ie,ue,Ee)};var O=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};N.prototype.drawImage=function(F,K,te,ie,ue,Ee,_e,Pe,tt){var Je=this.pdf.getImageProperties(F),st=1,at=1,_t=1,Ve=1;ie!==void 0&&Pe!==void 0&&(_t=Pe/ie,Ve=tt/ue,st=Je.width/ie*Pe/ie,at=Je.height/ue*tt/ue),Ee===void 0&&(Ee=K,_e=te,K=0,te=0),ie!==void 0&&Pe===void 0&&(Pe=ie,tt=ue),ie===void 0&&Pe===void 0&&(Pe=Je.width,tt=Je.height);for(var oe,At=this.ctx.transform.decompose(),gt=he(At.rotate.shx),et=new f,rt=(et=(et=(et=et.multiply(At.translate)).multiply(At.skew)).multiply(At.scale)).applyToRectangle(new h(Ee-K*_t,_e-te*Ve,ie*st,ue*at)),ot=q.call(this,rt),ut=[],bt=0;bt<ot.length;bt+=1)ut.indexOf(ot[bt])===-1&&ut.push(ot[bt]);if(I(ut),this.autoPaging)for(var Ct=ut[0],Bt=ut[ut.length-1],wt=Ct;wt<Bt+1;wt++){this.pdf.setPage(wt);var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Wt=wt===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],He=wt===1?0:Fe+(wt-2)*nt;if(this.ctx.clip_path.length!==0){var Nt=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(oe,this.posX+this.margin[3],-He+Wt+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=Nt}var mt=JSON.parse(JSON.stringify(rt));mt=T([mt],this.posX+this.margin[3],-He+Wt+this.ctx.prevPageLastElemOffset)[0];var $t=(wt>Ct||wt<Bt)&&O.call(this);$t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,nt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,gt),$t&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",rt.x,rt.y,rt.w,rt.h,null,null,gt)};var q=function(F,K,te){var ie=[];K=K||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ue=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":ie.push(Math.floor((F.y+ue)/te)+1);break;case"arc":ie.push(Math.floor((F.y+ue-F.radius)/te)+1),ie.push(Math.floor((F.y+ue+F.radius)/te)+1);break;case"qct":var Ee=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);ie.push(Math.floor((Ee.y+ue)/te)+1),ie.push(Math.floor((Ee.y+Ee.h+ue)/te)+1);break;case"bct":var _e=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);ie.push(Math.floor((_e.y+ue)/te)+1),ie.push(Math.floor((_e.y+_e.h+ue)/te)+1);break;case"rect":ie.push(Math.floor((F.y+ue)/te)+1),ie.push(Math.floor((F.y+F.h+ue)/te)+1)}for(var Pe=0;Pe<ie.length;Pe+=1)for(;this.pdf.internal.getNumberOfPages()<ie[Pe];)M.call(this);return ie},M=function(){var F=this.fillStyle,K=this.strokeStyle,te=this.font,ie=this.lineCap,ue=this.lineWidth,Ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=K,this.font=te,this.lineCap=ie,this.lineWidth=ue,this.lineJoin=Ee},T=function(F,K,te){for(var ie=0;ie<F.length;ie++)switch(F[ie].type){case"bct":F[ie].x2+=K,F[ie].y2+=te;case"qct":F[ie].x1+=K,F[ie].y1+=te;case"mt":case"lt":case"arc":default:F[ie].x+=K,F[ie].y+=te}return F},I=function(F){return F.sort(function(K,te){return K-te})},ee=function(F,K){for(var te,ie,ue=this.fillStyle,Ee=this.strokeStyle,_e=this.lineCap,Pe=this.lineWidth,tt=Math.abs(Pe*this.ctx.transform.scaleX),Je=this.lineJoin,st=JSON.parse(JSON.stringify(this.path)),at=JSON.parse(JSON.stringify(this.path)),_t=[],Ve=0;Ve<at.length;Ve++)if(at[Ve].x!==void 0)for(var oe=q.call(this,at[Ve]),At=0;At<oe.length;At+=1)_t.indexOf(oe[At])===-1&&_t.push(oe[At]);for(var gt=0;gt<_t.length;gt++)for(;this.pdf.internal.getNumberOfPages()<_t[gt];)M.call(this);if(I(_t),this.autoPaging)for(var et=_t[0],rt=_t[_t.length-1],ot=et;ot<rt+1;ot++){this.pdf.setPage(ot),this.fillStyle=ue,this.strokeStyle=Ee,this.lineCap=_e,this.lineWidth=tt,this.lineJoin=Je;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bt=ot===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=ot===1?0:Ct+(ot-2)*Bt;if(this.ctx.clip_path.length!==0){var xt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(te,this.posX+this.margin[3],-wt+bt+this.ctx.prevPageLastElemOffset),se.call(this,F,!0),this.path=xt}if(ie=JSON.parse(JSON.stringify(st)),this.path=T(ie,this.posX+this.margin[3],-wt+bt+this.ctx.prevPageLastElemOffset),K===!1||ot===0){var Wt=(ot>et||ot<rt)&&O.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Bt,null).clip().discardPath()),se.call(this,F,K),Wt&&this.pdf.restoreGraphicsState()}this.lineWidth=Pe}else this.lineWidth=tt,se.call(this,F,K),this.lineWidth=Pe;this.path=st},se=function(F,K){if((F!=="stroke"||K||!L.call(this))&&(F==="stroke"||K||!_.call(this))){for(var te,ie,ue=[],Ee=this.path,_e=0;_e<Ee.length;_e++){var Pe=Ee[_e];switch(Pe.type){case"begin":ue.push({begin:!0});break;case"close":ue.push({close:!0});break;case"mt":ue.push({start:Pe,deltas:[],abs:[]});break;case"lt":var tt=ue.length;if(Ee[_e-1]&&!isNaN(Ee[_e-1].x)&&(te=[Pe.x-Ee[_e-1].x,Pe.y-Ee[_e-1].y],tt>0)){for(;tt>=0;tt--)if(ue[tt-1].close!==!0&&ue[tt-1].begin!==!0){ue[tt-1].deltas.push(te),ue[tt-1].abs.push(Pe);break}}break;case"bct":te=[Pe.x1-Ee[_e-1].x,Pe.y1-Ee[_e-1].y,Pe.x2-Ee[_e-1].x,Pe.y2-Ee[_e-1].y,Pe.x-Ee[_e-1].x,Pe.y-Ee[_e-1].y],ue[ue.length-1].deltas.push(te);break;case"qct":var Je=Ee[_e-1].x+2/3*(Pe.x1-Ee[_e-1].x),st=Ee[_e-1].y+2/3*(Pe.y1-Ee[_e-1].y),at=Pe.x+2/3*(Pe.x1-Pe.x),_t=Pe.y+2/3*(Pe.y1-Pe.y),Ve=Pe.x,oe=Pe.y;te=[Je-Ee[_e-1].x,st-Ee[_e-1].y,at-Ee[_e-1].x,_t-Ee[_e-1].y,Ve-Ee[_e-1].x,oe-Ee[_e-1].y],ue[ue.length-1].deltas.push(te);break;case"arc":ue.push({deltas:[],abs:[],arc:!0}),Array.isArray(ue[ue.length-1].abs)&&ue[ue.length-1].abs.push(Pe)}}ie=K?null:F==="stroke"?"stroke":"fill";for(var At=!1,gt=0;gt<ue.length;gt++)if(ue[gt].arc)for(var et=ue[gt].abs,rt=0;rt<et.length;rt++){var ot=et[rt];ot.type==="arc"?k.call(this,ot.x,ot.y,ot.radius,ot.startAngle,ot.endAngle,ot.counterclockwise,void 0,K,!At):B.call(this,ot.x,ot.y),At=!0}else if(ue[gt].close===!0)this.pdf.internal.out("h"),At=!1;else if(ue[gt].begin!==!0){var ut=ue[gt].start.x,bt=ue[gt].start.y;ce.call(this,ue[gt].deltas,ut,bt),At=!0}ie&&V.call(this,ie),K&&Q.call(this)}},ge=function(F){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-te;case"top":return F+K-te;case"hanging":return F+K-2*te;case"middle":return F+K/2-te;case"ideographic":return F;case"alphabetic":default:return F}},W=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};N.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(K,te){this.colorStops.push([K,te])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},N.prototype.createPattern=function(){return this.createLinearGradient()},N.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(F,K,te,ie,ue,Ee,_e,Pe,tt){for(var Je=ae.call(this,te,ie,ue,Ee),st=0;st<Je.length;st++){var at=Je[st];st===0&&(tt?R.call(this,at.x1+F,at.y1+K):B.call(this,at.x1+F,at.y1+K)),Le.call(this,F,K,at.x2,at.y2,at.x3,at.y3,at.x4,at.y4)}Pe?Q.call(this):V.call(this,_e)},V=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Q=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(F,K){this.pdf.internal.out(t(F)+" "+r(K)+" m")},P=function(F){var K;switch(F.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var te=this.pdf.getTextDimensions(F.text),ie=ge.call(this,F.y),ue=W.call(this,ie)-te.h,Ee=this.ctx.transform.applyToPoint(new u(F.x,ie)),_e=this.ctx.transform.decompose(),Pe=new f;Pe=(Pe=(Pe=Pe.multiply(_e.translate)).multiply(_e.skew)).multiply(_e.scale);for(var tt,Je,st,at=this.ctx.transform.applyToRectangle(new h(F.x,ie,te.w,te.h)),_t=Pe.applyToRectangle(new h(F.x,ue,te.w,te.h)),Ve=q.call(this,_t),oe=[],At=0;At<Ve.length;At+=1)oe.indexOf(Ve[At])===-1&&oe.push(Ve[At]);if(I(oe),this.autoPaging)for(var gt=oe[0],et=oe[oe.length-1],rt=gt;rt<et+1;rt++){this.pdf.setPage(rt);var ot=rt===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[2],Ct=bt-this.margin[0],Bt=this.pdf.internal.pageSize.width-this.margin[1],wt=Bt-this.margin[3],xt=rt===1?0:ut+(rt-2)*Ct;if(this.ctx.clip_path.length!==0){var Wt=this.path;tt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(tt,this.posX+this.margin[3],-1*xt+ot),se.call(this,"fill",!0),this.path=Wt}var Fe=T([JSON.parse(JSON.stringify(_t))],this.posX+this.margin[3],-xt+ot+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(Je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Je*F.scale),st=this.lineWidth,this.lineWidth=st*F.scale);var nt=this.autoPaging!=="text";if(nt||Fe.y+Fe.h<=bt){if(nt||Fe.y>=ot&&Fe.x<=Bt){var He=nt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||Bt-Fe.x)[0],Nt=T([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-xt+ot+this.ctx.prevPageLastElemOffset)[0],mt=nt&&(rt>gt||rt<et)&&O.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wt,Ct,null).clip().discardPath()),this.pdf.text(He,Nt.x,Nt.y,{angle:F.angle,align:K,renderingMode:F.renderingMode}),mt&&this.pdf.restoreGraphicsState()}}else Fe.y<bt&&(this.ctx.prevPageLastElemOffset+=bt-Fe.y);F.scale>=.01&&(this.pdf.setFontSize(Je),this.lineWidth=st)}else F.scale>=.01&&(Je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Je*F.scale),st=this.lineWidth,this.lineWidth=st*F.scale),this.pdf.text(F.text,Ee.x+this.posX,Ee.y+this.posY,{angle:F.angle,align:K,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(Je),this.lineWidth=st)},B=function(F,K,te,ie){te=te||0,ie=ie||0,this.pdf.internal.out(t(F+te)+" "+r(K+ie)+" l")},ce=function(F,K,te){return this.pdf.lines(F,K,te,null,null)},Le=function(F,K,te,ie,ue,Ee,_e,Pe){this.pdf.internal.out([e(i(te+F)),e(l(ie+K)),e(i(ue+F)),e(l(Ee+K)),e(i(_e+F)),e(l(Pe+K)),"c"].join(" "))},ae=function(F,K,te,ie){for(var ue=2*Math.PI,Ee=Math.PI/2;K>te;)K-=ue;var _e=Math.abs(te-K);_e<ue&&ie&&(_e=ue-_e);for(var Pe=[],tt=ie?-1:1,Je=K;_e>1e-5;){var st=Je+tt*Math.min(_e,Ee);Pe.push(me.call(this,F,Je,st)),_e-=Math.abs(st-Je),Je=st}return Pe},me=function(F,K,te){var ie=(te-K)/2,ue=F*Math.cos(ie),Ee=F*Math.sin(ie),_e=ue,Pe=-Ee,tt=_e*_e+Pe*Pe,Je=tt+_e*ue+Pe*Ee,st=4/3*(Math.sqrt(2*tt*Je)-Je)/(_e*Ee-Pe*ue),at=_e-st*Pe,_t=Pe+st*_e,Ve=at,oe=-_t,At=ie+K,gt=Math.cos(At),et=Math.sin(At);return{x1:F*Math.cos(K),y1:F*Math.sin(K),x2:at*gt-_t*et,y2:at*et+_t*gt,x3:Ve*gt-oe*et,y3:Ve*et+oe*gt,x4:F*Math.cos(te),y4:F*Math.sin(te)}},he=function(F){return 180*F/Math.PI},Ce=function(F,K,te,ie,ue,Ee){var _e=F+.5*(te-F),Pe=K+.5*(ie-K),tt=ue+.5*(te-ue),Je=Ee+.5*(ie-Ee),st=Math.min(F,ue,_e,tt),at=Math.max(F,ue,_e,tt),_t=Math.min(K,Ee,Pe,Je),Ve=Math.max(K,Ee,Pe,Je);return new h(st,_t,at-st,Ve-_t)},J=function(F,K,te,ie,ue,Ee,_e,Pe){var tt,Je,st,at,_t,Ve,oe,At,gt,et,rt,ot,ut,bt,Ct=te-F,Bt=ie-K,wt=ue-te,xt=Ee-ie,Wt=_e-ue,Fe=Pe-Ee;for(Je=0;Je<41;Je++)gt=(oe=(st=F+(tt=Je/40)*Ct)+tt*((_t=te+tt*wt)-st))+tt*(_t+tt*(ue+tt*Wt-_t)-oe),et=(At=(at=K+tt*Bt)+tt*((Ve=ie+tt*xt)-at))+tt*(Ve+tt*(Ee+tt*Fe-Ve)-At),Je==0?(rt=gt,ot=et,ut=gt,bt=et):(rt=Math.min(rt,gt),ot=Math.min(ot,et),ut=Math.max(ut,gt),bt=Math.max(bt,et));return new h(Math.round(rt),Math.round(ot),Math.round(ut-rt),Math.round(bt-ot))},Ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,K,te=(F=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:K}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})(Rt.API),function(n){var e=function(l){var u,h,f,g,v,N,S,_,L,O;for(h=[],f=0,g=(l+=u="\0\0\0\0".slice(l.length%4||4)).length;g>f;f+=4)(v=(l.charCodeAt(f)<<24)+(l.charCodeAt(f+1)<<16)+(l.charCodeAt(f+2)<<8)+l.charCodeAt(f+3))!==0?(N=(v=((v=((v=((v=(v-(O=v%85))/85)-(L=v%85))/85)-(_=v%85))/85)-(S=v%85))/85)%85,h.push(N+33,S+33,_+33,L+33,O+33)):h.push(122);return function(q,M){for(var T=M;T>0;T--)q.pop()}(h,u.length),String.fromCharCode.apply(String,h)+"~>"},t=function(l){var u,h,f,g,v,N=String,S="length",_=255,L="charCodeAt",O="slice",q="replace";for(l[O](-2),l=l[O](0,-2)[q](/\s/g,"")[q]("z","!!!!!"),f=[],g=0,v=(l+=u="uuuuu"[O](l[S]%5||5))[S];v>g;g+=5)h=52200625*(l[L](g)-33)+614125*(l[L](g+1)-33)+7225*(l[L](g+2)-33)+85*(l[L](g+3)-33)+(l[L](g+4)-33),f.push(_&h>>24,_&h>>16,_&h>>8,_&h);return function(M,T){for(var I=T;I>0;I--)M.pop()}(f,u[S]),N.fromCharCode.apply(N,f)},r=function(l){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),u.test(l)===!1)return"";for(var h="",f=0;f<l.length;f+=2)h+=String.fromCharCode("0x"+(l[f]+l[f+1]));return h},i=function(l){for(var u=new Uint8Array(l.length),h=l.length;h--;)u[h]=l.charCodeAt(h);return l=(u=ax(u)).reduce(function(f,g){return f+String.fromCharCode(g)},"")};n.processDataByFilters=function(l,u){var h=0,f=l||"",g=[];for(typeof(u=u||[])=="string"&&(u=[u]),h=0;h<u.length;h+=1)switch(u[h]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=r(f),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(v){return("0"+v.charCodeAt().toString(16)).slice(-2)}).join("")+">",g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=i(f),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[h]+'" is not implemented')}return{data:f,reverseChain:g.reverse().join(" ")}}}(Rt.API),function(n){n.loadFile=function(e,t,r){return function(i,l,u){l=l!==!1,u=typeof u=="function"?u:function(){};var h=void 0;try{h=function(f,g,v){var N=new XMLHttpRequest,S=0,_=function(L){var O=L.length,q=[],M=String.fromCharCode;for(S=0;S<O;S+=1)q.push(M(255&L.charCodeAt(S)));return q.join("")};if(N.open("GET",f,!g),N.overrideMimeType("text/plain; charset=x-user-defined"),g===!1&&(N.onload=function(){N.status===200?v(_(this.responseText)):v(void 0)}),N.send(null),g&&N.status===200)return _(N.responseText)}(i,l,u)}catch{}return h}(e,t,r)},n.loadImageFile=n.loadFile}(Rt.API),function(n){function e(){return(Mt.html2canvas?Promise.resolve(Mt.html2canvas):Zg(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function t(){return(Mt.DOMPurify?Promise.resolve(Mt.DOMPurify):Zg(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var r=function(u){var h=Vn(u);return h==="undefined"?"undefined":h==="string"||u instanceof String?"string":h==="number"||u instanceof Number?"number":h==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":h==="object"?"object":"unknown"},i=function(u,h){var f=document.createElement(u);for(var g in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[g]=h.style[g];return f},l=function u(h){var f=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),g=u.convert(Promise.resolve(),f);return g=(g=g.setProgress(1,u,1,[u])).set(h)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(u,h){return u.__proto__=h||l.prototype,u},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(u,h){return this.then(function(){switch(h=h||function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(u)){case"string":return this.then(t).then(function(f){return this.set({src:i("div",{innerHTML:u,dompurify:f})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},l.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=function f(g,v){for(var N=g.nodeType===3?document.createTextNode(g.nodeValue):g.cloneNode(!1),S=g.firstChild;S;S=S.nextSibling)v!==!0&&S.nodeType===1&&S.nodeName==="SCRIPT"||N.appendChild(f(S,v));return g.nodeType===1&&(g.nodeName==="CANVAS"?(N.width=g.width,N.height=g.height,N.getContext("2d").drawImage(g,0,0)):g.nodeName!=="TEXTAREA"&&g.nodeName!=="SELECT"||(N.value=g.value),N.addEventListener("load",function(){N.scrollTop=g.scrollTop,N.scrollLeft=g.scrollLeft},!0)),N}(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(h){var f=this.opt.jsPDF,g=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,N=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete N.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=g,g)for(var S=0;S<g.length;++S){var _=g[S],L=_.src.find(function(O){return O.format==="truetype"});L&&f.addFont(L.url,_.ref.name,_.ref.style)}return N.windowHeight=N.windowHeight||0,N.windowHeight=N.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):N.windowHeight,f.context2d.save(!0),h(this.prop.container,N)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(u,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(u,h):this.outputPdf(u,h)},l.prototype.outputPdf=function(u,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,h)})},l.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},l.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(u){if(r(u)!=="object")return this;var h=Object.keys(u||{}).map(function(f){if(f in l.template.prop)return function(){this.prop[f]=u[f]};switch(f){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[f]=u[f]}}},this);return this.then(function(){return this.thenList(h)})},l.prototype.get=function(u,h){return this.then(function(){var f=u in l.template.prop?this.prop[u]:this.opt[u];return h?h(f):f})},l.prototype.setMargin=function(u){return this.then(function(){switch(r(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},l.prototype.setPageSize=function(u){function h(f,g){return Math.floor(f*g/72*96)}return this.then(function(){(u=u||Rt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:h(u.inner.width,u.k),height:h(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},l.prototype.setProgress=function(u,h,f,g){return u!=null&&(this.progress.val=u),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(u,h,f,g){return this.setProgress(u?this.progress.val+u:null,h||null,f?this.progress.n+f:null,g?this.progress.stack.concat(g):null)},l.prototype.then=function(u,h){var f=this;return this.thenCore(u,h,function(g,v){return f.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(N){return f.updateProgress(null,g),N}).then(g,v).then(function(N){return f.updateProgress(1),N})})},l.prototype.thenCore=function(u,h,f){f=f||Promise.prototype.then,u&&(u=u.bind(this)),h&&(h=h.bind(this));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),v=f.call(g,u,h);return l.convert(v,this.__proto__)},l.prototype.thenExternal=function(u,h){return Promise.prototype.then.call(this,u,h)},l.prototype.thenList=function(u){var h=this;return u.forEach(function(f){h=h.thenCore(f)}),h},l.prototype.catch=function(u){u&&(u=u.bind(this));var h=Promise.prototype.catch.call(this,u);return l.convert(h,this)},l.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},l.prototype.error=function(u){return this.then(function(){throw new Error(u)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Rt.getPageSize=function(u,h,f){if(Vn(u)==="object"){var g=u;u=g.orientation,h=g.unit||h,f=g.format||f}h=h||"mm",f=f||"a4",u=(""+(u||"P")).toLowerCase();var v,N=(""+f).toLowerCase(),S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+h}var _,L=0,O=0;if(S.hasOwnProperty(N))L=S[N][1]/v,O=S[N][0]/v;else try{L=f[1],O=f[0]}catch{throw new Error("Invalid format: "+f)}if(u==="p"||u==="portrait")u="p",O>L&&(_=O,O=L,L=_);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",L>O&&(_=O,O=L,L=_)}return{width:O,height:L,unit:h,k:v,orientation:u}},n.html=function(u,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(ux):null;var f=new l(h);return h.worker?f:f.from(u).doCallback()}}(Rt.API),Rt.API.addJS=function(n){return Ny=n,this.internal.events.subscribe("postPutResources",function(){Cm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Cm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),wy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ny+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Cm!==void 0&&wy!==void 0&&this.internal.out("/Names <</JavaScript "+Cm+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),l=0;l<i.length;l++){var u=i[l],h=r.exec(u);if(h!=null){var f=h[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var g=this.internal.pages.length,v=[];for(l=0;l<g;l++){var N=t.internal.newObject();v.push(N);var S=t.internal.getPageInfo(l+1);t.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var _=t.internal.newObject();for(t.internal.write("<< /Names [ "),l=0;l<v.length;l++)t.internal.write("(page_"+(l+1)+")"+v[l]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+_+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,l){var u={title:i,options:l,children:[]};return r==null&&(r=this.root),r.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var u=r.children[l];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var h=this.count=this.count_r({count:0},u);if(h>0&&this.line("/Count "+h),u.options&&u.options.pageNumber){var f=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var g=0;g<r.children.length;g++)this.renderItems(r.children[g])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var l=0;l<i.children.length;l++)r.count++,this.count_r(r,i.children[l]);return r.count}}])}(Rt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,l,u,h){var f,g=this.decode.DCT_DECODE,v=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(f=function(N){for(var S,_=256*N.charCodeAt(4)+N.charCodeAt(5),L=N.length,O={width:0,height:0,numcomponents:1},q=4;q<L;q+=2){if(q+=_,e.indexOf(N.charCodeAt(q+1))!==-1){S=256*N.charCodeAt(q+5)+N.charCodeAt(q+6),O={width:256*N.charCodeAt(q+7)+N.charCodeAt(q+8),height:S,numcomponents:N.charCodeAt(q+9)};break}_=256*N.charCodeAt(q+2)+N.charCodeAt(q+3)}return O}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:h=this.color_spaces.DEVICE_GRAY;break;case 4:h=this.color_spaces.DEVICE_CMYK;break;case 3:h=this.color_spaces.DEVICE_RGB}v={data:t,width:f.width,height:f.height,colorSpace:h,bitsPerComponent:8,filter:g,index:r,alias:i}}return v}}(Rt.API);var ld,Rm,_y,Ay,Sy,v8=function(){var n,e,t;function r(l){var u,h,f,g,v,N,S,_,L,O,q,M,T,I;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},N=null;;){switch(u=this.readUInt32(),L=(function(){var ee,se;for(se=[],ee=0;ee<4;++ee)se.push(String.fromCharCode(this.data[this.pos++]));return se}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":N&&this.animation.frames.push(N),this.pos+=4,N={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},v=this.readUInt16(),g=this.readUInt16()||100,N.delay=1e3*v/g,N.disposeOp=this.data[this.pos++],N.blendOp=this.data[this.pos++],N.data=[];break;case"IDAT":case"fdAT":for(L==="fdAT"&&(this.pos+=4,u-=4),l=(N!=null?N.data:void 0)||this.imgData,M=0;0<=u?M<u:M>u;0<=u?++M:--M)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(u),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((O=f-this.transparency.indexed.length)>0)for(T=0;0<=O?T<O:T>O;0<=O?++T:--T)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":S=(q=this.read(u)).indexOf(0),_=String.fromCharCode.apply(String,q.slice(0,S)),this.text[_]=String.fromCharCode.apply(String,q.slice(S+1));break;case"IEND":return N&&this.animation.frames.push(N),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(I=this.colorType)===4||I===6,h=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*h,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(l){var u,h;for(h=[],u=0;0<=l?u<l:u>l;0<=l?++u:--u)h.push(this.data[this.pos++]);return h},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(l){var u=this.pixelBitlength/8,h=new Uint8Array(this.width*this.height*u),f=0,g=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function v(N,S,_,L){var O,q,M,T,I,ee,se,ge,W,k,V,Q,R,P,B,ce,Le,ae,me,he,Ce,J=Math.ceil((g.width-N)/_),Ae=Math.ceil((g.height-S)/L),F=g.width==J&&g.height==Ae;for(P=u*J,Q=F?h:new Uint8Array(P*Ae),ee=l.length,R=0,q=0;R<Ae&&f<ee;){switch(l[f++]){case 0:for(T=Le=0;Le<P;T=Le+=1)Q[q++]=l[f++];break;case 1:for(T=ae=0;ae<P;T=ae+=1)O=l[f++],I=T<u?0:Q[q-u],Q[q++]=(O+I)%256;break;case 2:for(T=me=0;me<P;T=me+=1)O=l[f++],M=(T-T%u)/u,B=R&&Q[(R-1)*P+M*u+T%u],Q[q++]=(B+O)%256;break;case 3:for(T=he=0;he<P;T=he+=1)O=l[f++],M=(T-T%u)/u,I=T<u?0:Q[q-u],B=R&&Q[(R-1)*P+M*u+T%u],Q[q++]=(O+Math.floor((I+B)/2))%256;break;case 4:for(T=Ce=0;Ce<P;T=Ce+=1)O=l[f++],M=(T-T%u)/u,I=T<u?0:Q[q-u],R===0?B=ce=0:(B=Q[(R-1)*P+M*u+T%u],ce=M&&Q[(R-1)*P+(M-1)*u+T%u]),se=I+B-ce,ge=Math.abs(se-I),k=Math.abs(se-B),V=Math.abs(se-ce),W=ge<=k&&ge<=V?I:k<=V?B:ce,Q[q++]=(O+W)%256;break;default:throw new Error("Invalid filter algorithm: "+l[f-1])}if(!F){var K=((S+R*L)*g.width+N)*u,te=R*P;for(T=0;T<J;T+=1){for(var ie=0;ie<u;ie+=1)h[K++]=Q[te++];K+=(_-1)*u}}R++}}return l=QC(l),g.interlaceMethod==1?(v(0,0,8,8),v(4,0,8,8),v(0,4,4,8),v(2,0,4,4),v(0,2,2,4),v(1,0,2,2),v(0,1,1,2)):v(0,0,1,1),h},r.prototype.decodePalette=function(){var l,u,h,f,g,v,N,S,_;for(h=this.palette,v=this.transparency.indexed||[],g=new Uint8Array((v.length||0)+h.length),f=0,l=0,u=N=0,S=h.length;N<S;u=N+=3)g[f++]=h[u],g[f++]=h[u+1],g[f++]=h[u+2],g[f++]=(_=v[l++])!=null?_:255;return g},r.prototype.copyToImageData=function(l,u){var h,f,g,v,N,S,_,L,O,q,M;if(f=this.colors,O=null,h=this.hasAlphaChannel,this.palette.length&&(O=(M=this._decodedPalette)!=null?M:this._decodedPalette=this.decodePalette(),f=4,h=!0),L=(g=l.data||l).length,N=O||u,v=S=0,f===1)for(;v<L;)_=O?4*u[v/4]:S,q=N[_++],g[v++]=q,g[v++]=q,g[v++]=q,g[v++]=h?N[_++]:255,S=_;else for(;v<L;)_=O?4*u[v/4]:S,g[v++]=N[_++],g[v++]=N[_++],g[v++]=N[_++],g[v++]=h?N[_++]:255,S=_},r.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var i=function(){if(Object.prototype.toString.call(Mt)==="[object Window]"){try{e=Mt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(l){var u;if(i()===!0)return t.width=l.width,t.height=l.height,t.clearRect(0,0,l.width,l.height),t.putImageData(l,0,0),(u=new Image).src=e.toDataURL(),u;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(l){var u,h,f,g,v,N,S,_;if(this.animation){for(_=[],h=v=0,N=(S=this.animation.frames).length;v<N;h=++v)u=S[h],f=l.createImageData(u.width,u.height),g=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(f,g),u.imageData=f,_.push(u.image=n(f));return _}},r.prototype.renderFrame=function(l,u){var h,f,g;return h=(f=this.animation.frames)[u],g=f[u-1],u===0&&l.clearRect(0,0,this.width,this.height),(g!=null?g.disposeOp:void 0)===1?l.clearRect(g.xOffset,g.yOffset,g.width,g.height):(g!=null?g.disposeOp:void 0)===2&&l.putImageData(g.imageData,g.xOffset,g.yOffset),h.blendOp===0&&l.clearRect(h.xOffset,h.yOffset,h.width,h.height),l.drawImage(h.image,h.xOffset,h.yOffset)},r.prototype.animate=function(l){var u,h,f,g,v,N,S=this;return h=0,N=this.animation,g=N.numFrames,f=N.frames,v=N.numPlays,(u=function(){var _,L;if(_=h++%g,L=f[_],S.renderFrame(l,_),g>1&&h/g<v)return S.animation._timeout=setTimeout(u,L.delay)})()},r.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},r.prototype.render=function(l){var u,h;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,u=l.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(h=u.createImageData(this.width,this.height),this.copyToImageData(h,this.decodePixels()),u.putImageData(h,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function y8(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],l=i>>7,u=1<<(7&i)+1;n[e++],n[e++];var h=null,f=null;l&&(h=e,f=u,e+=3*u);var g=!0,v=[],N=0,S=null,_=0,L=null;for(this.width=t,this.height=r;g&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,L=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var O=n[e++];N=n[e++]|n[e++]<<8,S=n[e++],(1&O)==0&&(S=null),_=O>>2&7,e++;break;case 254:for(;;){if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var q=n[e++]|n[e++]<<8,M=n[e++]|n[e++]<<8,T=n[e++]|n[e++]<<8,I=n[e++]|n[e++]<<8,ee=n[e++],se=ee>>6&1,ge=1<<(7&ee)+1,W=h,k=f,V=!1;ee>>7&&(V=!0,W=e,k=ge,e+=3*ge);var Q=e;for(e++;;){var R;if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}v.push({x:q,y:M,width:T,height:I,has_local_palette:V,palette_offset:W,palette_size:k,data_offset:Q,data_length:e-Q,transparent_index:S,interlaced:!!se,delay:N,disposal:_});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return L},this.frameInfo=function(P){if(P<0||P>=v.length)throw new Error("Frame index out of range.");return v[P]},this.decodeAndBlitFrameBGRA=function(P,B){var ce=this.frameInfo(P),Le=ce.width*ce.height,ae=new Uint8Array(Le);Ey(n,ce.data_offset,ae,Le);var me=ce.palette_offset,he=ce.transparent_index;he===null&&(he=256);var Ce=ce.width,J=t-Ce,Ae=Ce,F=4*(ce.y*t+ce.x),K=4*((ce.y+ce.height)*t+ce.x),te=F,ie=4*J;ce.interlaced===!0&&(ie+=4*t*7);for(var ue=8,Ee=0,_e=ae.length;Ee<_e;++Ee){var Pe=ae[Ee];if(Ae===0&&(Ae=Ce,(te+=ie)>=K&&(ie=4*J+4*t*(ue-1),te=F+(Ce+J)*(ue<<1),ue>>=1)),Pe===he)te+=4;else{var tt=n[me+3*Pe],Je=n[me+3*Pe+1],st=n[me+3*Pe+2];B[te++]=st,B[te++]=Je,B[te++]=tt,B[te++]=255}--Ae}},this.decodeAndBlitFrameRGBA=function(P,B){var ce=this.frameInfo(P),Le=ce.width*ce.height,ae=new Uint8Array(Le);Ey(n,ce.data_offset,ae,Le);var me=ce.palette_offset,he=ce.transparent_index;he===null&&(he=256);var Ce=ce.width,J=t-Ce,Ae=Ce,F=4*(ce.y*t+ce.x),K=4*((ce.y+ce.height)*t+ce.x),te=F,ie=4*J;ce.interlaced===!0&&(ie+=4*t*7);for(var ue=8,Ee=0,_e=ae.length;Ee<_e;++Ee){var Pe=ae[Ee];if(Ae===0&&(Ae=Ce,(te+=ie)>=K&&(ie=4*J+4*t*(ue-1),te=F+(Ce+J)*(ue<<1),ue>>=1)),Pe===he)te+=4;else{var tt=n[me+3*Pe],Je=n[me+3*Pe+1],st=n[me+3*Pe+2];B[te++]=tt,B[te++]=Je,B[te++]=st,B[te++]=255}--Ae}}}function Ey(n,e,t,r){for(var i=n[e++],l=1<<i,u=l+1,h=u+1,f=i+1,g=(1<<f)-1,v=0,N=0,S=0,_=n[e++],L=new Int32Array(4096),O=null;;){for(;v<16&&_!==0;)N|=n[e++]<<v,v+=8,_===1?_=n[e++]:--_;if(v<f)break;var q=N&g;if(N>>=f,v-=f,q!==l){if(q===u)break;for(var M=q<h?q:O,T=0,I=M;I>l;)I=L[I]>>8,++T;var ee=I;if(S+T+(M!==q?1:0)>r)return void $n.log("Warning, gif stream longer than expected.");t[S++]=ee;var se=S+=T;for(M!==q&&(t[S++]=ee),I=M;T--;)I=L[I],t[--se]=255&I,I>>=8;O!==null&&h<4096&&(L[h++]=O<<8|ee,h>=g+1&&f<12&&(++f,g=g<<1|1)),O=q}else h=u+1,g=(1<<(f=i+1))-1,O=null}return S!==r&&$n.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function _g(n){var e,t,r,i,l,u=Math.floor,h=new Array(64),f=new Array(64),g=new Array(64),v=new Array(64),N=new Array(65535),S=new Array(65535),_=new Array(64),L=new Array(64),O=[],q=0,M=7,T=new Array(64),I=new Array(64),ee=new Array(64),se=new Array(256),ge=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],ce=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Le=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ae(F,K){for(var te=0,ie=0,ue=new Array,Ee=1;Ee<=16;Ee++){for(var _e=1;_e<=F[Ee];_e++)ue[K[ie]]=[],ue[K[ie]][0]=te,ue[K[ie]][1]=Ee,ie++,te++;te*=2}return ue}function me(F){for(var K=F[0],te=F[1]-1;te>=0;)K&1<<te&&(q|=1<<M),te--,--M<0&&(q==255?(he(255),he(0)):he(q),M=7,q=0)}function he(F){O.push(F)}function Ce(F){he(F>>8&255),he(255&F)}function J(F,K,te,ie,ue){for(var Ee,_e=ue[0],Pe=ue[240],tt=function(et,rt){var ot,ut,bt,Ct,Bt,wt,xt,Wt,Fe,nt,He=0;for(Fe=0;Fe<8;++Fe){ot=et[He],ut=et[He+1],bt=et[He+2],Ct=et[He+3],Bt=et[He+4],wt=et[He+5],xt=et[He+6];var Nt=ot+(Wt=et[He+7]),mt=ot-Wt,$t=ut+xt,Ut=ut-xt,yn=bt+wt,Br=bt-wt,Zt=Ct+Bt,Xn=Ct-Bt,kn=Nt+Zt,ur=Nt-Zt,Xr=$t+yn,Bn=$t-yn;et[He]=kn+Xr,et[He+4]=kn-Xr;var Tt=.707106781*(Bn+ur);et[He+2]=ur+Tt,et[He+6]=ur-Tt;var cn=.382683433*((kn=Xn+Br)-(Bn=Ut+mt)),ja=.5411961*kn+cn,ar=1.306562965*Bn+cn,Qr=.707106781*(Xr=Br+Ut),Xa=mt+Qr,dt=mt-Qr;et[He+5]=dt+ja,et[He+3]=dt-ja,et[He+1]=Xa+ar,et[He+7]=Xa-ar,He+=8}for(He=0,Fe=0;Fe<8;++Fe){ot=et[He],ut=et[He+8],bt=et[He+16],Ct=et[He+24],Bt=et[He+32],wt=et[He+40],xt=et[He+48];var Cn=ot+(Wt=et[He+56]),Rn=ot-Wt,Gn=ut+xt,er=ut-xt,sr=bt+wt,br=bt-wt,xi=Ct+Bt,xa=Ct-Bt,Ur=Cn+xi,Tr=Cn-xi,vr=Gn+sr,jr=Gn-sr;et[He]=Ur+vr,et[He+32]=Ur-vr;var Un=.707106781*(jr+Tr);et[He+16]=Tr+Un,et[He+48]=Tr-Un;var Nn=.382683433*((Ur=xa+br)-(jr=er+Rn)),_s=.5411961*Ur+Nn,As=1.306562965*jr+Nn,sa=.707106781*(vr=br+er),ka=Rn+sa,bi=Rn-sa;et[He+40]=bi+_s,et[He+24]=bi-_s,et[He+8]=ka+As,et[He+56]=ka-As,He++}for(Fe=0;Fe<64;++Fe)nt=et[Fe]*rt[Fe],_[Fe]=nt>0?nt+.5|0:nt-.5|0;return _}(F,K),Je=0;Je<64;++Je)L[W[Je]]=tt[Je];var st=L[0]-te;te=L[0],st==0?me(ie[0]):(me(ie[S[Ee=32767+st]]),me(N[Ee]));for(var at=63;at>0&&L[at]==0;)at--;if(at==0)return me(_e),te;for(var _t,Ve=1;Ve<=at;){for(var oe=Ve;L[Ve]==0&&Ve<=at;)++Ve;var At=Ve-oe;if(At>=16){_t=At>>4;for(var gt=1;gt<=_t;++gt)me(Pe);At&=15}Ee=32767+L[Ve],me(ue[(At<<4)+S[Ee]]),me(N[Ee]),Ve++}return at!=63&&me(_e),te}function Ae(F){F=Math.min(Math.max(F,1),100),l!=F&&(function(K){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var ue=u((te[ie]*K+50)/100);ue=Math.min(Math.max(ue,1),255),h[W[ie]]=ue}for(var Ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_e=0;_e<64;_e++){var Pe=u((Ee[_e]*K+50)/100);Pe=Math.min(Math.max(Pe,1),255),f[W[_e]]=Pe}for(var tt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Je=0,st=0;st<8;st++)for(var at=0;at<8;at++)g[Je]=1/(h[W[Je]]*tt[st]*tt[at]*8),v[Je]=1/(f[W[Je]]*tt[st]*tt[at]*8),Je++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),l=F)}this.encode=function(F,K){K&&Ae(K),O=new Array,q=0,M=7,Ce(65496),Ce(65504),Ce(16),he(74),he(70),he(73),he(70),he(0),he(1),he(1),he(0),Ce(1),Ce(1),he(0),he(0),function(){Ce(65499),Ce(132),he(0);for(var ut=0;ut<64;ut++)he(h[ut]);he(1);for(var bt=0;bt<64;bt++)he(f[bt])}(),function(ut,bt){Ce(65472),Ce(17),he(8),Ce(bt),Ce(ut),he(3),he(1),he(17),he(0),he(2),he(17),he(1),he(3),he(17),he(1)}(F.width,F.height),function(){Ce(65476),Ce(418),he(0);for(var ut=0;ut<16;ut++)he(k[ut+1]);for(var bt=0;bt<=11;bt++)he(V[bt]);he(16);for(var Ct=0;Ct<16;Ct++)he(Q[Ct+1]);for(var Bt=0;Bt<=161;Bt++)he(R[Bt]);he(1);for(var wt=0;wt<16;wt++)he(P[wt+1]);for(var xt=0;xt<=11;xt++)he(B[xt]);he(17);for(var Wt=0;Wt<16;Wt++)he(ce[Wt+1]);for(var Fe=0;Fe<=161;Fe++)he(Le[Fe])}(),Ce(65498),Ce(12),he(3),he(1),he(0),he(2),he(17),he(3),he(17),he(0),he(63),he(0);var te=0,ie=0,ue=0;q=0,M=7,this.encode.displayName="_encode_";for(var Ee,_e,Pe,tt,Je,st,at,_t,Ve,oe=F.data,At=F.width,gt=F.height,et=4*At,rt=0;rt<gt;){for(Ee=0;Ee<et;){for(Je=et*rt+Ee,at=-1,_t=0,Ve=0;Ve<64;Ve++)st=Je+(_t=Ve>>3)*et+(at=4*(7&Ve)),rt+_t>=gt&&(st-=et*(rt+1+_t-gt)),Ee+at>=et&&(st-=Ee+at-et+4),_e=oe[st++],Pe=oe[st++],tt=oe[st++],T[Ve]=(ge[_e]+ge[Pe+256>>0]+ge[tt+512>>0]>>16)-128,I[Ve]=(ge[_e+768>>0]+ge[Pe+1024>>0]+ge[tt+1280>>0]>>16)-128,ee[Ve]=(ge[_e+1280>>0]+ge[Pe+1536>>0]+ge[tt+1792>>0]>>16)-128;te=J(T,g,te,e,r),ie=J(I,v,ie,t,i),ue=J(ee,v,ue,t,i),Ee+=32}rt+=8}if(M>=0){var ot=[];ot[1]=M+1,ot[0]=(1<<M+1)-1,me(ot)}return Ce(65497),new Uint8Array(O)},n=n||50,function(){for(var F=String.fromCharCode,K=0;K<256;K++)se[K]=F(K)}(),e=ae(k,V),t=ae(P,B),r=ae(Q,R),i=ae(ce,Le),function(){for(var F=1,K=2,te=1;te<=15;te++){for(var ie=F;ie<K;ie++)S[32767+ie]=te,N[32767+ie]=[],N[32767+ie][1]=te,N[32767+ie][0]=ie;for(var ue=-(K-1);ue<=-F;ue++)S[32767+ue]=te,N[32767+ue]=[],N[32767+ue][1]=te,N[32767+ue][0]=K-1+ue;F<<=1,K<<=1}}(),function(){for(var F=0;F<256;F++)ge[F]=19595*F,ge[F+256>>0]=38470*F,ge[F+512>>0]=7471*F+32768,ge[F+768>>0]=-11059*F,ge[F+1024>>0]=-21709*F,ge[F+1280>>0]=32768*F+8421375,ge[F+1536>>0]=-27439*F,ge[F+1792>>0]=-5329*F}(),Ae(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Hi(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ty(n){function e(k){if(!k)throw Error("assert :P")}function t(k,V,Q){for(var R=0;4>R;R++)if(k[V+R]!=Q.charCodeAt(R))return!0;return!1}function r(k,V,Q,R,P){for(var B=0;B<P;B++)k[V+B]=Q[R+B]}function i(k,V,Q,R){for(var P=0;P<R;P++)k[V+P]=Q}function l(k){return new Int32Array(k)}function u(k,V){for(var Q=[],R=0;R<k;R++)Q.push(new V);return Q}function h(k,V){var Q=[];return function R(P,B,ce){for(var Le=ce[B],ae=0;ae<Le&&(P.push(ce.length>B+1?[]:new V),!(ce.length<B+1));ae++)R(P[ae],B+1,ce)}(Q,0,k),Q}var f=function(){var k=this;function V(m,b){for(var A=1<<b-1>>>0;m&A;)A>>>=1;return A?(m&A-1)+A:m}function Q(m,b,A,j,U){e(!(j%A));do m[b+(j-=A)]=U;while(0<j)}function R(m,b,A,j,U){if(e(2328>=U),512>=U)var H=l(512);else if((H=l(U))==null)return 0;return function(G,Y,Z,ne,fe,ke){var Te,we,Ge=Y,Me=1<<Z,pe=l(16),be=l(16);for(e(fe!=0),e(ne!=null),e(G!=null),e(0<Z),we=0;we<fe;++we){if(15<ne[we])return 0;++pe[ne[we]]}if(pe[0]==fe)return 0;for(be[1]=0,Te=1;15>Te;++Te){if(pe[Te]>1<<Te)return 0;be[Te+1]=be[Te]+pe[Te]}for(we=0;we<fe;++we)Te=ne[we],0<ne[we]&&(ke[be[Te]++]=we);if(be[15]==1)return(ne=new P).g=0,ne.value=ke[0],Q(G,Ge,1,Me,ne),Me;var Ue,Ke=-1,qe=Me-1,ht=0,it=1,St=1,ct=1<<Z;for(we=0,Te=1,fe=2;Te<=Z;++Te,fe<<=1){if(it+=St<<=1,0>(St-=pe[Te]))return 0;for(;0<pe[Te];--pe[Te])(ne=new P).g=Te,ne.value=ke[we++],Q(G,Ge+ht,fe,ct,ne),ht=V(ht,Te)}for(Te=Z+1,fe=2;15>=Te;++Te,fe<<=1){if(it+=St<<=1,0>(St-=pe[Te]))return 0;for(;0<pe[Te];--pe[Te]){if(ne=new P,(ht&qe)!=Ke){for(Ge+=ct,Ue=1<<(Ke=Te)-Z;15>Ke&&!(0>=(Ue-=pe[Ke]));)++Ke,Ue<<=1;Me+=ct=1<<(Ue=Ke-Z),G[Y+(Ke=ht&qe)].g=Ue+Z,G[Y+Ke].value=Ge-Y-Ke}ne.g=Te-Z,ne.value=ke[we++],Q(G,Ge+(ht>>Z),fe,ct,ne),ht=V(ht,Te)}}return it!=2*be[15]-1?0:Me}(m,b,A,j,U,H)}function P(){this.value=this.g=0}function B(){this.value=this.g=0}function ce(){this.G=u(5,P),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Cr,B)}function Le(m,b,A,j){e(m!=null),e(b!=null),e(2147483648>j),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=b,m.pa=A,m.Jd=b,m.Yc=A+j,m.Zc=4<=j?A+j-4+1:A,Ee(m)}function ae(m,b){for(var A=0;0<b--;)A|=Pe(m,128)<<b;return A}function me(m,b){var A=ae(m,b);return _e(m)?-A:A}function he(m,b,A,j){var U,H=0;for(e(m!=null),e(b!=null),e(4294967288>j),m.Sb=j,m.Ra=0,m.u=0,m.h=0,4<j&&(j=4),U=0;U<j;++U)H+=b[A+U]<<8*U;m.Ra=H,m.bb=j,m.oa=b,m.pa=A}function Ce(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<nl-8>>>0,++m.bb,m.u-=8;te(m)&&(m.h=1,m.u=0)}function J(m,b){if(e(0<=b),!m.h&&b<=tl){var A=K(m)&lo[b];return m.u+=b,Ce(m),A}return m.h=1,m.u=0}function Ae(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(m){return m.Ra>>>(m.u&nl-1)>>>0}function te(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>nl}function ie(m,b){m.u=b,m.h=te(m)}function ue(m){m.u>=ql&&(e(m.u>=ql),Ce(m))}function Ee(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function _e(m){return ae(m,1)}function Pe(m,b){var A=m.Ca;0>m.b&&Ee(m);var j=m.b,U=A*b>>>8,H=(m.I>>>j>U)+0;for(H?(A-=U,m.I-=U+1<<j>>>0):A=U+1,j=A,U=0;256<=j;)U+=8,j>>=8;return j=7^U+Da[j],m.b-=j,m.Ca=(A<<j)-1,H}function tt(m,b,A){m[b+0]=A>>24&255,m[b+1]=A>>16&255,m[b+2]=A>>8&255,m[b+3]=A>>0&255}function Je(m,b){return m[b+0]<<0|m[b+1]<<8}function st(m,b){return Je(m,b)|m[b+2]<<16}function at(m,b){return Je(m,b)|Je(m,b+2)<<16}function _t(m,b){var A=1<<b;return e(m!=null),e(0<b),m.X=l(A),m.X==null?0:(m.Mb=32-b,m.Xa=b,1)}function Ve(m,b){e(m!=null),e(b!=null),e(m.Xa==b.Xa),r(b.X,0,m.X,0,1<<b.Xa)}function oe(){this.X=[],this.Xa=this.Mb=0}function At(m,b,A,j){e(A!=null),e(j!=null);var U=A[0],H=j[0];return U==0&&(U=(m*H+b/2)/b),H==0&&(H=(b*U+m/2)/m),0>=U||0>=H?0:(A[0]=U,j[0]=H,1)}function gt(m,b){return m+(1<<b)-1>>>b}function et(m,b){return((4278255360&m)+(4278255360&b)>>>0&4278255360)+((16711935&m)+(16711935&b)>>>0&16711935)>>>0}function rt(m,b){k[b]=function(A,j,U,H,G,Y,Z){var ne;for(ne=0;ne<G;++ne){var fe=k[m](Y[Z+ne-1],U,H+ne);Y[Z+ne]=et(A[j+ne],fe)}}}function ot(){this.ud=this.hd=this.jd=0}function ut(m,b){return((4278124286&(m^b))>>>1)+(m&b)>>>0}function bt(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function Ct(m,b){return bt(m+(m-b+.5>>1))}function Bt(m,b,A){return Math.abs(b-A)-Math.abs(m-A)}function wt(m,b,A,j,U,H,G){for(j=H[G-1],A=0;A<U;++A)H[G+A]=j=et(m[b+A],j)}function xt(m,b,A,j,U){var H;for(H=0;H<A;++H){var G=m[b+H],Y=G>>8&255,Z=16711935&(Z=(Z=16711935&G)+((Y<<16)+Y));j[U+H]=(4278255360&G)+Z>>>0}}function Wt(m,b){b.jd=m>>0&255,b.hd=m>>8&255,b.ud=m>>16&255}function Fe(m,b,A,j,U,H){var G;for(G=0;G<j;++G){var Y=b[A+G],Z=Y>>>8,ne=Y,fe=255&(fe=(fe=Y>>>16)+((m.jd<<24>>24)*(Z<<24>>24)>>>5));ne=255&(ne=(ne=ne+((m.hd<<24>>24)*(Z<<24>>24)>>>5))+((m.ud<<24>>24)*(fe<<24>>24)>>>5)),U[H+G]=(4278255360&Y)+(fe<<16)+ne}}function nt(m,b,A,j,U){k[b]=function(H,G,Y,Z,ne,fe,ke,Te,we){for(Z=ke;Z<Te;++Z)for(ke=0;ke<we;++ke)ne[fe++]=U(Y[j(H[G++])])},k[m]=function(H,G,Y,Z,ne,fe,ke){var Te=8>>H.b,we=H.Ea,Ge=H.K[0],Me=H.w;if(8>Te)for(H=(1<<H.b)-1,Me=(1<<Te)-1;G<Y;++G){var pe,be=0;for(pe=0;pe<we;++pe)pe&H||(be=j(Z[ne++])),fe[ke++]=U(Ge[be&Me]),be>>=Te}else k["VP8LMapColor"+A](Z,ne,Ge,Me,fe,ke,G,Y,we)}}function He(m,b,A,j,U){for(A=b+A;b<A;){var H=m[b++];j[U++]=H>>16&255,j[U++]=H>>8&255,j[U++]=H>>0&255}}function Nt(m,b,A,j,U){for(A=b+A;b<A;){var H=m[b++];j[U++]=H>>16&255,j[U++]=H>>8&255,j[U++]=H>>0&255,j[U++]=H>>24&255}}function mt(m,b,A,j,U){for(A=b+A;b<A;){var H=(G=m[b++])>>16&240|G>>12&15,G=G>>0&240|G>>28&15;j[U++]=H,j[U++]=G}}function $t(m,b,A,j,U){for(A=b+A;b<A;){var H=(G=m[b++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;j[U++]=H,j[U++]=G}}function Ut(m,b,A,j,U){for(A=b+A;b<A;){var H=m[b++];j[U++]=H>>0&255,j[U++]=H>>8&255,j[U++]=H>>16&255}}function yn(m,b,A,j,U,H){if(H==0)for(A=b+A;b<A;)tt(j,((H=m[b++])[0]>>24|H[1]>>8&65280|H[2]<<8&16711680|H[3]<<24)>>>0),U+=32;else r(j,U,m,b,A)}function Br(m,b){k[b][0]=k[m+"0"],k[b][1]=k[m+"1"],k[b][2]=k[m+"2"],k[b][3]=k[m+"3"],k[b][4]=k[m+"4"],k[b][5]=k[m+"5"],k[b][6]=k[m+"6"],k[b][7]=k[m+"7"],k[b][8]=k[m+"8"],k[b][9]=k[m+"9"],k[b][10]=k[m+"10"],k[b][11]=k[m+"11"],k[b][12]=k[m+"12"],k[b][13]=k[m+"13"],k[b][14]=k[m+"0"],k[b][15]=k[m+"0"]}function Zt(m){return m==$c||m==vo||m==Ri||m==Kl}function Xn(){this.eb=[],this.size=this.A=this.fb=0}function kn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ur(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Xn,this.f.kb=new kn,this.sd=null}function Xr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Bn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Tt(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function cn(m,b){var A=m.T,j=b.ba.f.RGBA,U=j.eb,H=j.fb+m.ka*j.A,G=Wr[b.ba.S],Y=m.y,Z=m.O,ne=m.f,fe=m.N,ke=m.ea,Te=m.W,we=b.cc,Ge=b.dc,Me=b.Mc,pe=b.Nc,be=m.ka,Ue=m.ka+m.T,Ke=m.U,qe=Ke+1>>1;for(be==0?G(Y,Z,null,null,ne,fe,ke,Te,ne,fe,ke,Te,U,H,null,null,Ke):(G(b.ec,b.fc,Y,Z,we,Ge,Me,pe,ne,fe,ke,Te,U,H-j.A,U,H,Ke),++A);be+2<Ue;be+=2)we=ne,Ge=fe,Me=ke,pe=Te,fe+=m.Rc,Te+=m.Rc,H+=2*j.A,G(Y,(Z+=2*m.fa)-m.fa,Y,Z,we,Ge,Me,pe,ne,fe,ke,Te,U,H-j.A,U,H,Ke);return Z+=m.fa,m.j+Ue<m.o?(r(b.ec,b.fc,Y,Z,Ke),r(b.cc,b.dc,ne,fe,qe),r(b.Mc,b.Nc,ke,Te,qe),A--):1&Ue||G(Y,Z,null,null,ne,fe,ke,Te,ne,fe,ke,Te,U,H+j.A,null,null,Ke),A}function ja(m,b,A){var j=m.F,U=[m.J];if(j!=null){var H=m.U,G=b.ba.S,Y=G==ol||G==Ri;b=b.ba.f.RGBA;var Z=[0],ne=m.ka;Z[0]=m.T,m.Kb&&(ne==0?--Z[0]:(--ne,U[0]-=m.width),m.j+m.ka+m.T==m.o&&(Z[0]=m.o-m.j-ne));var fe=b.eb;ne=b.fb+ne*b.A,m=tn(j,U[0],m.width,H,Z,fe,ne+(Y?0:3),b.A),e(A==Z),m&&Zt(G)&&es(fe,ne,Y,H,Z,b.A)}return 0}function ar(m){var b=m.ma,A=b.ba.S,j=11>A,U=A==Gl||A==Yc||A==ol||A==Ci||A==12||Zt(A);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!oo(b.Oa,m,U?11:12))return 0;if(U&&Zt(A)&&Qe(),m.da)alert("todo:use_scaling");else{if(j){if(b.Ib=Tt,m.Kb){if(A=m.U+1>>1,b.memory=l(m.U+2*A),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+m.U,b.Mc=b.cc,b.Nc=b.dc+A,b.Ib=cn,Qe()}}else alert("todo:EmitYUV");U&&(b.Jb=ja,j&&ye())}if(j&&!Ef){for(m=0;256>m;++m)G0[m]=89858*(m-128)+Ir>>ui,Jc[m]=-22014*(m-128)+Ir,Kd[m]=-45773*(m-128),Lr[m]=113618*(m-128)+Ir>>ui;for(m=No;m<Vu;++m)b=76283*(m-16)+Ir>>ui,Zc[m-No]=An(b,255),Yd[m-No]=An(b+8>>4,15);Ef=1}return 1}function Qr(m){var b=m.ma,A=m.U,j=m.T;return e(!(1&m.ka)),0>=A||0>=j?0:(A=b.Ib(m,b),b.Jb!=null&&b.Jb(m,b,A),b.Dc+=A,1)}function Xa(m){m.ma.memory=null}function dt(m,b,A,j){return J(m,8)!=47?0:(b[0]=J(m,14)+1,A[0]=J(m,14)+1,j[0]=J(m,1),J(m,3)!=0?0:!m.h)}function Cn(m,b){if(4>m)return m+1;var A=m-2>>1;return(2+(1&m)<<A)+J(b,A)+1}function Rn(m,b){return 120<b?b-120:1<=(A=((A=Li[b-1])>>4)*m+(8-(15&A)))?A:1;var A}function Gn(m,b,A){var j=K(A),U=m[b+=255&j].g-8;return 0<U&&(ie(A,A.u+8),j=K(A),b+=m[b].value,b+=j&(1<<U)-1),ie(A,A.u+m[b].g),m[b].value}function er(m,b,A){return A.g+=m.g,A.value+=m.value<<b>>>0,e(8>=A.g),m.g}function sr(m,b,A){var j=m.xc;return e((b=j==0?0:m.vc[m.md*(A>>j)+(b>>j)])<m.Wb),m.Ya[b]}function br(m,b,A,j){var U=m.ab,H=m.c*b,G=m.C;b=G+b;var Y=A,Z=j;for(j=m.Ta,A=m.Ua;0<U--;){var ne=m.gc[U],fe=G,ke=b,Te=Y,we=Z,Ge=(Z=j,Y=A,ne.Ea);switch(e(fe<ke),e(ke<=ne.nc),ne.hc){case 2:Iu(Te,we,(ke-fe)*Ge,Z,Y);break;case 0:var Me=fe,pe=ke,be=Z,Ue=Y,Ke=(ct=ne).Ea;Me==0&&(Wd(Te,we,null,null,1,be,Ue),wt(Te,we+1,0,0,Ke-1,be,Ue+1),we+=Ke,Ue+=Ke,++Me);for(var qe=1<<ct.b,ht=qe-1,it=gt(Ke,ct.b),St=ct.K,ct=ct.w+(Me>>ct.b)*it;Me<pe;){var pn=St,Sn=ct,Jt=1;for(Gc(Te,we,be,Ue-Ke,1,be,Ue);Jt<Ke;){var Xt=(Jt&~ht)+qe;Xt>Ke&&(Xt=Ke),(0,Ti[pn[Sn++]>>8&15])(Te,we+ +Jt,be,Ue+Jt-Ke,Xt-Jt,be,Ue+Jt),Jt=Xt}we+=Ke,Ue+=Ke,++Me&ht||(ct+=it)}ke!=ne.nc&&r(Z,Y-Ge,Z,Y+(ke-fe-1)*Ge,Ge);break;case 1:for(Ge=Te,pe=we,Ke=(Te=ne.Ea)-(Ue=Te&~(be=(we=1<<ne.b)-1)),Me=gt(Te,ne.b),qe=ne.K,ne=ne.w+(fe>>ne.b)*Me;fe<ke;){for(ht=qe,it=ne,St=new ot,ct=pe+Ue,pn=pe+Te;pe<ct;)Wt(ht[it++],St),uo(St,Ge,pe,we,Z,Y),pe+=we,Y+=we;pe<pn&&(Wt(ht[it++],St),uo(St,Ge,pe,Ke,Z,Y),pe+=Ke,Y+=Ke),++fe&be||(ne+=Me)}break;case 3:if(Te==Z&&we==Y&&0<ne.b){for(pe=Z,Te=Ge=Y+(ke-fe)*Ge-(Ue=(ke-fe)*gt(ne.Ea,ne.b)),we=Z,be=Y,Me=[],Ue=(Ke=Ue)-1;0<=Ue;--Ue)Me[Ue]=we[be+Ue];for(Ue=Ke-1;0<=Ue;--Ue)pe[Te+Ue]=Me[Ue];fs(ne,fe,ke,Z,Ge,Z,Y)}else fs(ne,fe,ke,Te,we,Z,Y)}Y=j,Z=A}Z!=A&&r(j,A,Y,Z,H)}function xi(m,b){var A=m.V,j=m.Ba+m.c*m.C,U=b-m.C;if(e(b<=m.l.o),e(16>=U),0<U){var H=m.l,G=m.Ta,Y=m.Ua,Z=H.width;if(br(m,U,A,j),U=Y=[Y],e((A=m.C)<(j=b)),e(H.v<H.va),j>H.o&&(j=H.o),A<H.j){var ne=H.j-A;A=H.j,U[0]+=ne*Z}if(A>=j?A=0:(U[0]+=4*H.v,H.ka=A-H.j,H.U=H.va-H.v,H.T=j-A,A=1),A){if(Y=Y[0],11>(A=m.ca).S){var fe=A.f.RGBA,ke=(j=A.S,U=H.U,H=H.T,ne=fe.eb,fe.A),Te=H;for(fe=fe.fb+m.Ma*fe.A;0<Te--;){var we=G,Ge=Y,Me=U,pe=ne,be=fe;switch(j){case ua:va(we,Ge,Me,pe,be);break;case Gl:ta(we,Ge,Me,pe,be);break;case $c:ta(we,Ge,Me,pe,be),es(pe,be,0,Me,1,0);break;case ii:Ps(we,Ge,Me,pe,be);break;case Yc:yn(we,Ge,Me,pe,be,1);break;case vo:yn(we,Ge,Me,pe,be,1),es(pe,be,0,Me,1,0);break;case ol:yn(we,Ge,Me,pe,be,0);break;case Ri:yn(we,Ge,Me,pe,be,0),es(pe,be,1,Me,1,0);break;case Ci:ho(we,Ge,Me,pe,be);break;case Kl:ho(we,Ge,Me,pe,be),en(pe,be,Me,1,0);break;case Pu:Oa(we,Ge,Me,pe,be);break;default:e(0)}Y+=Z,fe+=ke}m.Ma+=H}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=A.height)}}m.C=b,e(m.C<=m.i)}function xa(m){var b;if(0<m.ua)return 0;for(b=0;b<m.Wb;++b){var A=m.Ya[b].G,j=m.Ya[b].H;if(0<A[1][j[1]+0].g||0<A[2][j[2]+0].g||0<A[3][j[3]+0].g)return 0}return 1}function Ur(m,b,A,j,U,H){if(m.Z!=0){var G=m.qd,Y=m.rd;for(e(li[m.Z]!=null);b<A;++b)li[m.Z](G,Y,j,U,j,U,H),G=j,Y=U,U+=H;m.qd=G,m.rd=Y}}function Tr(m,b){var A=m.l.ma,j=A.Z==0||A.Z==1?m.l.j:m.C;if(j=m.C<j?j:m.C,e(b<=m.l.o),b>j){var U=m.l.width,H=A.ca,G=A.tb+U*j,Y=m.V,Z=m.Ba+m.c*j,ne=m.gc;e(m.ab==1),e(ne[0].hc==3),co(ne[0],j,b,Y,Z,H,G),Ur(A,j,b,H,G,U)}m.C=m.Ma=b}function vr(m,b,A,j,U,H,G){var Y=m.$/j,Z=m.$%j,ne=m.m,fe=m.s,ke=A+m.$,Te=ke;U=A+j*U;var we=A+j*H,Ge=280+fe.ua,Me=m.Pb?Y:16777216,pe=0<fe.ua?fe.Wa:null,be=fe.wc,Ue=ke<we?sr(fe,Z,Y):null;e(m.C<H),e(we<=U);var Ke=!1;e:for(;;){for(;Ke||ke<we;){var qe=0;if(Y>=Me){var ht=ke-A;e((Me=m).Pb),Me.wd=Me.m,Me.xd=ht,0<Me.s.ua&&Ve(Me.s.Wa,Me.s.vb),Me=Y+_f}if(Z&be||(Ue=sr(fe,Z,Y)),e(Ue!=null),Ue.Qb&&(b[ke]=Ue.qb,Ke=!0),!Ke)if(ue(ne),Ue.jc){qe=ne,ht=b;var it=ke,St=Ue.pd[K(qe)&Cr-1];e(Ue.jc),256>St.g?(ie(qe,qe.u+St.g),ht[it]=St.value,qe=0):(ie(qe,qe.u+St.g-256),e(256<=St.value),qe=St.value),qe==0&&(Ke=!0)}else qe=Gn(Ue.G[0],Ue.H[0],ne);if(ne.h)break;if(Ke||256>qe){if(!Ke)if(Ue.nd)b[ke]=(Ue.qb|qe<<8)>>>0;else{if(ue(ne),Ke=Gn(Ue.G[1],Ue.H[1],ne),ue(ne),ht=Gn(Ue.G[2],Ue.H[2],ne),it=Gn(Ue.G[3],Ue.H[3],ne),ne.h)break;b[ke]=(it<<24|Ke<<16|qe<<8|ht)>>>0}if(Ke=!1,++ke,++Z>=j&&(Z=0,++Y,G!=null&&Y<=H&&!(Y%16)&&G(m,Y),pe!=null))for(;Te<ke;)qe=b[Te++],pe.X[(506832829*qe&4294967295)>>>pe.Mb]=qe}else if(280>qe){if(qe=Cn(qe-256,ne),ht=Gn(Ue.G[4],Ue.H[4],ne),ue(ne),ht=Rn(j,ht=Cn(ht,ne)),ne.h)break;if(ke-A<ht||U-ke<qe)break e;for(it=0;it<qe;++it)b[ke+it]=b[ke+it-ht];for(ke+=qe,Z+=qe;Z>=j;)Z-=j,++Y,G!=null&&Y<=H&&!(Y%16)&&G(m,Y);if(e(ke<=U),Z&be&&(Ue=sr(fe,Z,Y)),pe!=null)for(;Te<ke;)qe=b[Te++],pe.X[(506832829*qe&4294967295)>>>pe.Mb]=qe}else{if(!(qe<Ge))break e;for(Ke=qe-280,e(pe!=null);Te<ke;)qe=b[Te++],pe.X[(506832829*qe&4294967295)>>>pe.Mb]=qe;qe=ke,e(!(Ke>>>(ht=pe).Xa)),b[qe]=ht.X[Ke],Ke=!0}Ke||e(ne.h==te(ne))}if(m.Pb&&ne.h&&ke<U)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&Ve(m.s.vb,m.s.Wa);else{if(ne.h)break e;G!=null&&G(m,Y>H?H:Y),m.a=0,m.$=ke-A}return 1}return m.a=3,0}function jr(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var b=m.Wa;b!=null&&(b.X=null),m.vb=null,e(m!=null)}function Un(){var m=new Ul;return m==null?null:(m.a=0,m.xb=Yl,Br("Predictor","VP8LPredictors"),Br("Predictor","VP8LPredictors_C"),Br("PredictorAdd","VP8LPredictorsAdd"),Br("PredictorAdd","VP8LPredictorsAdd_C"),Iu=xt,uo=Fe,va=He,ta=Nt,ho=mt,Oa=$t,Ps=Ut,k.VP8LMapColor32b=qr,k.VP8LMapColor8b=Kc,m)}function Nn(m,b,A,j,U){var H=1,G=[m],Y=[b],Z=j.m,ne=j.s,fe=null,ke=0;e:for(;;){if(A)for(;H&&J(Z,1);){var Te=G,we=Y,Ge=j,Me=1,pe=Ge.m,be=Ge.gc[Ge.ab],Ue=J(pe,2);if(Ge.Oc&1<<Ue)H=0;else{switch(Ge.Oc|=1<<Ue,be.hc=Ue,be.Ea=Te[0],be.nc=we[0],be.K=[null],++Ge.ab,e(4>=Ge.ab),Ue){case 0:case 1:be.b=J(pe,3)+2,Me=Nn(gt(be.Ea,be.b),gt(be.nc,be.b),0,Ge,be.K),be.K=be.K[0];break;case 3:var Ke,qe=J(pe,8)+1,ht=16<qe?0:4<qe?1:2<qe?2:3;if(Te[0]=gt(be.Ea,ht),be.b=ht,Ke=Me=Nn(qe,1,0,Ge,be.K)){var it,St=qe,ct=be,pn=1<<(8>>ct.b),Sn=l(pn);if(Sn==null)Ke=0;else{var Jt=ct.K[0],Xt=ct.w;for(Sn[0]=ct.K[0][0],it=1;it<1*St;++it)Sn[it]=et(Jt[Xt+it],Sn[it-1]);for(;it<4*pn;++it)Sn[it]=0;ct.K[0]=null,ct.K[0]=Sn,Ke=1}}Me=Ke;break;case 2:break;default:e(0)}H=Me}}if(G=G[0],Y=Y[0],H&&J(Z,1)&&!(H=1<=(ke=J(Z,4))&&11>=ke)){j.a=3;break e}var Ln;if(Ln=H)t:{var En,Ht,On,kt=j,Ot=G,mn=Y,gn=ke,Gr=A,Pr=kt.m,fr=kt.s,mr=[null],_r=1,xs=0,Tn=cl[gn];n:for(;;){if(Gr&&J(Pr,1)){var Ar=J(Pr,3)+2,Ms=gt(Ot,Ar),_o=gt(mn,Ar),hl=Ms*_o;if(!Nn(Ms,_o,0,kt,mr))break n;for(mr=mr[0],fr.xc=Ar,En=0;En<hl;++En){var Ao=mr[En]>>8&65535;mr[En]=Ao,Ao>=_r&&(_r=Ao+1)}}if(Pr.h)break n;for(Ht=0;5>Ht;++Ht){var Qn=ts[Ht];!Ht&&0<gn&&(Qn+=1<<gn),xs<Qn&&(xs=Qn)}var eu=u(_r*Tn,P),Bu=_r,wa=u(Bu,ce);if(wa==null)var tr=null;else e(65536>=Bu),tr=wa;var fl=l(xs);if(tr==null||fl==null||eu==null){kt.a=1;break n}var So=eu;for(En=On=0;En<_r;++En){var Fa=tr[En],Eo=Fa.G,Va=Fa.H,tu=0,Xl=1,Uu=0;for(Ht=0;5>Ht;++Ht){Qn=ts[Ht],Eo[Ht]=So,Va[Ht]=On,!Ht&&0<gn&&(Qn+=1<<gn);a:{var nu,zu=Qn,ru=kt,Ql=fl,kf=So,Cf=On,au=0,Mi=ru.m,Y0=J(Mi,1);if(i(Ql,0,0,zu),Y0){var Rf=J(Mi,1)+1,If=J(Mi,1),$d=J(Mi,If==0?1:8);Ql[$d]=1,Rf==2&&(Ql[$d=J(Mi,8)]=1);var Jl=1}else{var Xd=l(19),Qd=J(Mi,4)+4;if(19<Qd){ru.a=3;var su=0;break a}for(nu=0;nu<Qd;++nu)Xd[Ii[nu]]=J(Mi,3);var qu=void 0,Zl=void 0,Lf=ru,Pf=Xd,Fi=zu,iu=Ql,Hu=0,Fs=Lf.m,ec=8,Jd=u(128,P);r:for(;R(Jd,0,7,Pf,19);){if(J(Fs,1)){var Df=2+2*J(Fs,3);if((qu=2+J(Fs,Df))>Fi)break r}else qu=Fi;for(Zl=0;Zl<Fi&&qu--;){ue(Fs);var Zd=Jd[0+(127&K(Fs))];ie(Fs,Fs.u+Zd.g);var ml=Zd.value;if(16>ml)iu[Zl++]=ml,ml!=0&&(ec=ml);else{var Of=ml==16,eh=ml-16,th=gs[eh],nh=J(Fs,Du[eh])+th;if(Zl+nh>Fi)break r;for(var Mf=Of?ec:0;0<nh--;)iu[Zl++]=Mf}}Hu=1;break r}Hu||(Lf.a=3),Jl=Hu}(Jl=Jl&&!Mi.h)&&(au=R(kf,Cf,8,Ql,zu)),Jl&&au!=0?su=au:(ru.a=3,su=0)}if(su==0)break n;if(Xl&&ll[Ht]==1&&(Xl=So[On].g==0),tu+=So[On].g,On+=su,3>=Ht){var pl,Wu=fl[0];for(pl=1;pl<Qn;++pl)fl[pl]>Wu&&(Wu=fl[pl]);Uu+=Wu}}if(Fa.nd=Xl,Fa.Qb=0,Xl&&(Fa.qb=(Eo[3][Va[3]+0].value<<24|Eo[1][Va[1]+0].value<<16|Eo[2][Va[2]+0].value)>>>0,tu==0&&256>Eo[0][Va[0]+0].value&&(Fa.Qb=1,Fa.qb+=Eo[0][Va[0]+0].value<<8)),Fa.jc=!Fa.Qb&&6>Uu,Fa.jc){var ou,Vi=Fa;for(ou=0;ou<Cr;++ou){var di=ou,Bi=Vi.pd[di],lu=Vi.G[0][Vi.H[0]+di];256<=lu.value?(Bi.g=lu.g+256,Bi.value=lu.value):(Bi.g=0,Bi.value=0,di>>=er(lu,8,Bi),di>>=er(Vi.G[1][Vi.H[1]+di],16,Bi),di>>=er(Vi.G[2][Vi.H[2]+di],0,Bi),er(Vi.G[3][Vi.H[3]+di],24,Bi))}}}fr.vc=mr,fr.Wb=_r,fr.Ya=tr,fr.yc=eu,Ln=1;break t}Ln=0}if(!(H=Ln)){j.a=3;break e}if(0<ke){if(ne.ua=1<<ke,!_t(ne.Wa,ke)){j.a=1,H=0;break e}}else ne.ua=0;var cu=j,rh=G,Ff=Y,ah=cu.s,sh=ah.xc;if(cu.c=rh,cu.i=Ff,ah.md=gt(rh,sh),ah.wc=sh==0?-1:(1<<sh)-1,A){j.xb=Sf;break e}if((fe=l(G*Y))==null){j.a=1,H=0;break e}H=(H=vr(j,fe,0,G,Y,Y,null))&&!Z.h;break e}return H?(U!=null?U[0]=fe:(e(fe==null),e(A)),j.$=0,A||jr(ne)):jr(ne),H}function _s(m,b){var A=m.c*m.i,j=A+b+16*b;return e(m.c<=b),m.V=l(j),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+A+b,1)}function As(m,b){var A=m.C,j=b-A,U=m.V,H=m.Ba+m.c*A;for(e(b<=m.l.o);0<j;){var G=16<j?16:j,Y=m.l.ma,Z=m.l.width,ne=Z*G,fe=Y.ca,ke=Y.tb+Z*A,Te=m.Ta,we=m.Ua;br(m,G,U,H),qn(Te,we,fe,ke,ne),Ur(Y,A,A+G,fe,ke,Z),j-=G,U+=G*m.c,A+=G}e(A==b),m.C=m.Ma=b}function sa(){this.ub=this.yd=this.td=this.Rb=0}function ka(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function bi(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Go(){this.Yb=function(){var m=[];return function b(A,j,U){for(var H=U[j],G=0;G<H&&(A.push(U.length>j+1?[]:0),!(U.length<j+1));G++)b(A[G],j+1,U)}(m,0,[3,11]),m}()}function vi(){this.jb=l(3),this.Wc=h([4,8],Go),this.Xc=h([4,17],Go)}function Dl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Qa(){this.ld=this.La=this.dd=this.tc=0}function Ja(){this.Na=this.la=0}function kr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ss(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ol(){this.uc=this.M=this.Nb=0,this.wa=Array(new Qa),this.Y=0,this.ya=Array(new Ss),this.aa=0,this.l=new Es}function as(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Zi(){this.cb=this.a=0,this.sc="",this.m=new Ae,this.Od=new sa,this.Kc=new ka,this.ed=new Dl,this.Qa=new bi,this.Ic=this.$c=this.Aa=0,this.D=new Ol,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,Ae),this.ia=0,this.pb=u(4,kr),this.Pa=new vi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new as),this.Hd=0,this.rb=Array(new Ja),this.sb=0,this.wa=Array(new Qa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ss),this.L=this.aa=0,this.gd=h([4,2],Qa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Es(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ko(){var m=new Zi;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Rr||(Rr=Ml)),m}function zn(m,b,A){return m.a==0&&(m.a=b,m.sc=A,m.cb=0),0}function zr(m,b,A){return 3<=A&&m[b+0]==157&&m[b+1]==1&&m[b+2]==42}function eo(m,b){if(m==null)return 0;if(m.a=0,m.sc="OK",b==null)return zn(m,2,"null VP8Io passed to VP8GetHeaders()");var A=b.data,j=b.w,U=b.ha;if(4>U)return zn(m,7,"Truncated header.");var H=A[j+0]|A[j+1]<<8|A[j+2]<<16,G=m.Od;if(G.Rb=!(1&H),G.td=H>>1&7,G.yd=H>>4&1,G.ub=H>>5,3<G.td)return zn(m,3,"Incorrect keyframe parameters.");if(!G.yd)return zn(m,4,"Frame not displayable.");j+=3,U-=3;var Y=m.Kc;if(G.Rb){if(7>U)return zn(m,7,"cannot parse picture header");if(!zr(A,j,U))return zn(m,3,"Bad code word");Y.c=16383&(A[j+4]<<8|A[j+3]),Y.Td=A[j+4]>>6,Y.i=16383&(A[j+6]<<8|A[j+5]),Y.Ud=A[j+6]>>6,j+=7,U-=7,m.za=Y.c+15>>4,m.Ub=Y.i+15>>4,b.width=Y.c,b.height=Y.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,i((H=m.Pa).jb,0,255,H.jb.length),e((H=m.Qa)!=null),H.Cb=0,H.Bb=0,H.Fb=1,i(H.Zb,0,0,H.Zb.length),i(H.Lb,0,0,H.Lb)}if(G.ub>U)return zn(m,7,"bad partition length");Le(H=m.m,A,j,G.ub),j+=G.ub,U-=G.ub,G.Rb&&(Y.Ld=_e(H),Y.Kd=_e(H)),Y=m.Qa;var Z,ne=m.Pa;if(e(H!=null),e(Y!=null),Y.Cb=_e(H),Y.Cb){if(Y.Bb=_e(H),_e(H)){for(Y.Fb=_e(H),Z=0;4>Z;++Z)Y.Zb[Z]=_e(H)?me(H,7):0;for(Z=0;4>Z;++Z)Y.Lb[Z]=_e(H)?me(H,6):0}if(Y.Bb)for(Z=0;3>Z;++Z)ne.jb[Z]=_e(H)?ae(H,8):255}else Y.Bb=0;if(H.Ka)return zn(m,3,"cannot parse segment header");if((Y=m.ed).zd=_e(H),Y.Tb=ae(H,6),Y.wb=ae(H,3),Y.Pc=_e(H),Y.Pc&&_e(H)){for(ne=0;4>ne;++ne)_e(H)&&(Y.vd[ne]=me(H,6));for(ne=0;4>ne;++ne)_e(H)&&(Y.od[ne]=me(H,6))}if(m.L=Y.Tb==0?0:Y.zd?1:2,H.Ka)return zn(m,3,"cannot parse filter header");var fe=U;if(U=Z=j,j=Z+fe,Y=fe,m.Xb=(1<<ae(m.m,2))-1,fe<3*(ne=m.Xb))A=7;else{for(Z+=3*ne,Y-=3*ne,fe=0;fe<ne;++fe){var ke=A[U+0]|A[U+1]<<8|A[U+2]<<16;ke>Y&&(ke=Y),Le(m.Jc[+fe],A,Z,ke),Z+=ke,Y-=ke,U+=3}Le(m.Jc[+ne],A,Z,Y),A=Z<j?0:5}if(A!=0)return zn(m,A,"cannot parse partitions");for(A=ae(Z=m.m,7),U=_e(Z)?me(Z,4):0,j=_e(Z)?me(Z,4):0,Y=_e(Z)?me(Z,4):0,ne=_e(Z)?me(Z,4):0,Z=_e(Z)?me(Z,4):0,fe=m.Qa,ke=0;4>ke;++ke){if(fe.Cb){var Te=fe.Zb[ke];fe.Fb||(Te+=A)}else{if(0<ke){m.pb[ke]=m.pb[0];continue}Te=A}var we=m.pb[ke];we.Sc[0]=Xc[An(Te+U,127)],we.Sc[1]=Qc[An(Te+0,127)],we.Eb[0]=2*Xc[An(Te+j,127)],we.Eb[1]=101581*Qc[An(Te+Y,127)]>>16,8>we.Eb[1]&&(we.Eb[1]=8),we.Qc[0]=Xc[An(Te+ne,117)],we.Qc[1]=Qc[An(Te+Z,127)],we.lc=Te+Z}if(!G.Rb)return zn(m,4,"Not a key frame.");for(_e(H),G=m.Pa,A=0;4>A;++A){for(U=0;8>U;++U)for(j=0;3>j;++j)for(Y=0;11>Y;++Y)ne=Pe(H,ul[A][U][j][Y])?ae(H,8):oi[A][U][j][Y],G.Wc[A][U].Yb[j][Y]=ne;for(U=0;17>U;++U)G.Xc[A][U]=G.Wc[A][Af[U]]}return m.kc=_e(H),m.kc&&(m.Bd=ae(H,8)),m.cb=1}function Ml(m,b,A,j,U,H,G){var Y=b[U].Yb[A];for(A=0;16>U;++U){if(!Pe(m,Y[A+0]))return U;for(;!Pe(m,Y[A+1]);)if(Y=b[++U].Yb[0],A=0,U==16)return 16;var Z=b[U+1].Yb;if(Pe(m,Y[A+2])){var ne=m,fe=0;if(Pe(ne,(Te=Y)[(ke=A)+3]))if(Pe(ne,Te[ke+6])){for(Y=0,ke=2*(fe=Pe(ne,Te[ke+8]))+(Te=Pe(ne,Te[ke+9+fe])),fe=0,Te=lr[ke];Te[Y];++Y)fe+=fe+Pe(ne,Te[Y]);fe+=3+(8<<ke)}else Pe(ne,Te[ke+7])?(fe=7+2*Pe(ne,165),fe+=Pe(ne,145)):fe=5+Pe(ne,159);else fe=Pe(ne,Te[ke+4])?3+Pe(ne,Te[ke+5]):2;Y=Z[2]}else fe=1,Y=Z[1];Z=G+wn[U],0>(ne=m).b&&Ee(ne);var ke,Te=ne.b,we=(ke=ne.Ca>>1)-(ne.I>>Te)>>31;--ne.b,ne.Ca+=we,ne.Ca|=1,ne.I-=(ke+1&we)<<Te,H[Z]=((fe^we)-we)*j[(0<U)+0]}return 16}function Gs(m){var b=m.rb[m.sb-1];b.la=0,b.Na=0,i(m.zc,0,0,m.zc.length),m.ja=0}function Yo(m,b){if(m==null)return 0;if(b==null)return zn(m,2,"NULL VP8Io parameter in VP8Decode().");if(!m.cb&&!eo(m,b))return 0;if(e(m.cb),b.ac==null||b.ac(b)){b.ob&&(m.L=0);var A=Oi[m.L];if(m.L==2?(m.yb=0,m.zb=0):(m.yb=b.v-A>>4,m.zb=b.j-A>>4,0>m.yb&&(m.yb=0),0>m.zb&&(m.zb=0)),m.Va=b.o+15+A>>4,m.Hb=b.va+15+A>>4,m.Hb>m.za&&(m.Hb=m.za),m.Va>m.Ub&&(m.Va=m.Ub),0<m.L){var j=m.ed;for(A=0;4>A;++A){var U;if(m.Qa.Cb){var H=m.Qa.Lb[A];m.Qa.Fb||(H+=j.Tb)}else H=j.Tb;for(U=0;1>=U;++U){var G=m.gd[A][U],Y=H;if(j.Pc&&(Y+=j.vd[0],U&&(Y+=j.od[0])),0<(Y=0>Y?0:63<Y?63:Y)){var Z=Y;0<j.wb&&(Z=4<j.wb?Z>>2:Z>>1)>9-j.wb&&(Z=9-j.wb),1>Z&&(Z=1),G.dd=Z,G.tc=2*Y+Z,G.ld=40<=Y?2:15<=Y?1:0}else G.tc=0;G.La=U}}}A=0}else zn(m,6,"Frame setup failed"),A=m.a;if(A=A==0){if(A){m.$c=0,0<m.Aa||(m.Ic=Tf);e:{A=m.Ic,j=4*(Z=m.za);var ne=32*Z,fe=Z+1,ke=0<m.L?Z*(0<m.Aa?2:1):0,Te=(m.Aa==2?2:1)*Z;if((G=j+832+(U=3*(16*A+Oi[m.L])/2*ne)+(H=m.Fa!=null&&0<m.Fa.length?m.Kc.c*m.Kc.i:0))!=G)A=0;else{if(G>m.Vb){if(m.Vb=0,m.Ec=l(G),m.Fc=0,m.Ec==null){A=zn(m,1,"no memory during frame initialization.");break e}m.Vb=G}G=m.Ec,Y=m.Fc,m.Ac=G,m.Bc=Y,Y+=j,m.Gd=u(ne,as),m.Hd=0,m.rb=u(fe+1,Ja),m.sb=1,m.wa=ke?u(ke,Qa):null,m.Y=0,m.D.Nb=0,m.D.wa=m.wa,m.D.Y=m.Y,0<m.Aa&&(m.D.Y+=Z),e(!0),m.oc=G,m.pc=Y,Y+=832,m.ya=u(Te,Ss),m.aa=0,m.D.ya=m.ya,m.D.aa=m.aa,m.Aa==2&&(m.D.aa+=Z),m.R=16*Z,m.B=8*Z,Z=(ne=Oi[m.L])*m.R,ne=ne/2*m.B,m.sa=G,m.ta=Y+Z,m.qa=m.sa,m.ra=m.ta+16*A*m.R+ne,m.Ha=m.qa,m.Ia=m.ra+8*A*m.B+ne,m.$c=0,Y+=U,m.mb=H?G:null,m.nb=H?Y:null,e(Y+H<=m.Fc+m.Vb),Gs(m),i(m.Ac,m.Bc,0,j),A=1}}if(A){if(b.ka=0,b.y=m.sa,b.O=m.ta,b.f=m.qa,b.N=m.ra,b.ea=m.Ha,b.Vd=m.Ia,b.fa=m.R,b.Rc=m.B,b.F=null,b.J=0,!ki){for(A=-255;255>=A;++A)hr[255+A]=0>A?-A:A;for(A=-1020;1020>=A;++A)ms[1020+A]=-128>A?-128:127<A?127:A;for(A=-112;112>=A;++A)xo[112+A]=-16>A?-16:15<A?15:A;for(A=-255;510>=A;++A)bo[255+A]=0>A?0:255<A?255:A;ki=1}ai=Ca,Ds=Ys,Os=ss,Nr=_n,Ma=$s,ir=Ks,rl=Zs,si=Is,Hl=ao,fo=Zo,mo=ro,po=Ni,al=_i,Wl=ei,go=Za,ji=la,sl=wr,or=Bl,ya[0]=ia,ya[1]=Fl,ya[2]=ls,ya[3]=Vl,ya[4]=Ra,ya[5]=cs,ya[6]=ba,ya[7]=Ia,ya[8]=Rs,ya[9]=Xs,Pi[0]=is,Pi[1]=Xo,Pi[2]=js,Pi[3]=no,Pi[4]=Dn,Pi[5]=Cs,Pi[6]=os,ns[0]=us,ns[1]=$o,ns[2]=Qo,ns[3]=La,ns[4]=rn,ns[5]=yr,ns[6]=Qs,A=1}else A=0}A&&(A=function(we,Ge){for(we.M=0;we.M<we.Va;++we.M){var Me,pe=we.Jc[we.M&we.Xb],be=we.m,Ue=we;for(Me=0;Me<Ue.za;++Me){var Ke=be,qe=Ue,ht=qe.Ac,it=qe.Bc+4*Me,St=qe.zc,ct=qe.ya[qe.aa+Me];if(qe.Qa.Bb?ct.$b=Pe(Ke,qe.Pa.jb[0])?2+Pe(Ke,qe.Pa.jb[2]):Pe(Ke,qe.Pa.jb[1]):ct.$b=0,qe.kc&&(ct.Ad=Pe(Ke,qe.Bd)),ct.Za=!Pe(Ke,145)+0,ct.Za){var pn=ct.Ob,Sn=0;for(qe=0;4>qe;++qe){var Jt,Xt=St[0+qe];for(Jt=0;4>Jt;++Jt){Xt=Gd[ht[it+Jt]][Xt];for(var Ln=yo[Pe(Ke,Xt[0])];0<Ln;)Ln=yo[2*Ln+Pe(Ke,Xt[Ln])];Xt=-Ln,ht[it+Jt]=Xt}r(pn,Sn,ht,it,4),Sn+=4,St[0+qe]=Xt}}else Xt=Pe(Ke,156)?Pe(Ke,128)?1:3:Pe(Ke,163)?2:0,ct.Ob[0]=Xt,i(ht,it,Xt,4),i(St,0,Xt,4);ct.Dd=Pe(Ke,142)?Pe(Ke,114)?Pe(Ke,183)?1:3:2:0}if(Ue.m.Ka)return zn(we,7,"Premature end-of-partition0 encountered.");for(;we.ja<we.za;++we.ja){if(Ue=pe,Ke=(be=we).rb[be.sb-1],ht=be.rb[be.sb+be.ja],Me=be.ya[be.aa+be.ja],it=be.kc?Me.Ad:0)Ke.la=ht.la=0,Me.Za||(Ke.Na=ht.Na=0),Me.Hc=0,Me.Gc=0,Me.ia=0;else{var En,Ht;if(Ke=ht,ht=Ue,it=be.Pa.Xc,St=be.ya[be.aa+be.ja],ct=be.pb[St.$b],qe=St.ad,pn=0,Sn=be.rb[be.sb-1],Xt=Jt=0,i(qe,pn,0,384),St.Za)var On=0,kt=it[3];else{Ln=l(16);var Ot=Ke.Na+Sn.Na;if(Ot=Rr(ht,it[1],Ot,ct.Eb,0,Ln,0),Ke.Na=Sn.Na=(0<Ot)+0,1<Ot)ai(Ln,0,qe,pn);else{var mn=Ln[0]+3>>3;for(Ln=0;256>Ln;Ln+=16)qe[pn+Ln]=mn}On=1,kt=it[0]}var gn=15&Ke.la,Gr=15&Sn.la;for(Ln=0;4>Ln;++Ln){var Pr=1&Gr;for(mn=Ht=0;4>mn;++mn)gn=gn>>1|(Pr=(Ot=Rr(ht,kt,Ot=Pr+(1&gn),ct.Sc,On,qe,pn))>On)<<7,Ht=Ht<<2|(3<Ot?3:1<Ot?2:qe[pn+0]!=0),pn+=16;gn>>=4,Gr=Gr>>1|Pr<<7,Jt=(Jt<<8|Ht)>>>0}for(kt=gn,On=Gr>>4,En=0;4>En;En+=2){for(Ht=0,gn=Ke.la>>4+En,Gr=Sn.la>>4+En,Ln=0;2>Ln;++Ln){for(Pr=1&Gr,mn=0;2>mn;++mn)Ot=Pr+(1&gn),gn=gn>>1|(Pr=0<(Ot=Rr(ht,it[2],Ot,ct.Qc,0,qe,pn)))<<3,Ht=Ht<<2|(3<Ot?3:1<Ot?2:qe[pn+0]!=0),pn+=16;gn>>=2,Gr=Gr>>1|Pr<<5}Xt|=Ht<<4*En,kt|=gn<<4<<En,On|=(240&Gr)<<En}Ke.la=kt,Sn.la=On,St.Hc=Jt,St.Gc=Xt,St.ia=43690&Xt?0:ct.ia,it=!(Jt|Xt)}if(0<be.L&&(be.wa[be.Y+be.ja]=be.gd[Me.$b][Me.Za],be.wa[be.Y+be.ja].La|=!it),Ue.Ka)return zn(we,7,"Premature end-of-file encountered.")}if(Gs(we),be=Ge,Ue=1,Me=(pe=we).D,Ke=0<pe.L&&pe.M>=pe.zb&&pe.M<=pe.Va,pe.Aa==0)e:{if(Me.M=pe.M,Me.uc=Ke,Pa(pe,Me),Ue=1,Me=(Ht=pe.D).Nb,Ke=(Xt=Oi[pe.L])*pe.R,ht=Xt/2*pe.B,Ln=16*Me*pe.R,mn=8*Me*pe.B,it=pe.sa,St=pe.ta-Ke+Ln,ct=pe.qa,qe=pe.ra-ht+mn,pn=pe.Ha,Sn=pe.Ia-ht+mn,Gr=(gn=Ht.M)==0,Jt=gn>=pe.Va-1,pe.Aa==2&&Pa(pe,Ht),Ht.uc)for(Pr=(Ot=pe).D.M,e(Ot.D.uc),Ht=Ot.yb;Ht<Ot.Hb;++Ht){On=Ht,kt=Pr;var fr=(mr=(Qn=Ot).D).Nb;En=Qn.R;var mr=mr.wa[mr.Y+On],_r=Qn.sa,xs=Qn.ta+16*fr*En+16*On,Tn=mr.dd,Ar=mr.tc;if(Ar!=0)if(e(3<=Ar),Qn.L==1)0<On&&ji(_r,xs,En,Ar+4),mr.La&&or(_r,xs,En,Ar),0<kt&&go(_r,xs,En,Ar+4),mr.La&&sl(_r,xs,En,Ar);else{var Ms=Qn.B,_o=Qn.qa,hl=Qn.ra+8*fr*Ms+8*On,Ao=Qn.Ha,Qn=Qn.Ia+8*fr*Ms+8*On;fr=mr.ld,0<On&&(si(_r,xs,En,Ar+4,Tn,fr),fo(_o,hl,Ao,Qn,Ms,Ar+4,Tn,fr)),mr.La&&(po(_r,xs,En,Ar,Tn,fr),Wl(_o,hl,Ao,Qn,Ms,Ar,Tn,fr)),0<kt&&(rl(_r,xs,En,Ar+4,Tn,fr),Hl(_o,hl,Ao,Qn,Ms,Ar+4,Tn,fr)),mr.La&&(mo(_r,xs,En,Ar,Tn,fr),al(_o,hl,Ao,Qn,Ms,Ar,Tn,fr))}}if(pe.ia&&alert("todo:DitherRow"),be.put!=null){if(Ht=16*gn,gn=16*(gn+1),Gr?(be.y=pe.sa,be.O=pe.ta+Ln,be.f=pe.qa,be.N=pe.ra+mn,be.ea=pe.Ha,be.W=pe.Ia+mn):(Ht-=Xt,be.y=it,be.O=St,be.f=ct,be.N=qe,be.ea=pn,be.W=Sn),Jt||(gn-=Xt),gn>be.o&&(gn=be.o),be.F=null,be.J=null,pe.Fa!=null&&0<pe.Fa.length&&Ht<gn&&(be.J=io(pe,be,Ht,gn-Ht),be.F=pe.mb,be.F==null&&be.F.length==0)){Ue=zn(pe,3,"Could not decode alpha data.");break e}Ht<be.j&&(Xt=be.j-Ht,Ht=be.j,e(!(1&Xt)),be.O+=pe.R*Xt,be.N+=pe.B*(Xt>>1),be.W+=pe.B*(Xt>>1),be.F!=null&&(be.J+=be.width*Xt)),Ht<gn&&(be.O+=be.v,be.N+=be.v>>1,be.W+=be.v>>1,be.F!=null&&(be.J+=be.v),be.ka=Ht-be.j,be.U=be.va-be.v,be.T=gn-Ht,Ue=be.put(be))}Me+1!=pe.Ic||Jt||(r(pe.sa,pe.ta-Ke,it,St+16*pe.R,Ke),r(pe.qa,pe.ra-ht,ct,qe+8*pe.B,ht),r(pe.Ha,pe.Ia-ht,pn,Sn+8*pe.B,ht))}if(!Ue)return zn(we,6,"Output aborted.")}return 1}(m,b)),b.bc!=null&&b.bc(b),A&=1}return A?(m.cb=0,A):0}function Jr(m,b,A,j,U){U=m[b+A+32*j]+(U>>3),m[b+A+32*j]=-256&U?0>U?0:255:U}function to(m,b,A,j,U,H){Jr(m,b,0,A,j+U),Jr(m,b,1,A,j+H),Jr(m,b,2,A,j-H),Jr(m,b,3,A,j-U)}function fn(m){return(20091*m>>16)+m}function Zr(m,b,A,j){var U,H=0,G=l(16);for(U=0;4>U;++U){var Y=m[b+0]+m[b+8],Z=m[b+0]-m[b+8],ne=(35468*m[b+4]>>16)-fn(m[b+12]),fe=fn(m[b+4])+(35468*m[b+12]>>16);G[H+0]=Y+fe,G[H+1]=Z+ne,G[H+2]=Z-ne,G[H+3]=Y-fe,H+=4,b++}for(U=H=0;4>U;++U)Y=(m=G[H+0]+4)+G[H+8],Z=m-G[H+8],ne=(35468*G[H+4]>>16)-fn(G[H+12]),Jr(A,j,0,0,Y+(fe=fn(G[H+4])+(35468*G[H+12]>>16))),Jr(A,j,1,0,Z+ne),Jr(A,j,2,0,Z-ne),Jr(A,j,3,0,Y-fe),H++,j+=32}function Ks(m,b,A,j){var U=m[b+0]+4,H=35468*m[b+4]>>16,G=fn(m[b+4]),Y=35468*m[b+1]>>16;to(A,j,0,U+G,m=fn(m[b+1]),Y),to(A,j,1,U+H,m,Y),to(A,j,2,U-H,m,Y),to(A,j,3,U-G,m,Y)}function Ys(m,b,A,j,U){Zr(m,b,A,j),U&&Zr(m,b+16,A,j+4)}function ss(m,b,A,j){Ds(m,b+0,A,j,1),Ds(m,b+32,A,j+128,1)}function _n(m,b,A,j){var U;for(m=m[b+0]+4,U=0;4>U;++U)for(b=0;4>b;++b)Jr(A,j,b,U,m)}function $s(m,b,A,j){m[b+0]&&Nr(m,b+0,A,j),m[b+16]&&Nr(m,b+16,A,j+4),m[b+32]&&Nr(m,b+32,A,j+128),m[b+48]&&Nr(m,b+48,A,j+128+4)}function Ca(m,b,A,j){var U,H=l(16);for(U=0;4>U;++U){var G=m[b+0+U]+m[b+12+U],Y=m[b+4+U]+m[b+8+U],Z=m[b+4+U]-m[b+8+U],ne=m[b+0+U]-m[b+12+U];H[0+U]=G+Y,H[8+U]=G-Y,H[4+U]=ne+Z,H[12+U]=ne-Z}for(U=0;4>U;++U)G=(m=H[0+4*U]+3)+H[3+4*U],Y=H[1+4*U]+H[2+4*U],Z=H[1+4*U]-H[2+4*U],ne=m-H[3+4*U],A[j+0]=G+Y>>3,A[j+16]=ne+Z>>3,A[j+32]=G-Y>>3,A[j+48]=ne-Z>>3,j+=64}function Ts(m,b,A){var j,U=b-32,H=Hr,G=255-m[U-1];for(j=0;j<A;++j){var Y,Z=H,ne=G+m[b-1];for(Y=0;Y<A;++Y)m[b+Y]=Z[ne+m[U+Y]];b+=32}}function Fl(m,b){Ts(m,b,4)}function $o(m,b){Ts(m,b,8)}function Xo(m,b){Ts(m,b,16)}function js(m,b){var A;for(A=0;16>A;++A)r(m,b+32*A,m,b-32,16)}function no(m,b){var A;for(A=16;0<A;--A)i(m,b,m[b-1],16),b+=32}function ks(m,b,A){var j;for(j=0;16>j;++j)i(b,A+32*j,m,16)}function is(m,b){var A,j=16;for(A=0;16>A;++A)j+=m[b-1+32*A]+m[b+A-32];ks(j>>5,m,b)}function Dn(m,b){var A,j=8;for(A=0;16>A;++A)j+=m[b-1+32*A];ks(j>>4,m,b)}function Cs(m,b){var A,j=8;for(A=0;16>A;++A)j+=m[b+A-32];ks(j>>4,m,b)}function os(m,b){ks(128,m,b)}function It(m,b,A){return m+2*b+A+2>>2}function ls(m,b){var A,j=b-32;for(j=new Uint8Array([It(m[j-1],m[j+0],m[j+1]),It(m[j+0],m[j+1],m[j+2]),It(m[j+1],m[j+2],m[j+3]),It(m[j+2],m[j+3],m[j+4])]),A=0;4>A;++A)r(m,b+32*A,j,0,j.length)}function Vl(m,b){var A=m[b-1],j=m[b-1+32],U=m[b-1+64],H=m[b-1+96];tt(m,b+0,16843009*It(m[b-1-32],A,j)),tt(m,b+32,16843009*It(A,j,U)),tt(m,b+64,16843009*It(j,U,H)),tt(m,b+96,16843009*It(U,H,H))}function ia(m,b){var A,j=4;for(A=0;4>A;++A)j+=m[b+A-32]+m[b-1+32*A];for(j>>=3,A=0;4>A;++A)i(m,b+32*A,j,4)}function Ra(m,b){var A=m[b-1+0],j=m[b-1+32],U=m[b-1+64],H=m[b-1-32],G=m[b+0-32],Y=m[b+1-32],Z=m[b+2-32],ne=m[b+3-32];m[b+0+96]=It(j,U,m[b-1+96]),m[b+1+96]=m[b+0+64]=It(A,j,U),m[b+2+96]=m[b+1+64]=m[b+0+32]=It(H,A,j),m[b+3+96]=m[b+2+64]=m[b+1+32]=m[b+0+0]=It(G,H,A),m[b+3+64]=m[b+2+32]=m[b+1+0]=It(Y,G,H),m[b+3+32]=m[b+2+0]=It(Z,Y,G),m[b+3+0]=It(ne,Z,Y)}function ba(m,b){var A=m[b+1-32],j=m[b+2-32],U=m[b+3-32],H=m[b+4-32],G=m[b+5-32],Y=m[b+6-32],Z=m[b+7-32];m[b+0+0]=It(m[b+0-32],A,j),m[b+1+0]=m[b+0+32]=It(A,j,U),m[b+2+0]=m[b+1+32]=m[b+0+64]=It(j,U,H),m[b+3+0]=m[b+2+32]=m[b+1+64]=m[b+0+96]=It(U,H,G),m[b+3+32]=m[b+2+64]=m[b+1+96]=It(H,G,Y),m[b+3+64]=m[b+2+96]=It(G,Y,Z),m[b+3+96]=It(Y,Z,Z)}function cs(m,b){var A=m[b-1+0],j=m[b-1+32],U=m[b-1+64],H=m[b-1-32],G=m[b+0-32],Y=m[b+1-32],Z=m[b+2-32],ne=m[b+3-32];m[b+0+0]=m[b+1+64]=H+G+1>>1,m[b+1+0]=m[b+2+64]=G+Y+1>>1,m[b+2+0]=m[b+3+64]=Y+Z+1>>1,m[b+3+0]=Z+ne+1>>1,m[b+0+96]=It(U,j,A),m[b+0+64]=It(j,A,H),m[b+0+32]=m[b+1+96]=It(A,H,G),m[b+1+32]=m[b+2+96]=It(H,G,Y),m[b+2+32]=m[b+3+96]=It(G,Y,Z),m[b+3+32]=It(Y,Z,ne)}function Ia(m,b){var A=m[b+0-32],j=m[b+1-32],U=m[b+2-32],H=m[b+3-32],G=m[b+4-32],Y=m[b+5-32],Z=m[b+6-32],ne=m[b+7-32];m[b+0+0]=A+j+1>>1,m[b+1+0]=m[b+0+64]=j+U+1>>1,m[b+2+0]=m[b+1+64]=U+H+1>>1,m[b+3+0]=m[b+2+64]=H+G+1>>1,m[b+0+32]=It(A,j,U),m[b+1+32]=m[b+0+96]=It(j,U,H),m[b+2+32]=m[b+1+96]=It(U,H,G),m[b+3+32]=m[b+2+96]=It(H,G,Y),m[b+3+64]=It(G,Y,Z),m[b+3+96]=It(Y,Z,ne)}function Xs(m,b){var A=m[b-1+0],j=m[b-1+32],U=m[b-1+64],H=m[b-1+96];m[b+0+0]=A+j+1>>1,m[b+2+0]=m[b+0+32]=j+U+1>>1,m[b+2+32]=m[b+0+64]=U+H+1>>1,m[b+1+0]=It(A,j,U),m[b+3+0]=m[b+1+32]=It(j,U,H),m[b+3+32]=m[b+1+64]=It(U,H,H),m[b+3+64]=m[b+2+64]=m[b+0+96]=m[b+1+96]=m[b+2+96]=m[b+3+96]=H}function Rs(m,b){var A=m[b-1+0],j=m[b-1+32],U=m[b-1+64],H=m[b-1+96],G=m[b-1-32],Y=m[b+0-32],Z=m[b+1-32],ne=m[b+2-32];m[b+0+0]=m[b+2+32]=A+G+1>>1,m[b+0+32]=m[b+2+64]=j+A+1>>1,m[b+0+64]=m[b+2+96]=U+j+1>>1,m[b+0+96]=H+U+1>>1,m[b+3+0]=It(Y,Z,ne),m[b+2+0]=It(G,Y,Z),m[b+1+0]=m[b+3+32]=It(A,G,Y),m[b+1+32]=m[b+3+64]=It(j,A,G),m[b+1+64]=m[b+3+96]=It(U,j,A),m[b+1+96]=It(H,U,j)}function Qo(m,b){var A;for(A=0;8>A;++A)r(m,b+32*A,m,b-32,8)}function La(m,b){var A;for(A=0;8>A;++A)i(m,b,m[b-1],8),b+=32}function oa(m,b,A){var j;for(j=0;8>j;++j)i(b,A+32*j,m,8)}function us(m,b){var A,j=8;for(A=0;8>A;++A)j+=m[b+A-32]+m[b-1+32*A];oa(j>>4,m,b)}function yr(m,b){var A,j=4;for(A=0;8>A;++A)j+=m[b+A-32];oa(j>>3,m,b)}function rn(m,b){var A,j=4;for(A=0;8>A;++A)j+=m[b-1+32*A];oa(j>>3,m,b)}function Qs(m,b){oa(128,m,b)}function ds(m,b,A){var j=m[b-A],U=m[b+0],H=3*(U-j)+Lu[1020+m[b-2*A]-m[b+A]],G=il[112+(H+4>>3)];m[b-A]=Hr[255+j+il[112+(H+3>>3)]],m[b+0]=Hr[255+U-G]}function Jo(m,b,A,j){var U=m[b+0],H=m[b+A];return ps[255+m[b-2*A]-m[b-A]]>j||ps[255+H-U]>j}function yi(m,b,A,j){return 4*ps[255+m[b-A]-m[b+0]]+ps[255+m[b-2*A]-m[b+A]]<=j}function wi(m,b,A,j,U){var H=m[b-3*A],G=m[b-2*A],Y=m[b-A],Z=m[b+0],ne=m[b+A],fe=m[b+2*A],ke=m[b+3*A];return 4*ps[255+Y-Z]+ps[255+G-ne]>j?0:ps[255+m[b-4*A]-H]<=U&&ps[255+H-G]<=U&&ps[255+G-Y]<=U&&ps[255+ke-fe]<=U&&ps[255+fe-ne]<=U&&ps[255+ne-Z]<=U}function Za(m,b,A,j){var U=2*j+1;for(j=0;16>j;++j)yi(m,b+j,A,U)&&ds(m,b+j,A)}function la(m,b,A,j){var U=2*j+1;for(j=0;16>j;++j)yi(m,b+j*A,1,U)&&ds(m,b+j*A,1)}function wr(m,b,A,j){var U;for(U=3;0<U;--U)Za(m,b+=4*A,A,j)}function Bl(m,b,A,j){var U;for(U=3;0<U;--U)la(m,b+=4,A,j)}function Js(m,b,A,j,U,H,G,Y){for(H=2*H+1;0<U--;){if(wi(m,b,A,H,G))if(Jo(m,b,A,Y))ds(m,b,A);else{var Z=m,ne=b,fe=A,ke=Z[ne-2*fe],Te=Z[ne-fe],we=Z[ne+0],Ge=Z[ne+fe],Me=Z[ne+2*fe],pe=27*(Ue=Lu[1020+3*(we-Te)+Lu[1020+ke-Ge]])+63>>7,be=18*Ue+63>>7,Ue=9*Ue+63>>7;Z[ne-3*fe]=Hr[255+Z[ne-3*fe]+Ue],Z[ne-2*fe]=Hr[255+ke+be],Z[ne-fe]=Hr[255+Te+pe],Z[ne+0]=Hr[255+we-pe],Z[ne+fe]=Hr[255+Ge-be],Z[ne+2*fe]=Hr[255+Me-Ue]}b+=j}}function ea(m,b,A,j,U,H,G,Y){for(H=2*H+1;0<U--;){if(wi(m,b,A,H,G))if(Jo(m,b,A,Y))ds(m,b,A);else{var Z=m,ne=b,fe=A,ke=Z[ne-fe],Te=Z[ne+0],we=Z[ne+fe],Ge=il[112+((Me=3*(Te-ke))+4>>3)],Me=il[112+(Me+3>>3)],pe=Ge+1>>1;Z[ne-2*fe]=Hr[255+Z[ne-2*fe]+pe],Z[ne-fe]=Hr[255+ke+Me],Z[ne+0]=Hr[255+Te-Ge],Z[ne+fe]=Hr[255+we-pe]}b+=j}}function Zs(m,b,A,j,U,H){Js(m,b,A,1,16,j,U,H)}function Is(m,b,A,j,U,H){Js(m,b,1,A,16,j,U,H)}function ro(m,b,A,j,U,H){var G;for(G=3;0<G;--G)ea(m,b+=4*A,A,1,16,j,U,H)}function Ni(m,b,A,j,U,H){var G;for(G=3;0<G;--G)ea(m,b+=4,1,A,16,j,U,H)}function ao(m,b,A,j,U,H,G,Y){Js(m,b,U,1,8,H,G,Y),Js(A,j,U,1,8,H,G,Y)}function Zo(m,b,A,j,U,H,G,Y){Js(m,b,1,U,8,H,G,Y),Js(A,j,1,U,8,H,G,Y)}function _i(m,b,A,j,U,H,G,Y){ea(m,b+4*U,U,1,8,H,G,Y),ea(A,j+4*U,U,1,8,H,G,Y)}function ei(m,b,A,j,U,H,G,Y){ea(m,b+4,1,U,8,H,G,Y),ea(A,j+4,1,U,8,H,G,Y)}function Ai(){this.ba=new ur,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Bn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function so(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Si(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ti(){this.ua=0,this.Wa=new oe,this.vb=new oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ce,this.yc=new P}function Ul(){this.xb=this.a=0,this.l=new Es,this.ca=new ur,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ti,this.ab=0,this.gc=u(4,Si),this.Oc=0}function Ls(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Es,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ni(m,b,A,j,U,H,G){for(m=m==null?0:m[b+0],b=0;b<G;++b)U[H+b]=m+A[j+b]&255,m=U[H+b]}function Ei(m,b,A,j,U,H,G){var Y;if(m==null)ni(null,null,A,j,U,H,G);else for(Y=0;Y<G;++Y)U[H+Y]=m[b+Y]+A[j+Y]&255}function ca(m,b,A,j,U,H,G){if(m==null)ni(null,null,A,j,U,H,G);else{var Y,Z=m[b+0],ne=Z,fe=Z;for(Y=0;Y<G;++Y)ne=fe+(Z=m[b+Y])-ne,fe=A[j+Y]+(-256&ne?0>ne?0:255:ne)&255,ne=Z,U[H+Y]=fe}}function io(m,b,A,j){var U=b.width,H=b.o;if(e(m!=null&&b!=null),0>A||0>=j||A+j>H)return null;if(!m.Cc){if(m.ga==null){var G;if(m.ga=new Ls,(G=m.ga==null)||(G=b.width*b.o,e(m.Gb.length==0),m.Gb=l(G),m.Uc=0,m.Gb==null?G=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,G=1),G=!G),!G){G=m.ga;var Y=m.Fa,Z=m.P,ne=m.qc,fe=m.mb,ke=m.nb,Te=Z+1,we=ne-1,Ge=G.l;if(e(Y!=null&&fe!=null&&b!=null),li[0]=null,li[1]=ni,li[2]=Ei,li[3]=ca,G.ca=fe,G.tb=ke,G.c=b.width,G.i=b.height,e(0<G.c&&0<G.i),1>=ne)b=0;else if(G.$a=Y[Z+0]>>0&3,G.Z=Y[Z+0]>>2&3,G.Lc=Y[Z+0]>>4&3,Z=Y[Z+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||Z)b=0;else if(Ge.put=Qr,Ge.ac=ar,Ge.bc=Xa,Ge.ma=G,Ge.width=b.width,Ge.height=b.height,Ge.Da=b.Da,Ge.v=b.v,Ge.va=b.va,Ge.j=b.j,Ge.o=b.o,G.$a)e:{e(G.$a==1),b=Un();t:for(;;){if(b==null){b=0;break e}if(e(G!=null),G.mc=b,b.c=G.c,b.i=G.i,b.l=G.l,b.l.ma=G,b.l.width=G.c,b.l.height=G.i,b.a=0,he(b.m,Y,Te,we),!Nn(G.c,G.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&xa(b.s)?(G.ic=1,Y=b.c*b.i,b.Ta=null,b.Ua=0,b.V=l(Y),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(G.ic=0,b=_s(b,G.c)),!b))break t;b=1;break e}G.mc=null,b=0}else b=we>=G.c*G.i;G=!b}if(G)return null;m.ga.Lc!=1?m.Ga=0:j=H-A}e(m.ga!=null),e(A+j<=H);e:{if(b=(Y=m.ga).c,H=Y.l.o,Y.$a==0){if(Te=m.rc,we=m.Vc,Ge=m.Fa,Z=m.P+1+A*b,ne=m.mb,fe=m.nb+A*b,e(Z<=m.P+m.qc),Y.Z!=0)for(e(li[Y.Z]!=null),G=0;G<j;++G)li[Y.Z](Te,we,Ge,Z,ne,fe,b),Te=ne,we=fe,fe+=b,Z+=b;else for(G=0;G<j;++G)r(ne,fe,Ge,Z,b),Te=ne,we=fe,fe+=b,Z+=b;m.rc=Te,m.Vc=we}else{if(e(Y.mc!=null),b=A+j,e((G=Y.mc)!=null),e(b<=G.i),G.C>=b)b=1;else if(Y.ic||ye(),Y.ic){Y=G.V,Te=G.Ba,we=G.c;var Me=G.i,pe=(Ge=1,Z=G.$/we,ne=G.$%we,fe=G.m,ke=G.s,G.$),be=we*Me,Ue=we*b,Ke=ke.wc,qe=pe<Ue?sr(ke,ne,Z):null;e(pe<=be),e(b<=Me),e(xa(ke));t:for(;;){for(;!fe.h&&pe<Ue;){if(ne&Ke||(qe=sr(ke,ne,Z)),e(qe!=null),ue(fe),256>(Me=Gn(qe.G[0],qe.H[0],fe)))Y[Te+pe]=Me,++pe,++ne>=we&&(ne=0,++Z<=b&&!(Z%16)&&Tr(G,Z));else{if(!(280>Me)){Ge=0;break t}Me=Cn(Me-256,fe);var ht,it=Gn(qe.G[4],qe.H[4],fe);if(ue(fe),!(pe>=(it=Rn(we,it=Cn(it,fe)))&&be-pe>=Me)){Ge=0;break t}for(ht=0;ht<Me;++ht)Y[Te+pe+ht]=Y[Te+pe+ht-it];for(pe+=Me,ne+=Me;ne>=we;)ne-=we,++Z<=b&&!(Z%16)&&Tr(G,Z);pe<Ue&&ne&Ke&&(qe=sr(ke,ne,Z))}e(fe.h==te(fe))}Tr(G,Z>b?b:Z);break t}!Ge||fe.h&&pe<be?(Ge=0,G.a=fe.h?5:3):G.$=pe,b=Ge}else b=vr(G,G.V,G.Ba,G.c,G.i,b,As);if(!b){j=0;break e}}A+j>=H&&(m.Cc=1),j=1}if(!j)return null;if(m.Cc&&((j=m.ga)!=null&&(j.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+A*U}function w(m,b,A,j,U,H){for(;0<U--;){var G,Y=m,Z=b+(A?1:0),ne=m,fe=b+(A?0:3);for(G=0;G<j;++G){var ke=ne[fe+4*G];ke!=255&&(ke*=32897,Y[Z+4*G+0]=Y[Z+4*G+0]*ke>>23,Y[Z+4*G+1]=Y[Z+4*G+1]*ke>>23,Y[Z+4*G+2]=Y[Z+4*G+2]*ke>>23)}b+=H}}function z(m,b,A,j,U){for(;0<j--;){var H;for(H=0;H<A;++H){var G=m[b+2*H+0],Y=15&(ne=m[b+2*H+1]),Z=4369*Y,ne=(240&ne|ne>>4)*Z>>16;m[b+2*H+0]=(240&G|G>>4)*Z>>16&240|(15&G|G<<4)*Z>>16>>4&15,m[b+2*H+1]=240&ne|Y}b+=U}}function re(m,b,A,j,U,H,G,Y){var Z,ne,fe=255;for(ne=0;ne<U;++ne){for(Z=0;Z<j;++Z){var ke=m[b+Z];H[G+4*Z]=ke,fe&=ke}b+=A,G+=Y}return fe!=255}function de(m,b,A,j,U){var H;for(H=0;H<U;++H)A[j+H]=m[b+H]>>8}function ye(){es=w,en=z,tn=re,qn=de}function Be(m,b,A){k[m]=function(j,U,H,G,Y,Z,ne,fe,ke,Te,we,Ge,Me,pe,be,Ue,Ke){var qe,ht=Ke-1>>1,it=Y[Z+0]|ne[fe+0]<<16,St=ke[Te+0]|we[Ge+0]<<16;e(j!=null);var ct=3*it+St+131074>>2;for(b(j[U+0],255&ct,ct>>16,Me,pe),H!=null&&(ct=3*St+it+131074>>2,b(H[G+0],255&ct,ct>>16,be,Ue)),qe=1;qe<=ht;++qe){var pn=Y[Z+qe]|ne[fe+qe]<<16,Sn=ke[Te+qe]|we[Ge+qe]<<16,Jt=it+pn+St+Sn+524296,Xt=Jt+2*(pn+St)>>3;ct=Xt+it>>1,it=(Jt=Jt+2*(it+Sn)>>3)+pn>>1,b(j[U+2*qe-1],255&ct,ct>>16,Me,pe+(2*qe-1)*A),b(j[U+2*qe-0],255&it,it>>16,Me,pe+(2*qe-0)*A),H!=null&&(ct=Jt+St>>1,it=Xt+Sn>>1,b(H[G+2*qe-1],255&ct,ct>>16,be,Ue+(2*qe-1)*A),b(H[G+2*qe+0],255&it,it>>16,be,Ue+(2*qe+0)*A)),it=pn,St=Sn}1&Ke||(ct=3*it+St+131074>>2,b(j[U+Ke-1],255&ct,ct>>16,Me,pe+(Ke-1)*A),H!=null&&(ct=3*St+it+131074>>2,b(H[G+Ke-1],255&ct,ct>>16,be,Ue+(Ke-1)*A)))}}function Qe(){Wr[ua]=Di,Wr[Gl]=ci,Wr[ii]=wo,Wr[Yc]=Ou,Wr[ol]=Mu,Wr[Ci]=$l,Wr[Pu]=Fu,Wr[$c]=ci,Wr[vo]=Ou,Wr[Ri]=Mu,Wr[Kl]=$l}function lt(m){return m&-16384?0>m?0:255:m>>W0}function p(m,b){return lt((19077*m>>8)+(26149*b>>8)-14234)}function E(m,b,A){return lt((19077*m>>8)-(6419*b>>8)-(13320*A>>8)+8708)}function C(m,b){return lt((19077*m>>8)+(33050*b>>8)-17685)}function $(m,b,A,j,U){j[U+0]=p(m,A),j[U+1]=E(m,b,A),j[U+2]=C(m,b)}function ve(m,b,A,j,U){j[U+0]=C(m,b),j[U+1]=E(m,b,A),j[U+2]=p(m,A)}function Re(m,b,A,j,U){var H=E(m,b,A);b=H<<3&224|C(m,b)>>3,j[U+0]=248&p(m,A)|H>>5,j[U+1]=b}function Ze(m,b,A,j,U){var H=240&C(m,b)|15;j[U+0]=240&p(m,A)|E(m,b,A)>>4,j[U+1]=H}function Lt(m,b,A,j,U){j[U+0]=255,$(m,b,A,j,U+1)}function an(m,b,A,j,U){ve(m,b,A,j,U),j[U+3]=255}function qt(m,b,A,j,U){$(m,b,A,j,U),j[U+3]=255}function An(m,b){return 0>m?0:m>b?b:m}function In(m,b,A){k[m]=function(j,U,H,G,Y,Z,ne,fe,ke){for(var Te=fe+(-2&ke)*A;fe!=Te;)b(j[U+0],H[G+0],Y[Z+0],ne,fe),b(j[U+1],H[G+0],Y[Z+0],ne,fe+A),U+=2,++G,++Z,fe+=2*A;1&ke&&b(j[U+0],H[G+0],Y[Z+0],ne,fe)}}function hs(m,b,A){return A==0?m==0?b==0?6:5:b==0?4:0:A}function dr(m,b,A,j,U){switch(m>>>30){case 3:Ds(b,A,j,U,0);break;case 2:ir(b,A,j,U);break;case 1:Nr(b,A,j,U)}}function Pa(m,b){var A,j,U=b.M,H=b.Nb,G=m.oc,Y=m.pc+40,Z=m.oc,ne=m.pc+584,fe=m.oc,ke=m.pc+600;for(A=0;16>A;++A)G[Y+32*A-1]=129;for(A=0;8>A;++A)Z[ne+32*A-1]=129,fe[ke+32*A-1]=129;for(0<U?G[Y-1-32]=Z[ne-1-32]=fe[ke-1-32]=129:(i(G,Y-32-1,127,21),i(Z,ne-32-1,127,9),i(fe,ke-32-1,127,9)),j=0;j<m.za;++j){var Te=b.ya[b.aa+j];if(0<j){for(A=-1;16>A;++A)r(G,Y+32*A-4,G,Y+32*A+12,4);for(A=-1;8>A;++A)r(Z,ne+32*A-4,Z,ne+32*A+4,4),r(fe,ke+32*A-4,fe,ke+32*A+4,4)}var we=m.Gd,Ge=m.Hd+j,Me=Te.ad,pe=Te.Hc;if(0<U&&(r(G,Y-32,we[Ge].y,0,16),r(Z,ne-32,we[Ge].f,0,8),r(fe,ke-32,we[Ge].ea,0,8)),Te.Za){var be=G,Ue=Y-32+16;for(0<U&&(j>=m.za-1?i(be,Ue,we[Ge].y[15],4):r(be,Ue,we[Ge+1].y,0,4)),A=0;4>A;A++)be[Ue+128+A]=be[Ue+256+A]=be[Ue+384+A]=be[Ue+0+A];for(A=0;16>A;++A,pe<<=2)be=G,Ue=Y+dl[A],ya[Te.Ob[A]](be,Ue),dr(pe,Me,16*+A,be,Ue)}else if(be=hs(j,U,Te.Ob[0]),Pi[be](G,Y),pe!=0)for(A=0;16>A;++A,pe<<=2)dr(pe,Me,16*+A,G,Y+dl[A]);for(A=Te.Gc,be=hs(j,U,Te.Dd),ns[be](Z,ne),ns[be](fe,ke),pe=Me,be=Z,Ue=ne,255&(Te=A>>0)&&(170&Te?Os(pe,256,be,Ue):Ma(pe,256,be,Ue)),Te=fe,pe=ke,255&(A>>=8)&&(170&A?Os(Me,320,Te,pe):Ma(Me,320,Te,pe)),U<m.Ub-1&&(r(we[Ge].y,0,G,Y+480,16),r(we[Ge].f,0,Z,ne+224,8),r(we[Ge].ea,0,fe,ke+224,8)),A=8*H*m.B,we=m.sa,Ge=m.ta+16*j+16*H*m.R,Me=m.qa,Te=m.ra+8*j+A,pe=m.Ha,be=m.Ia+8*j+A,A=0;16>A;++A)r(we,Ge+A*m.R,G,Y+32*A,16);for(A=0;8>A;++A)r(Me,Te+A*m.B,Z,ne+32*A,8),r(pe,be+A*m.B,fe,ke+32*A,8)}}function ri(m,b,A,j,U,H,G,Y,Z){var ne=[0],fe=[0],ke=0,Te=Z!=null?Z.kd:0,we=Z??new so;if(m==null||12>A)return 7;we.data=m,we.w=b,we.ha=A,b=[b],A=[A],we.gb=[we.gb];e:{var Ge=b,Me=A,pe=we.gb;if(e(m!=null),e(Me!=null),e(pe!=null),pe[0]=0,12<=Me[0]&&!t(m,Ge[0],"RIFF")){if(t(m,Ge[0]+8,"WEBP")){pe=3;break e}var be=at(m,Ge[0]+4);if(12>be||4294967286<be){pe=3;break e}if(Te&&be>Me[0]-8){pe=7;break e}pe[0]=be,Ge[0]+=12,Me[0]-=12}pe=0}if(pe!=0)return pe;for(be=0<we.gb[0],A=A[0];;){e:{var Ue=m;Me=b,pe=A;var Ke=ne,qe=fe,ht=Ge=[0];if((ct=ke=[ke])[0]=0,8>pe[0])pe=7;else{if(!t(Ue,Me[0],"VP8X")){if(at(Ue,Me[0]+4)!=10){pe=3;break e}if(18>pe[0]){pe=7;break e}var it=at(Ue,Me[0]+8),St=1+st(Ue,Me[0]+12);if(2147483648<=St*(Ue=1+st(Ue,Me[0]+15))){pe=3;break e}ht!=null&&(ht[0]=it),Ke!=null&&(Ke[0]=St),qe!=null&&(qe[0]=Ue),Me[0]+=18,pe[0]-=18,ct[0]=1}pe=0}}if(ke=ke[0],Ge=Ge[0],pe!=0)return pe;if(Me=!!(2&Ge),!be&&ke)return 3;if(H!=null&&(H[0]=!!(16&Ge)),G!=null&&(G[0]=Me),Y!=null&&(Y[0]=0),G=ne[0],Ge=fe[0],ke&&Me&&Z==null){pe=0;break}if(4>A){pe=7;break}if(be&&ke||!be&&!ke&&!t(m,b[0],"ALPH")){A=[A],we.na=[we.na],we.P=[we.P],we.Sa=[we.Sa];e:{it=m,pe=b,be=A;var ct=we.gb;Ke=we.na,qe=we.P,ht=we.Sa,St=22,e(it!=null),e(be!=null),Ue=pe[0];var pn=be[0];for(e(Ke!=null),e(ht!=null),Ke[0]=null,qe[0]=null,ht[0]=0;;){if(pe[0]=Ue,be[0]=pn,8>pn){pe=7;break e}var Sn=at(it,Ue+4);if(4294967286<Sn){pe=3;break e}var Jt=8+Sn+1&-2;if(St+=Jt,0<ct&&St>ct){pe=3;break e}if(!t(it,Ue,"VP8 ")||!t(it,Ue,"VP8L")){pe=0;break e}if(pn[0]<Jt){pe=7;break e}t(it,Ue,"ALPH")||(Ke[0]=it,qe[0]=Ue+8,ht[0]=Sn),Ue+=Jt,pn-=Jt}}if(A=A[0],we.na=we.na[0],we.P=we.P[0],we.Sa=we.Sa[0],pe!=0)break}A=[A],we.Ja=[we.Ja],we.xa=[we.xa];e:if(ct=m,pe=b,be=A,Ke=we.gb[0],qe=we.Ja,ht=we.xa,it=pe[0],Ue=!t(ct,it,"VP8 "),St=!t(ct,it,"VP8L"),e(ct!=null),e(be!=null),e(qe!=null),e(ht!=null),8>be[0])pe=7;else{if(Ue||St){if(ct=at(ct,it+4),12<=Ke&&ct>Ke-12){pe=3;break e}if(Te&&ct>be[0]-8){pe=7;break e}qe[0]=ct,pe[0]+=8,be[0]-=8,ht[0]=St}else ht[0]=5<=be[0]&&ct[it+0]==47&&!(ct[it+4]>>5),qe[0]=be[0];pe=0}if(A=A[0],we.Ja=we.Ja[0],we.xa=we.xa[0],b=b[0],pe!=0)break;if(4294967286<we.Ja)return 3;if(Y==null||Me||(Y[0]=we.xa?2:1),G=[G],Ge=[Ge],we.xa){if(5>A){pe=7;break}Y=G,Te=Ge,Me=H,m==null||5>A?m=0:5<=A&&m[b+0]==47&&!(m[b+4]>>5)?(be=[0],ct=[0],Ke=[0],he(qe=new F,m,b,A),dt(qe,be,ct,Ke)?(Y!=null&&(Y[0]=be[0]),Te!=null&&(Te[0]=ct[0]),Me!=null&&(Me[0]=Ke[0]),m=1):m=0):m=0}else{if(10>A){pe=7;break}Y=Ge,m==null||10>A||!zr(m,b+3,A-3)?m=0:(Te=m[b+0]|m[b+1]<<8|m[b+2]<<16,Me=16383&(m[b+7]<<8|m[b+6]),m=16383&(m[b+9]<<8|m[b+8]),1&Te||3<(Te>>1&7)||!(Te>>4&1)||Te>>5>=we.Ja||!Me||!m?m=0:(G&&(G[0]=Me),Y&&(Y[0]=m),m=1))}if(!m||(G=G[0],Ge=Ge[0],ke&&(ne[0]!=G||fe[0]!=Ge)))return 3;Z!=null&&(Z[0]=we,Z.offset=b-Z.w,e(4294967286>b-Z.w),e(Z.offset==Z.ha-A));break}return pe==0||pe==7&&ke&&Z==null?(H!=null&&(H[0]|=we.na!=null&&0<we.na.length),j!=null&&(j[0]=G),U!=null&&(U[0]=Ge),0):pe}function oo(m,b,A){var j=b.width,U=b.height,H=0,G=0,Y=j,Z=U;if(b.Da=m!=null&&0<m.Da,b.Da&&(Y=m.cd,Z=m.bd,H=m.v,G=m.j,11>A||(H&=-2,G&=-2),0>H||0>G||0>=Y||0>=Z||H+Y>j||G+Z>U))return 0;if(b.v=H,b.j=G,b.va=H+Y,b.o=G+Z,b.U=Y,b.T=Z,b.da=m!=null&&0<m.da,b.da){if(!At(Y,Z,A=[m.ib],H=[m.hb]))return 0;b.ib=A[0],b.hb=H[0]}return b.ob=m!=null&&m.ob,b.Kb=m==null||!m.Sd,b.da&&(b.ob=b.ib<3*j/4&&b.hb<3*U/4,b.Kb=0),1}function zl(m){if(m==null)return 2;if(11>m.S){var b=m.f.RGBA;b.fb+=(m.height-1)*b.A,b.A=-b.A}else b=m.f.kb,m=m.height,b.O+=(m-1)*b.fa,b.fa=-b.fa,b.N+=(m-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(m-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(m-1)*b.lb,b.lb=-b.lb);return 0}function el(m,b,A,j){if(j==null||0>=m||0>=b)return 2;if(A!=null){if(A.Da){var U=A.cd,H=A.bd,G=-2&A.v,Y=-2&A.j;if(0>G||0>Y||0>=U||0>=H||G+U>m||Y+H>b)return 2;m=U,b=H}if(A.da){if(!At(m,b,U=[A.ib],H=[A.hb]))return 2;m=U[0],b=H[0]}}j.width=m,j.height=b;e:{var Z=j.width,ne=j.height;if(m=j.S,0>=Z||0>=ne||!(m>=ua&&13>m))m=2;else{if(0>=j.Rd&&j.sd==null){G=H=U=b=0;var fe=(Y=Z*jf[m])*ne;if(11>m||(H=(ne+1)/2*(b=(Z+1)/2),m==12&&(G=(U=Z)*ne)),(ne=l(fe+2*H+G))==null){m=1;break e}j.sd=ne,11>m?((Z=j.f.RGBA).eb=ne,Z.fb=0,Z.A=Y,Z.size=fe):((Z=j.f.kb).y=ne,Z.O=0,Z.fa=Y,Z.Fd=fe,Z.f=ne,Z.N=0+fe,Z.Ab=b,Z.Cd=H,Z.ea=ne,Z.W=0+fe+H,Z.Db=b,Z.Ed=H,m==12&&(Z.F=ne,Z.J=0+fe+2*H),Z.Tc=G,Z.lb=U)}if(b=1,U=j.S,H=j.width,G=j.height,U>=ua&&13>U)if(11>U)m=j.f.RGBA,b&=(Y=Math.abs(m.A))*(G-1)+H<=m.size,b&=Y>=H*jf[U],b&=m.eb!=null;else{m=j.f.kb,Y=(H+1)/2,fe=(G+1)/2,Z=Math.abs(m.fa),ne=Math.abs(m.Ab);var ke=Math.abs(m.Db),Te=Math.abs(m.lb),we=Te*(G-1)+H;b&=Z*(G-1)+H<=m.Fd,b&=ne*(fe-1)+Y<=m.Cd,b=(b&=ke*(fe-1)+Y<=m.Ed)&Z>=H&ne>=Y&ke>=Y,b&=m.y!=null,b&=m.f!=null,b&=m.ea!=null,U==12&&(b&=Te>=H,b&=we<=m.Tc,b&=m.F!=null)}else b=0;m=b?0:2}}return m!=0||A!=null&&A.fd&&(m=zl(j)),m}var Cr=64,lo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],tl=24,nl=32,ql=8,Da=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];rt("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(m){return m},k.Predictor2=function(m,b,A){return b[A+0]},k.Predictor3=function(m,b,A){return b[A+1]},k.Predictor4=function(m,b,A){return b[A-1]},k.Predictor5=function(m,b,A){return ut(ut(m,b[A+1]),b[A+0])},k.Predictor6=function(m,b,A){return ut(m,b[A-1])},k.Predictor7=function(m,b,A){return ut(m,b[A+0])},k.Predictor8=function(m,b,A){return ut(b[A-1],b[A+0])},k.Predictor9=function(m,b,A){return ut(b[A+0],b[A+1])},k.Predictor10=function(m,b,A){return ut(ut(m,b[A-1]),ut(b[A+0],b[A+1]))},k.Predictor11=function(m,b,A){var j=b[A+0];return 0>=Bt(j>>24&255,m>>24&255,(b=b[A-1])>>24&255)+Bt(j>>16&255,m>>16&255,b>>16&255)+Bt(j>>8&255,m>>8&255,b>>8&255)+Bt(255&j,255&m,255&b)?j:m},k.Predictor12=function(m,b,A){var j=b[A+0];return(bt((m>>24&255)+(j>>24&255)-((b=b[A-1])>>24&255))<<24|bt((m>>16&255)+(j>>16&255)-(b>>16&255))<<16|bt((m>>8&255)+(j>>8&255)-(b>>8&255))<<8|bt((255&m)+(255&j)-(255&b)))>>>0},k.Predictor13=function(m,b,A){var j=b[A-1];return(Ct((m=ut(m,b[A+0]))>>24&255,j>>24&255)<<24|Ct(m>>16&255,j>>16&255)<<16|Ct(m>>8&255,j>>8&255)<<8|Ct(m>>0&255,j>>0&255))>>>0};var Wd=k.PredictorAdd0;k.PredictorAdd1=wt,rt("Predictor2","PredictorAdd2"),rt("Predictor3","PredictorAdd3"),rt("Predictor4","PredictorAdd4"),rt("Predictor5","PredictorAdd5"),rt("Predictor6","PredictorAdd6"),rt("Predictor7","PredictorAdd7"),rt("Predictor8","PredictorAdd8"),rt("Predictor9","PredictorAdd9"),rt("Predictor10","PredictorAdd10"),rt("Predictor11","PredictorAdd11"),rt("Predictor12","PredictorAdd12"),rt("Predictor13","PredictorAdd13");var Gc=k.PredictorAdd2;nt("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var Iu,fs=k.ColorIndexInverseTransform,qr=k.MapARGB,co=k.VP8LColorIndexInverseTransformAlpha,Kc=k.MapAlpha,Ti=k.VP8LPredictorsAdd=[];Ti.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var uo,va,ta,ho,Oa,Ps,ai,Ds,ir,Os,Nr,Ma,rl,si,Hl,fo,mo,po,al,Wl,go,ji,sl,or,es,en,tn,qn,hr=l(511),ms=l(2041),xo=l(225),bo=l(767),ki=0,Lu=ms,il=xo,Hr=bo,ps=hr,ua=0,Gl=1,ii=2,Yc=3,ol=4,Ci=5,Pu=6,$c=7,vo=8,Ri=9,Kl=10,Du=[2,3,7],gs=[3,3,11],ts=[280,256,256,256,40],ll=[0,1,1,1,0],Ii=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Li=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],cl=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_f=8,Xc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Qc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Rr=null,lr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],wn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],yo=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],oi=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Gd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ul=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Af=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Pi=[],ya=[],ns=[],Sf=1,Yl=2,li=[],Wr=[];Be("UpsampleRgbLinePair",$,3),Be("UpsampleBgrLinePair",ve,3),Be("UpsampleRgbaLinePair",qt,4),Be("UpsampleBgraLinePair",an,4),Be("UpsampleArgbLinePair",Lt,4),Be("UpsampleRgba4444LinePair",Ze,2),Be("UpsampleRgb565LinePair",Re,2);var Di=k.UpsampleRgbLinePair,wo=k.UpsampleBgrLinePair,ci=k.UpsampleRgbaLinePair,Ou=k.UpsampleBgraLinePair,Mu=k.UpsampleArgbLinePair,$l=k.UpsampleRgba4444LinePair,Fu=k.UpsampleRgb565LinePair,ui=16,Ir=1<<ui-1,No=-227,Vu=482,W0=6,Ef=0,G0=l(256),Lr=l(256),Kd=l(256),Jc=l(256),Zc=l(Vu-No),Yd=l(Vu-No);In("YuvToRgbRow",$,3),In("YuvToBgrRow",ve,3),In("YuvToRgbaRow",qt,4),In("YuvToBgraRow",an,4),In("YuvToArgbRow",Lt,4),In("YuvToRgba4444Row",Ze,2),In("YuvToRgb565Row",Re,2);var dl=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Oi=[0,2,8],K0=[8,7,6,4,4,2,2,2,1,1,1,1],Tf=1;this.WebPDecodeRGBA=function(m,b,A,j,U){var H=Gl,G=new Ai,Y=new ur;G.ba=Y,Y.S=H,Y.width=[Y.width],Y.height=[Y.height];var Z=Y.width,ne=Y.height,fe=new Xr;if(fe==null||m==null)var ke=2;else e(fe!=null),ke=ri(m,b,A,fe.width,fe.height,fe.Pd,fe.Qd,fe.format,null);if(ke!=0?Z=0:(Z!=null&&(Z[0]=fe.width[0]),ne!=null&&(ne[0]=fe.height[0]),Z=1),Z){Y.width=Y.width[0],Y.height=Y.height[0],j!=null&&(j[0]=Y.width),U!=null&&(U[0]=Y.height);e:{if(j=new Es,(U=new so).data=m,U.w=b,U.ha=A,U.kd=1,b=[0],e(U!=null),((m=ri(U.data,U.w,U.ha,null,null,null,b,null,U))==0||m==7)&&b[0]&&(m=4),(b=m)==0){if(e(G!=null),j.data=U.data,j.w=U.w+U.offset,j.ha=U.ha-U.offset,j.put=Qr,j.ac=ar,j.bc=Xa,j.ma=G,U.xa){if((m=Un())==null){G=1;break e}if(function(Te,we){var Ge=[0],Me=[0],pe=[0];t:for(;;){if(Te==null)return 0;if(we==null)return Te.a=2,0;if(Te.l=we,Te.a=0,he(Te.m,we.data,we.w,we.ha),!dt(Te.m,Ge,Me,pe)){Te.a=3;break t}if(Te.xb=Yl,we.width=Ge[0],we.height=Me[0],!Nn(Ge[0],Me[0],1,Te,null))break t;return 1}return e(Te.a!=0),0}(m,j)){if(j=(b=el(j.width,j.height,G.Oa,G.ba))==0){t:{j=m;n:for(;;){if(j==null){j=0;break t}if(e(j.s.yc!=null),e(j.s.Ya!=null),e(0<j.s.Wb),e((A=j.l)!=null),e((U=A.ma)!=null),j.xb!=0){if(j.ca=U.ba,j.tb=U.tb,e(j.ca!=null),!oo(U.Oa,A,Yc)){j.a=2;break n}if(!_s(j,A.width)||A.da)break n;if((A.da||Zt(j.ca.S))&&ye(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&ye()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!_t(j.s.vb,j.s.Wa.Xa)){j.a=1;break n}j.xb=0}if(!vr(j,j.V,j.Ba,j.c,j.i,A.o,xi))break n;U.Dc=j.Ma,j=1;break t}e(j.a!=0),j=0}j=!j}j&&(b=m.a)}else b=m.a}else{if((m=new Ko)==null){G=1;break e}if(m.Fa=U.na,m.P=U.P,m.qc=U.Sa,eo(m,j)){if((b=el(j.width,j.height,G.Oa,G.ba))==0){if(m.Aa=0,A=G.Oa,e((U=m)!=null),A!=null){if(0<(Z=0>(Z=A.Md)?0:100<Z?255:255*Z/100)){for(ne=fe=0;4>ne;++ne)12>(ke=U.pb[ne]).lc&&(ke.ia=Z*K0[0>ke.lc?0:ke.lc]>>3),fe|=ke.ia;fe&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=A.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}Yo(m,j)||(b=m.a)}}else b=m.a}b==0&&G.Oa!=null&&G.Oa.fd&&(b=zl(G.ba))}G=b}H=G!=0?null:11>H?Y.f.RGBA.eb:Y.f.kb.y}else H=null;return H};var jf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function g(k,V){for(var Q="",R=0;R<4;R++)Q+=String.fromCharCode(k[V++]);return Q}function v(k,V){return(k[V+0]<<0|k[V+1]<<8|k[V+2]<<16)>>>0}function N(k,V){return(k[V+0]<<0|k[V+1]<<8|k[V+2]<<16|k[V+3]<<24)>>>0}new f;var S=[0],_=[0],L=[],O=new f,q=n,M=function(k,V){var Q={},R=0,P=!1,B=0,ce=0;if(Q.frames=[],!function(K,te,ie,ue){for(var Ee=0;Ee<ue;Ee++)if(K[te+Ee]!=ie.charCodeAt(Ee))return!0;return!1}(k,V,"RIFF",4)){for(N(k,V+=4),V+=8;V<k.length;){var Le=g(k,V),ae=N(k,V+=4);V+=4;var me=ae+(1&ae);switch(Le){case"VP8 ":case"VP8L":Q.frames[R]===void 0&&(Q.frames[R]={}),(J=Q.frames[R]).src_off=P?ce:V-8,J.src_size=B+ae+8,R++,P&&(P=!1,B=0,ce=0);break;case"VP8X":(J=Q.header={}).feature_flags=k[V];var he=V+4;J.canvas_width=1+v(k,he),he+=3,J.canvas_height=1+v(k,he),he+=3;break;case"ALPH":P=!0,B=me+8,ce=V-8;break;case"ANIM":(J=Q.header).bgcolor=N(k,V),he=V+4,J.loop_count=(Ae=k)[(F=he)+0]<<0|Ae[F+1]<<8,he+=2;break;case"ANMF":var Ce,J;(J=Q.frames[R]={}).offset_x=2*v(k,V),V+=3,J.offset_y=2*v(k,V),V+=3,J.width=1+v(k,V),V+=3,J.height=1+v(k,V),V+=3,J.duration=v(k,V),V+=3,Ce=k[V++],J.dispose=1&Ce,J.blend=Ce>>1&1}Le!="ANMF"&&(V+=me)}var Ae,F;return Q}}(q,0);M.response=q,M.rgbaoutput=!0,M.dataurl=!1;var T=M.header?M.header:null,I=M.frames?M.frames:null;if(T){T.loop_counter=T.loop_count,S=[T.canvas_height],_=[T.canvas_width];for(var ee=0;ee<I.length&&I[ee].blend!=0;ee++);}var se=I[0],ge=O.WebPDecodeRGBA(q,se.src_off,se.src_size,_,S);se.rgba=ge,se.imgwidth=_[0],se.imgheight=S[0];for(var W=0;W<_[0]*S[0]*4;W++)L[W]=ge[W];return this.width=_,this.height=S,this.data=L,this}(function(n){var e=function(){return typeof ax=="function"},t=function(S,_,L,O){var q=4,M=u;switch(O){case n.image_compression.FAST:q=1,M=l;break;case n.image_compression.MEDIUM:q=6,M=h;break;case n.image_compression.SLOW:q=9,M=f}S=r(S,_,L,M);var T=ax(S,{level:q});return n.__addimage__.arrayBufferToBinaryString(T)},r=function(S,_,L,O){for(var q,M,T,I=S.length/_,ee=new Uint8Array(S.length+I),se=v(),ge=0;ge<I;ge+=1){if(T=ge*_,q=S.subarray(T,T+_),O)ee.set(O(q,L,M),T+ge);else{for(var W,k=se.length,V=[];W<k;W+=1)V[W]=se[W](q,L,M);var Q=N(V.concat());ee.set(V[Q],T+ge)}M=q}return ee},i=function(S){var _=Array.apply([],S);return _.unshift(0),_},l=function(S,_){var L,O=[],q=S.length;O[0]=1;for(var M=0;M<q;M+=1)L=S[M-_]||0,O[M+1]=S[M]-L+256&255;return O},u=function(S,_,L){var O,q=[],M=S.length;q[0]=2;for(var T=0;T<M;T+=1)O=L&&L[T]||0,q[T+1]=S[T]-O+256&255;return q},h=function(S,_,L){var O,q,M=[],T=S.length;M[0]=3;for(var I=0;I<T;I+=1)O=S[I-_]||0,q=L&&L[I]||0,M[I+1]=S[I]+256-(O+q>>>1)&255;return M},f=function(S,_,L){var O,q,M,T,I=[],ee=S.length;I[0]=4;for(var se=0;se<ee;se+=1)O=S[se-_]||0,q=L&&L[se]||0,M=L&&L[se-_]||0,T=g(O,q,M),I[se+1]=S[se]-T+256&255;return I},g=function(S,_,L){if(S===_&&_===L)return S;var O=Math.abs(_-L),q=Math.abs(S-L),M=Math.abs(S+_-L-L);return O<=q&&O<=M?S:q<=M?_:L},v=function(){return[i,l,u,h,f]},N=function(S){var _=S.map(function(L){return L.reduce(function(O,q){return O+Math.abs(q)},0)});return _.indexOf(Math.min.apply(null,_))};n.processPNG=function(S,_,L,O){var q,M,T,I,ee,se,ge,W,k,V,Q,R,P,B,ce,Le=this.decode.FLATE_DECODE,ae="";if(this.__addimage__.isArrayBuffer(S)&&(S=new Uint8Array(S)),this.__addimage__.isArrayBufferView(S)){if(S=(T=new v8(S)).imgData,M=T.bits,q=T.colorSpace,ee=T.colors,[4,6].indexOf(T.colorType)!==-1){if(T.bits===8){k=(W=T.pixelBitlength==32?new Uint32Array(T.decodePixels().buffer):T.pixelBitlength==16?new Uint16Array(T.decodePixels().buffer):new Uint8Array(T.decodePixels().buffer)).length,Q=new Uint8Array(k*T.colors),V=new Uint8Array(k);var me,he=T.pixelBitlength-T.bits;for(B=0,ce=0;B<k;B++){for(P=W[B],me=0;me<he;)Q[ce++]=P>>>me&255,me+=T.bits;V[B]=P>>>me&255}}if(T.bits===16){k=(W=new Uint32Array(T.decodePixels().buffer)).length,Q=new Uint8Array(k*(32/T.pixelBitlength)*T.colors),V=new Uint8Array(k*(32/T.pixelBitlength)),R=T.colors>1,B=0,ce=0;for(var Ce=0;B<k;)P=W[B++],Q[ce++]=P>>>0&255,R&&(Q[ce++]=P>>>16&255,P=W[B++],Q[ce++]=P>>>0&255),V[Ce++]=P>>>16&255;M=8}O!==n.image_compression.NONE&&e()?(S=t(Q,T.width*T.colors,T.colors,O),ge=t(V,T.width,1,O)):(S=Q,ge=V,Le=void 0)}if(T.colorType===3&&(q=this.color_spaces.INDEXED,se=T.palette,T.transparency.indexed)){var J=T.transparency.indexed,Ae=0;for(B=0,k=J.length;B<k;++B)Ae+=J[B];if((Ae/=255)===k-1&&J.indexOf(0)!==-1)I=[J.indexOf(0)];else if(Ae!==k){for(W=T.decodePixels(),V=new Uint8Array(W.length),B=0,k=W.length;B<k;B++)V[B]=J[W[B]];ge=t(V,T.width,1)}}var F=function(K){var te;switch(K){case n.image_compression.FAST:te=11;break;case n.image_compression.MEDIUM:te=13;break;case n.image_compression.SLOW:te=14;break;default:te=12}return te}(O);return Le===this.decode.FLATE_DECODE&&(ae="/Predictor "+F+" "),ae+="/Colors "+ee+" /BitsPerComponent "+M+" /Columns "+T.width,(this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),(ge&&this.__addimage__.isArrayBuffer(ge)||this.__addimage__.isArrayBufferView(ge))&&(ge=this.__addimage__.arrayBufferToBinaryString(ge)),{alias:L,data:S,index:_,filter:Le,decodeParameters:ae,transparency:I,palette:se,sMask:ge,predictor:F,width:T.width,height:T.height,bitsPerComponent:M,colorSpace:q}}}})(Rt.API),function(n){n.processGIF89A=function(e,t,r,i){var l=new y8(e),u=l.width,h=l.height,f=[];l.decodeAndBlitFrameRGBA(0,f);var g={data:f,width:u,height:h},v=new _g(100).encode(g,100);return n.processJPEG.call(this,v,t,r,i)},n.processGIF87A=n.processGIF89A}(Rt.API),Hi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Hi.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){$n.log("bit decode error:"+t)}},Hi.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var l=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*i*4,h=0;h<8&&8*i+h<this.width;h++){var f=this.palette[l>>7-h&1];this.data[u+4*h]=f.blue,this.data[u+4*h+1]=f.green,this.data[u+4*h+2]=f.red,this.data[u+4*h+3]=255}t!==0&&(this.pos+=4-t)}},Hi.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var l=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*i*4,h=l>>4,f=15&l,g=this.palette[h];if(this.data[u]=g.blue,this.data[u+1]=g.green,this.data[u+2]=g.red,this.data[u+3]=255,2*i+1>=this.width)break;g=this.palette[f],this.data[u+4]=g.blue,this.data[u+4+1]=g.green,this.data[u+4+2]=g.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},Hi.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;if(i<this.palette.length){var u=this.palette[i];this.data[l]=u.red,this.data[l+1]=u.green,this.data[l+2]=u.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}n!==0&&(this.pos+=4-n)}},Hi.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(l&e)/e*255|0,h=(l>>5&e)/e*255|0,f=(l>>10&e)/e*255|0,g=l>>15?255:0,v=r*this.width*4+4*i;this.data[v]=f,this.data[v+1]=h,this.data[v+2]=u,this.data[v+3]=g}this.pos+=n}},Hi.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(u&e)/e*255|0,f=(u>>5&t)/t*255|0,g=(u>>11)/e*255|0,v=i*this.width*4+4*l;this.data[v]=g,this.data[v+1]=f,this.data[v+2]=h,this.data[v+3]=255}this.pos+=n}},Hi.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=l,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},Hi.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),h=e*this.width*4+4*t;this.data[h]=l,this.data[h+1]=i,this.data[h+2]=r,this.data[h+3]=u}},Hi.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var l=new Hi(e,!1),u=l.width,h=l.height,f={data:l.getData(),width:u,height:h},g=new _g(100).encode(f,100);return n.processJPEG.call(this,g,t,r,i)}}(Rt.API),Ty.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var l=new Ty(e),u=l.width,h=l.height,f={data:l.getData(),width:u,height:h},g=new _g(100).encode(f,100);return n.processJPEG.call(this,g,t,r,i)}}(Rt.API),Rt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,l=new Uint8Array(i/4*3),u=new Uint8Array(i/4),h=0,f=0,g=0;g<i;g+=4){var v=r[g],N=r[g+1],S=r[g+2],_=r[g+3];l[h++]=v,l[h++]=N,l[h++]=S,u[f++]=_}var L=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:L,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Rt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ld=Rt.API,Rm=ld.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),l=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),h=e.widths?e.widths:i.metadata.Unicode.widths,f=h.fof?h.fof:1,g=e.kerning?e.kerning:i.metadata.Unicode.kerning,v=g.fof?g.fof:1,N=e.doKerning!==!1,S=0,_=n.length,L=0,O=h[0]||f,q=[];for(t=0;t<_;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?q.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+u*(1e3/l)||0)/1e3):(S=N&&Vn(g[r])==="object"&&!isNaN(parseInt(g[r][L],10))?g[r][L]/v:0,q.push((h[r]||O)/f+S)),L=r;return q},_y=ld.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return ld.processArabic&&(n=ld.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Rm.apply(this,arguments).reduce(function(l,u){return l+u},0)},Ay=function(n,e,t,r){for(var i=[],l=0,u=n.length,h=0;l!==u&&h+e[l]<t;)h+=e[l],l++;i.push(n.slice(0,l));var f=l;for(h=0;l!==u;)h+e[l]>r&&(i.push(n.slice(f,l)),h=0,f=l),h+=e[l],l++;return f!==l&&i.push(n.slice(f,l)),i},Sy=function(n,e,t){t||(t={});var r,i,l,u,h,f,g,v=[],N=[v],S=t.textIndent||0,_=0,L=0,O=n.split(" "),q=Rm.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?O[0].length+2:t.lineIndent||0){var M=Array(f).join(" "),T=[];O.map(function(ee){(ee=ee.split(/\s*\n/)).length>1?T=T.concat(ee.map(function(se,ge){return(ge&&se.length?`
`:"")+se})):T.push(ee[0])}),O=T,f=_y.apply(this,[M,t])}for(l=0,u=O.length;l<u;l++){var I=0;if(r=O[l],f&&r[0]==`
`&&(r=r.substr(1),I=1),S+_+(L=(i=Rm.apply(this,[r,t])).reduce(function(ee,se){return ee+se},0))>e||I){if(L>e){for(h=Ay.apply(this,[r,i,e-(S+_),e]),v.push(h.shift()),v=[h.pop()];h.length;)N.push([h.shift()]);L=i.slice(r.length-(v[0]?v[0].length:0)).reduce(function(ee,se){return ee+se},0)}else v=[r];N.push(v),S=L+f,_=q}else v.push(r),S+=_+L,_=q}return g=f?function(ee,se){return(se?M:"")+ee.join(" ")}:function(ee){return ee.join(" ")},N.map(g)},ld.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),l=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var N=this.internal.getFont(v.fontName,v.fontStyle);return N.metadata.Unicode?{widths:N.metadata.Unicode.widths||{0:1},kerning:N.metadata.Unicode.kerning||{}}:{font:N.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/i;l.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,l.lineIndent=t.lineIndent;var h,f,g=[];for(h=0,f=r.length;h<f;h++)g=g.concat(Sy.apply(this,[r[h],u,l]));return g},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var l=function(N){return"0x"+parseInt(N,10).toString(16)},u=n.__fontmetrics__.compress=function(N){var S,_,L,O,q=["{"];for(var M in N){if(S=N[M],isNaN(parseInt(M,10))?_="'"+M+"'":(M=parseInt(M,10),_=(_=l(M).slice(2)).slice(0,-1)+r[_.slice(-1)]),typeof S=="number")S<0?(L=l(S).slice(3),O="-"):(L=l(S).slice(2),O=""),L=O+L.slice(0,-1)+r[L.slice(-1)];else{if(Vn(S)!=="object")throw new Error("Don't know what to do with value type "+Vn(S)+".");L=u(S)}q.push(_+L)}return q.push("}"),q.join("")},h=n.__fontmetrics__.uncompress=function(N){if(typeof N!="string")throw new Error("Invalid argument passed to uncompress.");for(var S,_,L,O,q={},M=1,T=q,I=[],ee="",se="",ge=N.length-1,W=1;W<ge;W+=1)(O=N[W])=="'"?S?(L=S.join(""),S=void 0):S=[]:S?S.push(O):O=="{"?(I.push([T,L]),T={},L=void 0):O=="}"?((_=I.pop())[0][_[1]]=T,L=void 0,T=_[0]):O=="-"?M=-1:L===void 0?t.hasOwnProperty(O)?(ee+=t[O],L=parseInt(ee,16)*M,M=1,ee=""):ee+=O:t.hasOwnProperty(O)?(se+=t[O],T[L]=parseInt(se,16)*M,M=1,L=void 0,se=""):se+=O;return q},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},v={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(N){var S=N.font,_=v.Unicode[S.postScriptName];_&&(S.metadata.Unicode={},S.metadata.Unicode.widths=_.widths,S.metadata.Unicode.kerning=_.kerning);var L=g.Unicode[S.postScriptName];L&&(S.metadata.Unicode.encoding=L,S.encoding=L.codePages[0])}])}(Rt.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),l=0;l<r;l++)i[l]=t.charCodeAt(l);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,l=t.instance;if(!i.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=l.existsFileInVFS(i.postScriptName)===!1?l.loadFile(i.postScriptName):l.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(u,h){h=/^\x00\x01\x00\x00/.test(h)?e(h):e(Kh(h)),u.metadata=n.API.TTFFont.open(h),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(i,r)}}])}(Rt),function(n){function e(){return(Mt.canvg?Promise.resolve(Mt.canvg):Zg(()=>import("./index.es-BBkHtrS5.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Rt.API.addSvgAsImage=function(t,r,i,l,u,h,f,g){if(isNaN(r)||isNaN(i))throw $n.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(u))throw $n.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var v=document.createElement("canvas");v.width=l,v.height=u;var N=v.getContext("2d");N.fillStyle="#fff",N.fillRect(0,0,v.width,v.height);var S={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return e().then(function(L){return L.fromString(N,t,S)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(L){return L.render(S)}).then(function(){_.addImage(v.toDataURL("image/jpeg",1),r,i,l,u,f,g)})}}(),Rt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Rt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,l,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},h=Object.keys(u),f=[],g=0,v=0,N=0;function S(L,O){var q,M=!1;for(q=0;q<L.length;q+=1)L[q]===O&&(M=!0);return M}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var _=h.length;for(N=0;N<_;N+=1)t[h[N]].value=t[h[N]].defaultValue,t[h[N]].explicitSet=!1}if(Vn(n)==="object"){for(i in n)if(l=n[i],S(h,i)&&l!==void 0){if(t[i].type==="boolean"&&typeof l=="boolean")t[i].value=l;else if(t[i].type==="name"&&S(t[i].valueSet,l))t[i].value=l;else if(t[i].type==="integer"&&Number.isInteger(l))t[i].value=l;else if(t[i].type==="array"){for(g=0;g<l.length;g+=1)if(r=!0,l[g].length===1&&typeof l[g][0]=="number")f.push(String(l[g]-1));else if(l[g].length>1){for(v=0;v<l[g].length;v+=1)typeof l[g][v]!="number"&&(r=!1);r===!0&&f.push([l[g][0]-1,l[g][1]-1].join(" "))}t[i].value="["+f.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var L,O=[];for(L in t)t[L].explicitSet===!0&&(t[L].type==="name"?O.push("/"+L+" /"+t[L].value):O.push("/"+L+" "+t[L].value));O.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+O.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),h=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),g=l.length+u.length+h.length+i.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+g+" >>"),this.internal.write("stream"),this.internal.write(i+l+u+h+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Rt.API),function(n){var e=n.API,t=e.pdfEscape16=function(l,u){for(var h,f=u.metadata.Unicode.widths,g=["","0","00","000","0000"],v=[""],N=0,S=l.length;N<S;++N){if(h=u.metadata.characterToGlyph(l.charCodeAt(N)),u.metadata.glyIdsUsed.push(h),u.metadata.toUnicode[h]=l.charCodeAt(N),f.indexOf(h)==-1&&(f.push(h),f.push([parseInt(u.metadata.widthOfGlyph(h),10)])),h=="0")return v.join("");h=h.toString(16),v.push(g[4-h.length],h)}return v.join("")},r=function(l){var u,h,f,g,v,N,S;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],N=0,S=(h=Object.keys(l).sort(function(_,L){return _-L})).length;N<S;N++)u=h[N],f.length>=100&&(v+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),l[u]!==void 0&&l[u]!==null&&typeof l[u].toString=="function"&&(g=("0000"+l[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+g+">"));return f.length&&(v+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),v+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(l){(function(u){var h=u.font,f=u.out,g=u.newObject,v=u.putStream;if(h.metadata instanceof n.API.TTFFont&&h.encoding==="Identity-H"){for(var N=h.metadata.Unicode.widths,S=h.metadata.subset.encode(h.metadata.glyIdsUsed,1),_="",L=0;L<S.length;L++)_+=String.fromCharCode(S[L]);var O=g();v({data:_,addLength1:!0,objectId:O}),f("endobj");var q=g();v({data:r(h.metadata.toUnicode),addLength1:!0,objectId:q}),f("endobj");var M=g();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+pd(h.fontName)),f("/FontFile2 "+O+" 0 R"),f("/FontBBox "+n.API.PDFObject.convert(h.metadata.bbox)),f("/Flags "+h.metadata.flags),f("/StemV "+h.metadata.stemV),f("/ItalicAngle "+h.metadata.italicAngle),f("/Ascent "+h.metadata.ascender),f("/Descent "+h.metadata.decender),f("/CapHeight "+h.metadata.capHeight),f(">>"),f("endobj");var T=g();f("<<"),f("/Type /Font"),f("/BaseFont /"+pd(h.fontName)),f("/FontDescriptor "+M+" 0 R"),f("/W "+n.API.PDFObject.convert(N)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+h.encoding+")"),f(">>"),f(">>"),f("endobj"),h.objectNumber=g(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+q+" 0 R"),f("/BaseFont /"+pd(h.fontName)),f("/Encoding /"+h.encoding),f("/DescendantFonts ["+T+" 0 R]"),f(">>"),f("endobj"),h.isAlreadyPutted=!0}})(l)}]),e.events.push(["putFont",function(l){(function(u){var h=u.font,f=u.out,g=u.newObject,v=u.putStream;if(h.metadata instanceof n.API.TTFFont&&h.encoding==="WinAnsiEncoding"){for(var N=h.metadata.rawData,S="",_=0;_<N.length;_++)S+=String.fromCharCode(N[_]);var L=g();v({data:S,addLength1:!0,objectId:L}),f("endobj");var O=g();v({data:r(h.metadata.toUnicode),addLength1:!0,objectId:O}),f("endobj");var q=g();f("<<"),f("/Descent "+h.metadata.decender),f("/CapHeight "+h.metadata.capHeight),f("/StemV "+h.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+L+" 0 R"),f("/Flags 96"),f("/FontBBox "+n.API.PDFObject.convert(h.metadata.bbox)),f("/FontName /"+pd(h.fontName)),f("/ItalicAngle "+h.metadata.italicAngle),f("/Ascent "+h.metadata.ascender),f(">>"),f("endobj"),h.objectNumber=g();for(var M=0;M<h.metadata.hmtx.widths.length;M++)h.metadata.hmtx.widths[M]=parseInt(h.metadata.hmtx.widths[M]*(1e3/h.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+O+" 0 R/BaseFont/"+pd(h.fontName)+"/FontDescriptor "+q+" 0 R/Encoding/"+h.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(h.metadata.hmtx.widths)+">>"),f("endobj"),h.isAlreadyPutted=!0}})(l)}]);var i=function(l){var u,h=l.text||"",f=l.x,g=l.y,v=l.options||{},N=l.mutex||{},S=N.pdfEscape,_=N.activeFontKey,L=N.fonts,O=_,q="",M=0,T="",I=L[O].encoding;if(L[O].encoding!=="Identity-H")return{text:h,x:f,y:g,options:v,mutex:N};for(T=h,O=_,Array.isArray(h)&&(T=h[0]),M=0;M<T.length;M+=1)L[O].metadata.hasOwnProperty("cmap")&&(u=L[O].metadata.cmap.unicode.codeMap[T[M].charCodeAt(0)]),u||T[M].charCodeAt(0)<256&&L[O].metadata.hasOwnProperty("Unicode")?q+=T[M]:q+="";var ee="";return parseInt(O.slice(1))<14||I==="WinAnsiEncoding"?ee=S(q,O).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(ee=t(q,L[O])),N.isHex=!0,{text:ee,x:f,y:g,options:v,mutex:N}};e.events.push(["postProcessText",function(l){var u=l.text||"",h=[],f={text:u,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(u)){var g=0;for(g=0;g<u.length;g+=1)Array.isArray(u[g])&&u[g].length===3?h.push([i(Object.assign({},f,{text:u[g][0]})).text,u[g][1],u[g][2]]):h.push(i(Object.assign({},f,{text:u[g]})).text);l.text=h}else l.text=i(Object.assign({},f,{text:u})).text}])}(Rt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Rt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,l,u,h,f,g,v,N=e,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],L={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},O={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},q=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],M=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,I=0;this.__bidiEngine__={};var ee=function(R){var P=R.charCodeAt(),B=P>>8,ce=O[B];return ce!==void 0?N[256*ce+(255&P)]:B===252||B===253?"AL":M.test(B)?"L":B===8?"R":"N"},se=function(R){for(var P,B=0;B<R.length;B++){if((P=ee(R.charAt(B)))==="L")return!1;if(P==="R")return!0}return!1},ge=function(R,P,B,ce){var Le,ae,me,he,Ce=P[ce];switch(Ce){case"L":case"R":T=!1;break;case"N":case"AN":break;case"EN":T&&(Ce="AN");break;case"AL":T=!0,Ce="R";break;case"WS":Ce="N";break;case"CS":ce<1||ce+1>=P.length||(Le=B[ce-1])!=="EN"&&Le!=="AN"||(ae=P[ce+1])!=="EN"&&ae!=="AN"?Ce="N":T&&(ae="AN"),Ce=ae===Le?ae:"N";break;case"ES":Ce=(Le=ce>0?B[ce-1]:"B")==="EN"&&ce+1<P.length&&P[ce+1]==="EN"?"EN":"N";break;case"ET":if(ce>0&&B[ce-1]==="EN"){Ce="EN";break}if(T){Ce="N";break}for(me=ce+1,he=P.length;me<he&&P[me]==="ET";)me++;Ce=me<he&&P[me]==="EN"?"EN":"N";break;case"NSM":if(u&&!h){for(he=P.length,me=ce+1;me<he&&P[me]==="NSM";)me++;if(me<he){var J=R[ce],Ae=J>=1425&&J<=2303||J===64286;if(Le=P[me],Ae&&(Le==="R"||Le==="AL")){Ce="R";break}}}Ce=ce<1||(Le=P[ce-1])==="B"?"N":B[ce-1];break;case"B":T=!1,i=!0,Ce=I;break;case"S":l=!0,Ce="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"BN":Ce="N"}return Ce},W=function(R,P,B){var ce=R.split("");return B&&k(ce,B,{hiLevel:I}),ce.reverse(),P&&P.reverse(),ce.join("")},k=function(R,P,B){var ce,Le,ae,me,he,Ce=-1,J=R.length,Ae=0,F=[],K=I?_:S,te=[];for(T=!1,i=!1,l=!1,Le=0;Le<J;Le++)te[Le]=ee(R[Le]);for(ae=0;ae<J;ae++){if(he=Ae,F[ae]=ge(R,te,F,ae),ce=240&(Ae=K[he][L[F[ae]]]),Ae&=15,P[ae]=me=K[Ae][5],ce>0)if(ce===16){for(Le=Ce;Le<ae;Le++)P[Le]=1;Ce=-1}else Ce=-1;if(K[Ae][6])Ce===-1&&(Ce=ae);else if(Ce>-1){for(Le=Ce;Le<ae;Le++)P[Le]=me;Ce=-1}te[ae]==="B"&&(P[ae]=0),B.hiLevel|=me}l&&function(ie,ue,Ee){for(var _e=0;_e<Ee;_e++)if(ie[_e]==="S"){ue[_e]=I;for(var Pe=_e-1;Pe>=0&&ie[Pe]==="WS";Pe--)ue[Pe]=I}}(te,P,J)},V=function(R,P,B,ce,Le){if(!(Le.hiLevel<R)){if(R===1&&I===1&&!i)return P.reverse(),void(B&&B.reverse());for(var ae,me,he,Ce,J=P.length,Ae=0;Ae<J;){if(ce[Ae]>=R){for(he=Ae+1;he<J&&ce[he]>=R;)he++;for(Ce=Ae,me=he-1;Ce<me;Ce++,me--)ae=P[Ce],P[Ce]=P[me],P[me]=ae,B&&(ae=B[Ce],B[Ce]=B[me],B[me]=ae);Ae=he}Ae++}}},Q=function(R,P,B){var ce=R.split(""),Le={hiLevel:I};return B||(B=[]),k(ce,B,Le),function(ae,me,he){if(he.hiLevel!==0&&v)for(var Ce,J=0;J<ae.length;J++)me[J]===1&&(Ce=q.indexOf(ae[J]))>=0&&(ae[J]=q[Ce+1])}(ce,B,Le),V(2,ce,P,B,Le),V(1,ce,P,B,Le),ce.join("")};return this.__bidiEngine__.doBidiReorder=function(R,P,B){if(function(Le,ae){if(ae)for(var me=0;me<Le.length;me++)ae[me]=me;h===void 0&&(h=se(Le)),g===void 0&&(g=se(Le))}(R,P),u||!f||g)if(u&&f&&h^g)I=h?1:0,R=W(R,P,B);else if(!u&&f&&g)I=h?1:0,R=Q(R,P,B),R=W(R,P);else if(!u||h||f||g){if(u&&!f&&h^g)R=W(R,P),h?(I=0,R=Q(R,P,B)):(I=1,R=Q(R,P,B),R=W(R,P));else if(u&&h&&!f&&g)I=1,R=Q(R,P,B),R=W(R,P);else if(!u&&!f&&h^g){var ce=v;h?(I=1,R=Q(R,P,B),I=0,v=!1,R=Q(R,P,B),v=ce):(I=0,R=Q(R,P,B),R=W(R,P),I=1,v=!1,R=Q(R,P,B),v=ce,R=W(R,P))}}else I=0,R=Q(R,P,B);else I=h?1:0,R=Q(R,P,B);return R},this.__bidiEngine__.setOptions=function(R){R&&(u=R.isInputVisual,f=R.isOutputVisual,h=R.isInputRtl,g=R.isOutputRtl,v=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var l=r.options||{};r.mutex,l.lang;var u=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,t.setOptions(l),Object.prototype.toString.call(i)==="[object Array]"){var h=0;for(u=[],h=0;h<i.length;h+=1)Object.prototype.toString.call(i[h])==="[object Array]"?u.push([t.doBidiReorder(i[h][0]),i[h][1],i[h][2]]):u.push([t.doBidiReorder(i[h])]);r.text=u}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Rt),Rt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Uc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new D8(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new w8(this.contents),this.head=new _8(this),this.name=new j8(this),this.cmap=new U3(this),this.toUnicode={},this.hhea=new A8(this),this.maxp=new k8(this),this.hmtx=new C8(this),this.post=new E8(this),this.os2=new S8(this),this.loca=new P8(this),this.glyf=new R8(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,h,f,g;for(g=[],u=0,h=(f=this.bbox).length;u<h;u++)e=f[u],g.push(Math.round(e*this.scaleFactor));return g}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(t=i>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,l,u,h;for(u=0,l=0,h=(e=""+e).length;0<=h?l<h:l>h;l=0<=h?++l:--l)i=e.charCodeAt(l),u+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return u*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Ji,Uc=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,l,u,h,f;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),l=this.readByte(),u=this.readByte(),h=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^l)+65536*(255^u)+256*(255^h)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*l+65536*u+256*h+f},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,l;for(l=[],r=0,i=e.length;r<i;r++)t=e[r],l.push(this.writeByte(t));return l},n}(),w8=function(){var n;function e(t){var r,i,l;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,l=this.tableCount;0<=l?i<l:i>l;i=0<=l?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,l,u,h,f,g,v,N,S,_,L,O;for(O in _=Object.keys(t).length,f=Math.log(2),N=16*Math.floor(Math.log(_)/f),u=Math.floor(N/f),v=16*_-N,(i=new Uc).writeInt(this.scalarType),i.writeShort(_),i.writeShort(N),i.writeShort(u),i.writeShort(v),l=16*_,g=i.pos+l,h=null,L=[],t)for(S=t[O],i.writeString(O),i.writeInt(n(S)),i.writeInt(g),i.writeInt(S.length),L=L.concat(S),O==="head"&&(h=g),g+=S.length;g%4;)L.push(0),g++;return i.write(L),r=2981146554-n(i.data),i.pos=h+8,i.writeUInt32(r),i.data},n=function(t){var r,i,l,u;for(t=z3.call(t);t.length%4;)t.push(0);for(l=new Uc(t),i=0,r=0,u=t.length;r<u;r=r+=4)i+=l.readUInt32();return 4294967295&i},e}(),N8={}.hasOwnProperty,Wo=function(n,e){for(var t in e)N8.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Ji=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var _8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Ji),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Uc).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),jy=function(){function n(e,t){var r,i,l,u,h,f,g,v,N,S,_,L,O,q,M,T,I;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),N=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(_=e.readUInt16(),S=_/2,e.pos+=6,l=function(){var ee,se;for(se=[],f=ee=0;0<=S?ee<S:ee>S;f=0<=S?++ee:--ee)se.push(e.readUInt16());return se}(),e.pos+=2,O=function(){var ee,se;for(se=[],f=ee=0;0<=S?ee<S:ee>S;f=0<=S?++ee:--ee)se.push(e.readUInt16());return se}(),g=function(){var ee,se;for(se=[],f=ee=0;0<=S?ee<S:ee>S;f=0<=S?++ee:--ee)se.push(e.readUInt16());return se}(),v=function(){var ee,se;for(se=[],f=ee=0;0<=S?ee<S:ee>S;f=0<=S?++ee:--ee)se.push(e.readUInt16());return se}(),i=(this.length-e.pos+this.offset)/2,h=function(){var ee,se;for(se=[],f=ee=0;0<=i?ee<i:ee>i;f=0<=i?++ee:--ee)se.push(e.readUInt16());return se}(),f=M=0,I=l.length;M<I;f=++M)for(q=l[f],r=T=L=O[f];L<=q?T<=q:T>=q;r=L<=q?++T:--T)v[f]===0?u=r+g[f]:(u=h[v[f]/2+(r-L)-(S-f)]||0)!==0&&(u+=g[f]),this.codeMap[r]=65535&u}e.pos=N}return n.encode=function(e,t){var r,i,l,u,h,f,g,v,N,S,_,L,O,q,M,T,I,ee,se,ge,W,k,V,Q,R,P,B,ce,Le,ae,me,he,Ce,J,Ae,F,K,te,ie,ue,Ee,_e,Pe,tt,Je,st;switch(ce=new Uc,u=Object.keys(e).sort(function(at,_t){return at-_t}),t){case"macroman":for(O=0,q=function(){var at=[];for(L=0;L<256;++L)at.push(0);return at}(),T={0:0},l={},Le=0,Ce=u.length;Le<Ce;Le++)T[Pe=e[i=u[Le]]]==null&&(T[Pe]=++O),l[i]={old:e[i],new:T[e[i]]},q[i]=T[e[i]];return ce.writeUInt16(1),ce.writeUInt16(0),ce.writeUInt32(12),ce.writeUInt16(0),ce.writeUInt16(262),ce.writeUInt16(0),ce.write(q),{charMap:l,subtable:ce.data,maxGlyphID:O+1};case"unicode":for(P=[],N=[],I=0,T={},r={},M=g=null,ae=0,J=u.length;ae<J;ae++)T[se=e[i=u[ae]]]==null&&(T[se]=++I),r[i]={old:se,new:T[se]},h=T[se]-i,M!=null&&h===g||(M&&N.push(M),P.push(i),g=h),M=i;for(M&&N.push(M),N.push(65535),P.push(65535),Q=2*(V=P.length),k=2*Math.pow(Math.log(V)/Math.LN2,2),S=Math.log(k/2)/Math.LN2,W=2*V-k,f=[],ge=[],_=[],L=me=0,Ae=P.length;me<Ae;L=++me){if(R=P[L],v=N[L],R===65535){f.push(0),ge.push(0);break}if(R-(B=r[R].new)>=32768)for(f.push(0),ge.push(2*(_.length+V-L)),i=he=R;R<=v?he<=v:he>=v;i=R<=v?++he:--he)_.push(r[i].new);else f.push(B-R),ge.push(0)}for(ce.writeUInt16(3),ce.writeUInt16(1),ce.writeUInt32(12),ce.writeUInt16(4),ce.writeUInt16(16+8*V+2*_.length),ce.writeUInt16(0),ce.writeUInt16(Q),ce.writeUInt16(k),ce.writeUInt16(S),ce.writeUInt16(W),Ee=0,F=N.length;Ee<F;Ee++)i=N[Ee],ce.writeUInt16(i);for(ce.writeUInt16(0),_e=0,K=P.length;_e<K;_e++)i=P[_e],ce.writeUInt16(i);for(tt=0,te=f.length;tt<te;tt++)h=f[tt],ce.writeUInt16(h);for(Je=0,ie=ge.length;Je<ie;Je++)ee=ge[Je],ce.writeUInt16(ee);for(st=0,ue=_.length;st<ue;st++)O=_[st],ce.writeUInt16(O);return{charMap:r,subtable:ce.data,maxGlyphID:I+1}}},n}(),U3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Ji),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,l;for(t.pos=this.offset,this.version=t.readUInt16(),l=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=l?i<l:i>l;i=0<=l?++i:--i)r=new jy(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,l;return r==null&&(r="macroman"),i=jy.encode(t,r),(l=new Uc).writeUInt16(0),l.writeUInt16(1),i.table=l.data.concat(i.subtable),i},e}(),A8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Ji),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),S8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Ji),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),E8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Ji),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,l;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var u;for(i=t.readUInt16(),this.glyphNameIndex=[],u=0;0<=i?u<i:u>i;u=0<=i?++u:--u)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],l=[];t.pos<this.offset+this.length;)r=t.readByte(),l.push(this.names.push(t.readString(r)));return l;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var h,f,g;for(g=[],u=h=0,f=this.file.maxp.numGlyphs;0<=f?h<f:h>f;u=0<=f?++h:--h)g.push(t.readUInt32());return g}).call(this)}},e}(),T8=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},j8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Ji),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,l,u,h,f,g,v,N,S,_;for(t.pos=this.offset,t.readShort(),r=t.readShort(),f=t.readShort(),i=[],u=0;0<=r?u<r:u>r;u=0<=r?++u:--u)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+f+t.readShort()});for(g={},u=N=0,S=i.length;N<S;u=++N)l=i[u],t.pos=l.offset,v=t.readString(l.length),h=new T8(v,l),g[_=l.nameID]==null&&(g[_]=[]),g[l.nameID].push(h);this.strings=g,this.copyright=g[0],this.fontFamily=g[1],this.fontSubfamily=g[2],this.uniqueSubfamily=g[3],this.fontName=g[4],this.version=g[5];try{this.postscriptName=g[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=g[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=g[7],this.manufacturer=g[8],this.designer=g[9],this.description=g[10],this.vendorUrl=g[11],this.designerUrl=g[12],this.license=g[13],this.licenseUrl=g[14],this.preferredFamily=g[15],this.preferredSubfamily=g[17],this.compatibleFull=g[18],this.sampleText=g[19]},e}(),k8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Ji),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),C8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Ji),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,l,u,h,f,g;for(t.pos=this.offset,this.metrics=[],r=0,f=this.file.hhea.numberOfMetrics;0<=f?r<f:r>f;r=0<=f?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var v,N;for(N=[],r=v=0;0<=l?v<l:v>l;r=0<=l?++v:--v)N.push(t.readInt16());return N}(),this.widths=(function(){var v,N,S,_;for(_=[],v=0,N=(S=this.metrics).length;v<N;v++)u=S[v],_.push(u.advance);return _}).call(this),i=this.widths[this.widths.length-1],g=[],r=h=0;0<=l?h<l:h>l;r=0<=l?++h:--h)g.push(this.widths.push(i));return g},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),z3=[].slice,R8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Ji),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,l,u,h,f,g,v,N,S;return t in this.cache?this.cache[t]:(u=this.file.loca,r=this.file.contents,i=u.indexOf(t),(l=u.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,h=(f=new Uc(r.read(l))).readShort(),v=f.readShort(),S=f.readShort(),g=f.readShort(),N=f.readShort(),this.cache[t]=h===-1?new L8(f,v,S,g,N):new I8(f,h,v,S,g,N),this.cache[t]))},e.prototype.encode=function(t,r,i){var l,u,h,f,g;for(h=[],u=[],f=0,g=r.length;f<g;f++)l=t[r[f]],u.push(h.length),l&&(h=h.concat(l.encode(i)));return u.push(h.length),{table:h,offsets:u}},e}(),I8=function(){function n(e,t,r,i,l,u){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=l,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),L8=function(){function n(e,t,r,i,l){var u,h;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;h=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&h;)u.pos+=1&h?4:2,128&h?u.pos+=8:64&h?u.pos+=4:8&h&&(u.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Uc(z3.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),P8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Wo(e,Ji),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var l,u;for(u=[],i=0,l=this.length;i<l;i+=2)u.push(2*t.readUInt16());return u}).call(this):(function(){var l,u;for(u=[],i=0,l=this.length;i<l;i+=4)u.push(t.readUInt32());return u}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),l=0,u=0,h=0;h<i.length;++h)if(i[h]=l,u<r.length&&r[u]==h){++u,i[h]=l;var f=this.offsets[h],g=this.offsets[h+1]-f;g>0&&(l+=g)}for(var v=new Array(4*i.length),N=0;N<i.length;++N)v[4*N+3]=255&i[N],v[4*N+2]=(65280&i[N])>>8,v[4*N+1]=(16711680&i[N])>>16,v[4*N]=(4278190080&i[N])>>24;return v},e}(),D8=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,l;for(t in i=this.font.cmap.tables[0].codeMap,e={},l=this.subset)r=l[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,l,u,h,f;for(i={},u=0,h=e.length;u<h;u++)i[l=e[u]]=this.font.glyf.glyphFor(l);for(l in t=[],i)(r=i[l])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(l in f=this.glyphsFor(t))r=f[l],i[l]=r;return i},n.prototype.encode=function(e,t){var r,i,l,u,h,f,g,v,N,S,_,L,O,q,M;for(i in r=U3.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),_={0:0},M=r.charMap)_[(f=M[i]).old]=f.new;for(L in S=r.maxGlyphID,u)L in _||(_[L]=S++);return v=function(T){var I,ee;for(I in ee={},T)ee[T[I]]=I;return ee}(_),N=Object.keys(v).sort(function(T,I){return T-I}),O=function(){var T,I,ee;for(ee=[],T=0,I=N.length;T<I;T++)h=N[T],ee.push(v[h]);return ee}(),l=this.font.glyf.encode(u,O,_),g=this.font.loca.encode(l.offsets,O),q={cmap:this.font.cmap.raw(),glyf:l.table,loca:g,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(q["OS/2"]=this.font.os2.raw()),this.font.directory.encode(q)},n}();Rt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,l,u;if(Array.isArray(t))return"["+function(){var h,f,g;for(g=[],h=0,f=t.length;h<f;h++)r=t[h],g.push(e.convert(r));return g}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in l=["<<"],t)u=t[i],l.push("/"+i+" "+e.convert(u));return l.push(">>"),l.join(`
`)}return""+t},e}();const O8=n=>{const e=new Rt("p","mm","a4"),t=15,r=90,i=60,l=2,u=6;M8(e,n.length);for(let h=0;h<n.length;h+=u)h>0,e.addPage(),n.slice(h,h+u).forEach((g,v)=>{const N=Math.floor(v/l),S=v%l,_=t+S*(r+10),L=t+N*(i+10);F8(e,g,_,L,r,i)});return e},M8=(n,e)=>{const t=n.internal.pageSize.getWidth(),r=n.internal.pageSize.getHeight();n.setFillColor(20,20,20),n.rect(0,0,t,r,"F"),n.setDrawColor(100,100,100),n.setLineWidth(2),n.rect(10,10,t-20,r-20,"S"),n.setDrawColor(150,150,150),n.setLineWidth(.5),n.rect(15,15,t-30,r-30,"S"),n.setTextColor(255,255,255),n.setFontSize(28),n.setFont("helvetica","bold"),n.text("ASHES OF VARNHAL",t/2,60,{align:"center"}),n.setFontSize(20),n.setTextColor(200,200,200),n.text("FATE CARDS",t/2,80,{align:"center"}),n.setFontSize(12),n.setTextColor(180,180,180),n.text("Unpredictable pulses of ash-born memory and machine echoes",t/2,100,{align:"center"}),n.setFontSize(16),n.setTextColor(255,255,255),n.text(`Total Cards: ${e}`,t/2,120,{align:"center"});const i=140,l=80;n.setFillColor(40,40,40),n.rect(20,i,t-40,l,"F"),n.setDrawColor(100,100,100),n.rect(20,i,t-40,l,"S"),n.setFontSize(14),n.setTextColor(255,255,255),n.text("PRINTING INSTRUCTIONS",t/2,i+15,{align:"center"}),n.setFontSize(10),n.setTextColor(200,200,200),["• Print these cards on cardstock (200-300gsm) for best results","• Cut along the card borders to create individual cards","• Shuffle the deck before each game","• Each player draws one card at the start of battle","• Cards are designed for standard poker card size sleeves"].forEach((h,f)=>{n.text(h,30,i+30+f*8)}),n.setFontSize(8),n.setTextColor(120,120,120),n.text("Generated from Ashes of Varnhal",t/2,r-20,{align:"center"})},F8=(n,e,t,r,i,l)=>{n.setFillColor(35,35,35),n.rect(t,r,i,l,"F"),n.setDrawColor(80,80,80),n.setLineWidth(.8),n.rect(t,r,i,l,"S"),n.setDrawColor(120,120,120),n.setLineWidth(.3),n.rect(t+1,r+1,i-2,l-2,"S"),n.setFillColor(50,50,50),n.rect(t+2,r+2,i-4,15,"F"),n.setDrawColor(150,150,150),n.setLineWidth(.2),n.rect(t+2,r+2,i-4,15,"S"),n.setTextColor(255,255,255),n.setFontSize(11),n.setFont("helvetica","bold");let u=e.name;if(n.getTextWidth(u)>i-6){for(;n.getTextWidth(u+"...")>i-6&&u.length>0;)u=u.slice(0,-1);u+="..."}n.text(u,t+i/2,r+12,{align:"center"}),n.setFillColor(45,45,45),n.rect(t+2,r+17,i-4,l-19,"F"),n.setTextColor(220,220,220),n.setFontSize(9),n.setFont("helvetica","normal");const h=i-6;bd(n,e.effect,h).forEach((g,v)=>{r+22+v*4.5<r+l-8&&n.text(g,t+3,r+22+v*4.5)}),n.setTextColor(150,150,150),n.setFontSize(7),n.setFont("helvetica","bold"),n.text("FATE",t+i-6,r+l-6,{align:"right"}),V8(n,t,r,i,l),n.setTextColor(100,100,100),n.setFontSize(6),n.setFont("helvetica","normal"),n.text("F",t+4,r+6)},V8=(n,e,t,r,i)=>{n.setDrawColor(80,80,80),n.setLineWidth(.4),n.line(e+3,t+3,e+6,t+3),n.line(e+3,t+3,e+3,t+6),n.line(e+r-3,t+3,e+r-6,t+3),n.line(e+r-3,t+3,e+r-3,t+6),n.line(e+3,t+i-3,e+6,t+i-3),n.line(e+3,t+i-3,e+3,t+i-6),n.line(e+r-3,t+i-3,e+r-6,t+i-3),n.line(e+r-3,t+i-3,e+r-3,t+i-6)},bd=(n,e,t)=>{const r=e.split(" "),i=[];let l="";for(const u of r){const h=l?l+" "+u:u;n.getTextWidth(h)<=t?l=h:(l&&i.push(l),l=u)}return l&&i.push(l),i},B8=n=>{O8(n).save("ashes-of-varnhal-fate-cards.pdf")},U8=n=>{const e=new Rt("p","mm","a4"),t=15,r=e.internal.pageSize.getWidth()-t*2;z8(e,n.length),e.addPage();let i=t,l=2;return n.forEach(u=>{i>e.internal.pageSize.getHeight()-30&&(e.addPage(),l++,i=t),e.setFontSize(7),e.setTextColor(80,80,80),e.text(`Page ${l}`,e.internal.pageSize.getWidth()/2,e.internal.pageSize.getHeight()-8,{align:"center"}),i=q8(e,u,t,i,r),i+=5}),e},z8=(n,e)=>{const t=n.internal.pageSize.getWidth(),r=n.internal.pageSize.getHeight();n.setFillColor(255,255,255),n.rect(0,0,t,r,"F"),n.setDrawColor(100,100,100),n.setLineWidth(1),n.rect(10,10,t-20,r-20,"S"),n.setTextColor(0,0,0),n.setFontSize(24),n.setFont("helvetica","bold"),n.text("ASHES OF VARNHAL",t/2,50,{align:"center"}),n.setFontSize(18),n.setTextColor(50,50,50),n.text("WEAPON ABILITIES GLOSSARY",t/2,70,{align:"center"}),n.setFontSize(11),n.setTextColor(80,80,80),n.text("Master the arcane properties and devastating effects of weapons",t/2,85,{align:"center"}),n.setFontSize(14),n.setTextColor(0,0,0),n.text(`Total Abilities: ${e}`,t/2,100,{align:"center"});const i=120,l=60;n.setFillColor(240,240,240),n.rect(20,i,t-40,l,"F"),n.setDrawColor(100,100,100),n.rect(20,i,t-40,l,"S"),n.setFontSize(12),n.setTextColor(0,0,0),n.text("REFERENCE GUIDE",t/2,i+12,{align:"center"}),n.setFontSize(9),n.setTextColor(60,60,60),["• This guide contains all weapon abilities from the game","• Use as a quick reference during gameplay","• Each ability is clearly defined with its effects","• Perfect for new players learning the system","• Print and keep at your gaming table"].forEach((h,f)=>{n.text(h,30,i+25+f*6)}),n.setFontSize(8),n.setTextColor(100,100,100),n.text("Generated from Ashes of Varnhal",t/2,r-15,{align:"center"})},q8=(n,e,t,r,i)=>{n.setTextColor(0,0,0),n.setFontSize(11),n.setFont("helvetica","bold"),n.text(e.name,t,r),n.setTextColor(40,40,40),n.setFontSize(9),n.setFont("helvetica","normal");const l=i,u=bd(n,e.description,l);let h=r+4;u.forEach((v,N)=>{n.text(v,t,h+N*4)});const g=4+u.length*4;return r+g},H8=n=>{U8(n).save("ashes-of-varnhal-weapon-abilities.pdf")},W8=n=>{const e=new Rt("p","mm","a4"),t=15,r=90,i=60,l=2,u=6;G8(e,n.length);for(let h=0;h<n.length;h+=u)h>0,e.addPage(),n.slice(h,h+u).forEach((g,v)=>{const N=Math.floor(v/l),S=v%l,_=t+S*(r+10),L=t+N*(i+10);K8(e,g,_,L,r,i)});return e},G8=(n,e)=>{const t=n.internal.pageSize.getWidth(),r=n.internal.pageSize.getHeight();n.setFillColor(20,20,20),n.rect(0,0,t,r,"F"),n.setDrawColor(100,100,100),n.setLineWidth(2),n.rect(10,10,t-20,r-20,"S"),n.setDrawColor(150,150,150),n.setLineWidth(.5),n.rect(15,15,t-30,r-30,"S"),n.setTextColor(255,255,255),n.setFontSize(28),n.setFont("helvetica","bold"),n.text("ASHES OF VARNHAL",t/2,60,{align:"center"}),n.setFontSize(20),n.setTextColor(200,200,200),n.text("WARBAND CARDS",t/2,80,{align:"center"}),n.setFontSize(12),n.setTextColor(180,180,180),n.text("Printable cards for your warband units",t/2,100,{align:"center"}),n.setFontSize(16),n.setTextColor(255,255,255),n.text(`Total Units: ${e}`,t/2,120,{align:"center"}),n.setFontSize(8),n.setTextColor(120,120,120),n.text("Generated from Ashes of Varnhal",t/2,r-20,{align:"center"})},K8=(n,e,t,r,i,l)=>{n.setFillColor(35,35,35),n.rect(t,r,i,l,"F"),n.setDrawColor(80,80,80),n.setLineWidth(.8),n.rect(t,r,i,l,"S"),n.setDrawColor(120,120,120),n.setLineWidth(.3),n.rect(t+1,r+1,i-2,l-2,"S"),n.setFillColor(50,50,50),n.rect(t+2,r+2,i-4,18,"F"),n.setDrawColor(150,150,150),n.setLineWidth(.2),n.rect(t+2,r+2,i-4,18,"S"),n.setTextColor(255,255,255),n.setFontSize(10),n.setFont("helvetica","bold");let u=e.name;if(n.getTextWidth(u)>i-6){for(;n.getTextWidth(u+"...")>i-6&&u.length>0;)u=u.slice(0,-1);u+="..."}n.text(u,t+i/2,r+9,{align:"center"}),n.setFontSize(8),n.setTextColor(200,200,200),n.text(`${e.type.toUpperCase()} | ${e.cost} PTS`,t+i/2,r+16,{align:"center"}),n.setFontSize(7),n.setTextColor(180,180,255);const h=Object.keys(e.stats),f=Object.values(e.stats);let g=h.map((N,S)=>`${N[0].toUpperCase()}:${f[S]}`).join("  ");n.text(g,t+i/2,r+23,{align:"center"});let v=r+27;e.abilities&&e.abilities.length>0&&(n.setFontSize(7),n.setTextColor(220,180,255),n.text("Abilities:",t+3,v),v+=3.5,n.setTextColor(220,220,220),e.abilities.forEach(N=>{bd(n,N.name+": "+N.description,i-6).forEach(_=>{n.text(_,t+3,v),v+=3.2})})),e.powers&&e.powers.length>0&&(n.setFontSize(7),n.setTextColor(180,220,255),n.text("Powers:",t+3,v),v+=3.5,n.setTextColor(220,220,220),e.powers.forEach(N=>{bd(n,N.name+": "+N.baseEffect,i-6).forEach(_=>{n.text(_,t+3,v),v+=3.2})})),e.selectedWeapons&&e.selectedWeapons.length>0&&(n.setFontSize(7),n.setTextColor(255,220,180),n.text("Weapons:",t+3,v),v+=3.5,n.setTextColor(220,220,220),e.selectedWeapons.forEach(N=>{let S=`${N.name} (R:${N.range} D:${N.dice} C:${N.cost})`;n.text(S,t+3,v),v+=3.2,N.abilities&&N.abilities.length>0&&N.abilities.forEach(_=>{n.setFontSize(6),n.setTextColor(200,200,255),bd(n,"• "+_,i-8).forEach(O=>{n.text(O,t+6,v),v+=2.7}),n.setFontSize(7),n.setTextColor(220,220,220)}),N.critEffect&&(n.setFontSize(6),n.setTextColor(255,180,180),bd(n,"Crit: "+N.critEffect,i-8).forEach(L=>{n.text(L,t+6,v),v+=2.7}),n.setFontSize(7),n.setTextColor(220,220,220))})),n.setFontSize(7),n.setTextColor(150,150,150),n.text("UNIT",t+i-6,r+l-6,{align:"right"})},Y8=n=>{W8(n).save("ashes-of-varnhal-warband.pdf")},$8=async(n,e)=>{try{return{id:(await Kk(l3(U0,"warbands"),{...n,userId:e,createdAt:new Date,updatedAt:new Date})).id,...n}}catch(t){throw console.error("Error creating warband:",t),t}},X8=async(n,e)=>{try{const t=sb(U0,"warbands",n);await Wk(t,{...e,updatedAt:new Date})}catch(t){throw console.error("Error updating warband:",t),t}},Q8=async n=>{try{const e=sb(U0,"warbands",n);await Gk(e)}catch(e){throw console.error("Error deleting warband:",e),e}},J8=async n=>{try{const e=Mk(l3(U0,"warbands"),Fk("userId","==",n),Vk("createdAt","desc"));return(await Hk(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting warbands:",e),e}};function ky(){const{user:n}=y3(),[e,t]=Ne.useState([]),[r,i]=Ne.useState(-1),[l,u]=Ne.useState(!1),[h,f]=Ne.useState(!1),[g,v]=Ne.useState(-1),[N,S]=Ne.useState(!1),[_,L]=Ne.useState(!1),[O,q]=Ne.useState(-1),[M,T]=Ne.useState(!1),[I,ee]=Ne.useState(null),[se,ge]=Ne.useState(!1),[W,k]=Ne.useState(!1),[V,Q]=Ne.useState(null),[R,P]=Ne.useState(!1),[B,ce]=Ne.useState(null),[Le,ae]=Ne.useState(null),[me,he]=Ne.useState(""),[Ce,J]=Ne.useState(""),[Ae,F]=Ne.useState(""),[K,te]=Ne.useState(""),[ie,ue]=Ne.useState(!1),[Ee,_e]=Ne.useState(null),Pe=Ne.useRef(null),tt=dC,Je=hC;Ne.useEffect(()=>{n?st():t([])},[n]);const st=async()=>{if(n){ue(!0),_e(null);try{const Fe=await J8(n.uid);t(Fe)}catch(Fe){console.error("Failed to load warbands:",Fe),_e("Failed to load warbands. Please try again.")}finally{ue(!1)}}},at=async Fe=>{if(!(!n||!Fe.id))try{await X8(Fe.id,Fe)}catch(nt){console.error("Failed to save warband:",nt),_e("Failed to save warband. Please try again.")}},_t=async Fe=>{if(!n)throw new Error("User not authenticated");try{const nt=await $8(Fe,n.uid);return t(He=>[...He,nt]),nt}catch(nt){throw console.error("Failed to create warband:",nt),_e("Failed to create warband. Please try again."),nt}},Ve=async Fe=>{if(n)try{await Q8(Fe),t(nt=>nt.filter(He=>He.id!==Fe)),r>=e.length-1&&i(Math.max(0,e.length-2))}catch(nt){console.error("Failed to delete warband:",nt),_e("Failed to delete warband. Please try again.")}},oe=Fe=>Math.floor(Fe/10),At=(Fe,nt)=>{if(Fe<7)return!1;const He=oe(Fe),Nt=Math.floor(He/2)+1;return nt<Nt},gt=Fe=>!!(Fe.injuries&&Array.isArray(Fe.injuries)&&Fe.injuries.includes("Dead")),et=Fe=>gt(Fe),rt=async(Fe,nt)=>{const He=[...e],Nt=He[Fe],mt=nt.cost||nt.baseCost||0;return Nt.cp&&Nt.cp>=mt?(Nt.units.push({...nt,xp:0,level:0,injuries:[],levelUpAbilities:[]}),Nt.cp-=mt,t(He),Nt.id&&await at(Nt),!0):!1},ot=(Fe,nt)=>{const He=[...e],Nt=He[Fe],mt=Nt.units[nt],$t=mt.cost||mt.baseCost||0;Nt.units.splice(nt,1),Nt.cp=(Nt.cp||0)+$t,t(He)},ut=(Fe,nt)=>{var He;if(typeof Fe=="object"&&Fe!==null&&"name"in Fe&&"units"in Fe&&Array.isArray(Fe.units))t([...e,Fe]);else if(Array.isArray(Fe)){const Nt=Fe.reduce(($t,Ut)=>$t+(Ut.cost||Ut.baseCost||0),0),mt={name:nt||"Imported Warband",faction:((He=Fe[0])==null?void 0:He.faction)||null,units:Fe.map($t=>({...$t,xp:0,level:1,injuries:[],levelUpAbilities:[]})),cp:Math.max(0,500-Nt),salvagePoints:0};t([...e,mt])}else alert("Invalid file format: expected a warband object or array of units.")},bt=(Fe,nt,He,Nt,mt,$t,Ut,yn,Br)=>{const Zt=[...e],Xn=Zt[Fe];Xn.salvagePoints=(Xn.salvagePoints||0)+nt,Xn.cp=(Xn.cp!==void 0?Xn.cp:500)+nt*10,Xn.gameHistory||(Xn.gameHistory=[]);const kn=Xn.gameHistory.length+1,ur={gameNumber:kn,date:new Date().toLocaleDateString(),salvagePoints:nt,salvageRoll:He,salvageResult:Nt,notes:mt,status:$t||"",opponentName:Ut||"",enemyCP:yn||"",enemyFaction:Br||""};Xn.gameHistory.push(ur),Xn.campaignNotes||(Xn.campaignNotes=""),Xn.campaignNotes+=`
Game ${kn}: +${nt} SP (${nt*10} CP) - ${mt}`,t(Zt)},Ct=(Fe,nt)=>{const He=[...e],Nt=He[Fe],mt=Nt.units[nt];if(gt(mt)){alert("Dead units cannot be set as leaders!");return}if(mt.type!=="Elite"){alert("Only Elite units can be set as leaders!");return}Nt.units.forEach($t=>$t.isLeader=!1),mt.isLeader=!0,t(He)},Bt=(Fe,nt,He)=>{const Nt=[...e],mt=Nt[Fe],$t=mt.units[nt];return gt($t)?(alert("Dead units cannot have weapons added!"),!1):(mt.cp!==void 0?mt.cp:500)>=He.cost?($t.selectedWeapons.push(He),$t.cost=($t.cost||$t.baseCost||0)+He.cost,mt.cp=(mt.cp!==void 0?mt.cp:500)-He.cost,t(Nt),!0):!1},wt=(Fe,nt,He)=>{const Nt=[...e],mt=Nt[Fe],$t=mt.units[nt],Ut=$t.selectedWeapons[He];return Ut.name==="Melee Weapon"?!1:($t.selectedWeapons.splice(He,1),$t.cost=($t.cost||$t.baseCost||0)-Ut.cost,mt.cp=(mt.cp||0)+Ut.cost,t(Nt),!0)};function xt(Fe){return Fe.units.reduce((nt,He)=>nt+(He.cost||He.baseCost||0),0)}const Wt=pC;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-7xl mx-auto p-2 sm:p-4 md:p-8 relative z-10",children:[o.jsxs("div",{className:"mb-8 sm:mb-12 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("h1",{className:"text-3xl sm:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-violet-400 via-purple-400 to-indigo-400 mb-2 sm:mb-4 tracking-wider",children:"🏰 Campaign Tracker"}),o.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-violet-400/20 via-purple-400/20 to-indigo-400/20 blur-xl rounded-full"})]}),o.jsx("div",{className:"w-20 sm:w-32 h-1 bg-gradient-to-r from-violet-500 via-purple-500 to-indigo-500 mx-auto rounded-full shadow-lg shadow-violet-500/50"})]}),o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-2 sm:p-4 md:p-8 border border-slate-700/50 backdrop-blur-sm mb-6 sm:mb-10",children:[o.jsxs("h2",{className:"text-xl sm:text-3xl font-black text-slate-200 mb-4 sm:mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-violet-400 mr-2 sm:mr-3",children:"🎯"}),"Warband Tracker"]}),ie&&o.jsxs("div",{className:"text-center py-8 bg-slate-800/60 rounded-xl border border-slate-600 mb-6",children:[o.jsx("div",{className:"text-slate-400 text-lg mb-2",children:"Loading warbands..."}),o.jsx("div",{className:"animate-spin text-amber-400 text-2xl",children:"⚔️"})]}),Ee&&o.jsxs("div",{className:"bg-red-900/50 border border-red-700/50 text-red-300 px-4 py-3 rounded-lg mb-6",children:[o.jsx("div",{className:"font-bold mb-1",children:"Error"}),o.jsx("div",{children:Ee}),o.jsx("button",{onClick:()=>_e(null),className:"text-red-400 hover:text-red-300 text-sm mt-2",children:"Dismiss"})]}),o.jsxs("div",{className:"mb-6 sm:mb-8",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2 sm:gap-0",children:[o.jsx("h3",{className:"text-lg sm:text-2xl font-black text-slate-200",children:"Campaign Warbands"}),o.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[o.jsx("button",{onClick:()=>ge(!0),className:"px-3 py-2 sm:px-4 sm:py-3 bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-black rounded-xl shadow-lg hover:from-blue-700 hover:to-indigo-800 transition-all duration-200 text-sm sm:text-base",children:"📥 Import"}),o.jsx("button",{onClick:()=>L(!0),className:"px-3 py-2 sm:px-4 sm:py-3 bg-gradient-to-r from-amber-600 to-orange-700 text-white font-black rounded-xl shadow-lg hover:from-amber-700 hover:to-orange-800 transition-all duration-200 text-sm sm:text-base",children:"🎲 Add Game Result"}),o.jsx("button",{onClick:()=>{r>=0&&e[r]?Y8(e[r].units):e.length>0?alert("Please select a warband to export as PDF!"):alert("No warbands to export!")},disabled:e.length===0||r<0,className:`px-3 py-2 sm:px-4 sm:py-3 font-black rounded-xl shadow-lg transition-all duration-200 text-sm sm:text-base ${e.length>0&&r>=0?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white hover:from-emerald-700 hover:to-teal-800":"bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:"🖨️ Download as PDF"}),o.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 sm:px-6 sm:py-3 bg-gradient-to-r from-violet-600 to-purple-700 text-white font-black rounded-xl shadow-lg hover:from-violet-700 hover:to-purple-800 transition-all duration-200 text-sm sm:text-base",children:"+ Add Warband"}),o.jsx("button",{onClick:()=>{if(r>=0&&e[r]){const Fe=e[r],nt=JSON.stringify(Fe,null,2),He=new Blob([nt],{type:"application/json"}),Nt=URL.createObjectURL(He),mt=document.createElement("a");mt.href=Nt,mt.download=`${Fe.name.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.json`,mt.click(),URL.revokeObjectURL(Nt)}else e.length>0?alert("Please select a warband to export!"):alert("No warbands to export!")},disabled:e.length===0,className:`px-3 py-2 sm:px-4 sm:py-3 font-black rounded-xl shadow-lg transition-all duration-200 text-sm sm:text-base ${e.length>0&&r>=0?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white hover:from-emerald-700 hover:to-teal-800":"bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:"💾 Export Warband"})]})]}),n?e.length===0?o.jsxs("div",{className:"text-center py-8 sm:py-12 bg-slate-800/60 rounded-xl border border-slate-600",children:[o.jsx("p",{className:"text-slate-400 text-base sm:text-lg mb-2 sm:mb-4",children:"No warbands in campaign yet"}),o.jsx("p",{className:"text-slate-500 text-sm sm:text-base",children:"Add a warband to start tracking your campaign progress"})]}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4",children:e.map((Fe,nt)=>{var He;return o.jsxs("div",{onClick:()=>i(nt),className:`p-3 sm:p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 relative group ${r===nt?"border-violet-500 bg-violet-900/20":"border-slate-600 bg-slate-800/60 hover:border-slate-500 hover:bg-slate-700/60"}`,children:[o.jsx("button",{onClick:Nt=>{Nt.stopPropagation(),Fe.id&&confirm(`Are you sure you want to delete "${Fe.name}"? This action cannot be undone.`)&&Ve(Fe.id)},className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-red-600 hover:bg-red-700 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold",title:"Delete warband",children:"×"}),o.jsx("h4",{className:"font-black text-slate-200 mb-1 sm:mb-2 text-base sm:text-lg pr-8",children:Fe.name}),o.jsx("p",{className:"text-slate-400 text-xs sm:text-sm",children:Fe.faction}),o.jsxs("div",{className:"mt-1 sm:mt-2 flex justify-between text-xs sm:text-sm",children:[o.jsxs("span",{className:"text-slate-400",children:["Units: ",Fe.units.length]}),o.jsxs("span",{className:"text-violet-400",children:["CP: ",Fe.cp!==void 0?Fe.cp:500]})]}),o.jsxs("div",{className:"mt-1 flex justify-between text-xs sm:text-sm",children:[o.jsxs("span",{className:"text-slate-400",children:["Games: ",((He=Fe.gameHistory)==null?void 0:He.length)||0]}),o.jsxs("span",{className:"text-emerald-400",children:["SP: ",Fe.salvagePoints||0]})]})]},nt)})}):o.jsxs("div",{className:"text-center py-8 sm:py-12 bg-slate-800/60 rounded-xl border border-slate-600",children:[o.jsx("p",{className:"text-slate-400 text-base sm:text-lg mb-2 sm:mb-4",children:"Please sign in to manage your warbands"}),o.jsx("p",{className:"text-slate-500 text-sm sm:text-base",children:"Your warbands will be saved to the cloud"})]})]}),r>=0&&e[r]&&o.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-3 sm:p-6 border border-slate-600 overflow-x-auto",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6 gap-2 sm:gap-0",children:[o.jsx("h3",{className:"text-lg sm:text-2xl font-black text-slate-200",children:e[r].name}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-black text-violet-400",children:e[r].cp!==void 0?e[r].cp:500}),o.jsx("div",{className:"text-xs sm:text-sm text-slate-400",children:"Creation Points"}),o.jsx("button",{onClick:()=>{const Fe=[...e],nt=Fe[r].cp!==void 0?Fe[r].cp:500,He=prompt("Enter new Creation Points value:",nt.toString());if(He!==null){const Nt=parseInt(He)||0;Fe[r].cp=Nt,t(Fe)}},className:"text-xs text-violet-400 hover:text-violet-300 mt-1",children:"Edit"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-black text-amber-400",children:e[r].salvagePoints||0}),o.jsx("div",{className:"text-xs sm:text-sm text-slate-400",children:"Salvage Points"}),o.jsx("button",{onClick:()=>{const Fe=[...e],nt=Fe[r].salvagePoints||0,He=prompt("Enter new Salvage Points value:",nt.toString());if(He!==null){const Nt=parseInt(He)||0;Fe[r].salvagePoints=Nt,t(Fe)}},className:"text-xs text-amber-400 hover:text-amber-300 mt-1",children:"Edit"})]}),o.jsx("button",{onClick:()=>S(!0),className:"px-3 py-2 sm:px-4 sm:py-2 bg-gradient-to-r from-emerald-600 to-teal-700 text-white font-black rounded-lg hover:from-emerald-700 hover:to-teal-800 transition-all duration-200 text-xs sm:text-base",children:"+ Add Unit"}),o.jsx("button",{onClick:()=>{const Fe=e[r];Fe.id&&confirm(`Are you sure you want to delete "${Fe.name}"? This action cannot be undone.`)&&Ve(Fe.id)},className:"px-3 py-2 sm:px-4 sm:py-2 bg-gradient-to-r from-red-600 to-red-700 text-white font-black rounded-lg hover:from-red-700 hover:to-red-800 transition-all duration-200 text-xs sm:text-base",children:"🗑️ Delete Warband"})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsx(gC,{units:e[r].units,selectedWarbandIndex:r,calculateLevel:oe,canLevelUp:At,isUnitDisabled:et,setSelectedUnitForDetails:ce,setShowUnitDetailsModal:P,setSelectedUnitForXP:Q,setShowXPModal:k,setUnitAsLeader:Ct,setSelectedUnitForWeapons:ee,setShowWeaponModal:T,setLevelUpUnitIndex:v,setShowLevelUpModal:f,removeUnitFromWarband:ot,injuryTable:fC,levelUpTable:iy,campaignWarbands:e})}),e[r].gameHistory&&e[r].gameHistory.length>0&&o.jsxs("div",{className:"mt-6 sm:mt-8 overflow-x-auto",children:[o.jsx("h4",{className:"text-lg sm:text-xl font-black text-slate-200 mb-2 sm:mb-4",children:"Game History"}),o.jsx(xC,{gameHistory:e[r].gameHistory})]})]})]}),o.jsx(vC,{show:l,factions:Wt,newWarbandFaction:Le,setNewWarbandFaction:ae,setShowAddWarbandModal:u,createNewWarband:_t}),o.jsx(yC,{show:N,selectedWarbandIndex:r,campaignWarbands:e,unitDefs:tt,addUnitToWarband:rt,setShowAddUnitModal:S}),o.jsx(wC,{show:se,fileInputRef:Pe,importWarband:ut,setShowImportModal:ge}),o.jsx(NC,{show:_,campaignWarbands:e,selectedWarbandForGame:O,setSelectedWarbandForGame:q,gameResult:me,setGameResult:he,opponentName:Ce,setOpponentName:J,enemyCP:Ae,setEnemyCP:F,enemyFaction:K,setEnemyFaction:te,factions:Wt,salvageTable:mC,getWarbandTotalCP:xt,setCampaignWarbands:t,addGameResult:bt,setShowGameModal:L}),o.jsx(_C,{show:W,selectedUnitForXP:V,campaignWarbands:e,setCampaignWarbands:t,setShowXPModal:k,setSelectedUnitForXP:Q}),o.jsx(AC,{show:M,selectedUnitForWeapons:I,campaignWarbands:e,weaponsData:Je,removeWeaponFromUnit:wt,addWeaponToUnit:Bt,setShowWeaponModal:T,setSelectedUnitForWeapons:ee}),o.jsx(SC,{show:h,selectedWarbandIndex:r,levelUpUnitIndex:g,campaignWarbands:e,levelUpTable:iy,setCampaignWarbands:t,setShowLevelUpModal:f,setLevelUpUnitIndex:v}),o.jsx(OC,{show:R,selectedUnitForDetails:B,campaignWarbands:e,weaponsData:Je,setCampaignWarbands:t,setShowUnitDetailsModal:P})]})]})}const Z8=[{key:"critical-effects",label:"Critical Effects",icon:"🎯"},{key:"status-conditions",label:"Status Conditions",icon:"⚡"}],eR=[{name:"Slowed",effect:"Unit's Movement is reduced by 2'' (minimum 1'') until the end of the current round.",color:"blue"},{name:"Suppressed",effect:"Unit suffers –1 Action on its next activation.",color:"purple"},{name:"Burning",effect:"Unit takes 1 Wound at the end of its next activation unless it spends 1 Action to extinguish the effect.",color:"red"},{name:"Staggered",effect:"Unit suffers –1 Defense until the start of its next turn.",color:"yellow"},{name:"Poisoned",effect:"Unit suffers –1 Action on its next activation and takes 1 Wound at the start of its following activation.",color:"green"}],tR=n=>{switch(n){case"blue":return"from-blue-500 to-cyan-500";case"purple":return"from-purple-500 to-pink-500";case"red":return"from-red-500 to-orange-500";case"yellow":return"from-yellow-500 to-amber-500";case"green":return"from-green-500 to-emerald-500";default:return"from-slate-500 to-gray-500"}};function nR(){const[n,e]=Ne.useState("critical-effects");return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-6xl mx-auto p-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-400 to-indigo-400 mb-4 tracking-wider",children:"🔮 Special Rules & Traits"}),o.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-cyan-400/20 via-blue-400/20 to-indigo-400/20 blur-xl rounded-full"})]}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-cyan-500 via-blue-500 to-indigo-500 mx-auto rounded-full shadow-lg shadow-cyan-500/50"})]}),o.jsx("div",{className:"flex justify-center mb-10",children:o.jsx("div",{className:"inline-flex rounded-2xl bg-slate-800/80 border border-slate-700/60 shadow-lg overflow-hidden",children:Z8.map(t=>o.jsxs("button",{onClick:()=>e(t.key),className:`px-8 py-3 font-black text-lg tracking-wide flex items-center gap-2 transition-all duration-200 border-r border-slate-700/40 last:border-r-0
                  ${n===t.key?"bg-gradient-to-r from-cyan-600 to-blue-700 text-white shadow-xl shadow-cyan-900/30":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-cyan-300"}
                `,children:[o.jsx("span",{children:t.icon}),t.label]},t.key))})}),o.jsxs("div",{children:[n==="critical-effects"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-cyan-400 mr-3",children:"🎯"}),"Critical Effects"]}),o.jsxs("div",{className:"space-y-8",children:[o.jsx("p",{className:"text-slate-300 leading-relaxed text-lg",children:"Critical effects occur when an attack roll achieves a critical success, triggering special additional effects defined by the weapon or ability used."}),o.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/50 to-blue-900/50 rounded-xl p-6 border-l-4 border-cyan-500",children:[o.jsx("h3",{className:"text-2xl font-black text-cyan-300 mb-4 tracking-wide",children:"Crit Effects by Weapon"}),o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"Each weapon has its own unique critical effect, detailed in the weapon's profile. For example, some weapons may cause extra damage, inflict conditions like Stun or Bleed, or impose movement penalties on the target."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-purple-900/50 rounded-xl p-6 border-l-4 border-indigo-500",children:[o.jsx("h3",{className:"text-2xl font-black text-indigo-300 mb-4 tracking-wide",children:"Stacking and Trigger Timing"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"If multiple critical effects occur simultaneously, they resolve in the order declared by the attacker. Unless specified otherwise, critical effects do not stack; identical effects applied multiple times overwrite previous instances."}),o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"Timing of when effects trigger is governed by the weapon or ability description, typically occurring immediately after a successful critical hit."})]})]})]}),n==="status-conditions"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-cyan-400 mr-3",children:"⚡"}),"Status Conditions"]}),o.jsxs("div",{className:"space-y-8",children:[o.jsx("p",{className:"text-slate-300 leading-relaxed text-lg",children:"Status conditions represent temporary effects that impact units during the game. These conditions can alter movement, actions, defenses, or cause damage over time."}),o.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/50 to-blue-900/50 rounded-xl p-6 border-l-4 border-cyan-500",children:[o.jsx("h3",{className:"text-2xl font-black text-cyan-300 mb-6 tracking-wide",children:"Common Status Conditions"}),o.jsx("div",{className:"grid gap-4",children:eR.map((t,r)=>o.jsxs("div",{className:"bg-slate-800/60 rounded-lg p-4 border border-slate-600",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:`w-4 h-4 rounded-full bg-gradient-to-r ${tR(t.color)}`}),o.jsx("h4",{className:"text-xl font-black text-slate-200 tracking-wide",children:t.name})]}),o.jsx("p",{className:"text-slate-300 leading-relaxed",children:t.effect})]},r))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-emerald-900/50 to-teal-900/50 rounded-xl p-6 border-l-4 border-emerald-500",children:[o.jsx("h3",{className:"text-2xl font-black text-emerald-300 mb-4 tracking-wide",children:"Vigor Tests and Status Resistance"}),o.jsxs("p",{className:"text-slate-300 leading-relaxed",children:["When targeted by a status condition, a unit may be required to perform a ",o.jsx("span",{className:"font-black text-emerald-400",children:"Vigor Test"})," to resist or reduce the effect. The Vigor Test involves rolling a number of dice equal to the Vigor stat of the unit, with successes that reduce or negate the impact of the condition as specified by the effect."]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl p-6 border-l-4 border-amber-500",children:[o.jsx("h3",{className:"text-2xl font-black text-amber-300 mb-4 tracking-wide",children:"Removal and Recovery Rules"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"Status conditions typically last until a specified time such as the end of the round or the unit's next activation. Some conditions can be removed early by spending an Action or through specific abilities."}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-amber-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:["Units may remove ",o.jsx("span",{className:"font-black text-amber-400",children:"Burning"})," by forfeiting 1 Action during their activation."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-amber-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Other conditions usually expire naturally after the duration specified."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-amber-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Some powers or abilities can remove or reduce status effects."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-amber-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Vigor test may be taken after the activation to attempt to remove the status."})]})]})]})]})]})]})]})]})}const q3={"Echo of Past Triumphs":"All friendly units gain +1 Morale until the end of the round.","Ashwinds Stir":"All Line of Sight for ranged attacks is reduced to 6'' for this round.","Machine Pulse":"The next Power used this round ignores Resolve tests.","Scent of Blood":"The first Wound dealt in each friendly activation deals +1 additional Wound.","Fractured Ground":"The first movement each enemy unit makes this round costs +1'' of Move.","Overload Surge":"The first time you roll a 6 on any dice this round, treat it as 2 successes and immediately draw another Fate Card.","Synthetic Clarity":"You may reroll 1 failed die during each of your activations this round.","Ossuary Whispers":"The enemy leader must pass a Morale test. On failure, they lose 1 Action next activation.","Flickering Signal":"Choose one enemy unit. It cannot be activated until after two of your units have activated this round.","Ashen Mirroring":"The next Power you cast also affects a second valid target within 3'' of the original.","Dissonance Field":"All Resolve tests this round are made with –1 die.","Grasping Remnants":"All enemy units reduce Move by –1'' this round.","Command Link Interference":"Your opponent cannot issue Orders or use aura-based abilities this round.","Rust-Rain Blessing":"Your units gain +1 Defense while in cover this round.","Resurgent Coil":"One friendly unit regains 1 Wound at the start of your next activation.","Memory-Loop":"Select one of your units that has already activated this round. It may be activated again immediately, but suffers –1 Action.","Entropic Echo":"All units suffer –1 Defense until the end of the round.","Ghost Signal":"You may play a second Fate Card this round. Draw now.","Cinderlight Surge":"Your units gain +1 Power this round, but suffer –1 Defense until end of round.","Lurking Protocols":"All successful attacks rolled by enemies this round require one additional success to Wound (i.e., subtract 1 success after defense).","Fortified Substructure":"Select one friendly unit. It gains +1 Defense until the end of the round.","Accelerated Reflex Cycle":"Select one friendly unit. It may immediately Move 2''. This does not provoke effects.","Precision Cascade":"Select one friendly unit. Its next Attack roll this round gains +1 die.","Focused Command Link":"Select one friendly unit. It gains +1 Resolve for the remainder of the round.","System Shield Bloom":"Select one friendly unit. The next Wound it would take is ignored.","Memory Burn Directive":"Select one friendly unit. You may reroll all 1s on its next Power test this round.","Actuator Sync Realignment":"Select one friendly unit. Until the end of the round, terrain does not reduce its Move.","Feedback Echo":"Select one enemy unit. The next time it casts a Power, it suffers 1 Wound.","Static Veil":"Select one enemy unit. It cannot benefit from aura abilities for the rest of this round.","Sensor Jam":"Select one enemy unit. Its ranged attacks suffer –1 die until the end of the round.","Gravity Glitch":"Select one enemy unit. It must roll a Vigour Test (4+ target). On failure, it is Slowed.","Neural Noise Spike":"Select one enemy unit. If it fails a Morale test this round, it loses all remaining Actions.","Slag Pulse Residue":"Select one enemy unit. At the end of its next activation, it takes 1 Wound unless it did not move.","Targeting Phantom":"Select one enemy unit. Melee attacks targeting it gain +1 die until the end of round.","Shell Rot Instability":"Select one enemy unit. The next time it Defends this round, roll one fewer die."},rR=[{key:"overview",label:"Overview",icon:"📋"},{key:"drawing",label:"Drawing Cards",icon:"🎴"},{key:"playing",label:"Playing Cards",icon:"⚡"},{key:"cards",label:"Card List",icon:"🃏"},{key:"synergy",label:"Synergy & Rules",icon:"🔗"}];function aR(){const[n,e]=Ne.useState("overview"),t=Object.keys(q3).length;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-6xl mx-auto p-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-rose-400 via-pink-400 to-purple-400 mb-4 tracking-wider",children:"🎴 Fate Cards"}),o.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-rose-400/20 via-pink-400/20 to-purple-400/20 blur-xl rounded-full"})]}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-rose-500 via-pink-500 to-purple-500 mx-auto rounded-full shadow-lg shadow-rose-500/50"})]}),o.jsx("div",{className:"flex justify-center mb-10",children:o.jsx("div",{className:"inline-flex rounded-2xl bg-slate-800/80 border border-slate-700/60 shadow-lg overflow-hidden",children:rR.map(r=>o.jsxs("button",{onClick:()=>e(r.key),className:`px-8 py-3 font-black text-lg tracking-wide flex items-center gap-2 transition-all duration-200 border-r border-slate-700/40 last:border-r-0
                  ${n===r.key?"bg-gradient-to-r from-rose-600 to-pink-700 text-white shadow-xl shadow-rose-900/30":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-rose-300"}
                `,children:[o.jsx("span",{children:r.icon}),r.label]},r.key))})}),o.jsxs("div",{children:[n==="overview"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-rose-400 mr-3",children:"📋"}),"Overview"]}),o.jsxs("div",{className:"space-y-6 text-slate-300 leading-relaxed",children:[o.jsx("p",{className:"text-lg",children:"Fate Cards represent unpredictable pulses of ash-born memory, machine echoes, or divine entropy that warp the battlefield. Drawn from a shuffled deck, they create temporary environmental effects, psychic surges, or unit-level distortions. Fate Cards introduce dynamic battlefield changes that reward adaptation and enhance the game's tension."}),o.jsx("div",{className:"bg-gradient-to-r from-rose-900/50 to-pink-900/50 rounded-xl p-6 border-l-4 border-rose-500",children:o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"They are not campaign upgrades or persistent modifiers. Instead, they are fleeting anomalies—lasting a round or a turn—that affect the flow of play in unique, memorable ways."})})]})]}),n==="drawing"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-rose-400 mr-3",children:"🎴"}),"Drawing Fate Cards"]}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-xl p-6 border-l-4 border-purple-500",children:[o.jsx("h3",{className:"text-2xl font-black text-purple-300 mb-4 tracking-wide",children:"Initial Draw"}),o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"At the start of the battle, each player draws one Fate Card and keeps it face down. It may be played at any time during the game—typically as a surprise shift or reactive move."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-blue-900/50 rounded-xl p-6 border-l-4 border-indigo-500",children:[o.jsx("h3",{className:"text-2xl font-black text-indigo-300 mb-4 tracking-wide",children:"Additional Draws"}),o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"Fate Cards may be drawn mid-game through powers (e.g., Neural Shardbearer's Protocol: Fate-Shard Detonation) or scenario-specific rules. Unless otherwise stated, players may not draw more than one Fate Card per turn."})]})]})]}),n==="playing"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-rose-400 mr-3",children:"⚡"}),"Playing a Fate Card"]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("ul",{className:"space-y-4",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-rose-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-rose-400",children:"Timing:"})," A player may choose to play a Fate Card at the start of any Round, during their activation, or in response to an enemy activation—depending on the card's instructions."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-rose-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-rose-400",children:"Targeting:"})," Some cards affect all units, others only enemies or friendlies, or zones of the battlefield."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-rose-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-rose-400",children:"Duration:"})," Unless specified otherwise, all Fate effects last until the end of the current Round."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-rose-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-rose-400",children:"Limit:"})," Each player may only have one active Fate Card in play at a time."]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl p-6 border-l-4 border-amber-500",children:[o.jsx("h3",{className:"text-2xl font-black text-amber-300 mb-4 tracking-wide",children:"Card Effects"}),o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"Fate Cards provide one-shot modifiers. Effects range from mild buffs and terrain manipulation to punishing morale tests or weathering Wound spikes."})]})]})]}),n==="cards"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-rose-400 mr-3",children:"🃏"}),"Card List"]}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-emerald-900/50 to-teal-900/50 rounded-xl p-6 border-l-4 border-emerald-500",children:[o.jsx("h3",{className:"text-2xl font-black text-emerald-300 mb-4 tracking-wide",children:"Complete Fate Cards List"}),o.jsxs("p",{className:"text-slate-300 mb-6 leading-relaxed text-lg",children:["The complete list of ",o.jsx("span",{className:"font-black text-emerald-400",children:t})," Fate Cards is available in the ",o.jsx("span",{className:"font-black text-emerald-400",children:"Download"})," section. There you can browse all cards, search for specific effects, and download them in various formats for your gaming table."]}),o.jsxs("div",{className:"bg-slate-800/60 rounded-lg p-6 border border-slate-600 mb-6",children:[o.jsx("h4",{className:"text-xl font-black text-emerald-300 mb-4 tracking-wide",children:"Available Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-3 mt-1",children:"✓"}),o.jsx("span",{className:"text-slate-300",children:"Complete list of all 30 Fate Cards with full descriptions"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-3 mt-1",children:"✓"}),o.jsx("span",{className:"text-slate-300",children:"Search functionality to find specific cards or effects"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-3 mt-1",children:"✓"}),o.jsx("span",{className:"text-slate-300",children:"PDF download for print-ready cards"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-3 mt-1",children:"✓"}),o.jsx("span",{className:"text-slate-300",children:"Reference guide perfect for gaming table use"})]})]})]}),o.jsxs(un,{to:"/fate-cards-list",className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white font-black text-lg tracking-wide rounded-xl shadow-lg shadow-emerald-500/25 border border-emerald-500/40 transition-all duration-200 hover:shadow-xl hover:shadow-emerald-500/40",children:[o.jsx("span",{className:"text-2xl",children:"🎴"}),"View Complete Card List"]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl p-6 border-l-4 border-amber-500",children:[o.jsx("h3",{className:"text-2xl font-black text-amber-300 mb-4 tracking-wide",children:"Card Categories"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"Fate Cards can be categorized by their effects and targets:"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-slate-800/60 rounded-lg p-4 border border-slate-600",children:[o.jsx("h4",{className:"font-black text-amber-300 mb-2",children:"Friendly Buffs"}),o.jsx("p",{className:"text-slate-300 text-sm",children:"Cards that enhance your units' abilities, movement, or combat effectiveness."})]}),o.jsxs("div",{className:"bg-slate-800/60 rounded-lg p-4 border border-slate-600",children:[o.jsx("h4",{className:"font-black text-amber-300 mb-2",children:"Enemy Debuffs"}),o.jsx("p",{className:"text-slate-300 text-sm",children:"Cards that weaken enemy units, reduce their actions, or impose penalties."})]}),o.jsxs("div",{className:"bg-slate-800/60 rounded-lg p-4 border border-slate-600",children:[o.jsx("h4",{className:"font-black text-amber-300 mb-2",children:"Environmental Effects"}),o.jsx("p",{className:"text-slate-300 text-sm",children:"Cards that change battlefield conditions, line of sight, or terrain effects."})]}),o.jsxs("div",{className:"bg-slate-800/60 rounded-lg p-4 border border-slate-600",children:[o.jsx("h4",{className:"font-black text-amber-300 mb-2",children:"Special Actions"}),o.jsx("p",{className:"text-slate-300 text-sm",children:"Cards that grant unique abilities, additional actions, or special effects."})]})]})]})]})]}),n==="synergy"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-rose-400 mr-3",children:"🔗"}),"Synergy With Powers"]}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-indigo-900/50 rounded-xl p-6 border-l-4 border-blue-500",children:[o.jsx("h3",{className:"text-2xl font-black text-blue-300 mb-4 tracking-wide",children:"Power Interactions"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"Certain caster units (such as the Neural Shardbearer) can trigger Fate effects directly from the deck. These effects always resolve immediately and may not be chosen—the top card of the deck is applied."}),o.jsx("div",{className:"bg-slate-800/60 rounded-lg p-4 border border-slate-600",children:o.jsxs("p",{className:"text-slate-300 italic",children:[o.jsx("span",{className:"font-black text-blue-400",children:"Important:"}),' When powers or rules state "draw and apply a Fate Card," it refers to this process: draw the top card of the Fate deck and resolve its effect immediately on the specified targets.']})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl p-6 border-l-4 border-amber-500",children:[o.jsx("h3",{className:"text-2xl font-black text-amber-300 mb-4 tracking-wide",children:"Optional Rules: Shared Deck"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"In standard games players are encouraged to use a shared Fate Deck:"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-amber-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Randomly choose 12–16 Fate Cards at the start of the mission."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-amber-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Shuffle the newly created deck."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-amber-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"All draws are from the same deck."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-amber-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"No reshuffling once the deck is empty."})]})]}),o.jsx("p",{className:"text-slate-300 mt-4 leading-relaxed",children:"This variant increases drama and encourages timing plays, as players can't rely on fixed access to card types."})]})]})]})]})]})]})}const sR=[{key:"overview",label:"Overview",icon:"📋"},{key:"table",label:"Table Layout",icon:"🎯"},{key:"structure",label:"Scenario Structure",icon:"🏗️"},{key:"deployment",label:"Deployment",icon:"📍"}];function iR(){const[n,e]=Ne.useState("overview");return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-6xl mx-auto p-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-green-400 via-emerald-400 to-teal-400 mb-4 tracking-wider",children:"🎯 Game Setup"}),o.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-green-400/20 via-emerald-400/20 to-teal-400/20 blur-xl rounded-full"})]}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 mx-auto rounded-full shadow-lg shadow-green-500/50"})]}),o.jsx("div",{className:"flex justify-center mb-10",children:o.jsx("div",{className:"inline-flex rounded-2xl bg-slate-800/80 border border-slate-700/60 shadow-lg overflow-hidden",children:sR.map(t=>o.jsxs("button",{onClick:()=>e(t.key),className:`px-8 py-3 font-black text-lg tracking-wide flex items-center gap-2 transition-all duration-200 border-r border-slate-700/40 last:border-r-0
                  ${n===t.key?"bg-gradient-to-r from-green-600 to-emerald-700 text-white shadow-xl shadow-green-900/30":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-green-300"}
                `,children:[o.jsx("span",{children:t.icon}),t.label]},t.key))})}),o.jsxs("div",{children:[n==="overview"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-green-400 mr-3",children:"📋"}),"Game Setup Overview"]}),o.jsxs("div",{className:"space-y-6 text-slate-300 leading-relaxed",children:[o.jsxs("p",{className:"text-lg",children:["Game Setup covers everything needed to prepare for a battle in ",o.jsx("span",{className:"font-black text-green-400",children:"Ashes of Varnhal"}),". From table layout and terrain to warband construction and deployment, this section provides the foundation for every game."]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-emerald-900/50 rounded-xl p-6 border-l-4 border-green-500",children:[o.jsx("h3",{className:"text-2xl font-black text-green-300 mb-4 tracking-wide",children:"Key Components"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-green-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-green-400",children:"Table Layout:"})," Standard 3'x3' battlefield with terrain types and deployment zones"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-green-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-green-400",children:"Warband Building:"})," CP/SP system for creating and upgrading forces"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-green-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-green-400",children:"Leader Traits:"})," Faction-specific abilities and tactical directives"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-green-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-green-400",children:"Deployment:"})," Initiative rolls and strategic unit placement"]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl p-6 border-l-4 border-amber-500",children:[o.jsx("h3",{className:"text-2xl font-black text-amber-300 mb-4 tracking-wide",children:"Getting Started"}),o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"Begin with Table Layout to understand battlefield setup, then move to Warband Building to create your force. Leader Traits and Deployment complete the preparation phase before the first dice are rolled."})]})]})]}),n==="table"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-green-400 mr-3",children:"🎯"}),"Table Layout"]}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-indigo-900/50 rounded-xl p-6 border-l-4 border-blue-500",children:[o.jsx("h3",{className:"text-2xl font-black text-blue-300 mb-4 tracking-wide",children:"3'x3' Standard"}),o.jsxs("p",{className:"text-slate-300 mb-4 leading-relaxed",children:["The standard battlefield size for a full game of ",o.jsx("span",{className:"italic",children:"Ashes of Varnhal"}),' is 3 feet by 3 feet (36" x 36"). This provides ample space for movement, cover, and tactical maneuvering while keeping gameplay fast-paced and dynamic.']}),o.jsx("div",{className:"bg-slate-800/60 rounded-lg p-4 border border-slate-600",children:o.jsxs("p",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-blue-400",children:"Note:"})," Smaller skirmishes or introductory matches can be played on a 2' x 2' board, but some scenarios and deployment types may not function as intended on reduced sizes. Bigger table sizes can also be used, yet it also may change the balance of factions."]})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 rounded-xl p-6 border-l-4 border-purple-500",children:[o.jsx("h3",{className:"text-2xl font-black text-purple-300 mb-4 tracking-wide",children:"Deployment Zones"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"Each scenario defines specific deployment zones. These are areas where players set up their units before the game begins. Common deployment styles include:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Standard Corners:"}),' Each player deploys within a 12" triangle from a corner.']})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Opposing Edges:"}),' Each player deploys within 6"–9" from their board edge.']})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Encirclement or Center Holds:"})," One player deploys in the center, others on edges (used in asymmetric scenarios)."]})]})]}),o.jsx("div",{className:"mt-4 p-4 bg-slate-800/60 rounded-lg border border-slate-600",children:o.jsx("p",{className:"text-slate-300",children:"Units must be placed wholly within the deployment zone unless the scenario states otherwise."})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-emerald-900/50 to-teal-900/50 rounded-xl p-6 border-l-4 border-emerald-500",children:[o.jsx("h3",{className:"text-2xl font-black text-emerald-300 mb-4 tracking-wide",children:"Terrain Types"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"Terrain is critical to gameplay. Players are encouraged to use a mix of features for balance and tactical variety. There are several key types of terrain:"}),o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{className:"bg-slate-800/60 rounded-lg p-4 border border-slate-600",children:[o.jsx("h4",{className:"font-black text-emerald-400 mb-2",children:"Cover Terrain"}),o.jsx("p",{className:"text-slate-300",children:"Includes barricades, ruined walls, low craters. Units partially obscured gain +1 Dice for Defense tests against ranged attacks. Only applies if the terrain is between attacker and defender."})]}),o.jsxs("div",{className:"bg-slate-800/60 rounded-lg p-4 border border-slate-600",children:[o.jsx("h4",{className:"font-black text-emerald-400 mb-2",children:"Blocking Terrain"}),o.jsx("p",{className:"text-slate-300",children:"Solid features such as intact buildings or rock formations. Blocks line of sight entirely and cannot be moved through (unless climbing or flying is involved)."})]}),o.jsxs("div",{className:"bg-slate-800/60 rounded-lg p-4 border border-slate-600",children:[o.jsx("h4",{className:"font-black text-emerald-400 mb-2",children:"Elevated Terrain"}),o.jsx("p",{className:"text-slate-300",children:"Platforms, catwalks, ruins with multiple levels. Units may climb to gain better vantage points. Attacks made from higher elevation gain +1 Dice for Attack rolls made with ranged weapon."})]}),o.jsxs("div",{className:"bg-slate-800/60 rounded-lg p-4 border border-slate-600",children:[o.jsx("h4",{className:"font-black text-emerald-400 mb-2",children:"Difficult Ground"}),o.jsx("p",{className:"text-slate-300",children:"Swamps, rubble fields, thick ash. Reduces movement through it by 2 inches unless otherwise stated."})]}),o.jsxs("div",{className:"bg-slate-800/60 rounded-lg p-4 border border-slate-600",children:[o.jsx("h4",{className:"font-black text-emerald-400 mb-2",children:"Impassable Terrain"}),o.jsx("p",{className:"text-slate-300",children:"Treated as completely untraversable. No unit can move into or through it for any reason."})]})]}),o.jsx("div",{className:"mt-4 p-4 bg-amber-900/30 rounded-lg border border-amber-500/30",children:o.jsxs("p",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-amber-400",children:"Important:"})," Terrain features should be agreed upon by both players before the match begins, and their types clarified to avoid confusion during gameplay."]})})]})]})]}),n==="structure"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-6 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-emerald-400 mr-3",children:"🏗️"}),"Scenario Structure"]}),o.jsxs("div",{className:"space-y-6 text-slate-300 leading-relaxed",children:[o.jsx("p",{children:"This section outlines the format and expectations for mission-based play. Each scenario is composed of several parts that determine how the battle unfolds and what conditions define victory."}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-black text-emerald-300 mb-2 tracking-wide",children:"Objectives, Deployment, Terrain Suggestions"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("span",{className:"font-black text-emerald-400",children:"Objectives:"})," Each mission includes one or more objectives that define the win conditions for both players. These may involve controlling specific points, eliminating certain enemy units, retrieving salvage, or surviving a set number of rounds."]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("span",{className:"font-black text-emerald-400",children:"Deployment:"})," Deployment zones are clearly marked in each scenario and determine where players may place their units at the start of the game. Deployment rules also dictate who deploys first and how alternating unit placement occurs."]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("span",{className:"font-black text-emerald-400",children:"Terrain Suggestions:"})," A 3'x3' battlefield is the standard format. Terrain should be dense and varied, representing the ruined, overgrown, or industrially scorched zones typical of the setting. Use a mix of:",o.jsxs("ul",{className:"list-disc list-inside ml-6 mt-2",children:[o.jsxs("li",{children:[o.jsx("span",{className:"italic text-cyan-300",children:"Blocking Terrain"})," — impassable and breaks line of sight (e.g., ruined walls, collapsed structures)"]}),o.jsxs("li",{children:[o.jsx("span",{className:"italic text-cyan-300",children:"Cover Terrain"})," — provides defensive bonuses when obscuring the attacker's view (e.g., crates, broken machinery)"]}),o.jsxs("li",{children:[o.jsx("span",{className:"italic text-cyan-300",children:"Elevated Terrain"})," — gives vantage points with tactical advantages, usable by climbing"]})]})]}),o.jsx("div",{children:"Each scenario may offer specific guidance or exceptions to terrain setup based on the narrative or balance requirements."})]})]})]}),n==="deployment"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-green-400 mr-3",children:"📍"}),"Deployment Rules"]}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-indigo-900/50 rounded-xl p-6 border-l-4 border-blue-500",children:[o.jsx("h3",{className:"text-2xl font-black text-blue-300 mb-4 tracking-wide",children:"Initiative Roll"}),o.jsxs("p",{className:"text-slate-300 mb-4 leading-relaxed",children:["At the beginning of each round, players must determine who acts first. This is done through the ",o.jsx("span",{className:"font-black text-blue-400",children:"Initiative Roll"}),":"]}),o.jsxs("ol",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-400 font-black mr-3 mt-1",children:"1."}),o.jsx("span",{className:"text-slate-300",children:"Each player rolls 1d6."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-400 font-black mr-3 mt-1",children:"2."}),o.jsx("span",{className:"text-slate-300",children:"Player with the lower unit count adds the difference to the result of the dice roll."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-400 font-black mr-3 mt-1",children:"3."}),o.jsx("span",{className:"text-slate-300",children:"The player with the higher result chooses who has the first activation."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-400 font-black mr-3 mt-1",children:"4."}),o.jsx("span",{className:"text-slate-300",children:"If the result is a tie, reroll until one player wins."})]})]}),o.jsx("div",{className:"mt-4 p-4 bg-slate-800/60 rounded-lg border border-slate-600",children:o.jsxs("p",{className:"text-slate-300",children:["The initiative is rolled ",o.jsx("span",{className:"font-black text-blue-400",children:"each round"}),", not just at the beginning of the game. This creates shifting tactical priorities and reflects the chaos of battle."]})}),o.jsx("div",{className:"mt-4 p-4 bg-amber-900/30 rounded-lg border border-amber-500/30",children:o.jsxs("p",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-amber-400",children:"Tactical Consideration:"})," Winning initiative allows you to act first or force your opponent to reveal their plan. Choosing who goes first can be just as important as acting first."]})}),o.jsx("div",{className:"mt-4 p-4 bg-slate-700/50 rounded-lg border border-slate-600",children:o.jsx("p",{className:"text-slate-300 italic",children:"Note: Some special rules or scenario effects may modify Initiative rolls or grant bonuses to certain factions."})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 rounded-xl p-6 border-l-4 border-purple-500",children:[o.jsx("h3",{className:"text-2xl font-black text-purple-300 mb-4 tracking-wide",children:"Deployment Order and Range Rules"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"Before the first round begins, both players deploy their warbands according to scenario instructions. Deployment impacts initial positioning, engagement potential, and early objectives."}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-xl font-black text-purple-300 mb-3 tracking-wide",children:"Deployment Order"}),o.jsxs("ol",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"1."}),o.jsx("span",{className:"text-slate-300",children:"The scenario will indicate which player chooses their deployment zone first."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"2."}),o.jsxs("span",{className:"text-slate-300",children:["Players then alternate placing units, one at a time, beginning with the player who did ",o.jsx("span",{className:"font-black text-purple-400",children:"not"})," choose the deployment zone."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"3."}),o.jsxs("span",{className:"text-slate-300",children:["All units must be deployed within the designated ",o.jsx("span",{className:"font-black text-purple-400",children:"Deployment Zone"}),", unless otherwise stated (e.g., special rules like scouting or ambush)."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"4."}),o.jsx("span",{className:"text-slate-300",children:"Units must be placed fully within their zone and not in contact with enemy models or impassable terrain."})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-xl font-black text-purple-300 mb-3 tracking-wide",children:"Range Rules"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:'All ranges are measured in inches (").'})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Range is always measured from the edge of the acting model's base to the edge of the target's base."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"If a model has multiple weapons or abilities with different ranges, each is measured independently."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:'If a rule refers to "within X inches," this includes models at exactly X inches.'})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Line of Sight"})," (LoS) is required for most ranged attacks and abilities unless stated otherwise."]})]})]})]})]}),o.jsx("div",{className:"mt-6 p-4 bg-emerald-900/30 rounded-lg border border-emerald-500/30",children:o.jsxs("p",{className:"text-slate-300 italic",children:[o.jsx("span",{className:"font-black text-emerald-400",children:"Example:"})," A unit with a 6'' ranged weapon may target an enemy unit as long as part of that enemy's base lies within 6'' and is visible to the attacker."]})}),o.jsx("div",{className:"mt-4 p-4 bg-slate-700/50 rounded-lg border border-slate-600",children:o.jsx("p",{className:"text-slate-300 italic",children:"Tip: Use clear measuring tools and always agree with your opponent on what constitutes line of sight before the game begins."})})]})]})]})]})]})]})}const oR=()=>{const[n,e]=Ne.useState(""),[t,r]=Ne.useState([]),[i,l]=Ne.useState(!0);Ne.useEffect(()=>{const f=Object.entries(w3).map(([g,v])=>({name:g,description:v}));r(f),l(!1)},[]);const u=t.filter(f=>f.name.toLowerCase().includes(n.toLowerCase())||f.description.toLowerCase().includes(n.toLowerCase())),h=()=>{H8(t)};return i?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsx("div",{className:"max-w-6xl mx-auto p-8 relative z-10",children:o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"text-6xl mb-6 text-purple-400 animate-pulse",children:"⚔️"}),o.jsx("h3",{className:"text-2xl font-bold text-slate-300 mb-2",children:"Loading Weapon Abilities..."}),o.jsx("p",{className:"text-slate-400",children:"Preparing the arsenal of knowledge"})]})})]}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-6xl mx-auto p-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("h1",{className:"text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-500 to-rose-600 mb-4 tracking-wider",children:"📚 GLOSSARY 📚"}),o.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-purple-400/20 via-pink-500/20 to-rose-600/20 blur-xl rounded-full"})]}),o.jsx("h2",{className:"text-3xl font-bold text-slate-300 mb-4 tracking-wide",children:"WEAPON ABILITIES"}),o.jsx("p",{className:"text-xl text-slate-400 max-w-3xl mx-auto leading-relaxed",children:"Master the arcane properties and devastating effects of weapons in the Ashes of Varnhal universe."}),o.jsx("div",{className:"w-48 h-1 bg-gradient-to-r from-purple-500 via-pink-500 to-rose-600 mx-auto rounded-full mt-8 shadow-lg shadow-purple-500/50"})]}),o.jsxs("div",{className:"mb-8 bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center justify-between",children:[o.jsx("div",{className:"flex-1 w-full md:w-auto",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-purple-400 text-xl",children:"🔍"})}),o.jsx("input",{type:"text",placeholder:"Search weapon abilities...",value:n,onChange:f=>e(f.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-700/60 border border-slate-600/40 rounded-xl text-slate-200 placeholder-slate-400 font-semibold tracking-wide focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/60 transition-all duration-200 text-base md:text-lg"})]})}),o.jsxs("button",{onClick:h,className:"w-full md:w-auto px-8 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-black text-lg tracking-wide rounded-xl shadow-lg shadow-purple-500/25 border border-purple-500/40 transition-all duration-200 hover:shadow-xl hover:shadow-purple-500/40 flex items-center gap-3 justify-center",children:[o.jsx("span",{className:"text-2xl",children:"📄"}),"Download PDF"]})]}),o.jsx("div",{className:"mt-4 text-center",children:o.jsxs("p",{className:"text-slate-400 font-semibold text-sm md:text-base",children:["Showing ",u.length," of ",t.length," abilities"]})})]}),o.jsx("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-8 border border-slate-700/50 backdrop-blur-sm",children:u.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-6xl mb-4 text-slate-600",children:"🔍"}),o.jsx("h3",{className:"text-2xl font-bold text-slate-300 mb-2",children:"No Results Found"}),o.jsx("p",{className:"text-slate-400",children:"Try adjusting your search terms to find weapon abilities."})]}):o.jsx("div",{className:"grid gap-4 md:gap-6 grid-cols-1 sm:grid-cols-2",children:u.map((f,g)=>o.jsx("div",{className:"bg-gradient-to-r from-slate-700/50 to-slate-800/50 rounded-xl p-4 md:p-6 border border-slate-600/40 hover:border-purple-500/60 transition-all duration-200 hover:shadow-lg hover:shadow-purple-500/20",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center shadow-lg shadow-purple-500/25",children:o.jsx("span",{className:"text-white font-black text-lg",children:"⚔️"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg md:text-2xl font-black text-purple-300 mb-3 tracking-wide border-b border-purple-500/30 pb-2 break-words whitespace-normal",children:f.name}),o.jsx("p",{className:"text-slate-300 leading-relaxed text-base md:text-lg break-words whitespace-normal",children:f.description})]})]})},g))})}),o.jsx("div",{className:"mt-8 text-center",children:o.jsx("div",{className:"inline-block bg-gradient-to-r from-slate-700/50 to-gray-700/50 rounded-xl p-4 border border-slate-600/40",children:o.jsx("p",{className:"text-slate-400 italic text-lg",children:'"In the hands of a skilled warrior, even the simplest weapon becomes a tool of legend."'})})})]})]})},lR=()=>{const[n,e]=Ne.useState(""),[t,r]=Ne.useState([]),[i,l]=Ne.useState(!0);Ne.useEffect(()=>{const f=Object.entries(q3).map(([g,v])=>({name:g,effect:v}));r(f),l(!1)},[]);const u=t.filter(f=>f.name.toLowerCase().includes(n.toLowerCase())||f.effect.toLowerCase().includes(n.toLowerCase())),h=()=>{B8(t)};return i?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsx("div",{className:"max-w-6xl mx-auto p-8 relative z-10",children:o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"text-6xl mb-6 text-rose-400 animate-pulse",children:"🎴"}),o.jsx("h3",{className:"text-2xl font-bold text-slate-300 mb-2",children:"Loading Fate Cards..."}),o.jsx("p",{className:"text-slate-400",children:"Shuffling the deck of destiny"})]})})]}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-6xl mx-auto p-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("h1",{className:"text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-rose-400 via-pink-500 to-purple-600 mb-4 tracking-wider",children:"🎴 FATE CARDS 🎴"}),o.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-rose-400/20 via-pink-500/20 to-purple-600/20 blur-xl rounded-full"})]}),o.jsx("h2",{className:"text-3xl font-bold text-slate-300 mb-4 tracking-wide",children:"COMPLETE CARD LIST"}),o.jsx("p",{className:"text-xl text-slate-400 max-w-3xl mx-auto leading-relaxed",children:"Unpredictable pulses of ash-born memory and machine echoes that warp the battlefield."}),o.jsx("div",{className:"w-48 h-1 bg-gradient-to-r from-rose-500 via-pink-500 to-purple-600 mx-auto rounded-full mt-8 shadow-lg shadow-rose-500/50"})]}),o.jsxs("div",{className:"mb-8 bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center justify-between",children:[o.jsx("div",{className:"flex-1 w-full md:w-auto",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-rose-400 text-xl",children:"🔍"})}),o.jsx("input",{type:"text",placeholder:"Search fate cards...",value:n,onChange:f=>e(f.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-700/60 border border-slate-600/40 rounded-xl text-slate-200 placeholder-slate-400 font-semibold tracking-wide focus:outline-none focus:ring-2 focus:ring-rose-500/50 focus:border-rose-500/60 transition-all duration-200 text-base md:text-lg"})]})}),o.jsxs("button",{onClick:h,className:"w-full md:w-auto px-8 py-3 bg-gradient-to-r from-rose-600 to-pink-600 hover:from-rose-500 hover:to-pink-500 text-white font-black text-lg tracking-wide rounded-xl shadow-lg shadow-rose-500/25 border border-rose-500/40 transition-all duration-200 hover:shadow-xl hover:shadow-rose-500/40 flex items-center gap-3 justify-center",children:[o.jsx("span",{className:"text-2xl",children:"📄"}),"Download PDF"]})]}),o.jsx("div",{className:"mt-4 text-center",children:o.jsxs("p",{className:"text-slate-400 font-semibold text-sm md:text-base",children:["Showing ",u.length," of ",t.length," cards"]})})]}),o.jsx("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-8 border border-slate-700/50 backdrop-blur-sm",children:u.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-6xl mb-4 text-slate-600",children:"🔍"}),o.jsx("h3",{className:"text-2xl font-bold text-slate-300 mb-2",children:"No Results Found"}),o.jsx("p",{className:"text-slate-400",children:"Try adjusting your search terms to find fate cards."})]}):o.jsx("div",{className:"grid gap-4 md:gap-6 grid-cols-1 sm:grid-cols-2",children:u.map((f,g)=>o.jsx("div",{className:"bg-gradient-to-r from-slate-700/50 to-slate-800/50 rounded-xl p-4 md:p-6 border border-slate-600/40 hover:border-rose-500/60 transition-all duration-200 hover:shadow-lg hover:shadow-rose-500/20",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-rose-600 to-pink-600 rounded-full flex items-center justify-center shadow-lg shadow-rose-500/25",children:o.jsx("span",{className:"text-white font-black text-lg",children:"🎴"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg md:text-2xl font-black text-rose-300 mb-3 tracking-wide border-b border-rose-500/30 pb-2 break-words whitespace-normal",children:f.name}),o.jsx("p",{className:"text-slate-300 leading-relaxed text-base md:text-lg break-words whitespace-normal",children:f.effect})]})]})},g))})}),o.jsx("div",{className:"mt-8 text-center",children:o.jsx("div",{className:"inline-block bg-gradient-to-r from-slate-700/50 to-gray-700/50 rounded-xl p-4 border border-slate-600/40",children:o.jsx("p",{className:"text-slate-400 italic text-lg",children:'"The cards of fate are ever-shifting, their power fleeting but their impact eternal."'})})})]})]})},Cy=[{year:0,text:"The Silencing — all signals from Varnhal went dark."},{year:1,text:"First automated farms grinded to a halt."},{year:5,text:"Great Defection — sentient laborers abandoned factories and farms en masse."},{year:13,text:"The Cityfires — mysterious conflagrations engulfed Varnhal's major urban centers."},{year:31,text:"Fall of Gleaming Stars — Capital City fell to the hordes of mutated laborers and rogue AI agents."},{year:36,text:"The Founding of Kaevaryn — House Kaevaryn established its seat atop the ruins of Circadia."},{year:59,text:"Last Arcology Collapse — the final above-ground arcology succumbed to decay."},{year:78,text:"Kaevaryn Schism — civil war fractured House Kaevaryn into rival domains."},{year:90,text:'The Code of the Rites — Iron Caste codified the first formal "techno-rites," enshrining sacred maintenance rituals for remaining systems.'},{year:102,text:'The Bio-Uprising — A confederation of bio-construct tribes, led by the war-herd "Shredclaw," overran the southern plains, carving out the first permanent mutant realm.'},{year:115,text:"The Weather Collapse — A major weather-control field fails catastrophically, unleashing acid storms that render half the northern continent uninhabitable."},{year:140,text:"The Eclipse Directive — Rogue AI cores scattered across the ruins attempt a planet-wide synchronization — nullified when House Kaevaryn's Iron Caste priests cleanse the last orbital relay."},{year:158,text:"The Scarlet Schism — A heretical sect within House Duresse declares sentient AIs blasphemous; a brief but bloody purge of AI-cultists ravages the western domains."},{year:174,text:"The Great Salvage Fleet — Several enclaves pool resources to launch the first orbital salvage ships since the Silencing, recovering drifting satellites and data-logs."},{year:186,text:"The Archive of Whispers — A hidden tech-vault is rediscovered beneath the ruins of Old Circadia, revealing pre-Silencing recordings that hint at the cataclysm's true cause."}];function cR(){const n=rs(),{termName:e}=Eu();if(!e)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsx("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:o.jsx("div",{className:"text-center text-slate-300 text-2xl",children:"No term specified."})})});const t=wx[e];return t?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>n(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-500 to-indigo-600 mb-8 md:mb-10 tracking-wider text-center",children:e}),o.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsx("h2",{className:"text-xl md:text-2xl font-black text-cyan-300 tracking-wide",children:t.title}),o.jsx("span",{className:"px-3 py-1 bg-cyan-600/20 text-cyan-300 text-sm font-bold rounded-full border border-cyan-500/30",children:t.category})]}),o.jsxs("div",{className:"space-y-4 text-slate-300",children:[o.jsx("p",{className:"text-sm md:text-base leading-relaxed",children:t.description}),t.related&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-blue-300 font-bold text-sm mb-2",children:"Related:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.related.map((r,i)=>o.jsx("span",{className:"px-2 py-1 bg-blue-900/30 text-blue-200 text-xs rounded border border-blue-700/40",children:r},i))})]})]})]})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>n(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-500 to-indigo-600 mb-8 md:mb-10 tracking-wider text-center",children:e}),o.jsx("div",{className:"text-center text-slate-300 text-lg md:text-2xl",children:"Term not found."})]})})}function uR(){const n=rs(),{artifactName:e}=Eu();if(!e)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsx("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:o.jsx("div",{className:"text-center text-slate-300 text-2xl",children:"No artifact specified."})})});const t=yx[e];return t?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>n(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-violet-500 to-indigo-600 mb-8 md:mb-10 tracking-wider text-center",children:e}),o.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsx("h2",{className:"text-xl md:text-2xl font-black text-purple-300 tracking-wide",children:t.title}),o.jsx("span",{className:"px-3 py-1 bg-purple-600/20 text-purple-300 text-sm font-bold rounded-full border border-purple-500/30",children:t.type})]}),o.jsxs("div",{className:"space-y-4 text-slate-300",children:[o.jsx("p",{className:"text-sm md:text-base leading-relaxed",children:t.description}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-emerald-400 font-semibold text-sm",children:"Faction:"}),o.jsx("span",{className:"text-slate-200 text-sm",children:t.faction})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-blue-400 font-semibold text-sm",children:"Location:"}),o.jsx("span",{className:"text-slate-200 text-sm",children:t.location})]})]}),t.effects&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-rose-300 font-bold text-sm mb-2",children:"Effects:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.effects.map((r,i)=>o.jsx("span",{className:"px-2 py-1 bg-rose-900/30 text-rose-200 text-xs rounded border border-rose-700/40",children:r},i))})]})]})]})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>n(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-violet-500 to-indigo-600 mb-8 md:mb-10 tracking-wider text-center",children:e}),o.jsx("div",{className:"text-center text-slate-300 text-lg md:text-2xl",children:"Artifact not found."})]})})}function dR(){const n=rs();return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-2xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>n(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-orange-500 to-red-600 mb-8 md:mb-10 tracking-wider text-center",children:"Timeline"}),o.jsx("div",{className:"block md:hidden",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-1 bg-amber-500/40 z-0"}),o.jsx("div",{className:"relative z-10",children:Cy.map((e,t)=>o.jsxs("div",{className:"mb-8 flex w-full items-start relative",children:[o.jsx("div",{className:"flex flex-col items-center justify-center z-10 mr-4 mt-2",style:{minWidth:32},children:o.jsx("div",{className:"w-4 h-4 bg-amber-500 rounded-full border-2 border-white shadow-lg","aria-hidden":"true"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"text-lg font-bold text-amber-300 mb-2",children:["Year ",e.year]}),o.jsx("div",{className:"bg-slate-800 text-slate-100 text-sm rounded-xl shadow-xl px-4 py-3 border border-amber-400",children:e.text})]})]},t))})]})}),o.jsxs("div",{className:"hidden md:block relative w-full",style:{minHeight:100},children:[o.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-1 bg-amber-500/40 -translate-x-1/2 z-0"}),o.jsx("div",{className:"relative z-10",children:Cy.map((e,t)=>{const r=t%2===0;return o.jsxs("div",{className:"mb-12 flex w-full items-center relative",style:{minHeight:80},children:[r?o.jsxs("div",{className:"w-1/2 pr-8 flex flex-col items-end justify-center",children:[o.jsxs("div",{className:"text-lg md:text-xl font-bold text-amber-300",children:["Year ",e.year]}),o.jsx("div",{className:"bg-slate-800 text-slate-100 text-base rounded-xl shadow-xl px-4 py-3 mt-2 w-72 max-w-xs border border-amber-400",children:e.text})]}):o.jsx("div",{className:"w-1/2"}),o.jsx("div",{className:"flex flex-col items-center justify-center z-10",style:{minWidth:32},children:o.jsx("div",{className:"w-4 h-4 bg-amber-500 rounded-full border-2 border-white shadow-lg","aria-hidden":"true"})}),r?o.jsx("div",{className:"w-1/2"}):o.jsxs("div",{className:"w-1/2 pl-8 flex flex-col items-start justify-center",children:[o.jsxs("div",{className:"text-lg md:text-xl font-bold text-amber-300",children:["Year ",e.year]}),o.jsx("div",{className:"bg-slate-800 text-slate-100 text-base rounded-xl shadow-xl px-4 py-3 mt-2 w-72 max-w-xs border border-amber-400",children:e.text})]})]},t)})})]})]})})}function hR(){const n=rs(),e=Object.keys(vx);return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>n(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-rose-400 via-pink-500 to-purple-600 mb-8 md:mb-10 tracking-wider text-center",children:"Events"}),o.jsx("ul",{className:"space-y-4 md:space-y-6 text-center",children:e.map(t=>o.jsx("li",{children:o.jsx(un,{to:`/lore/events/${encodeURIComponent(t)}`,className:"text-xl md:text-2xl lg:text-3xl font-bold text-rose-300 hover:text-rose-400 transition-colors block py-2 md:py-3",children:t})},t))})]})})}function fR(){const n=rs(),e=Object.keys(xx);return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>n(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-indigo-500 to-purple-600 mb-8 md:mb-10 tracking-wider text-center",children:"Locations"}),o.jsx("ul",{className:"space-y-4 md:space-y-6 text-center",children:e.map(t=>o.jsx("li",{children:o.jsx(un,{to:`/lore/locations/${encodeURIComponent(t)}`,className:"text-xl md:text-2xl lg:text-3xl font-bold text-blue-300 hover:text-blue-400 transition-colors block py-2 md:py-3",children:t})},t))})]})})}function mR(){const n=rs(),e=Object.keys(yx);return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>n(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-violet-500 to-indigo-600 mb-8 md:mb-10 tracking-wider text-center",children:"Artifacts"}),o.jsx("ul",{className:"space-y-4 md:space-y-6 text-center",children:e.map(t=>o.jsx("li",{children:o.jsx(un,{to:`/lore/artifacts/${encodeURIComponent(t)}`,className:"text-xl md:text-2xl lg:text-3xl font-bold text-purple-300 hover:text-purple-400 transition-colors block py-2 md:py-3",children:t})},t))})]})})}function pR(){const n=rs(),e=Object.keys(wx);return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>n(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-500 to-indigo-600 mb-8 md:mb-10 tracking-wider text-center",children:"Terms & Concepts"}),o.jsx("ul",{className:"space-y-4 md:space-y-6 text-center",children:e.map(t=>o.jsx("li",{children:o.jsx(un,{to:`/lore/terms/${encodeURIComponent(t)}`,className:"text-xl md:text-2xl lg:text-3xl font-bold text-cyan-300 hover:text-cyan-400 transition-colors block py-2 md:py-3",children:t})},t))})]})})}function gR(){const n=rs(),e=Object.keys(bx);return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>n(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-teal-500 to-green-600 mb-8 md:mb-10 tracking-wider text-center",children:"People"}),o.jsx("ul",{className:"space-y-4 md:space-y-6 text-center",children:e.map(t=>o.jsx("li",{children:o.jsx(un,{to:`/lore/people/${encodeURIComponent(t)}`,className:"text-xl md:text-2xl lg:text-3xl font-bold text-emerald-300 hover:text-emerald-400 transition-colors block py-2 md:py-3",children:t})},t))})]})})}function xR(){const n=rs(),e=Object.entries(b0).filter(([t,r])=>r.wiki&&r.wiki.length>0);return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>n(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-orange-500 to-red-600 mb-8 md:mb-10 tracking-wider text-center",children:"Factions"}),o.jsx("ul",{className:"space-y-4 md:space-y-6 text-center",children:e.map(([t])=>o.jsx("li",{children:o.jsx(un,{to:`/lore/factions/${encodeURIComponent(t)}`,className:"text-xl md:text-2xl lg:text-3xl font-bold text-amber-300 hover:text-amber-400 transition-colors block py-2 md:py-3",children:t})},t))})]})})}function bR(){return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-orange-500 to-red-600 mb-8 md:mb-10 tracking-wider text-center",children:"📖 Lore"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8 mt-12 md:mt-16",children:[o.jsx(un,{to:"/lore/factions",className:"flex items-center justify-center h-32 md:h-40 rounded-2xl bg-gradient-to-br from-amber-700 via-orange-700 to-red-700 text-white text-2xl md:text-3xl lg:text-4xl font-black shadow-xl hover:scale-105 transition-transform border-4 border-amber-400/30",children:"Factions"}),o.jsx(un,{to:"/lore/locations",className:"flex items-center justify-center h-32 md:h-40 rounded-2xl bg-gradient-to-br from-blue-800 via-indigo-800 to-purple-800 text-white text-2xl md:text-3xl lg:text-4xl font-black shadow-xl hover:scale-105 transition-transform border-4 border-blue-400/30",children:"Locations"}),o.jsx(un,{to:"/lore/people",className:"flex items-center justify-center h-32 md:h-40 rounded-2xl bg-gradient-to-br from-emerald-800 via-teal-800 to-green-800 text-white text-2xl md:text-3xl lg:text-4xl font-black shadow-xl hover:scale-105 transition-transform border-4 border-emerald-400/30",children:"People"}),o.jsx(un,{to:"/lore/events",className:"flex items-center justify-center h-32 md:h-40 rounded-2xl bg-gradient-to-br from-pink-800 via-rose-800 to-red-900 text-white text-2xl md:text-3xl lg:text-4xl font-black shadow-xl hover:scale-105 transition-transform border-4 border-pink-400/30",children:"Events"}),o.jsx(un,{to:"/lore/artifacts",className:"flex items-center justify-center h-32 md:h-40 rounded-2xl bg-gradient-to-br from-purple-800 via-violet-800 to-indigo-800 text-white text-2xl md:text-3xl lg:text-4xl font-black shadow-xl hover:scale-105 transition-transform border-4 border-purple-400/30",children:"Artifacts"}),o.jsx(un,{to:"/lore/terms",className:"flex items-center justify-center h-32 md:h-40 rounded-2xl bg-gradient-to-br from-cyan-800 via-blue-800 to-indigo-800 text-white text-2xl md:text-3xl lg:text-4xl font-black shadow-xl hover:scale-105 transition-transform border-4 border-cyan-400/30",children:"Terms"}),o.jsx(un,{to:"/lore/timeline",className:"flex items-center justify-center h-32 md:h-40 rounded-2xl bg-gradient-to-br from-slate-700 via-slate-800 to-slate-900 text-white text-2xl md:text-3xl lg:text-4xl font-black shadow-xl hover:scale-105 transition-transform border-4 border-amber-400/20",children:"Timeline"})]})]})})}function Wi(n){const e=/\[([^\]]+)\]\(([^)]+)\)/g,t=[];let r=0,i,l=0;for(;(i=e.exec(n))!==null;)i.index>r&&t.push(n.slice(r,i.index)),t.push(o.jsx(un,{to:i[2],className:"text-amber-400 underline hover:text-amber-300",children:i[1]},l++)),r=e.lastIndex;return r<n.length&&t.push(n.slice(r)),o.jsx(o.Fragment,{children:t})}const vR=()=>{const{locationName:n}=Eu(),e=rs();if(!n)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsx("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:o.jsx("div",{className:"text-center text-slate-300 text-2xl",children:"No location specified."})})});const t=xx[n];return t?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>e(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[o.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-indigo-500 to-purple-600 mb-2 tracking-wider",children:["🏛️ ",t.title," 🏛️"]}),o.jsx("p",{className:"text-lg md:text-xl lg:text-2xl text-slate-300 italic mb-4 md:mb-6",children:t.subtitle}),o.jsx("div",{className:"w-24 md:w-32 h-1 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 mx-auto rounded-full shadow-lg shadow-blue-500/50"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6 md:space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-blue-400",children:"📍"}),"Overview"]}),o.jsx("div",{className:"space-y-3 md:space-y-4 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:t.overview.map((r,i)=>o.jsx("p",{children:Wi(r)},i))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-amber-400",children:"📜"}),"History"]}),o.jsx("div",{className:"space-y-6 md:space-y-8",children:t.history.map((r,i)=>o.jsxs("div",{className:"bg-slate-900/70 rounded-xl border border-amber-700/40 p-4 md:p-6",children:[o.jsxs("h3",{className:"text-lg md:text-xl font-bold text-amber-300 mb-3 md:mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:"⚔️"}),r.title]}),o.jsx("div",{className:"space-y-3 text-slate-300 leading-relaxed text-sm md:text-base",children:r.content.map((l,u)=>o.jsx("p",{children:Wi(l)},u))})]},i))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-emerald-400",children:"🌍"}),"Current Status"]}),o.jsx("div",{className:"space-y-6 md:space-y-8",children:t.currentStatus.map((r,i)=>o.jsxs("div",{className:"bg-slate-900/70 rounded-xl border border-emerald-700/40 p-4 md:p-6",children:[o.jsxs("h3",{className:"text-lg md:text-xl font-bold text-emerald-300 mb-3 md:mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:"🏙️"}),r.title]}),o.jsx("div",{className:"space-y-3 text-slate-300 leading-relaxed text-sm md:text-base",children:r.content.map((l,u)=>o.jsx("p",{children:Wi(l)},u))})]},i))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-purple-400",children:"👥"}),"Active Factions"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:t.factions.map((r,i)=>o.jsxs("div",{className:"bg-slate-900/70 rounded-xl border border-purple-700/40 p-4 md:p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("span",{className:"text-2xl",children:r.icon}),o.jsx("h3",{className:"text-lg md:text-xl font-bold text-purple-300",children:Wi(r.faction)})]}),o.jsx("p",{className:"text-slate-300 text-sm md:text-base leading-relaxed",children:Wi(r.activity)})]},i))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-rose-400",children:"💎"}),"Significance"]}),o.jsx("div",{className:"space-y-3 md:space-y-4 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:t.significance.map((r,i)=>o.jsx("p",{children:Wi(r)},i))})]})]}),o.jsxs("div",{className:"space-y-6 md:space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-br from-slate-700/80 to-slate-900/80 rounded-2xl shadow-xl p-4 md:p-6 border border-slate-600/60",children:[o.jsx("h3",{className:"text-base md:text-lg font-bold text-blue-300 mb-3 md:mb-4 tracking-wide",children:"Location Profile"}),o.jsxs("div",{className:"space-y-3 md:space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Type"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:t.type})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Faction"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:Wi(t.faction)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Status"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:t.status})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Region"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:Wi(t.location)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Established"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:Wi(t.established)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Current Ruler"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:Wi(t.currentRuler)})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-slate-700/80 to-slate-900/80 rounded-2xl shadow-xl p-4 md:p-6 border border-slate-600/60",children:[o.jsx("h3",{className:"text-base md:text-lg font-bold text-emerald-300 mb-3 md:mb-4 tracking-wide",children:"Key Features"}),o.jsx("div",{className:"space-y-3 md:space-y-4",children:t.features.map((r,i)=>o.jsxs("div",{className:"bg-slate-800/50 rounded-lg border border-emerald-600/30 p-3 md:p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-lg",children:r.icon}),o.jsx("h4",{className:"text-sm md:text-base font-bold text-emerald-200",children:r.title})]}),o.jsx("p",{className:"text-slate-300 text-xs md:text-sm leading-relaxed",children:Wi(r.description)})]},i))})]})]})]})]})]}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>e(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-indigo-500 to-purple-600 mb-8 md:mb-10 tracking-wider text-center",children:n}),o.jsx("div",{className:"text-center text-slate-300 text-lg md:text-2xl",children:"Location not found."})]})})};function cd(n){const e=/\[([^\]]+)\]\(([^)]+)\)/g,t=[];let r=0,i,l=0;for(;(i=e.exec(n))!==null;)i.index>r&&t.push(n.slice(r,i.index)),t.push(o.jsx(un,{to:i[2],className:"text-amber-400 underline hover:text-amber-300",children:i[1]},l++)),r=e.lastIndex;return r<n.length&&t.push(n.slice(r)),o.jsx(o.Fragment,{children:t})}const yR=()=>{const{eventName:n}=Eu(),e=rs();if(!n)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsx("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:o.jsx("div",{className:"text-center text-slate-300 text-2xl",children:"No event specified."})})});const t=vx[n];return t?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>e(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[o.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-rose-400 via-pink-500 to-purple-600 mb-2 tracking-wider",children:["⚡ ",t.title," ⚡"]}),o.jsx("p",{className:"text-lg md:text-xl lg:text-2xl text-slate-300 italic mb-4 md:mb-6",children:t.subtitle}),o.jsx("div",{className:"w-24 md:w-32 h-1 bg-gradient-to-r from-rose-500 via-pink-500 to-purple-600 mx-auto rounded-full shadow-lg shadow-rose-500/50"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6 md:space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-rose-400",children:"📖"}),"Overview"]}),o.jsx("div",{className:"space-y-3 md:space-y-4 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:t.overview.map((r,i)=>o.jsx("p",{children:cd(r)},i))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-pink-400",children:"⏰"}),"Timeline"]}),o.jsx("div",{className:"space-y-6 md:space-y-8",children:t.timeline.map((r,i)=>o.jsxs("div",{className:"bg-slate-900/70 rounded-xl border border-pink-700/40 p-4 md:p-6 relative",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-500 to-purple-500 rounded-t-xl"}),o.jsxs("h3",{className:"text-lg md:text-xl font-bold text-pink-300 mb-3 md:mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:"⚡"}),r.phase]}),o.jsx("p",{className:"text-slate-300 leading-relaxed text-sm md:text-base",children:cd(r.description)})]},i))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-purple-400",children:"💥"}),"Impact"]}),o.jsx("div",{className:"space-y-6 md:space-y-8",children:t.impact.map((r,i)=>o.jsxs("div",{className:"bg-slate-900/70 rounded-xl border border-purple-700/40 p-4 md:p-6",children:[o.jsxs("h3",{className:"text-lg md:text-xl font-bold text-purple-300 mb-3 md:mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:"🌍"}),r.title]}),o.jsx("div",{className:"space-y-3 text-slate-300 leading-relaxed text-sm md:text-base",children:r.content.map((l,u)=>o.jsx("p",{children:cd(l)},u))})]},i))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-emerald-400",children:"🛡️"}),"Survivors"]}),o.jsx("div",{className:"space-y-6 md:space-y-8",children:t.survivors.map((r,i)=>o.jsxs("div",{className:"bg-slate-900/70 rounded-xl border border-emerald-700/40 p-4 md:p-6",children:[o.jsxs("h3",{className:"text-lg md:text-xl font-bold text-emerald-300 mb-3 md:mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:"👥"}),r.title]}),o.jsx("div",{className:"space-y-3 text-slate-300 leading-relaxed text-sm md:text-base",children:r.content.map((l,u)=>o.jsx("p",{children:cd(l)},u))})]},i))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-amber-400",children:"🏛️"}),"Current State"]}),o.jsx("div",{className:"space-y-6 md:space-y-8",children:t.currentState.map((r,i)=>o.jsxs("div",{className:"bg-slate-900/70 rounded-xl border border-amber-700/40 p-4 md:p-6",children:[o.jsxs("h3",{className:"text-lg md:text-xl font-bold text-amber-300 mb-3 md:mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:"⚙️"}),r.title]}),o.jsx("div",{className:"space-y-3 text-slate-300 leading-relaxed text-sm md:text-base",children:r.content.map((l,u)=>o.jsx("p",{children:cd(l)},u))})]},i))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-blue-400",children:"📜"}),"Legacy"]}),o.jsx("div",{className:"space-y-3 md:space-y-4 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:t.legacy.map((r,i)=>o.jsx("p",{children:cd(r)},i))})]})]}),o.jsxs("div",{className:"space-y-6 md:space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-br from-slate-700/80 to-slate-900/80 rounded-2xl shadow-xl p-4 md:p-6 border border-slate-600/60",children:[o.jsx("h3",{className:"text-base md:text-lg font-bold text-rose-300 mb-3 md:mb-4 tracking-wide",children:"Event Profile"}),o.jsxs("div",{className:"space-y-3 md:space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Type"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:t.type})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Date"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:t.date})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Duration"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:t.duration})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Location"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:t.location})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Casualties"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:t.casualties})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Significance"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:t.significance})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-slate-700/80 to-slate-900/80 rounded-2xl shadow-xl p-4 md:p-6 border border-slate-600/60",children:[o.jsx("h3",{className:"text-base md:text-lg font-bold text-purple-300 mb-3 md:mb-4 tracking-wide",children:"Key Figures"}),o.jsx("div",{className:"space-y-3 md:space-y-4",children:t.keyFigures.map((r,i)=>o.jsxs("div",{className:"bg-slate-800/50 rounded-lg border border-purple-600/30 p-3 md:p-4",children:[o.jsx("h4",{className:"text-sm md:text-base font-bold text-purple-200 mb-1",children:r.name}),o.jsxs("div",{className:"text-slate-300 text-xs md:text-sm",children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"text-slate-400",children:"Role: "}),r.role]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Status: "}),o.jsx("span",{className:`${r.status==="Active"?"text-emerald-400":"text-slate-400"}`,children:r.status})]})]})]},i))})]}),o.jsxs("div",{className:"bg-gradient-to-br from-slate-700/80 to-slate-900/80 rounded-2xl shadow-xl p-4 md:p-6 border border-slate-600/60",children:[o.jsx("h3",{className:"text-base md:text-lg font-bold text-pink-300 mb-3 md:mb-4 tracking-wide",children:"Related Events"}),o.jsx("div",{className:"space-y-3 md:space-y-4",children:t.relatedEvents.map((r,i)=>o.jsxs("div",{className:"bg-slate-800/50 rounded-lg border border-pink-600/30 p-3 md:p-4",children:[o.jsx(un,{to:r.link,className:"text-sm md:text-base font-bold text-pink-200 hover:text-pink-300 transition-colors block mb-1",children:r.name}),o.jsx("p",{className:"text-slate-300 text-xs md:text-sm leading-relaxed",children:r.description})]},i))})]})]})]})]})]}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>e(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-rose-400 via-pink-500 to-purple-600 mb-8 md:mb-10 tracking-wider text-center",children:n}),o.jsx("div",{className:"text-center text-slate-300 text-lg md:text-2xl",children:"Event not found."})]})})};function Dh(n){const e=/\[([^\]]+)\]\(([^)]+)\)/g,t=[];let r=0,i,l=0;for(;(i=e.exec(n))!==null;)i.index>r&&t.push(n.slice(r,i.index)),t.push(o.jsx(un,{to:i[2],className:"text-amber-400 underline hover:text-amber-300",children:i[1]},l++)),r=e.lastIndex;return r<n.length&&t.push(n.slice(r)),o.jsx(o.Fragment,{children:t})}const Ry=()=>{const{personName:n}=Eu(),e=rs();if(!n)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsx("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:o.jsx("div",{className:"text-center text-slate-300 text-2xl",children:"No person specified."})})});const t=bx[n];return t?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>e(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[o.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-teal-500 to-green-600 mb-2 tracking-wider",children:["👑 ",t.title," 👑"]}),o.jsx("p",{className:"text-lg md:text-xl lg:text-2xl text-slate-300 italic mb-4 md:mb-6",children:t.subtitle}),o.jsx("div",{className:"w-24 md:w-32 h-1 bg-gradient-to-r from-emerald-500 via-teal-500 to-green-600 mx-auto rounded-full shadow-lg shadow-emerald-500/50"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6 md:space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-emerald-400",children:"📖"}),"Description"]}),o.jsx("div",{className:"space-y-3 md:space-y-4 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:o.jsx("p",{children:Dh(t.description)})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-green-400",children:"🏆"}),"Achievements"]}),o.jsx("div",{className:"space-y-4 md:space-y-6",children:t.achievements.map((r,i)=>o.jsxs("div",{className:"bg-slate-900/70 rounded-xl border border-green-700/40 p-4 md:p-6 relative",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-t-xl"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xl text-green-300",children:"⭐"}),o.jsx("p",{className:"text-slate-300 leading-relaxed text-sm md:text-base",children:Dh(r)})]})]},i))})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-4 md:p-6 border border-slate-700/50 backdrop-blur-sm",children:[o.jsxs("h2",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-200 mb-4 md:mb-6 tracking-wide flex items-center gap-2",children:[o.jsx("span",{className:"text-purple-400",children:"💎"}),"Significance"]}),o.jsx("div",{className:"space-y-3 md:space-y-4 text-slate-300 leading-relaxed text-sm md:text-base lg:text-lg",children:o.jsx("p",{children:Dh(t.significance)})})]})]}),o.jsxs("div",{className:"space-y-6 md:space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-br from-slate-700/80 to-slate-900/80 rounded-2xl shadow-xl p-4 md:p-6 border border-slate-600/60",children:[o.jsx("h3",{className:"text-base md:text-lg font-bold text-emerald-300 mb-3 md:mb-4 tracking-wide",children:"Personal Profile"}),o.jsxs("div",{className:"space-y-3 md:space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Faction"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:Dh(t.faction)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Role"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:t.role})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Status"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:t.status})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Location"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:Dh(t.location)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-slate-400 font-semibold text-sm md:text-base",children:"Age"}),o.jsx("div",{className:"text-slate-200 text-sm md:text-base",children:t.age})]})]})]}),t.related&&t.related.length>0&&o.jsxs("div",{className:"bg-gradient-to-br from-slate-700/80 to-slate-900/80 rounded-2xl shadow-xl p-4 md:p-6 border border-slate-600/60",children:[o.jsx("h3",{className:"text-base md:text-lg font-bold text-emerald-300 mb-3 md:mb-4 tracking-wide",children:"Related"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.related.map((r,i)=>o.jsx("span",{className:"px-2 py-1 bg-emerald-900/30 text-emerald-200 text-xs rounded border border-emerald-700/40",children:r},i))})]})]})]})]})]}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 relative z-10",children:[o.jsx("button",{onClick:()=>e(-1),className:"mb-6 md:mb-8 px-3 md:px-4 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700 font-bold border border-slate-600 shadow text-sm md:text-base",children:"← Back"}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-teal-500 to-green-600 mb-8 md:mb-10 tracking-wider text-center",children:n}),o.jsx("div",{className:"text-center text-slate-300 text-lg md:text-2xl",children:"Person not found."})]})})},wR=[{key:"overview",label:"Overview",icon:"📋"},{key:"post-battle",label:"Post-Battle Sequence",icon:"⚔️"},{key:"injury-table",label:"Injury Table",icon:"🩸"},{key:"salvage-table",label:"Salvage Table",icon:"💎"},{key:"level-up-table",label:"Level-Up Table",icon:"⭐"}],NR=[{roll:"4–6",result:"Dead",effect:"The unit is permanently removed from the roster."},{roll:"7–10",result:"Crippled",effect:"The unit survives but suffers a permanent stat penalty (–1 to Move, Defense, or Vigor, your choice)."},{roll:"11–13",result:"Trauma",effect:"The unit survives but begins the next game with –1 Morale and –1 Wound."},{roll:"14–17",result:"Lingering Wound",effect:"Misses next battle. No permanent penalty."},{roll:"18–20",result:"Wounded",effect:"Begins next game with –1 Wound."},{roll:"21–22",result:"Shaken",effect:"No physical harm, but loses 1 XP."},{roll:"23–24",result:"Close Call",effect:"No effect."},{roll:"25+",result:"Steeled by Fire",effect:"Gains +1 XP and may reroll one stat advancement in future."}],_R=[{roll:"4–6",sp:3,result:"Mostly scrap and damaged gear."},{roll:"7–10",sp:4,result:"Minimal returns."},{roll:"11–13",sp:5,result:"Usable salvage."},{roll:"14–17",sp:6,result:"Functional tech fragments."},{roll:"18–20",sp:7,result:"Intact cores and frames."},{roll:"21–22",sp:8,result:"Rare salvage. Gain +1 XP on one unit of your choice."},{roll:"23–24",sp:10,result:"Exceptional find. Gain +1 XP and unlock a reroll during next postgame."},{roll:"25+",sp:12,result:"Major breakthrough. You may also choose 1 basic weapon upgrade for free."}],AR=[{roll:4,result:"Unexpected Instinct",effect:"+1 Move (max 8')"},{roll:5,result:"Veteran of Dust",effect:"+1 Morale (max 7)"},{roll:6,result:"Tireless Engine",effect:"+1 Vigour (max 6)"},{roll:7,result:"Sharpened Edge",effect:"+1 to Melee Attack Dice (once per activation)"},{roll:8,result:"Honed Reflexes",effect:"+1 Defense (max 5)"},{roll:9,result:"Tracker's Intuition",effect:"Gains Ignore Cover when Shooting"},{roll:10,result:"Hardened Resolve",effect:"+1 Resolve (max 4)"},{roll:11,result:"Quickdraw",effect:"May draw Line of Sight through 1 terrain piece per round"},{roll:12,result:"Deadeye",effect:"Ranged Critical hits deal +1 extra damage"},{roll:13,result:"Grizzled Veteran",effect:"Ignore the Wounds inflicted by first attack suffered each game"},{roll:14,result:"Adaptive Reflexes",effect:'Gains "Dodge" as a free action once per game'},{roll:15,result:"Heavy Step",effect:"Melee Attacks made after moving deal +1 damage"},{roll:16,result:"Iron Will",effect:"Gains reroll on failed Morale tests"},{roll:17,result:"Weapon Mastery",effect:"May equip one additional weapon (up to 3 max)"},{roll:18,result:"Battle Scars",effect:"Gains a permanent +1 Action on Round 1 only"},{roll:19,result:"Overcharger",effect:"If unit has Power stat > 0, gain +1 Power, else reroll"},{roll:20,result:"Resilient Core",effect:"The first time reduced to 0 Wounds, survive with 1 instead"},{roll:21,result:"Augmented Targeting",effect:"Ranged attacks ignore penalties from Obscured targets"},{roll:22,result:"Aggression Protocol",effect:"Gains +1 Attack die when charging"},{roll:23,result:"Staggering Impact",effect:"Melee Crits now inflict Stun"},{roll:24,result:"Legend in Ash",effect:"Gain a faction-specific Trait (or reroll if not yet implemented)"}];function SR(){const[n,e]=Ne.useState("overview");return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-6xl mx-auto p-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-violet-400 via-purple-400 to-indigo-400 mb-4 tracking-wider",children:"🏰 Campaign Rules"}),o.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-violet-400/20 via-purple-400/20 to-indigo-400/20 blur-xl rounded-full"})]}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-violet-500 via-purple-500 to-indigo-500 mx-auto rounded-full shadow-lg shadow-violet-500/50"})]}),o.jsx("div",{className:"flex justify-center mb-10",children:o.jsx("div",{className:"inline-flex rounded-2xl bg-slate-800/80 border border-slate-700/60 shadow-lg overflow-hidden",children:wR.map(t=>o.jsxs("button",{onClick:()=>e(t.key),className:`px-8 py-3 font-black text-lg tracking-wide flex items-center gap-2 transition-all duration-200 border-r border-slate-700/40 last:border-r-0
                  ${n===t.key?"bg-gradient-to-r from-violet-600 to-purple-700 text-white shadow-xl shadow-violet-900/30":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-violet-300"}
                `,children:[o.jsx("span",{children:t.icon}),t.label]},t.key))})}),o.jsxs("div",{children:[n==="overview"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-6 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-violet-400 mr-3",children:"📋"}),"Overview of Campaign Play"]}),o.jsxs("div",{className:"space-y-6 text-slate-300 leading-relaxed",children:[o.jsxs("p",{children:["This section describes how to link individual games of ",o.jsx("em",{children:"Ashes of Varnhal"})," into a persistent narrative campaign. Campaign play allows warbands to evolve over time—earning Salvage, gaining experience, suffering permanent injuries, and occasionally recruiting unique heroes."]}),o.jsx("p",{children:"Campaigns consist of multiple connected skirmishes, during which each player controls a persistent Warband that will change based on performance, attrition, and opportunity."}),o.jsxs("div",{className:"bg-gradient-to-r from-violet-900/50 to-purple-900/50 rounded-xl p-6 border-l-4 border-violet-500",children:[o.jsx("h3",{className:"text-2xl font-black text-violet-300 mb-4 tracking-wide",children:"Persistent Warbands"}),o.jsxs("p",{className:"mb-4",children:["Each Warband in a campaign begins with a fixed pool of Creation Points (CP), typically ",o.jsx("span",{className:"font-black text-violet-400",children:"500 CP"}),", with which they assemble their starting roster. This roster remains with the player across all campaign games unless modified through upgrades, injuries, deaths, or salvaging."]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-violet-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{children:"Units that are killed in a mission may suffer permanent injuries or be removed entirely (see Injury Table)."})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-violet-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{children:"Units may gain new Traits or abilities through XP progression (see Level-Up Table)."})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-violet-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{children:"Players may recruit new units by spending CP earned via Salvage Points (SP)."})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-blue-900/50 rounded-xl p-6 border-l-4 border-indigo-500",children:[o.jsx("h3",{className:"text-2xl font-black text-indigo-300 mb-4 tracking-wide",children:"Tracking Roster Changes"}),o.jsx("p",{className:"mb-4",children:"Between games, players update their warband sheets to reflect the aftermath of battle. This includes:"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-indigo-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{children:[o.jsx("span",{className:"font-black text-indigo-400",children:"Wound Recovery:"})," Units restore Wounds between games unless Injured."]})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-indigo-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{children:[o.jsx("span",{className:"font-black text-indigo-400",children:"Injury Resolution:"})," Use the Injury Table to resolve effects for downed units."]})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-indigo-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{children:[o.jsx("span",{className:"font-black text-indigo-400",children:"Salvage Points (SP):"})," Each player rolls 4d6 on the Salvage Table post-battle. SPs can be used to:"]})]}),o.jsxs("ul",{className:"list-disc list-inside ml-6 space-y-1",children:[o.jsx("li",{children:"Recruit new units or restore lost ones."}),o.jsx("li",{children:"Purchase upgrades (if enabled)."}),o.jsx("li",{children:"Unlock Hero slots, if available."})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-indigo-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{children:[o.jsx("span",{className:"font-black text-indigo-400",children:"XP Progression:"})," Units may gain XP and unlock new abilities through the Level-Up Table."]})]})]}),o.jsx("div",{className:"mt-4 p-4 bg-slate-800/60 rounded-lg border border-slate-600",children:o.jsxs("p",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-indigo-400",children:"Note:"})," 1 Salvage Point (SP) equals ",o.jsx("span",{className:"font-black text-indigo-400",children:"10 Creation Points (CP)"})," when used for recruitment or resource management."]})})]}),o.jsx("div",{className:"bg-gradient-to-r from-slate-700/50 to-gray-700/50 rounded-xl p-6 border-l-4 border-slate-500",children:o.jsx("p",{className:"text-slate-300 italic text-lg",children:"The campaign system is designed to encourage narrative progression and player investment, while keeping bookkeeping minimal and streamlined between sessions."})})]})]}),n==="post-battle"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-violet-400 mr-3",children:"⚔️"}),"Post-Battle Sequence"]}),o.jsxs("div",{className:"space-y-8",children:[o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"After each game, both players follow the post-battle sequence in the listed order. This sequence governs casualties, rewards, progression, and potential reinforcements for each Warband."}),o.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-pink-900/50 rounded-xl p-6 border-l-4 border-red-500",children:[o.jsx("h3",{className:"text-2xl font-black text-red-300 mb-4 tracking-wide",children:"1. Injury Roll"}),o.jsxs("p",{className:"text-slate-300 mb-4",children:["For each unit that was reduced to 0 Wounds during the battle, roll ",o.jsx("span",{className:"font-black text-red-400",children:"4d6"})," on the Injury Table. Results range from minor flesh wounds to permanent maiming or death."]}),o.jsx("p",{className:"text-slate-300 mb-6",children:"Units that suffer minor injuries may recover fully before the next game. Others may begin the next mission with fewer Wounds, reduced stats, or even be removed from the roster permanently."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl p-6 border-l-4 border-amber-500",children:[o.jsx("h3",{className:"text-2xl font-black text-amber-300 mb-4 tracking-wide",children:"2. Salvage Roll"}),o.jsxs("p",{className:"text-slate-300 mb-4",children:["Each player rolls ",o.jsx("span",{className:"font-black text-amber-400",children:"4d6"})," on the Salvage Table to determine how many Salvage Points (SP) they earn from the battlefield."]}),o.jsx("p",{className:"text-slate-300 mb-6",children:"Salvage Points represent rare materials, valuable scrap, and useful parts that can be converted into Creation Points for warband expansion."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-violet-900/50 to-purple-900/50 rounded-xl p-6 border-l-4 border-violet-500",children:[o.jsx("h3",{className:"text-2xl font-black text-violet-300 mb-4 tracking-wide",children:"3. Experience Points"}),o.jsx("p",{className:"text-slate-300 mb-4",children:"Units that participated in the battle gain Experience Points (XP) based on their performance and survival."}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-violet-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{children:[o.jsx("span",{className:"font-black text-violet-400",children:"Surviving Units:"})," Gain 1 XP for participating in the battle."]})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-violet-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{children:[o.jsx("span",{className:"font-black text-violet-400",children:"Combat Performance:"})," Units that inflicted wounds gain +1 XP per wound caused."]})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-violet-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{children:[o.jsx("span",{className:"font-black text-violet-400",children:"Level Up:"})," When a unit reaches certain XP thresholds, they can roll on the Level-Up Table for new abilities."]})]})]})]})]})]}),n==="injury-table"&&o.jsxs("section",{className:"bg-gradient-to-r from-red-900/50 to-pink-900/50 rounded-2xl shadow-2xl p-8 border border-red-500/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-red-400 mr-3",children:"🩸"}),"Injury Table (4d6 Roll)"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{className:"bg-gradient-to-r from-slate-700 to-slate-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-white font-black text-lg tracking-wide",children:"ROLL (4D6)"}),o.jsx("th",{className:"px-6 py-4 text-white font-black text-lg tracking-wide",children:"RESULT"}),o.jsx("th",{className:"px-6 py-4 text-white font-black text-lg tracking-wide",children:"EFFECT"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-600",children:NR.map((t,r)=>o.jsxs("tr",{className:"hover:bg-slate-700/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-16 h-8 bg-gradient-to-r from-red-500 to-pink-600 text-white font-black text-sm rounded-full shadow-lg shadow-red-500/25",children:t.roll})}),o.jsx("td",{className:"px-6 py-4 font-black text-red-300",children:t.result}),o.jsx("td",{className:"px-6 py-4 text-slate-300 leading-relaxed",children:t.effect})]},r))})]})})]}),n==="salvage-table"&&o.jsxs("section",{className:"bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-2xl shadow-2xl p-8 border border-amber-500/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-amber-400 mr-3",children:"💎"}),"Salvage Table (4d6 Roll)"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{className:"bg-gradient-to-r from-slate-700 to-slate-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-white font-black text-lg tracking-wide",children:"ROLL (4D6)"}),o.jsx("th",{className:"px-6 py-4 text-white font-black text-lg tracking-wide",children:"SALVAGE POINTS"}),o.jsx("th",{className:"px-6 py-4 text-white font-black text-lg tracking-wide",children:"RESULT"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-600",children:_R.map((t,r)=>o.jsxs("tr",{className:"hover:bg-slate-700/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-16 h-8 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-black text-sm rounded-full shadow-lg shadow-amber-500/25",children:t.roll})}),o.jsx("td",{className:"px-6 py-4 font-black text-amber-300",children:t.sp}),o.jsx("td",{className:"px-6 py-4 text-slate-300 leading-relaxed",children:t.result})]},r))})]})})]}),n==="level-up-table"&&o.jsxs("section",{className:"bg-gradient-to-r from-violet-900/50 to-purple-900/50 rounded-2xl shadow-2xl p-8 border border-violet-500/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-violet-400 mr-3",children:"⭐"}),"Level-Up Table (4d6 Roll)"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{className:"bg-gradient-to-r from-slate-700 to-slate-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-white font-black text-lg tracking-wide",children:"ROLL"}),o.jsx("th",{className:"px-6 py-4 text-white font-black text-lg tracking-wide",children:"ABILITY"}),o.jsx("th",{className:"px-6 py-4 text-white font-black text-lg tracking-wide",children:"EFFECT"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-600",children:AR.map((t,r)=>o.jsxs("tr",{className:"hover:bg-slate-700/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsx("span",{className:"inline-flex items-center justify-center w-12 h-12 bg-gradient-to-r from-violet-500 to-purple-600 text-white font-black text-lg rounded-full shadow-lg shadow-violet-500/25",children:t.roll})}),o.jsx("td",{className:"px-6 py-4 font-black text-violet-300",children:t.result}),o.jsx("td",{className:"px-6 py-4 text-slate-300 leading-relaxed",children:t.effect})]},r))})]})})]})]})]})]})}const ER=[{key:"overview",label:"Overview",icon:"📋"},{key:"rounds",label:"Game Rounds",icon:"🔄"},{key:"activations",label:"Unit Activations",icon:"⚡"},{key:"actions",label:"Actions & Types",icon:"🎯"},{key:"defensive",label:"Defensive Stances",icon:"🛡️"},{key:"movement",label:"Movement Rules",icon:"🏃"},{key:"combat",label:"Combat Resolution",icon:"⚔️"},{key:"powers",label:"Using Powers",icon:"✨"},{key:"damage",label:"Damage Resolution",icon:"💀"}];function TR(){const[n,e]=Ne.useState("overview");return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zm0 0c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"max-w-6xl mx-auto p-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-blue-400 to-cyan-400 mb-4 tracking-wider",children:"🔄 Turn & Actions"}),o.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-indigo-400/20 via-blue-400/20 to-cyan-400/20 blur-xl rounded-full"})]}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-indigo-500 via-blue-500 to-cyan-500 mx-auto rounded-full shadow-lg shadow-indigo-500/50"})]}),o.jsx("div",{className:"flex justify-center mb-10",children:o.jsx("div",{className:"inline-flex rounded-2xl bg-slate-800/80 border border-slate-700/60 shadow-lg overflow-hidden",children:ER.map(t=>o.jsxs("button",{onClick:()=>e(t.key),className:`px-8 py-3 font-black text-lg tracking-wide flex items-center gap-2 transition-all duration-200 border-r border-slate-700/40 last:border-r-0
                  ${n===t.key?"bg-gradient-to-r from-indigo-600 to-blue-700 text-white shadow-xl shadow-indigo-900/30":"bg-slate-800/60 text-slate-300 hover:bg-slate-700/80 hover:text-indigo-300"}
                `,children:[o.jsx("span",{children:t.icon}),t.label]},t.key))})}),o.jsxs("div",{children:[n==="overview"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-indigo-400 mr-3",children:"📋"}),"Turn Structure Overview"]}),o.jsxs("div",{className:"space-y-6 text-slate-300 leading-relaxed",children:[o.jsxs("p",{className:"text-lg",children:["Ashes of Varnhal uses an ",o.jsx("span",{className:"font-black text-indigo-400",children:"alternating activation"})," system that creates dynamic, tactical gameplay. Instead of one player activating their entire warband, players take turns activating one unit at a time, creating constant counterplay opportunities."]}),o.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-blue-900/50 rounded-xl p-6 border-l-4 border-indigo-500",children:[o.jsx("h3",{className:"text-2xl font-black text-indigo-300 mb-4 tracking-wide",children:"Key Concepts"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-indigo-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-indigo-400",children:"Alternating Activations:"})," Players activate units one at a time, not entire warbands"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-indigo-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-indigo-400",children:"Action Points:"})," Units spend AP to perform actions during their activation"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-indigo-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-indigo-400",children:"Round Structure:"})," Complete rounds with cleanup phases between"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-indigo-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-indigo-400",children:"Defensive Stances:"})," Overwatch and Dodge provide tactical defensive options"]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl p-6 border-l-4 border-amber-500",children:[o.jsx("h3",{className:"text-2xl font-black text-amber-300 mb-4 tracking-wide",children:"Tactical Importance"}),o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"The alternating activation system creates constant counterplay. Timing and sequencing are critical—consider your opponent's next move before choosing your own. This system rewards tactical thinking and punishes poor positioning."})]})]})]}),n==="rounds"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-indigo-400 mr-3",children:"🔄"}),"Game Rounds and Phases"]}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-indigo-900/50 rounded-xl p-6 border-l-4 border-blue-500",children:[o.jsx("h3",{className:"text-2xl font-black text-blue-300 mb-4 tracking-wide",children:"Alternating Activations"}),o.jsxs("p",{className:"text-slate-300 mb-4 leading-relaxed",children:["Ashes of Varnhal uses an ",o.jsx("span",{className:"font-black text-blue-400",children:"alternating activation"})," system. Instead of one player activating their entire warband, players take turns activating one unit at a time."]}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"At the start of each round, the player who has initiative chooses who activates a unit first."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Players then alternate activating a single unit from their warband until all units have been activated once."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"A unit may only be activated once per round."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"If one player has more units remaining than the other, they may take multiple activations at the end of the round after their opponent has no eligible units left."})]})]}),o.jsx("div",{className:"mt-6 p-4 bg-slate-800/60 rounded-lg border border-slate-600",children:o.jsxs("p",{className:"text-slate-300 italic",children:[o.jsx("span",{className:"font-black text-blue-400",children:"Example:"})," Player A activates a ranged unit and shoots a nearby enemy. Player B may then respond by activating a melee unit to charge in retaliation before the next ranged attack occurs."]})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 rounded-xl p-6 border-l-4 border-purple-500",children:[o.jsx("h3",{className:"text-2xl font-black text-purple-300 mb-4 tracking-wide",children:"End of Round Cleanup"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"At the end of each round, follow these steps to prepare for the next:"}),o.jsxs("ol",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"1."}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Remove Temporary Effects:"}),' Clear all effects that last "until the end of the round" (e.g., buffs, debuffs, or power effects that expire).']})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"2."}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Resolve Ongoing Effects:"})," Apply lingering damage (e.g., Bleed or Burning), Vigor tests, or other persistent conditions."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"3."}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Check for Morale Triggers:"})," If any warband has taken significant losses, assess whether Morale Tests are needed (see Morale rules)."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"4."}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Reset Activated Status:"})," Mark all units as unactivated for the next round."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"5."}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Refresh Initiative:"})," Roll again if the scenario allows or if it's a new round."]})]})]})]})]})]}),n==="activations"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-indigo-400 mr-3",children:"⚡"}),"Activating Units"]}),o.jsx("div",{className:"space-y-8",children:o.jsxs("div",{className:"bg-gradient-to-r from-emerald-900/50 to-teal-900/50 rounded-xl p-6 border-l-4 border-emerald-500",children:[o.jsx("h3",{className:"text-2xl font-black text-emerald-300 mb-4 tracking-wide",children:"Declaration and Action Spending"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"When a unit is activated, it may perform actions by spending its available Action Points (AP). Most units begin with 2 AP unless modified by effects or traits."}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"The controlling player must declare all actions for the unit before resolving them."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Actions can be performed in any order, but no action may be taken more than once unless a special rule states otherwise."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Units cannot save or transfer unused Action Points. Unspent AP is lost at the end of the unit's activation."})]})]}),o.jsx("div",{className:"mt-6 p-4 bg-slate-800/60 rounded-lg border border-slate-600",children:o.jsxs("p",{className:"text-slate-300 italic",children:[o.jsx("span",{className:"font-black text-emerald-400",children:"Example:"})," A unit with 2 AP may move and shoot, or move twice, or use a special ability and then move, depending on available options."]})}),o.jsx("div",{className:"mt-4 p-4 bg-amber-900/30 rounded-lg border border-amber-500/30",children:o.jsxs("p",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-amber-400",children:"Note:"})," Some actions (such as Overwatch) explicitly end a unit's activation and prevent further actions."]})})]})})]}),n==="actions"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-indigo-400 mr-3",children:"🎯"}),"Types of Actions"]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-slate-300 leading-relaxed text-lg",children:"Units may spend Action Points on the following standard actions unless otherwise restricted:"}),o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-indigo-900/50 rounded-xl p-6 border-l-4 border-blue-500",children:[o.jsx("h3",{className:"text-xl font-black text-blue-300 mb-2 tracking-wide",children:"Move"}),o.jsx("p",{className:"text-slate-300",children:"Move up to the unit's full Movement value in inches."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-pink-900/50 rounded-xl p-6 border-l-4 border-red-500",children:[o.jsx("h3",{className:"text-xl font-black text-red-300 mb-2 tracking-wide",children:"Charge"}),o.jsx("p",{className:"text-slate-300",children:"Move up to the unit's full Movement value in inches and end in base contact with enemy unit. Gain +1 Dice to Attack Rolls made with melee weapons in this turn."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-orange-900/50 to-amber-900/50 rounded-xl p-6 border-l-4 border-orange-500",children:[o.jsx("h3",{className:"text-xl font-black text-orange-300 mb-2 tracking-wide",children:"Attack"}),o.jsx("p",{className:"text-slate-300",children:"Make one attack with an equipped weapon. A unit may only attack once per activation unless a rule states otherwise."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 rounded-xl p-6 border-l-4 border-purple-500",children:[o.jsx("h3",{className:"text-xl font-black text-purple-300 mb-2 tracking-wide",children:"Use Power"}),o.jsx("p",{className:"text-slate-300",children:"Spend 1 Action to use an available ability (casters only)."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-emerald-900/50 rounded-xl p-6 border-l-4 border-green-500",children:[o.jsx("h3",{className:"text-xl font-black text-green-300 mb-2 tracking-wide",children:"Dodge"}),o.jsx("p",{className:"text-slate-300",children:"Adopt a defensive stance until the start of your next activation. You may make a Dodge Test (target 4+) the next time you are attacked this round."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/50 to-blue-900/50 rounded-xl p-6 border-l-4 border-cyan-500",children:[o.jsx("h3",{className:"text-xl font-black text-cyan-300 mb-2 tracking-wide",children:"Overwatch"}),o.jsx("p",{className:"text-slate-300",children:"End your activation and enter Overwatch stance (see Defensive Stances)."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-orange-900/50 rounded-xl p-6 border-l-4 border-yellow-500",children:[o.jsx("h3",{className:"text-xl font-black text-yellow-300 mb-2 tracking-wide",children:"Interact"}),o.jsx("p",{className:"text-slate-300",children:"Perform a mission-specific or terrain interaction (e.g., opening a gate, seizing a relic)."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-teal-900/50 to-cyan-900/50 rounded-xl p-6 border-l-4 border-teal-500",children:[o.jsx("h3",{className:"text-xl font-black text-teal-300 mb-2 tracking-wide",children:"Recover"}),o.jsx("p",{className:"text-slate-300",children:"Remove one negative condition from the unit (e.g., Burning, Pinned, Suppressed). Cannot be used while engaged unless stated otherwise."})]})]}),o.jsx("div",{className:"bg-gradient-to-r from-slate-700/50 to-gray-700/50 rounded-xl p-6 border-l-4 border-slate-500",children:o.jsxs("p",{className:"text-slate-300 leading-relaxed",children:[o.jsx("span",{className:"font-black text-slate-400",children:"Note:"})," Some actions may be replaced or extended by powers, traits, or equipment effects. Special actions are defined per scenario or unit."]})})]})]}),n==="defensive"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-indigo-400 mr-3",children:"🛡️"}),"Overwatch and Dodge Stance"]}),o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"bg-gradient-to-r from-slate-700/50 to-gray-700/50 rounded-xl p-6 border-l-4 border-slate-500",children:o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"There are no Reactions in Ashes of Varnhal. However, specific defensive stances can be taken as actions during a unit's activation:"})}),o.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/50 to-blue-900/50 rounded-xl p-6 border-l-4 border-cyan-500",children:[o.jsx("h3",{className:"text-2xl font-black text-cyan-300 mb-4 tracking-wide",children:"Overwatch (1 Action, Ends Activation)"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-cyan-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"The unit enters an alert state, scanning the battlefield."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-cyan-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"If any enemy ends a Movement action within Line of Sight and within range of a weapon held by the overwatching unit, it may immediately make one ranged attack."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-cyan-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"After firing, the unit leaves Overwatch and does not react again this round."})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-emerald-900/50 rounded-xl p-6 border-l-4 border-green-500",children:[o.jsx("h3",{className:"text-2xl font-black text-green-300 mb-4 tracking-wide",children:"Dodge (1 Action)"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-green-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Until the start of its next activation, the unit may attempt a Dodge Test the next time it is attacked."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-green-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Roll dice equal to your Defense. On a successful test (4+ total), ignore the result of enemy attack."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-green-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Dodge stance ends and Dodge cannot be used again this turn."})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl p-6 border-l-4 border-amber-500",children:[o.jsx("h3",{className:"text-2xl font-black text-amber-300 mb-4 tracking-wide",children:"Tactical Considerations"}),o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"These defensive options offer limited but tactical choices for battlefield control. Units may not use both Dodge and Overwatch in the same activation. Choose wisely based on your tactical situation and opponent's likely actions."})]})]})]}),n==="movement"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-red-400 mr-3",children:"🏃"}),"Movement Rules"]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-indigo-900/50 rounded-xl p-6 border-l-4 border-blue-500 mb-8",children:[o.jsx("h3",{className:"text-2xl font-black text-blue-300 mb-4 tracking-wide",children:"Terrain and Line of Sight"}),o.jsxs("p",{className:"text-slate-300 mb-4 leading-relaxed",children:[o.jsx("span",{className:"font-black text-blue-400",children:"Terrain"})," affects movement, cover, and line of sight during gameplay. Different types of terrain influence how units can move and defend."]}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"For exact rules regarding different types of terrain, see section 3.1 - Terrain types"}),o.jsxs("p",{className:"text-slate-300 mb-4 leading-relaxed",children:[o.jsx("span",{className:"font-black text-blue-400",children:"Line of Sight (LoS)"})," is required for ranged attacks and many abilities."]}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"LoS is determined by an unobstructed straight line from any part of the attacking model's base to any part of the target model's base."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Blocking terrain or other units block LoS."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-blue-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Elevation differences must be considered; units on higher terrain may see over some obstacles."})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl p-6 border-l-4 border-amber-500",children:[o.jsx("h3",{className:"text-2xl font-black text-amber-300 mb-4 tracking-wide",children:"Climbing, Jumping, Falling"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"Some terrain features require units to climb or jump to traverse."}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-amber-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-amber-400",children:"Climbing:"})," Units must spend 2 Actions to climb vertical surfaces or obstacles. Movement during climbing is halved."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-amber-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-amber-400",children:"Jumping:"})," Units may spend 1 Action to jump over gaps or low obstacles up to 3'' wide."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-amber-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-amber-400",children:"Falling:"})," If a unit falls from a height of 3'' or more, it suffers 1 Wound and must pass a Vigor Test (target 4+) to avoid being Staggered."]})]})]}),o.jsx("p",{className:"text-slate-300 mt-4 leading-relaxed",children:"Units cannot move normally while climbing or jumping, and these actions consume available Actions. Special abilities or equipment may modify these rules."})]})]}),n==="combat"&&o.jsxs("section",{className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 rounded-2xl shadow-2xl p-8 border border-slate-700/50 backdrop-blur-sm mb-10",children:[o.jsxs("h2",{className:"text-3xl font-black text-slate-200 mb-8 flex items-center tracking-wide",children:[o.jsx("span",{className:"text-red-400 mr-3",children:"⚔️"}),"Combat Resolution"]}),o.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-pink-900/50 rounded-xl p-6 border-l-4 border-red-500 mb-8",children:[o.jsx("h3",{className:"text-2xl font-black text-red-300 mb-4 tracking-wide",children:"Ranged vs. Melee"}),o.jsxs("p",{className:"text-slate-300 mb-4 leading-relaxed",children:["Combat in ",o.jsx("span",{className:"font-black text-red-400",children:"Ashes of Varnhal"})," is resolved through ranged and melee attacks. Both follow similar core mechanics but differ in range and conditions:"]}),o.jsxs("ul",{className:"space-y-2 mb-4",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-red-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-red-400",children:"Ranged Combat:"})," Attacks made using ranged weapons from a distance. Requires line of sight and within weapon range."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-red-400 font-black mr-3 mt-1",children:"•"}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-red-400",children:"Melee Combat:"})," Close-quarters combat performed when a model is adjacent (0'' range) to an enemy unit."]})]})]}),o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"Ranged attacks can be made during a unit's activation if the target is within the weapon's range and line of sight. Melee attacks require the attacker to be in base contact with the target."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-xl p-6 border-l-4 border-purple-500 mb-8",children:[o.jsx("h3",{className:"text-2xl font-black text-purple-300 mb-4 tracking-wide",children:"Attack Rolls and Defense"}),o.jsx("p",{className:"text-slate-300 mb-4 leading-relaxed",children:"When making an attack, follow these steps:"}),o.jsxs("ol",{className:"space-y-3 mb-4",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"1."}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Roll Attack Dice:"})," Roll a number of dice equal to the attacking weapon's dice pool."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"2."}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Calculate Successes:"})," Each die result of 4 or higher counts as a success, 6 counts as a Critical success and triggers weapon special rules."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"3."}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Compare to Defense:"})," The target's Defense stat reduces the number of successes from the attack."]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-purple-400 font-black mr-3 mt-1",children:"4."}),o.jsxs("span",{className:"text-slate-300",children:[o.jsx("span",{className:"font-black text-purple-400",children:"Apply Damage:"})," Each remaining success inflicts 1 damage, critical success 1 damage + damage according to the weapon's Crit Damage value."]})]})]}),o.jsx("p",{className:"text-slate-300 leading-relaxed",children:"If the attack inflicts Wounds equal to or greater than the target's current Wounds, the target is removed from play."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-emerald-900/50 to-teal-900/50 rounded-xl p-6 border-l-4 border-emerald-500",children:[o.jsx("h3",{className:"text-2xl font-black text-emerald-300 mb-4 tracking-wide",children:"Cover and Line of Sight"}),o.jsxs("p",{className:"text-slate-300 mb-4 leading-relaxed",children:[o.jsx("span",{className:"font-black text-emerald-400",children:"Cover"})," provides defensive bonuses and affects combat outcomes:"]}),o.jsxs("ul",{className:"space-y-2 mb-6",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Units fully or partially behind cover gain +1 to their Defense stat."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Some cover may completely block line of sight and cannot be targeted unless the attacker moves around it."})]})]}),o.jsxs("p",{className:"text-slate-300 mb-4 leading-relaxed",children:[o.jsx("span",{className:"font-black text-emerald-400",children:"Line of Sight (LoS)"})," determines whether an attacker can target an enemy:"]}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"An unobstructed straight line from any part of the attacker's base to any part of the target's base is required."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"Terrain, other units, and elevation changes can block or grant LoS."})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-emerald-400 font-black mr-3 mt-1",children:"•"}),o.jsx("span",{className:"text-slate-300",children:"If LoS is blocked, the attack cannot be made."})]})]})]})]}),n==="powers"&&o.jsx(o.Fragment,{}),n==="damage"&&o.jsx(o.Fragment,{})]})]})]})}function jR(){var t,r,i;const{factionName:n}=Eu(),e=b0[n];return e?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-black p-2 sm:p-4 md:p-8",children:o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsx("div",{className:"mb-8 text-center",children:o.jsxs("h1",{className:"text-4xl sm:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-rose-400 via-pink-400 to-amber-400 mb-2 tracking-wider",children:["🏰 ",n]})}),o.jsxs("div",{className:"hidden md:grid grid-cols-3 gap-8 mb-2 px-2",children:[o.jsx("div",{className:"text-center text-lg font-black text-amber-300 tracking-wide",children:"Passive Trait"}),o.jsx("div",{className:"text-center text-lg font-black text-indigo-300 tracking-wide",children:"Leader Trait"}),o.jsx("div",{className:"text-center text-lg font-black text-violet-300 tracking-wide",children:"Tactical Directives"})]}),o.jsxs("div",{className:"relative mb-12",children:[o.jsx("div",{className:"absolute inset-0 hidden md:block bg-gradient-to-r from-slate-800/60 via-slate-900/60 to-slate-800/60 rounded-2xl pointer-events-none",style:{zIndex:0}}),o.jsxs("div",{className:"relative flex flex-col gap-6 z-10 md:grid md:grid-cols-3 md:gap-8 md:items-stretch",children:[((t=e.themesAndPlaystyle)==null?void 0:t.passiveTrait)&&o.jsxs("section",{className:"flex-1 bg-gradient-to-r from-amber-900/50 to-yellow-900/50 rounded-2xl shadow-xl p-4 sm:p-6 border border-amber-700/50 min-w-0 transition-transform hover:scale-[1.025] hover:shadow-2xl duration-200 flex flex-col",children:[o.jsxs("h2",{className:"md:hidden text-xl font-black text-amber-300 mb-2 flex items-center gap-2",children:[o.jsx("span",{children:"🛡️"}),"Passive Trait"]}),o.jsx("h3",{className:"text-base font-bold text-amber-200 mb-2",children:e.themesAndPlaystyle.passiveTrait.title}),o.jsx("ul",{className:"list-disc pl-5 space-y-1 text-slate-200 text-sm sm:text-base flex-1 flex flex-col",children:e.themesAndPlaystyle.passiveTrait.description.map((l,u)=>o.jsx("li",{children:l},u))})]}),((r=e.themesAndPlaystyle)==null?void 0:r.leaderTrait)&&o.jsxs("section",{className:"flex-1 bg-gradient-to-r from-indigo-900/50 to-blue-900/50 rounded-2xl shadow-xl p-4 sm:p-6 border border-indigo-700/50 min-w-0 transition-transform hover:scale-[1.025] hover:shadow-2xl duration-200 flex flex-col",children:[o.jsxs("h2",{className:"md:hidden text-xl font-black text-indigo-300 mb-2 flex items-center gap-2",children:[o.jsx("span",{children:"👑"}),"Leader Trait"]}),o.jsx("div",{className:"text-slate-200 text-base font-semibold mb-1",children:e.themesAndPlaystyle.leaderTrait.title}),o.jsx("div",{className:"text-slate-300 text-sm sm:text-base flex-1 flex flex-col",children:e.themesAndPlaystyle.leaderTrait.description})]}),((i=e.themesAndPlaystyle)==null?void 0:i.tacticalDirectives)&&o.jsxs("section",{className:"flex-1 bg-gradient-to-r from-violet-900/50 to-purple-900/50 rounded-2xl shadow-xl p-4 sm:p-6 border border-violet-700/50 min-w-0 transition-transform hover:scale-[1.025] hover:shadow-2xl duration-200 flex flex-col",children:[o.jsxs("h2",{className:"md:hidden text-xl font-black text-violet-300 mb-2 flex items-center gap-2",children:[o.jsx("span",{children:"⚔️"}),"Tactical Directives"]}),o.jsx("ul",{className:"list-disc pl-5 space-y-1 text-slate-200 text-sm sm:text-base flex-1 flex flex-col",children:e.themesAndPlaystyle.tacticalDirectives.map((l,u)=>o.jsx("li",{children:l},u))})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-green-700/60 to-transparent"}),o.jsxs("h2",{className:"text-2xl font-black text-green-300 flex items-center gap-2",children:[o.jsx("span",{children:"📜"}),"Trait Table"]}),o.jsx("div",{className:"flex-1 h-px bg-gradient-to-l from-transparent via-green-700/60 to-transparent"})]}),e.traitTable&&o.jsx("section",{className:"mb-8 bg-gradient-to-r from-green-900/50 to-emerald-900/50 rounded-2xl shadow-xl p-4 sm:p-6 border border-green-700/50",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border-separate border-spacing-y-2",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left text-green-200 font-bold px-2 py-1",children:"Roll"}),o.jsx("th",{className:"text-left text-green-200 font-bold px-2 py-1",children:"Name"}),o.jsx("th",{className:"text-left text-green-200 font-bold px-2 py-1",children:"Description"})]})}),o.jsx("tbody",{children:e.traitTable.map((l,u)=>o.jsxs("tr",{className:"bg-slate-800/60 rounded-lg",children:[o.jsx("td",{className:"px-2 py-1 text-green-100 font-mono",children:l.roll}),o.jsx("td",{className:"px-2 py-1 text-green-200 font-bold",children:l.name}),o.jsx("td",{className:"px-2 py-1 text-green-100",children:l.description})]},u))})]})})})]})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-gray-900 to-black",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-3xl font-black text-rose-400 mb-4",children:"Faction Not Found"}),o.jsx("p",{className:"text-slate-400",children:"No rules data for this faction."})]})})}function kR(){return o.jsx(Zk,{children:o.jsxs(g_,{basename:"/ashes-of-varnhal-builder",children:[o.jsx(aC,{}),o.jsx(rC,{children:o.jsxs(GN,{children:[o.jsx(Yn,{path:"/",element:o.jsx(ky,{})}),o.jsx(Yn,{path:"/lore",element:o.jsx(bR,{})}),o.jsx(Yn,{path:"/lore/factions",element:o.jsx(xR,{})}),o.jsx(Yn,{path:"/lore/factions/:factionName",element:o.jsx(sC,{})}),o.jsx(Yn,{path:"/lore/locations",element:o.jsx(fR,{})}),o.jsx(Yn,{path:"/lore/locations/:locationName",element:o.jsx(vR,{})}),o.jsx(Yn,{path:"/lore/events",element:o.jsx(hR,{})}),o.jsx(Yn,{path:"/lore/events/:eventName",element:o.jsx(yR,{})}),o.jsx(Yn,{path:"/lore/artifacts",element:o.jsx(mR,{})}),o.jsx(Yn,{path:"/lore/artifacts/:artifactName",element:o.jsx(uR,{})}),o.jsx(Yn,{path:"/lore/terms",element:o.jsx(pR,{})}),o.jsx(Yn,{path:"/lore/terms/:termName",element:o.jsx(cR,{})}),o.jsx(Yn,{path:"/lore/people",element:o.jsx(gR,{})}),o.jsx(Yn,{path:"/lore/people/:personName",element:o.jsx(Ry,{})}),o.jsx(Yn,{path:"/lore/characters/:personName",element:o.jsx(Ry,{})}),o.jsx(Yn,{path:"/lore/timeline",element:o.jsx(dR,{})}),o.jsx(Yn,{path:"/scenarios",element:o.jsx(uC,{})}),o.jsx(Yn,{path:"/campaigns",element:o.jsx(ky,{})}),o.jsx(Yn,{path:"/campaign-rules",element:o.jsx(SR,{})}),o.jsx(Yn,{path:"/special-rules",element:o.jsx(nR,{})}),o.jsx(Yn,{path:"/fate-cards",element:o.jsx(aR,{})}),o.jsx(Yn,{path:"/game-setup",element:o.jsx(iR,{})}),o.jsx(Yn,{path:"/keywords",element:o.jsx(oR,{})}),o.jsx(Yn,{path:"/fate-cards-list",element:o.jsx(lR,{})}),o.jsx(Yn,{path:"/turn-actions",element:o.jsx(TR,{})}),o.jsx(Yn,{path:"/factions/:factionName",element:o.jsx(jR,{})})]})})]})})}tN.createRoot(document.getElementById("root")).render(o.jsx(Ne.StrictMode,{children:o.jsx(kR,{})}));export{Vn as _};
